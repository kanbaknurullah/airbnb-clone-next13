!function(a,b){b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l="1.11.1",m=function(a,b){return new m.fn.init(a,b)},n=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,o=/^-ms-/,p=/-([\da-z])/gi,q=function(a,b){return b.toUpperCase()};m.fn=m.prototype={jquery:l,constructor:m,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=m.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return m.each(this,a,b)},map:function(a){return this.pushStack(m.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},m.extend=m.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||m.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(e=arguments[h]))for(d in e)a=g[d],c=e[d],g!==c&&(j&&c&&(m.isPlainObject(c)||(b=m.isArray(c)))?(b?(b=!1,f=a&&m.isArray(a)?a:[]):f=a&&m.isPlainObject(a)?a:{},g[d]=m.extend(j,f,c)):void 0!==c&&(g[d]=c));return g},m.extend({expando:"jQuery"+(l+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===m.type(a)},isArray:Array.isArray||function(a){return"array"===m.type(a)},isWindow:function(a){return null!=a&&a==a.window},isNumeric:function(a){return!m.isArray(a)&&a-parseFloat(a)>=0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},isPlainObject:function(a){var b;if(!a||"object"!==m.type(a)||a.nodeType||m.isWindow(a))return!1;try{if(a.constructor&&!j.call(a,"constructor")&&!j.call(a.constructor.prototype,"isPrototypeOf"))return!1}catch(c){return!1}if(k.ownLast)for(b in a)return j.call(a,b);for(b in a);return void 0===b||j.call(a,b)},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(b){b&&m.trim(b)&&(a.execScript||function(b){a.eval.call(a,b)})(b)},camelCase:function(a){return a.replace(o,"ms-").replace(p,q)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=r(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(n,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(r(Object(a))?m.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){var d;if(b){if(g)return g.call(b,a,c);for(d=b.length,c=c?0>c?Math.max(0,d+c):c:0;d>c;c++)if(c in b&&b[c]===a)return c}return-1},merge:function(a,b){var c=+b.length,d=0,e=a.length;while(c>d)a[e++]=b[d++];if(c!==c)while(void 0!==b[d])a[e++]=b[d++];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=r(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(f=a[b],b=a,a=f),m.isFunction(a)?(c=d.call(arguments,2),e=function(){return a.apply(b||this,c.concat(d.call(arguments)))},e.guid=a.guid=a.guid||m.guid++,e):void 0},now:function(){return+new Date},support:k}),m.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function r(a){var b=a.length,c=m.type(a);return"function"===c||m.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var s=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+-new Date,v=a.document,w=0,x=0,y=gb(),z=gb(),A=gb(),B=function(a,b){return a===b&&(l=!0),0},C="undefined",D=1<<31,E={}.hasOwnProperty,F=[],G=F.pop,H=F.push,I=F.push,J=F.slice,K=F.indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(this[b]===a)return b;return-1},L="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",M="[\\x20\\t\\r\\n\\f]",N="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",O=N.replace("w","w#"),P="\\["+M+"*("+N+")(?:"+M+"*([*^$|!~]?=)"+M+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+O+"))|)"+M+"*\\]",Q=":("+N+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+P+")*)|.*)\\)|)",R=new RegExp("^"+M+"+|((?:^|[^\\\\])(?:\\\\.)*)"+M+"+$","g"),S=new RegExp("^"+M+"*,"+M+"*"),T=new RegExp("^"+M+"*([>+~]|"+M+")"+M+"*"),U=new RegExp("="+M+"*([^\\]'\"]*?)"+M+"*\\]","g"),V=new RegExp(Q),W=new RegExp("^"+O+"$"),X={ID:new RegExp("^#("+N+")"),CLASS:new RegExp("^\\.("+N+")"),TAG:new RegExp("^("+N.replace("w","w*")+")"),ATTR:new RegExp("^"+P),PSEUDO:new RegExp("^"+Q),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+M+"*(even|odd|(([+-]|)(\\d*)n|)"+M+"*(?:([+-]|)"+M+"*(\\d+)|))"+M+"*\\)|)","i"),bool:new RegExp("^(?:"+L+")$","i"),needsContext:new RegExp("^"+M+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+M+"*((?:-\\d)?\\d*)"+M+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+M+"?|("+M+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)};try{I.apply(F=J.call(v.childNodes),v.childNodes),F[v.childNodes.length].nodeType}catch(eb){I={apply:F.length?function(a,b){H.apply(a,J.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function fb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],!a||"string"!=typeof a)return d;if(1!==(k=b.nodeType)&&9!==k)return[];if(p&&!e){if(f=_.exec(a))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return I.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName&&b.getElementsByClassName)return I.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=9===k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+qb(o[l]);w=ab.test(a)&&ob(b.parentNode)||b,x=o.join(",")}if(x)try{return I.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function gb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function hb(a){return a[u]=!0,a}function ib(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function jb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function kb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||D)-(~a.sourceIndex||D);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function lb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function nb(a){return hb(function(b){return b=+b,hb(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function ob(a){return a&&typeof a.getElementsByTagName!==C&&a}c=fb.support={},f=fb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=fb.setDocument=function(a){var b,e=a?a.ownerDocument||a:v,g=e.defaultView;return e!==n&&9===e.nodeType&&e.documentElement?(n=e,o=e.documentElement,p=!f(e),g&&g!==g.top&&(g.addEventListener?g.addEventListener("unload",function(){m()},!1):g.attachEvent&&g.attachEvent("onunload",function(){m()})),c.attributes=ib(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=ib(function(a){return a.appendChild(e.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(e.getElementsByClassName)&&ib(function(a){return a.innerHTML="<div class='a'></div><div class='a i'></div>",a.firstChild.className="i",2===a.getElementsByClassName("i").length}),c.getById=ib(function(a){return o.appendChild(a).id=u,!e.getElementsByName||!e.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(typeof b.getElementById!==C&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=typeof a.getAttributeNode!==C&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return typeof b.getElementsByTagName!==C?b.getElementsByTagName(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return typeof b.getElementsByClassName!==C&&p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(e.querySelectorAll))&&(ib(function(a){a.innerHTML="<select msallowclip=''><option selected=''></option></select>",a.querySelectorAll("[msallowclip^='']").length&&q.push("[*^$]="+M+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+M+"*(?:value|"+L+")"),a.querySelectorAll(":checked").length||q.push(":checked")}),ib(function(a){var b=e.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+M+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&ib(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",Q)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===e||a.ownerDocument===v&&t(v,a)?-1:b===e||b.ownerDocument===v&&t(v,b)?1:k?K.call(k,a)-K.call(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,f=a.parentNode,g=b.parentNode,h=[a],i=[b];if(!f||!g)return a===e?-1:b===e?1:f?-1:g?1:k?K.call(k,a)-K.call(k,b):0;if(f===g)return kb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?kb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},e):n},fb.matches=function(a,b){return fb(a,null,null,b)},fb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return fb(b,n,null,[a]).length>0},fb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},fb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&E.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},fb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},fb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=fb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=fb.selectors={cacheLength:50,createPseudo:hb,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||fb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&fb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+M+")"+a+"("+M+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||typeof a.getAttribute!==C&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=fb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||fb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?hb(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=K.call(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:hb(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?hb(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),!c.pop()}}),has:hb(function(a){return function(b){return fb(a,b).length>0}}),contains:hb(function(a){return function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:hb(function(a){return W.test(a||"")||fb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:nb(function(){return[0]}),last:nb(function(a,b){return[b-1]}),eq:nb(function(a,b,c){return[0>c?c+b:c]}),even:nb(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:nb(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:nb(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:nb(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=lb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=mb(b);function pb(){}pb.prototype=d.filters=d.pseudos,d.setFilters=new pb,g=fb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?fb.error(a):z(a,i).slice(0)};function qb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function rb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function sb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function tb(a,b,c){for(var d=0,e=b.length;e>d;d++)fb(a,b[d],c);return c}function ub(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function vb(a,b,c,d,e,f){return d&&!d[u]&&(d=vb(d)),e&&!e[u]&&(e=vb(e,f)),hb(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||tb(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:ub(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=ub(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?K.call(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=ub(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):I.apply(g,r)})}function wb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=rb(function(a){return a===b},h,!0),l=rb(function(a){return K.call(b,a)>-1},h,!0),m=[function(a,c,d){return!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d))}];f>i;i++)if(c=d.relative[a[i].type])m=[rb(sb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return vb(i>1&&sb(m),i>1&&qb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&wb(a.slice(i,e)),f>e&&wb(a=a.slice(e)),f>e&&qb(a))}m.push(c)}return sb(m)}function xb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=G.call(i));s=ub(s)}I.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&fb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?hb(f):f}return h=fb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=wb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,xb(e,d)),f.selector=a}return f},i=fb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&ob(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&qb(j),!a)return I.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&ob(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=ib(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),ib(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||jb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&ib(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||jb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),ib(function(a){return null==a.getAttribute("disabled")})||jb(L,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),fb}(a);m.find=s,m.expr=s.selectors,m.expr[":"]=m.expr.pseudos,m.unique=s.uniqueSort,m.text=s.getText,m.isXMLDoc=s.isXML,m.contains=s.contains;var t=m.expr.match.needsContext,u=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,v=/^.[^:#\[\.,]*$/;function w(a,b,c){if(m.isFunction(b))return m.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return m.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(v.test(b))return m.filter(b,a,c);b=m.filter(b,a)}return m.grep(a,function(a){return m.inArray(a,b)>=0!==c})}m.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?m.find.matchesSelector(d,a)?[d]:[]:m.find.matches(a,m.grep(b,function(a){return 1===a.nodeType}))},m.fn.extend({find:function(a){var b,c=[],d=this,e=d.length;if("string"!=typeof a)return this.pushStack(m(a).filter(function(){for(b=0;e>b;b++)if(m.contains(d[b],this))return!0}));for(b=0;e>b;b++)m.find(a,d[b],c);return c=this.pushStack(e>1?m.unique(c):c),c.selector=this.selector?this.selector+" "+a:a,c},filter:function(a){return this.pushStack(w(this,a||[],!1))},not:function(a){return this.pushStack(w(this,a||[],!0))},is:function(a){return!!w(this,"string"==typeof a&&t.test(a)?m(a):a||[],!1).length}});var x,y=a.document,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=m.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a.charAt(0)&&">"===a.charAt(a.length-1)&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||x).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof m?b[0]:b,m.merge(this,m.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:y,!0)),u.test(c[1])&&m.isPlainObject(b))for(c in b)m.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}if(d=y.getElementById(c[2]),d&&d.parentNode){if(d.id!==c[2])return x.find(a);this.length=1,this[0]=d}return this.context=y,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):m.isFunction(a)?"undefined"!=typeof x.ready?x.ready(a):a(m):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),m.makeArray(a,this))};A.prototype=m.fn,x=m(y);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};m.extend({dir:function(a,b,c){var d=[],e=a[b];while(e&&9!==e.nodeType&&(void 0===c||1!==e.nodeType||!m(e).is(c)))1===e.nodeType&&d.push(e),e=e[b];return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),m.fn.extend({has:function(a){var b,c=m(a,this),d=c.length;return this.filter(function(){for(b=0;d>b;b++)if(m.contains(this,c[b]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=t.test(a)||"string"!=typeof a?m(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&m.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?m.unique(f):f)},index:function(a){return a?"string"==typeof a?m.inArray(this[0],m(a)):m.inArray(a.jquery?a[0]:a,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(m.unique(m.merge(this.get(),m(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){do a=a[b];while(a&&1!==a.nodeType);return a}m.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return m.dir(a,"parentNode")},parentsUntil:function(a,b,c){return m.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return m.dir(a,"nextSibling")},prevAll:function(a){return m.dir(a,"previousSibling")},nextUntil:function(a,b,c){return m.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return m.dir(a,"previousSibling",c)},siblings:function(a){return m.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return m.sibling(a.firstChild)},contents:function(a){return m.nodeName(a,"iframe")?a.contentDocument||a.contentWindow.document:m.merge([],a.childNodes)}},function(a,b){m.fn[a]=function(c,d){var e=m.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=m.filter(d,e)),this.length>1&&(C[a]||(e=m.unique(e)),B.test(a)&&(e=e.reverse())),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return m.each(a.match(E)||[],function(a,c){b[c]=!0}),b}m.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):m.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(c=a.memory&&l,d=!0,f=g||0,g=0,e=h.length,b=!0;h&&e>f;f++)if(h[f].apply(l[0],l[1])===!1&&a.stopOnFalse){c=!1;break}b=!1,h&&(i?i.length&&j(i.shift()):c?h=[]:k.disable())},k={add:function(){if(h){var d=h.length;!function f(b){m.each(b,function(b,c){var d=m.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&f(c)})}(arguments),b?e=h.length:c&&(g=d,j(c))}return this},remove:function(){return h&&m.each(arguments,function(a,c){var d;while((d=m.inArray(c,h,d))>-1)h.splice(d,1),b&&(e>=d&&e--,f>=d&&f--)}),this},has:function(a){return a?m.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],e=0,this},disable:function(){return h=i=c=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,c||k.disable(),this},locked:function(){return!i},fireWith:function(a,c){return!h||d&&!i||(c=c||[],c=[a,c.slice?c.slice():c],b?i.push(c):j(c)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!d}};return k},m.extend({Deferred:function(a){var b=[["resolve","done",m.Callbacks("once memory"),"resolved"],["reject","fail",m.Callbacks("once memory"),"rejected"],["notify","progress",m.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return m.Deferred(function(c){m.each(b,function(b,f){var g=m.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&m.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?m.extend(a,d):d}},e={};return d.pipe=d.then,m.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&m.isFunction(a.promise)?e:0,g=1===f?a:m.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&m.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;m.fn.ready=function(a){return m.ready.promise().done(a),this},m.extend({isReady:!1,readyWait:1,holdReady:function(a){a?m.readyWait++:m.ready(!0)},ready:function(a){if(a===!0?!--m.readyWait:!m.isReady){if(!y.body)return setTimeout(m.ready);m.isReady=!0,a!==!0&&--m.readyWait>0||(H.resolveWith(y,[m]),m.fn.triggerHandler&&(m(y).triggerHandler("ready"),m(y).off("ready")))}}});function I(){y.addEventListener?(y.removeEventListener("DOMContentLoaded",J,!1),a.removeEventListener("load",J,!1)):(y.detachEvent("onreadystatechange",J),a.detachEvent("onload",J))}function J(){(y.addEventListener||"load"===event.type||"complete"===y.readyState)&&(I(),m.ready())}m.ready.promise=function(b){if(!H)if(H=m.Deferred(),"complete"===y.readyState)setTimeout(m.ready);else if(y.addEventListener)y.addEventListener("DOMContentLoaded",J,!1),a.addEventListener("load",J,!1);else{y.attachEvent("onreadystatechange",J),a.attachEvent("onload",J);var c=!1;try{c=null==a.frameElement&&y.documentElement}catch(d){}c&&c.doScroll&&!function e(){if(!m.isReady){try{c.doScroll("left")}catch(a){return setTimeout(e,50)}I(),m.ready()}}()}return H.promise(b)};var K="undefined",L;for(L in m(k))break;k.ownLast="0"!==L,k.inlineBlockNeedsLayout=!1,m(function(){var a,b,c,d;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",k.inlineBlockNeedsLayout=a=3===b.offsetWidth,a&&(c.style.zoom=1)),c.removeChild(d))}),function(){var a=y.createElement("div");if(null==k.deleteExpando){k.deleteExpando=!0;try{delete a.test}catch(b){k.deleteExpando=!1}}a=null}(),m.acceptData=function(a){var b=m.noData[(a.nodeName+" ").toLowerCase()],c=+a.nodeType||1;return 1!==c&&9!==c?!1:!b||b!==!0&&a.getAttribute("classid")===b};var M=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,N=/([A-Z])/g;function O(a,b,c){if(void 0===c&&1===a.nodeType){var d="data-"+b.replace(N,"-$1").toLowerCase();if(c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:M.test(c)?m.parseJSON(c):c}catch(e){}m.data(a,b,c)}else c=void 0}return c}function P(a){var b;for(b in a)if(("data"!==b||!m.isEmptyObject(a[b]))&&"toJSON"!==b)return!1;return!0}function Q(a,b,d,e){if(m.acceptData(a)){var f,g,h=m.expando,i=a.nodeType,j=i?m.cache:a,k=i?a[h]:a[h]&&h;if(k&&j[k]&&(e||j[k].data)||void 0!==d||"string"!=typeof b)return k||(k=i?a[h]=c.pop()||m.guid++:h),j[k]||(j[k]=i?{}:{toJSON:m.noop}),("object"==typeof b||"function"==typeof b)&&(e?j[k]=m.extend(j[k],b):j[k].data=m.extend(j[k].data,b)),g=j[k],e||(g.data||(g.data={}),g=g.data),void 0!==d&&(g[m.camelCase(b)]=d),"string"==typeof b?(f=g[b],null==f&&(f=g[m.camelCase(b)])):f=g,f}}function R(a,b,c){if(m.acceptData(a)){var d,e,f=a.nodeType,g=f?m.cache:a,h=f?a[m.expando]:m.expando;if(g[h]){if(b&&(d=c?g[h]:g[h].data)){m.isArray(b)?b=b.concat(m.map(b,m.camelCase)):b in d?b=[b]:(b=m.camelCase(b),b=b in d?[b]:b.split(" ")),e=b.length;while(e--)delete d[b[e]];if(c?!P(d):!m.isEmptyObject(d))return}(c||(delete g[h].data,P(g[h])))&&(f?m.cleanData([a],!0):k.deleteExpando||g!=g.window?delete g[h]:g[h]=null)}}}m.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(a){return a=a.nodeType?m.cache[a[m.expando]]:a[m.expando],!!a&&!P(a)},data:function(a,b,c){return Q(a,b,c)},removeData:function(a,b){return R(a,b)},_data:function(a,b,c){return Q(a,b,c,!0)},_removeData:function(a,b){return R(a,b,!0)}}),m.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=m.data(f),1===f.nodeType&&!m._data(f,"parsedAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=m.camelCase(d.slice(5)),O(f,d,e[d])));m._data(f,"parsedAttrs",!0)}return e}return"object"==typeof a?this.each(function(){m.data(this,a)}):arguments.length>1?this.each(function(){m.data(this,a,b)}):f?O(f,a,m.data(f,a)):void 0},removeData:function(a){return this.each(function(){m.removeData(this,a)})}}),m.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=m._data(a,b),c&&(!d||m.isArray(c)?d=m._data(a,b,m.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=m.queue(a,b),d=c.length,e=c.shift(),f=m._queueHooks(a,b),g=function(){m.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return m._data(a,c)||m._data(a,c,{empty:m.Callbacks("once memory").add(function(){m._removeData(a,b+"queue"),m._removeData(a,c)})})}}),m.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?m.queue(this[0],a):void 0===b?this:this.each(function(){var c=m.queue(this,a,b);m._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&m.dequeue(this,a)})},dequeue:function(a){return this.each(function(){m.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=m.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=m._data(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var S=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,T=["Top","Right","Bottom","Left"],U=function(a,b){return a=b||a,"none"===m.css(a,"display")||!m.contains(a.ownerDocument,a)},V=m.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===m.type(c)){e=!0;for(h in c)m.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,m.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(m(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f},W=/^(?:checkbox|radio)$/i;!function(){var a=y.createElement("input"),b=y.createElement("div"),c=y.createDocumentFragment();if(b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",k.leadingWhitespace=3===b.firstChild.nodeType,k.tbody=!b.getElementsByTagName("tbody").length,k.htmlSerialize=!!b.getElementsByTagName("link").length,k.html5Clone="<:nav></:nav>"!==y.createElement("nav").cloneNode(!0).outerHTML,a.type="checkbox",a.checked=!0,c.appendChild(a),k.appendChecked=a.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue,c.appendChild(b),b.innerHTML="<input type='radio' checked='checked' name='t'/>",k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,k.noCloneEvent=!0,b.attachEvent&&(b.attachEvent("onclick",function(){k.noCloneEvent=!1}),b.cloneNode(!0).click()),null==k.deleteExpando){k.deleteExpando=!0;try{delete b.test}catch(d){k.deleteExpando=!1}}}(),function(){var b,c,d=y.createElement("div");for(b in{submit:!0,change:!0,focusin:!0})c="on"+b,(k[b+"Bubbles"]=c in a)||(d.setAttribute(c,"t"),k[b+"Bubbles"]=d.attributes[c].expando===!1);d=null}();var X=/^(?:input|select|textarea)$/i,Y=/^key/,Z=/^(?:mouse|pointer|contextmenu)|click/,$=/^(?:focusinfocus|focusoutblur)$/,_=/^([^.]*)(?:\.(.+)|)$/;function ab(){return!0}function bb(){return!1}function cb(){try{return y.activeElement}catch(a){}}m.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m._data(a);if(r){c.handler&&(i=c,c=i.handler,e=i.selector),c.guid||(c.guid=m.guid++),(g=r.events)||(g=r.events={}),(k=r.handle)||(k=r.handle=function(a){return typeof m===K||a&&m.event.triggered===a.type?void 0:m.event.dispatch.apply(k.elem,arguments)},k.elem=a),b=(b||"").match(E)||[""],h=b.length;while(h--)f=_.exec(b[h])||[],o=q=f[1],p=(f[2]||"").split(".").sort(),o&&(j=m.event.special[o]||{},o=(e?j.delegateType:j.bindType)||o,j=m.event.special[o]||{},l=m.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&m.expr.match.needsContext.test(e),namespace:p.join(".")},i),(n=g[o])||(n=g[o]=[],n.delegateCount=0,j.setup&&j.setup.call(a,d,p,k)!==!1||(a.addEventListener?a.addEventListener(o,k,!1):a.attachEvent&&a.attachEvent("on"+o,k))),j.add&&(j.add.call(a,l),l.handler.guid||(l.handler.guid=c.guid)),e?n.splice(n.delegateCount++,0,l):n.push(l),m.event.global[o]=!0);a=null}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,n,o,p,q,r=m.hasData(a)&&m._data(a);if(r&&(k=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=_.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=m.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,n=k[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),i=f=n.length;while(f--)g=n[f],!e&&q!==g.origType||c&&c.guid!==g.guid||h&&!h.test(g.namespace)||d&&d!==g.selector&&("**"!==d||!g.selector)||(n.splice(f,1),g.selector&&n.delegateCount--,l.remove&&l.remove.call(a,g));i&&!n.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||m.removeEvent(a,o,r.handle),delete k[o])}else for(o in k)m.event.remove(a,o+b[j],c,d,!0);m.isEmptyObject(k)&&(delete r.handle,m._removeData(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,l,n,o=[d||y],p=j.call(b,"type")?b.type:b,q=j.call(b,"namespace")?b.namespace.split("."):[];if(h=l=d=d||y,3!==d.nodeType&&8!==d.nodeType&&!$.test(p+m.event.triggered)&&(p.indexOf(".")>=0&&(q=p.split("."),p=q.shift(),q.sort()),g=p.indexOf(":")<0&&"on"+p,b=b[m.expando]?b:new m.Event(p,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=q.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+q.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:m.makeArray(c,[b]),k=m.event.special[p]||{},e||!k.trigger||k.trigger.apply(d,c)!==!1)){if(!e&&!k.noBubble&&!m.isWindow(d)){for(i=k.delegateType||p,$.test(i+p)||(h=h.parentNode);h;h=h.parentNode)o.push(h),l=h;l===(d.ownerDocument||y)&&o.push(l.defaultView||l.parentWindow||a)}n=0;while((h=o[n++])&&!b.isPropagationStopped())b.type=n>1?i:k.bindType||p,f=(m._data(h,"events")||{})[b.type]&&m._data(h,"handle"),f&&f.apply(h,c),f=g&&h[g],f&&f.apply&&m.acceptData(h)&&(b.result=f.apply(h,c),b.result===!1&&b.preventDefault());if(b.type=p,!e&&!b.isDefaultPrevented()&&(!k._default||k._default.apply(o.pop(),c)===!1)&&m.acceptData(d)&&g&&d[p]&&!m.isWindow(d)){l=d[g],l&&(d[g]=null),m.event.triggered=p;try{d[p]()}catch(r){}m.event.triggered=void 0,l&&(d[g]=l)}return b.result}},dispatch:function(a){a=m.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(m._data(this,"events")||{})[a.type]||[],k=m.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=m.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,g=0;while((e=f.handlers[g++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(e.namespace))&&(a.handleObj=e,a.data=e.data,c=((m.event.special[e.origType]||{}).handle||e.handler).apply(f.elem,i),void 0!==c&&(a.result=c)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!=this;i=i.parentNode||this)if(1===i.nodeType&&(i.disabled!==!0||"click"!==a.type)){for(e=[],f=0;h>f;f++)d=b[f],c=d.selector+" ",void 0===e[c]&&(e[c]=d.needsContext?m(c,this).index(i)>=0:m.find(c,this,null,[i]).length),e[c]&&e.push(d);e.length&&g.push({elem:i,handlers:e})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},fix:function(a){if(a[m.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=Z.test(e)?this.mouseHooks:Y.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new m.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=f.srcElement||y),3===a.target.nodeType&&(a.target=a.target.parentNode),a.metaKey=!!a.metaKey,g.filter?g.filter(a,f):a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button,g=b.fromElement;return null==a.pageX&&null!=b.clientX&&(d=a.target.ownerDocument||y,e=d.documentElement,c=d.body,a.pageX=b.clientX+(e&&e.scrollLeft||c&&c.scrollLeft||0)-(e&&e.clientLeft||c&&c.clientLeft||0),a.pageY=b.clientY+(e&&e.scrollTop||c&&c.scrollTop||0)-(e&&e.clientTop||c&&c.clientTop||0)),!a.relatedTarget&&g&&(a.relatedTarget=g===a.target?b.toElement:g),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==cb()&&this.focus)try{return this.focus(),!1}catch(a){}},delegateType:"focusin"},blur:{trigger:function(){return this===cb()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return m.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(a){return m.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=m.extend(new m.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?m.event.trigger(e,null,b):m.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},m.removeEvent=y.removeEventListener?function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)}:function(a,b,c){var d="on"+b;a.detachEvent&&(typeof a[d]===K&&(a[d]=null),a.detachEvent(d,c))},m.Event=function(a,b){return this instanceof m.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?ab:bb):this.type=a,b&&m.extend(this,b),this.timeStamp=a&&a.timeStamp||m.now(),void(this[m.expando]=!0)):new m.Event(a,b)},m.Event.prototype={isDefaultPrevented:bb,isPropagationStopped:bb,isImmediatePropagationStopped:bb,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=ab,a&&(a.preventDefault?a.preventDefault():a.returnValue=!1)},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=ab,a&&(a.stopPropagation&&a.stopPropagation(),a.cancelBubble=!0)},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=ab,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},m.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){m.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!m.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.submitBubbles||(m.event.special.submit={setup:function(){return m.nodeName(this,"form")?!1:void m.event.add(this,"click._submit keypress._submit",function(a){var b=a.target,c=m.nodeName(b,"input")||m.nodeName(b,"button")?b.form:void 0;c&&!m._data(c,"submitBubbles")&&(m.event.add(c,"submit._submit",function(a){a._submit_bubble=!0}),m._data(c,"submitBubbles",!0))})},postDispatch:function(a){a._submit_bubble&&(delete a._submit_bubble,this.parentNode&&!a.isTrigger&&m.event.simulate("submit",this.parentNode,a,!0))},teardown:function(){return m.nodeName(this,"form")?!1:void m.event.remove(this,"._submit")}}),k.changeBubbles||(m.event.special.change={setup:function(){return X.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(m.event.add(this,"propertychange._change",function(a){"checked"===a.originalEvent.propertyName&&(this._just_changed=!0)}),m.event.add(this,"click._change",function(a){this._just_changed&&!a.isTrigger&&(this._just_changed=!1),m.event.simulate("change",this,a,!0)})),!1):void m.event.add(this,"beforeactivate._change",function(a){var b=a.target;X.test(b.nodeName)&&!m._data(b,"changeBubbles")&&(m.event.add(b,"change._change",function(a){!this.parentNode||a.isSimulated||a.isTrigger||m.event.simulate("change",this.parentNode,a,!0)}),m._data(b,"changeBubbles",!0))})},handle:function(a){var b=a.target;return this!==b||a.isSimulated||a.isTrigger||"radio"!==b.type&&"checkbox"!==b.type?a.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return m.event.remove(this,"._change"),!X.test(this.nodeName)}}),k.focusinBubbles||m.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){m.event.simulate(b,a.target,m.event.fix(a),!0)};m.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=m._data(d,b);e||d.addEventListener(a,c,!0),m._data(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=m._data(d,b)-1;e?m._data(d,b,e):(d.removeEventListener(a,c,!0),m._removeData(d,b))}}}),m.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(f in a)this.on(f,b,c,a[f],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=bb;else if(!d)return this;return 1===e&&(g=d,d=function(a){return m().off(a),g.apply(this,arguments)},d.guid=g.guid||(g.guid=m.guid++)),this.each(function(){m.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,m(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=bb),this.each(function(){m.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){m.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?m.event.trigger(a,b,c,!0):void 0}});function db(a){var b=eb.split("|"),c=a.createDocumentFragment();if(c.createElement)while(b.length)c.createElement(b.pop());return c}var eb="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",fb=/ jQuery\d+="(?:null|\d+)"/g,gb=new RegExp("<(?:"+eb+")[\\s/>]","i"),hb=/^\s+/,ib=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,jb=/<([\w:]+)/,kb=/<tbody/i,lb=/<|&#?\w+;/,mb=/<(?:script|style|link)/i,nb=/checked\s*(?:[^=]|=\s*.checked.)/i,ob=/^$|\/(?:java|ecma)script/i,pb=/^true\/(.*)/,qb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,rb={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:k.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},sb=db(y),tb=sb.appendChild(y.createElement("div"));rb.optgroup=rb.option,rb.tbody=rb.tfoot=rb.colgroup=rb.caption=rb.thead,rb.th=rb.td;function ub(a,b){var c,d,e=0,f=typeof a.getElementsByTagName!==K?a.getElementsByTagName(b||"*"):typeof a.querySelectorAll!==K?a.querySelectorAll(b||"*"):void 0;if(!f)for(f=[],c=a.childNodes||a;null!=(d=c[e]);e++)!b||m.nodeName(d,b)?f.push(d):m.merge(f,ub(d,b));return void 0===b||b&&m.nodeName(a,b)?m.merge([a],f):f}function vb(a){W.test(a.type)&&(a.defaultChecked=a.checked)}function wb(a,b){return m.nodeName(a,"table")&&m.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function xb(a){return a.type=(null!==m.find.attr(a,"type"))+"/"+a.type,a}function yb(a){var b=pb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function zb(a,b){for(var c,d=0;null!=(c=a[d]);d++)m._data(c,"globalEval",!b||m._data(b[d],"globalEval"))}function Ab(a,b){if(1===b.nodeType&&m.hasData(a)){var c,d,e,f=m._data(a),g=m._data(b,f),h=f.events;if(h){delete g.handle,g.events={};for(c in h)for(d=0,e=h[c].length;e>d;d++)m.event.add(b,c,h[c][d])}g.data&&(g.data=m.extend({},g.data))}}function Bb(a,b){var c,d,e;if(1===b.nodeType){if(c=b.nodeName.toLowerCase(),!k.noCloneEvent&&b[m.expando]){e=m._data(b);for(d in e.events)m.removeEvent(b,d,e.handle);b.removeAttribute(m.expando)}"script"===c&&b.text!==a.text?(xb(b).text=a.text,yb(b)):"object"===c?(b.parentNode&&(b.outerHTML=a.outerHTML),k.html5Clone&&a.innerHTML&&!m.trim(b.innerHTML)&&(b.innerHTML=a.innerHTML)):"input"===c&&W.test(a.type)?(b.defaultChecked=b.checked=a.checked,b.value!==a.value&&(b.value=a.value)):"option"===c?b.defaultSelected=b.selected=a.defaultSelected:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}}m.extend({clone:function(a,b,c){var d,e,f,g,h,i=m.contains(a.ownerDocument,a);if(k.html5Clone||m.isXMLDoc(a)||!gb.test("<"+a.nodeName+">")?f=a.cloneNode(!0):(tb.innerHTML=a.outerHTML,tb.removeChild(f=tb.firstChild)),!(k.noCloneEvent&&k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||m.isXMLDoc(a)))for(d=ub(f),h=ub(a),g=0;null!=(e=h[g]);++g)d[g]&&Bb(e,d[g]);if(b)if(c)for(h=h||ub(a),d=d||ub(f),g=0;null!=(e=h[g]);g++)Ab(e,d[g]);else Ab(a,f);return d=ub(f,"script"),d.length>0&&zb(d,!i&&ub(a,"script")),d=h=e=null,f},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,l,n=a.length,o=db(b),p=[],q=0;n>q;q++)if(f=a[q],f||0===f)if("object"===m.type(f))m.merge(p,f.nodeType?[f]:f);else if(lb.test(f)){h=h||o.appendChild(b.createElement("div")),i=(jb.exec(f)||["",""])[1].toLowerCase(),l=rb[i]||rb._default,h.innerHTML=l[1]+f.replace(ib,"<$1></$2>")+l[2],e=l[0];while(e--)h=h.lastChild;if(!k.leadingWhitespace&&hb.test(f)&&p.push(b.createTextNode(hb.exec(f)[0])),!k.tbody){f="table"!==i||kb.test(f)?"<table>"!==l[1]||kb.test(f)?0:h:h.firstChild,e=f&&f.childNodes.length;while(e--)m.nodeName(j=f.childNodes[e],"tbody")&&!j.childNodes.length&&f.removeChild(j)}m.merge(p,h.childNodes),h.textContent="";while(h.firstChild)h.removeChild(h.firstChild);h=o.lastChild}else p.push(b.createTextNode(f));h&&o.removeChild(h),k.appendChecked||m.grep(ub(p,"input"),vb),q=0;while(f=p[q++])if((!d||-1===m.inArray(f,d))&&(g=m.contains(f.ownerDocument,f),h=ub(o.appendChild(f),"script"),g&&zb(h),c)){e=0;while(f=h[e++])ob.test(f.type||"")&&c.push(f)}return h=null,o},cleanData:function(a,b){for(var d,e,f,g,h=0,i=m.expando,j=m.cache,l=k.deleteExpando,n=m.event.special;null!=(d=a[h]);h++)if((b||m.acceptData(d))&&(f=d[i],g=f&&j[f])){if(g.events)for(e in g.events)n[e]?m.event.remove(d,e):m.removeEvent(d,e,g.handle);j[f]&&(delete j[f],l?delete d[i]:typeof d.removeAttribute!==K?d.removeAttribute(i):d[i]=null,c.push(f))}}}),m.fn.extend({text:function(a){return V(this,function(a){return void 0===a?m.text(this):this.empty().append((this[0]&&this[0].ownerDocument||y).createTextNode(a))},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=wb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?m.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||m.cleanData(ub(c)),c.parentNode&&(b&&m.contains(c.ownerDocument,c)&&zb(ub(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++){1===a.nodeType&&m.cleanData(ub(a,!1));while(a.firstChild)a.removeChild(a.firstChild);a.options&&m.nodeName(a,"select")&&(a.options.length=0)}return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return m.clone(this,a,b)})},html:function(a){return V(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a)return 1===b.nodeType?b.innerHTML.replace(fb,""):void 0;if(!("string"!=typeof a||mb.test(a)||!k.htmlSerialize&&gb.test(a)||!k.leadingWhitespace&&hb.test(a)||rb[(jb.exec(a)||["",""])[1].toLowerCase()])){a=a.replace(ib,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(m.cleanData(ub(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,m.cleanData(ub(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,n=this,o=l-1,p=a[0],q=m.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&nb.test(p))return this.each(function(c){var d=n.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(i=m.buildFragment(a,this[0].ownerDocument,!1,this),c=i.firstChild,1===i.childNodes.length&&(i=c),c)){for(g=m.map(ub(i,"script"),xb),f=g.length;l>j;j++)d=i,j!==o&&(d=m.clone(d,!0,!0),f&&m.merge(g,ub(d,"script"))),b.call(this[j],d,j);if(f)for(h=g[g.length-1].ownerDocument,m.map(g,yb),j=0;f>j;j++)d=g[j],ob.test(d.type||"")&&!m._data(d,"globalEval")&&m.contains(h,d)&&(d.src?m._evalUrl&&m._evalUrl(d.src):m.globalEval((d.text||d.textContent||d.innerHTML||"").replace(qb,"")));i=c=null}return this}}),m.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){m.fn[a]=function(a){for(var c,d=0,e=[],g=m(a),h=g.length-1;h>=d;d++)c=d===h?this:this.clone(!0),m(g[d])[b](c),f.apply(e,c.get());return this.pushStack(e)}});var Cb,Db={};function Eb(b,c){var d,e=m(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:m.css(e[0],"display");return e.detach(),f}function Fb(a){var b=y,c=Db[a];return c||(c=Eb(a,b),"none"!==c&&c||(Cb=(Cb||m("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=(Cb[0].contentWindow||Cb[0].contentDocument).document,b.write(),b.close(),c=Eb(a,b),Cb.detach()),Db[a]=c),c}!function(){var a;k.shrinkWrapBlocks=function(){if(null!=a)return a;a=!1;var b,c,d;return c=y.getElementsByTagName("body")[0],c&&c.style?(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),typeof b.style.zoom!==K&&(b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",b.appendChild(y.createElement("div")).style.width="5px",a=3!==b.offsetWidth),c.removeChild(d),a):void 0}}();var Gb=/^margin/,Hb=new RegExp("^("+S+")(?!px)[a-z%]+$","i"),Ib,Jb,Kb=/^(top|right|bottom|left)$/;a.getComputedStyle?(Ib=function(a){return a.ownerDocument.defaultView.getComputedStyle(a,null)},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c.getPropertyValue(b)||c[b]:void 0,c&&(""!==g||m.contains(a.ownerDocument,a)||(g=m.style(a,b)),Hb.test(g)&&Gb.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0===g?g:g+""}):y.documentElement.currentStyle&&(Ib=function(a){return a.currentStyle},Jb=function(a,b,c){var d,e,f,g,h=a.style;return c=c||Ib(a),g=c?c[b]:void 0,null==g&&h&&h[b]&&(g=h[b]),Hb.test(g)&&!Kb.test(b)&&(d=h.left,e=a.runtimeStyle,f=e&&e.left,f&&(e.left=a.currentStyle.left),h.left="fontSize"===b?"1em":g,g=h.pixelLeft+"px",h.left=d,f&&(e.left=f)),void 0===g?g:g+""||"auto"});function Lb(a,b){return{get:function(){var c=a();if(null!=c)return c?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d,e,f,g,h;if(b=y.createElement("div"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=d&&d.style){c.cssText="float:left;opacity:.5",k.opacity="0.5"===c.opacity,k.cssFloat=!!c.cssFloat,b.style.backgroundClip="content-box",b.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===b.style.backgroundClip,k.boxSizing=""===c.boxSizing||""===c.MozBoxSizing||""===c.WebkitBoxSizing,m.extend(k,{reliableHiddenOffsets:function(){return null==g&&i(),g},boxSizingReliable:function(){return null==f&&i(),f},pixelPosition:function(){return null==e&&i(),e},reliableMarginRight:function(){return null==h&&i(),h}});function i(){var b,c,d,i;c=y.getElementsByTagName("body")[0],c&&c.style&&(b=y.createElement("div"),d=y.createElement("div"),d.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",c.appendChild(d).appendChild(b),b.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",e=f=!1,h=!0,a.getComputedStyle&&(e="1%"!==(a.getComputedStyle(b,null)||{}).top,f="4px"===(a.getComputedStyle(b,null)||{width:"4px"}).width,i=b.appendChild(y.createElement("div")),i.style.cssText=b.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",b.style.width="1px",h=!parseFloat((a.getComputedStyle(i,null)||{}).marginRight)),b.innerHTML="<table><tr><td></td><td>t</td></tr></table>",i=b.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",g=0===i[0].offsetHeight,g&&(i[0].style.display="",i[1].style.display="none",g=0===i[0].offsetHeight),c.removeChild(d))}}}(),m.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var Mb=/alpha\([^)]*\)/i,Nb=/opacity\s*=\s*([^)]*)/,Ob=/^(none|table(?!-c[ea]).+)/,Pb=new RegExp("^("+S+")(.*)$","i"),Qb=new RegExp("^([+-])=("+S+")","i"),Rb={position:"absolute",visibility:"hidden",display:"block"},Sb={letterSpacing:"0",fontWeight:"400"},Tb=["Webkit","O","Moz","ms"];function Ub(a,b){if(b in a)return b;var c=b.charAt(0).toUpperCase()+b.slice(1),d=b,e=Tb.length;while(e--)if(b=Tb[e]+c,b in a)return b;return d}function Vb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=m._data(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&U(d)&&(f[g]=m._data(d,"olddisplay",Fb(d.nodeName)))):(e=U(d),(c&&"none"!==c||!e)&&m._data(d,"olddisplay",e?c:m.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}function Wb(a,b,c){var d=Pb.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Xb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=m.css(a,c+T[f],!0,e)),d?("content"===c&&(g-=m.css(a,"padding"+T[f],!0,e)),"margin"!==c&&(g-=m.css(a,"border"+T[f]+"Width",!0,e))):(g+=m.css(a,"padding"+T[f],!0,e),"padding"!==c&&(g+=m.css(a,"border"+T[f]+"Width",!0,e)));return g}function Yb(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=Ib(a),g=k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=Jb(a,b,f),(0>e||null==e)&&(e=a.style[b]),Hb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Xb(a,b,c||(g?"border":"content"),d,f)+"px"}m.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=Jb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":k.cssFloat?"cssFloat":"styleFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=m.camelCase(b),i=a.style;if(b=m.cssProps[h]||(m.cssProps[h]=Ub(i,h)),g=m.cssHooks[b]||m.cssHooks[h],void 0===c)return g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b];if(f=typeof c,"string"===f&&(e=Qb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(m.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||m.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),!(g&&"set"in g&&void 0===(c=g.set(a,c,d)))))try{i[b]=c}catch(j){}}},css:function(a,b,c,d){var e,f,g,h=m.camelCase(b);return b=m.cssProps[h]||(m.cssProps[h]=Ub(a.style,h)),g=m.cssHooks[b]||m.cssHooks[h],g&&"get"in g&&(f=g.get(a,!0,c)),void 0===f&&(f=Jb(a,b,d)),"normal"===f&&b in Sb&&(f=Sb[b]),""===c||c?(e=parseFloat(f),c===!0||m.isNumeric(e)?e||0:f):f}}),m.each(["height","width"],function(a,b){m.cssHooks[b]={get:function(a,c,d){return c?Ob.test(m.css(a,"display"))&&0===a.offsetWidth?m.swap(a,Rb,function(){return Yb(a,b,d)}):Yb(a,b,d):void 0},set:function(a,c,d){var e=d&&Ib(a);return Wb(a,c,d?Xb(a,b,d,k.boxSizing&&"border-box"===m.css(a,"boxSizing",!1,e),e):0)}}}),k.opacity||(m.cssHooks.opacity={get:function(a,b){return Nb.test((b&&a.currentStyle?a.currentStyle.filter:a.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":b?"1":""},set:function(a,b){var c=a.style,d=a.currentStyle,e=m.isNumeric(b)?"alpha(opacity="+100*b+")":"",f=d&&d.filter||c.filter||"";c.zoom=1,(b>=1||""===b)&&""===m.trim(f.replace(Mb,""))&&c.removeAttribute&&(c.removeAttribute("filter"),""===b||d&&!d.filter)||(c.filter=Mb.test(f)?f.replace(Mb,e):f+" "+e)}}),m.cssHooks.marginRight=Lb(k.reliableMarginRight,function(a,b){return b?m.swap(a,{display:"inline-block"},Jb,[a,"marginRight"]):void 0}),m.each({margin:"",padding:"",border:"Width"},function(a,b){m.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+T[d]+b]=f[d]||f[d-2]||f[0];return e}},Gb.test(a)||(m.cssHooks[a+b].set=Wb)}),m.fn.extend({css:function(a,b){return V(this,function(a,b,c){var d,e,f={},g=0;if(m.isArray(b)){for(d=Ib(a),e=b.length;e>g;g++)f[b[g]]=m.css(a,b[g],!1,d);return f}return void 0!==c?m.style(a,b,c):m.css(a,b)},a,b,arguments.length>1)},show:function(){return Vb(this,!0)},hide:function(){return Vb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){U(this)?m(this).show():m(this).hide()})}});function Zb(a,b,c,d,e){return new Zb.prototype.init(a,b,c,d,e)}m.Tween=Zb,Zb.prototype={constructor:Zb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(m.cssNumber[c]?"":"px")},cur:function(){var a=Zb.propHooks[this.prop];return a&&a.get?a.get(this):Zb.propHooks._default.get(this)},run:function(a){var b,c=Zb.propHooks[this.prop];return this.pos=b=this.options.duration?m.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Zb.propHooks._default.set(this),this}},Zb.prototype.init.prototype=Zb.prototype,Zb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=m.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){m.fx.step[a.prop]?m.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[m.cssProps[a.prop]]||m.cssHooks[a.prop])?m.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Zb.propHooks.scrollTop=Zb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},m.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},m.fx=Zb.prototype.init,m.fx.step={};var $b,_b,ac=/^(?:toggle|show|hide)$/,bc=new RegExp("^(?:([+-])=|)("+S+")([a-z%]*)$","i"),cc=/queueHooks$/,dc=[ic],ec={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=bc.exec(b),f=e&&e[3]||(m.cssNumber[a]?"":"px"),g=(m.cssNumber[a]||"px"!==f&&+d)&&bc.exec(m.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,m.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function fc(){return setTimeout(function(){$b=void 0}),$b=m.now()}function gc(a,b){var c,d={height:a},e=0;for(b=b?1:0;4>e;e+=2-b)c=T[e],d["margin"+c]=d["padding"+c]=a;return b&&(d.opacity=d.width=a),d}function hc(a,b,c){for(var d,e=(ec[b]||[]).concat(ec["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function ic(a,b,c){var d,e,f,g,h,i,j,l,n=this,o={},p=a.style,q=a.nodeType&&U(a),r=m._data(a,"fxshow");c.queue||(h=m._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,n.always(function(){n.always(function(){h.unqueued--,m.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[p.overflow,p.overflowX,p.overflowY],j=m.css(a,"display"),l="none"===j?m._data(a,"olddisplay")||Fb(a.nodeName):j,"inline"===l&&"none"===m.css(a,"float")&&(k.inlineBlockNeedsLayout&&"inline"!==Fb(a.nodeName)?p.zoom=1:p.display="inline-block")),c.overflow&&(p.overflow="hidden",k.shrinkWrapBlocks()||n.always(function(){p.overflow=c.overflow[0],p.overflowX=c.overflow[1],p.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],ac.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(q?"hide":"show")){if("show"!==e||!r||void 0===r[d])continue;q=!0}o[d]=r&&r[d]||m.style(a,d)}else j=void 0;if(m.isEmptyObject(o))"inline"===("none"===j?Fb(a.nodeName):j)&&(p.display=j);else{r?"hidden"in r&&(q=r.hidden):r=m._data(a,"fxshow",{}),f&&(r.hidden=!q),q?m(a).show():n.done(function(){m(a).hide()}),n.done(function(){var b;m._removeData(a,"fxshow");for(b in o)m.style(a,b,o[b])});for(d in o)g=hc(q?r[d]:0,d,n),d in r||(r[d]=g.start,q&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function jc(a,b){var c,d,e,f,g;for(c in a)if(d=m.camelCase(c),e=b[d],f=a[c],m.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=m.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function kc(a,b,c){var d,e,f=0,g=dc.length,h=m.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=$b||fc(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:m.extend({},b),opts:m.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:$b||fc(),duration:c.duration,tweens:[],createTween:function(b,c){var d=m.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(jc(k,j.opts.specialEasing);g>f;f++)if(d=dc[f].call(j,a,k,j.opts))return d;return m.map(k,hc,j),m.isFunction(j.opts.start)&&j.opts.start.call(a,j),m.fx.timer(m.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}m.Animation=m.extend(kc,{tweener:function(a,b){m.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],ec[c]=ec[c]||[],ec[c].unshift(b)},prefilter:function(a,b){b?dc.unshift(a):dc.push(a)}}),m.speed=function(a,b,c){var d=a&&"object"==typeof a?m.extend({},a):{complete:c||!c&&b||m.isFunction(a)&&a,duration:a,easing:c&&b||b&&!m.isFunction(b)&&b};return d.duration=m.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in m.fx.speeds?m.fx.speeds[d.duration]:m.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){m.isFunction(d.old)&&d.old.call(this),d.queue&&m.dequeue(this,d.queue)},d},m.fn.extend({fadeTo:function(a,b,c,d){return this.filter(U).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=m.isEmptyObject(a),f=m.speed(b,c,d),g=function(){var b=kc(this,m.extend({},a),f);(e||m._data(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=m.timers,g=m._data(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&cc.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&m.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=m._data(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=m.timers,g=d?d.length:0;for(c.finish=!0,m.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),m.each(["toggle","show","hide"],function(a,b){var c=m.fn[b];m.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(gc(b,!0),a,d,e)}}),m.each({slideDown:gc("show"),slideUp:gc("hide"),slideToggle:gc("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){m.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),m.timers=[],m.fx.tick=function(){var a,b=m.timers,c=0;for($b=m.now();c<b.length;c++)a=b[c],a()||b[c]!==a||b.splice(c--,1);b.length||m.fx.stop(),$b=void 0},m.fx.timer=function(a){m.timers.push(a),a()?m.fx.start():m.timers.pop()},m.fx.interval=13,m.fx.start=function(){_b||(_b=setInterval(m.fx.tick,m.fx.interval))},m.fx.stop=function(){clearInterval(_b),_b=null},m.fx.speeds={slow:600,fast:200,_default:400},m.fn.delay=function(a,b){return a=m.fx?m.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a,b,c,d,e;b=y.createElement("div"),b.setAttribute("className","t"),b.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",d=b.getElementsByTagName("a")[0],c=y.createElement("select"),e=c.appendChild(y.createElement("option")),a=b.getElementsByTagName("input")[0],d.style.cssText="top:1px",k.getSetAttribute="t"!==b.className,k.style=/top/.test(d.getAttribute("style")),k.hrefNormalized="/a"===d.getAttribute("href"),k.checkOn=!!a.value,k.optSelected=e.selected,k.enctype=!!y.createElement("form").enctype,c.disabled=!0,k.optDisabled=!e.disabled,a=y.createElement("input"),a.setAttribute("value",""),k.input=""===a.getAttribute("value"),a.value="t",a.setAttribute("type","radio"),k.radioValue="t"===a.value}();var lc=/\r/g;m.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=m.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,m(this).val()):a,null==e?e="":"number"==typeof e?e+="":m.isArray(e)&&(e=m.map(e,function(a){return null==a?"":a+""})),b=m.valHooks[this.type]||m.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=m.valHooks[e.type]||m.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(lc,""):null==c?"":c)}}}),m.extend({valHooks:{option:{get:function(a){var b=m.find.attr(a,"value");return null!=b?b:m.trim(m.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&m.nodeName(c.parentNode,"optgroup"))){if(b=m(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=m.makeArray(b),g=e.length;while(g--)if(d=e[g],m.inArray(m.valHooks.option.get(d),f)>=0)try{d.selected=c=!0}catch(h){d.scrollHeight}else d.selected=!1;return c||(a.selectedIndex=-1),e}}}}),m.each(["radio","checkbox"],function(){m.valHooks[this]={set:function(a,b){return m.isArray(b)?a.checked=m.inArray(m(a).val(),b)>=0:void 0}},k.checkOn||(m.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})});var mc,nc,oc=m.expr.attrHandle,pc=/^(?:checked|selected)$/i,qc=k.getSetAttribute,rc=k.input;m.fn.extend({attr:function(a,b){return V(this,m.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){m.removeAttr(this,a)})}}),m.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===K?m.prop(a,b,c):(1===f&&m.isXMLDoc(a)||(b=b.toLowerCase(),d=m.attrHooks[b]||(m.expr.match.bool.test(b)?nc:mc)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=m.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void m.removeAttr(a,b))},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=m.propFix[c]||c,m.expr.match.bool.test(c)?rc&&qc||!pc.test(c)?a[d]=!1:a[m.camelCase("default-"+c)]=a[d]=!1:m.attr(a,c,""),a.removeAttribute(qc?c:d)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&m.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),nc={set:function(a,b,c){return b===!1?m.removeAttr(a,c):rc&&qc||!pc.test(c)?a.setAttribute(!qc&&m.propFix[c]||c,c):a[m.camelCase("default-"+c)]=a[c]=!0,c}},m.each(m.expr.match.bool.source.match(/\w+/g),function(a,b){var c=oc[b]||m.find.attr;oc[b]=rc&&qc||!pc.test(b)?function(a,b,d){var e,f;return d||(f=oc[b],oc[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,oc[b]=f),e}:function(a,b,c){return c?void 0:a[m.camelCase("default-"+b)]?b.toLowerCase():null}}),rc&&qc||(m.attrHooks.value={set:function(a,b,c){return m.nodeName(a,"input")?void(a.defaultValue=b):mc&&mc.set(a,b,c)}}),qc||(mc={set:function(a,b,c){var d=a.getAttributeNode(c);return d||a.setAttributeNode(d=a.ownerDocument.createAttribute(c)),d.value=b+="","value"===c||b===a.getAttribute(c)?b:void 0}},oc.id=oc.name=oc.coords=function(a,b,c){var d;return c?void 0:(d=a.getAttributeNode(b))&&""!==d.value?d.value:null},m.valHooks.button={get:function(a,b){var c=a.getAttributeNode(b);return c&&c.specified?c.value:void 0},set:mc.set},m.attrHooks.contenteditable={set:function(a,b,c){mc.set(a,""===b?!1:b,c)}},m.each(["width","height"],function(a,b){m.attrHooks[b]={set:function(a,c){return""===c?(a.setAttribute(b,"auto"),c):void 0}}})),k.style||(m.attrHooks.style={get:function(a){return a.style.cssText||void 0},set:function(a,b){return a.style.cssText=b+""}});var sc=/^(?:input|select|textarea|button|object)$/i,tc=/^(?:a|area)$/i;m.fn.extend({prop:function(a,b){return V(this,m.prop,a,b,arguments.length>1)},removeProp:function(a){return a=m.propFix[a]||a,this.each(function(){try{this[a]=void 0,delete this[a]}catch(b){}})}}),m.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!m.isXMLDoc(a),f&&(b=m.propFix[b]||b,e=m.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){var b=m.find.attr(a,"tabindex");return b?parseInt(b,10):sc.test(a.nodeName)||tc.test(a.nodeName)&&a.href?0:-1}}}}),k.hrefNormalized||m.each(["href","src"],function(a,b){m.propHooks[b]={get:function(a){return a.getAttribute(b,4)}}}),k.optSelected||(m.propHooks.selected={get:function(a){var b=a.parentNode;return b&&(b.selectedIndex,b.parentNode&&b.parentNode.selectedIndex),null}}),m.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){m.propFix[this.toLowerCase()]=this}),k.enctype||(m.propFix.enctype="encoding");var uc=/[\t\r\n\f]/g;m.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j="string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).addClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=m.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0,i=this.length,j=0===arguments.length||"string"==typeof a&&a;if(m.isFunction(a))return this.each(function(b){m(this).removeClass(a.call(this,b,this.className))});if(j)for(b=(a||"").match(E)||[];i>h;h++)if(c=this[h],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(uc," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?m.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(m.isFunction(a)?function(c){m(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=m(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===K||"boolean"===c)&&(this.className&&m._data(this,"__className__",this.className),this.className=this.className||a===!1?"":m._data(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(uc," ").indexOf(b)>=0)return!0;return!1}}),m.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){m.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),m.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var vc=m.now(),wc=/\?/,xc=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;m.parseJSON=function(b){if(a.JSON&&a.JSON.parse)return a.JSON.parse(b+"");var c,d=null,e=m.trim(b+"");return e&&!m.trim(e.replace(xc,function(a,b,e,f){return c&&b&&(d=0),0===d?a:(c=e||b,d+=!f-!e,"")}))?Function("return "+e)():m.error("Invalid JSON: "+b)},m.parseXML=function(b){var c,d;if(!b||"string"!=typeof b)return null;try{a.DOMParser?(d=new DOMParser,c=d.parseFromString(b,"text/xml")):(c=new ActiveXObject("Microsoft.XMLDOM"),c.async="false",c.loadXML(b))}catch(e){c=void 0}return c&&c.documentElement&&!c.getElementsByTagName("parsererror").length||m.error("Invalid XML: "+b),c};var yc,zc,Ac=/#.*$/,Bc=/([?&])_=[^&]*/,Cc=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Dc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Ec=/^(?:GET|HEAD)$/,Fc=/^\/\//,Gc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Hc={},Ic={},Jc="*/".concat("*");try{zc=location.href}catch(Kc){zc=y.createElement("a"),zc.href="",zc=zc.href}yc=Gc.exec(zc.toLowerCase())||[];function Lc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(m.isFunction(c))while(d=f[e++])"+"===d.charAt(0)?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function Mc(a,b,c,d){var e={},f=a===Ic;function g(h){var i;return e[h]=!0,m.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function Nc(a,b){var c,d,e=m.ajaxSettings.flatOptions||{};for(d in b)void 0!==b[d]&&((e[d]?a:c||(c={}))[d]=b[d]);return c&&m.extend(!0,a,c),a}function Oc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===e&&(e=a.mimeType||b.getResponseHeader("Content-Type"));if(e)for(g in h)if(h[g]&&h[g].test(e)){i.unshift(g);break}if(i[0]in c)f=i[0];else{for(g in c){if(!i[0]||a.converters[g+" "+i[0]]){f=g;break}d||(d=g)}f=f||d}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function Pc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}m.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:zc,type:"GET",isLocal:Dc.test(yc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":Jc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":m.parseJSON,"text xml":m.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?Nc(Nc(a,m.ajaxSettings),b):Nc(m.ajaxSettings,a)},ajaxPrefilter:Lc(Hc),ajaxTransport:Lc(Ic),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=m.ajaxSetup({},b),l=k.context||k,n=k.context&&(l.nodeType||l.jquery)?m(l):m.event,o=m.Deferred(),p=m.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!j){j={};while(b=Cc.exec(f))j[b[1].toLowerCase()]=b[2]}b=j[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?f:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return i&&i.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||zc)+"").replace(Ac,"").replace(Fc,yc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=m.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(c=Gc.exec(k.url.toLowerCase()),k.crossDomain=!(!c||c[1]===yc[1]&&c[2]===yc[2]&&(c[3]||("http:"===c[1]?"80":"443"))===(yc[3]||("http:"===yc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=m.param(k.data,k.traditional)),Mc(Hc,k,b,v),2===t)return v;h=k.global,h&&0===m.active++&&m.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!Ec.test(k.type),e=k.url,k.hasContent||(k.data&&(e=k.url+=(wc.test(e)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=Bc.test(e)?e.replace(Bc,"$1_="+vc++):e+(wc.test(e)?"&":"?")+"_="+vc++)),k.ifModified&&(m.lastModified[e]&&v.setRequestHeader("If-Modified-Since",m.lastModified[e]),m.etag[e]&&v.setRequestHeader("If-None-Match",m.etag[e])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+Jc+"; q=0.01":""):k.accepts["*"]);for(d in k.headers)v.setRequestHeader(d,k.headers[d]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(d in{success:1,error:1,complete:1})v[d](k[d]);if(i=Mc(Ic,k,b,v)){v.readyState=1,h&&n.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,i.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,c,d){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),i=void 0,f=d||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,c&&(u=Oc(k,v,c)),u=Pc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(m.lastModified[e]=w),w=v.getResponseHeader("etag"),w&&(m.etag[e]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,h&&n.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),h&&(n.trigger("ajaxComplete",[v,k]),--m.active||m.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return m.get(a,b,c,"json")},getScript:function(a,b){return m.get(a,void 0,b,"script")}}),m.each(["get","post"],function(a,b){m[b]=function(a,c,d,e){return m.isFunction(c)&&(e=e||d,d=c,c=void 0),m.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),m.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){m.fn[b]=function(a){return this.on(b,a)}}),m._evalUrl=function(a){return m.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},m.fn.extend({wrapAll:function(a){if(m.isFunction(a))return this.each(function(b){m(this).wrapAll(a.call(this,b))});if(this[0]){var b=m(a,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstChild&&1===a.firstChild.nodeType)a=a.firstChild;return a}).append(this)}return this},wrapInner:function(a){return this.each(m.isFunction(a)?function(b){m(this).wrapInner(a.call(this,b))}:function(){var b=m(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=m.isFunction(a);return this.each(function(c){m(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){m.nodeName(this,"body")||m(this).replaceWith(this.childNodes)}).end()}}),m.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0||!k.reliableHiddenOffsets()&&"none"===(a.style&&a.style.display||m.css(a,"display"))},m.expr.filters.visible=function(a){return!m.expr.filters.hidden(a)};var Qc=/%20/g,Rc=/\[\]$/,Sc=/\r?\n/g,Tc=/^(?:submit|button|image|reset|file)$/i,Uc=/^(?:input|select|textarea|keygen)/i;function Vc(a,b,c,d){var e;if(m.isArray(b))m.each(b,function(b,e){c||Rc.test(a)?d(a,e):Vc(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==m.type(b))d(a,b);else for(e in b)Vc(a+"["+e+"]",b[e],c,d)}m.param=function(a,b){var c,d=[],e=function(a,b){b=m.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=m.ajaxSettings&&m.ajaxSettings.traditional),m.isArray(a)||a.jquery&&!m.isPlainObject(a))m.each(a,function(){e(this.name,this.value)});else for(c in a)Vc(c,a[c],b,e);return d.join("&").replace(Qc,"+")},m.fn.extend({serialize:function(){return m.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=m.prop(this,"elements");return a?m.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!m(this).is(":disabled")&&Uc.test(this.nodeName)&&!Tc.test(a)&&(this.checked||!W.test(a))}).map(function(a,b){var c=m(this).val();return null==c?null:m.isArray(c)?m.map(c,function(a){return{name:b.name,value:a.replace(Sc,"\r\n")}}):{name:b.name,value:c.replace(Sc,"\r\n")}}).get()}}),m.ajaxSettings.xhr=void 0!==a.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&Zc()||$c()}:Zc;var Wc=0,Xc={},Yc=m.ajaxSettings.xhr();a.ActiveXObject&&m(a).on("unload",function(){for(var a in Xc)Xc[a](void 0,!0)}),k.cors=!!Yc&&"withCredentials"in Yc,Yc=k.ajax=!!Yc,Yc&&m.ajaxTransport(function(a){if(!a.crossDomain||k.cors){var b;return{send:function(c,d){var e,f=a.xhr(),g=++Wc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)void 0!==c[e]&&f.setRequestHeader(e,c[e]+"");f.send(a.hasContent&&a.data||null),b=function(c,e){var h,i,j;if(b&&(e||4===f.readyState))if(delete Xc[g],b=void 0,f.onreadystatechange=m.noop,e)4!==f.readyState&&f.abort();else{j={},h=f.status,"string"==typeof f.responseText&&(j.text=f.responseText);try{i=f.statusText}catch(k){i=""}h||!a.isLocal||a.crossDomain?1223===h&&(h=204):h=j.text?200:404}j&&d(h,i,j,f.getAllResponseHeaders())},a.async?4===f.readyState?setTimeout(b):f.onreadystatechange=Xc[g]=b:b()},abort:function(){b&&b(void 0,!0)}}}});function Zc(){try{return new a.XMLHttpRequest}catch(b){}}function $c(){try{return new a.ActiveXObject("Microsoft.XMLHTTP")}catch(b){}}m.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return m.globalEval(a),a}}}),m.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET",a.global=!1)}),m.ajaxTransport("script",function(a){if(a.crossDomain){var b,c=y.head||m("head")[0]||y.documentElement;return{send:function(d,e){b=y.createElement("script"),b.async=!0,a.scriptCharset&&(b.charset=a.scriptCharset),b.src=a.url,b.onload=b.onreadystatechange=function(a,c){(c||!b.readyState||/loaded|complete/.test(b.readyState))&&(b.onload=b.onreadystatechange=null,b.parentNode&&b.parentNode.removeChild(b),b=null,c||e(200,"success"))},c.insertBefore(b,c.firstChild)},abort:function(){b&&b.onload(void 0,!0)}}}});var _c=[],ad=/(=)\?(?=&|$)|\?\?/;m.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=_c.pop()||m.expando+"_"+vc++;return this[a]=!0,a}}),m.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(ad.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&ad.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=m.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(ad,"$1"+e):b.jsonp!==!1&&(b.url+=(wc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||m.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,_c.push(e)),g&&m.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),m.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||y;var d=u.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=m.buildFragment([a],b,e),e&&e.length&&m(e).remove(),m.merge([],d.childNodes))};var bd=m.fn.load;m.fn.load=function(a,b,c){if("string"!=typeof a&&bd)return bd.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=m.trim(a.slice(h,a.length)),a=a.slice(0,h)),m.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(f="POST"),g.length>0&&m.ajax({url:a,type:f,dataType:"html",data:b}).done(function(a){e=arguments,g.html(d?m("<div>").append(m.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,e||[a.responseText,b,a])}),this},m.expr.filters.animated=function(a){return m.grep(m.timers,function(b){return a===b.elem}).length};var cd=a.document.documentElement;function dd(a){return m.isWindow(a)?a:9===a.nodeType?a.defaultView||a.parentWindow:!1}m.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=m.css(a,"position"),l=m(a),n={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=m.css(a,"top"),i=m.css(a,"left"),j=("absolute"===k||"fixed"===k)&&m.inArray("auto",[f,i])>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),m.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(n.top=b.top-h.top+g),null!=b.left&&(n.left=b.left-h.left+e),"using"in b?b.using.call(a,n):l.css(n)}},m.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){m.offset.setOffset(this,a,b)});var b,c,d={top:0,left:0},e=this[0],f=e&&e.ownerDocument;if(f)return b=f.documentElement,m.contains(b,e)?(typeof e.getBoundingClientRect!==K&&(d=e.getBoundingClientRect()),c=dd(f),{top:d.top+(c.pageYOffset||b.scrollTop)-(b.clientTop||0),left:d.left+(c.pageXOffset||b.scrollLeft)-(b.clientLeft||0)}):d},position:function(){if(this[0]){var a,b,c={top:0,left:0},d=this[0];return"fixed"===m.css(d,"position")?b=d.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),m.nodeName(a[0],"html")||(c=a.offset()),c.top+=m.css(a[0],"borderTopWidth",!0),c.left+=m.css(a[0],"borderLeftWidth",!0)),{top:b.top-c.top-m.css(d,"marginTop",!0),left:b.left-c.left-m.css(d,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||cd;while(a&&!m.nodeName(a,"html")&&"static"===m.css(a,"position"))a=a.offsetParent;return a||cd})}}),m.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,b){var c=/Y/.test(b);m.fn[a]=function(d){return V(this,function(a,d,e){var f=dd(a);return void 0===e?f?b in f?f[b]:f.document.documentElement[d]:a[d]:void(f?f.scrollTo(c?m(f).scrollLeft():e,c?e:m(f).scrollTop()):a[d]=e)},a,d,arguments.length,null)}}),m.each(["top","left"],function(a,b){m.cssHooks[b]=Lb(k.pixelPosition,function(a,c){return c?(c=Jb(a,b),Hb.test(c)?m(a).position()[b]+"px":c):void 0})}),m.each({Height:"height",Width:"width"},function(a,b){m.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){m.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return V(this,function(b,c,d){var e;return m.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?m.css(b,c,g):m.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),m.fn.size=function(){return this.length},m.fn.andSelf=m.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return m});var ed=a.jQuery,fd=a.$;return m.noConflict=function(b){return a.$===m&&(a.$=fd),b&&a.jQuery===m&&(a.jQuery=ed),m},typeof b===K&&(a.jQuery=a.$=m),m});jQuery.migrateMute===void 0&&(jQuery.migrateMute=!0),function(e,t,n){function r(n){var r=t.console;i[n]||(i[n]=!0,e.migrateWarnings.push(n),r&&r.warn&&!e.migrateMute&&(r.warn("JQMIGRATE: "+n),e.migrateTrace&&r.trace&&r.trace()))}function a(t,a,i,o){if(Object.defineProperty)try{return Object.defineProperty(t,a,{configurable:!0,enumerable:!0,get:function(){return r(o),i},set:function(e){r(o),i=e}}),n}catch(s){}e._definePropertyBroken=!0,t[a]=i}var i={};e.migrateWarnings=[],!e.migrateMute&&t.console&&t.console.log&&t.console.log("JQMIGRATE: Logging is active"),e.migrateTrace===n&&(e.migrateTrace=!0),e.migrateReset=function(){i={},e.migrateWarnings.length=0},"BackCompat"===document.compatMode&&r("jQuery is not compatible with Quirks Mode");var o=e("<input/>",{size:1}).attr("size")&&e.attrFn,s=e.attr,u=e.attrHooks.value&&e.attrHooks.value.get||function(){return null},c=e.attrHooks.value&&e.attrHooks.value.set||function(){return n},l=/^(?:input|button)$/i,d=/^[238]$/,p=/^(?:autofocus|autoplay|async|checked|controls|defer|disabled|hidden|loop|multiple|open|readonly|required|scoped|selected)$/i,f=/^(?:checked|selected)$/i;a(e,"attrFn",o||{},"jQuery.attrFn is deprecated"),e.attr=function(t,a,i,u){var c=a.toLowerCase(),g=t&&t.nodeType;return u&&(4>s.length&&r("jQuery.fn.attr( props, pass ) is deprecated"),t&&!d.test(g)&&(o?a in o:e.isFunction(e.fn[a])))?e(t)[a](i):("type"===a&&i!==n&&l.test(t.nodeName)&&t.parentNode&&r("Can't change the 'type' of an input or button in IE 6/7/8"),!e.attrHooks[c]&&p.test(c)&&(e.attrHooks[c]={get:function(t,r){var a,i=e.prop(t,r);return i===!0||"boolean"!=typeof i&&(a=t.getAttributeNode(r))&&a.nodeValue!==!1?r.toLowerCase():n},set:function(t,n,r){var a;return n===!1?e.removeAttr(t,r):(a=e.propFix[r]||r,a in t&&(t[a]=!0),t.setAttribute(r,r.toLowerCase())),r}},f.test(c)&&r("jQuery.fn.attr('"+c+"') may use property instead of attribute")),s.call(e,t,a,i))},e.attrHooks.value={get:function(e,t){var n=(e.nodeName||"").toLowerCase();return"button"===n?u.apply(this,arguments):("input"!==n&&"option"!==n&&r("jQuery.fn.attr('value') no longer gets properties"),t in e?e.value:null)},set:function(e,t){var a=(e.nodeName||"").toLowerCase();return"button"===a?c.apply(this,arguments):("input"!==a&&"option"!==a&&r("jQuery.fn.attr('value', val) no longer sets properties"),e.value=t,n)}};var g,h,v=e.fn.init,m=e.parseJSON,y=/^([^<]*)(<[\w\W]+>)([^>]*)$/;e.fn.init=function(t,n,a){var i;return t&&"string"==typeof t&&!e.isPlainObject(n)&&(i=y.exec(e.trim(t)))&&i[0]&&("<"!==t.charAt(0)&&r("$(html) HTML strings must start with '<' character"),i[3]&&r("$(html) HTML text after last tag is ignored"),"#"===i[0].charAt(0)&&(r("HTML string cannot start with a '#' character"),e.error("JQMIGRATE: Invalid selector string (XSS)")),n&&n.context&&(n=n.context),e.parseHTML)?v.call(this,e.parseHTML(i[2],n,!0),n,a):v.apply(this,arguments)},e.fn.init.prototype=e.fn,e.parseJSON=function(e){return e||null===e?m.apply(this,arguments):(r("jQuery.parseJSON requires a valid JSON string"),null)},e.uaMatch=function(e){e=e.toLowerCase();var t=/(chrome)[ \/]([\w.]+)/.exec(e)||/(webkit)[ \/]([\w.]+)/.exec(e)||/(opera)(?:.*version|)[ \/]([\w.]+)/.exec(e)||/(msie) ([\w.]+)/.exec(e)||0>e.indexOf("compatible")&&/(mozilla)(?:.*? rv:([\w.]+)|)/.exec(e)||[];return{browser:t[1]||"",version:t[2]||"0"}},e.browser||(g=e.uaMatch(navigator.userAgent),h={},g.browser&&(h[g.browser]=!0,h.version=g.version),h.chrome?h.webkit=!0:h.webkit&&(h.safari=!0),e.browser=h),a(e,"browser",e.browser,"jQuery.browser is deprecated"),e.sub=function(){function t(e,n){return new t.fn.init(e,n)}e.extend(!0,t,this),t.superclass=this,t.fn=t.prototype=this(),t.fn.constructor=t,t.sub=this.sub,t.fn.init=function(r,a){return a&&a instanceof e&&!(a instanceof t)&&(a=t(a)),e.fn.init.call(this,r,a,n)},t.fn.init.prototype=t.fn;var n=t(document);return r("jQuery.sub() is deprecated"),t},e.ajaxSetup({converters:{"text json":e.parseJSON}});var b=e.fn.data;e.fn.data=function(t){var a,i,o=this[0];return!o||"events"!==t||1!==arguments.length||(a=e.data(o,t),i=e._data(o,t),a!==n&&a!==i||i===n)?b.apply(this,arguments):(r("Use of jQuery.fn.data('events') is deprecated"),i)};var j=/\/(java|ecma)script/i,w=e.fn.andSelf||e.fn.addBack;e.fn.andSelf=function(){return r("jQuery.fn.andSelf() replaced by jQuery.fn.addBack()"),w.apply(this,arguments)},e.clean||(e.clean=function(t,a,i,o){a=a||document,a=!a.nodeType&&a[0]||a,a=a.ownerDocument||a,r("jQuery.clean() is deprecated");var s,u,c,l,d=[];if(e.merge(d,e.buildFragment(t,a).childNodes),i)for(c=function(e){return!e.type||j.test(e.type)?o?o.push(e.parentNode?e.parentNode.removeChild(e):e):i.appendChild(e):n},s=0;null!=(u=d[s]);s++)e.nodeName(u,"script")&&c(u)||(i.appendChild(u),u.getElementsByTagName!==n&&(l=e.grep(e.merge([],u.getElementsByTagName("script")),c),d.splice.apply(d,[s+1,0].concat(l)),s+=l.length));return d});var Q=e.event.add,x=e.event.remove,k=e.event.trigger,N=e.fn.toggle,T=e.fn.live,M=e.fn.die,S="ajaxStart|ajaxStop|ajaxSend|ajaxComplete|ajaxError|ajaxSuccess",C=RegExp("\\b(?:"+S+")\\b"),H=/(?:^|\s)hover(\.\S+|)\b/,A=function(t){return"string"!=typeof t||e.event.special.hover?t:(H.test(t)&&r("'hover' pseudo-event is deprecated, use 'mouseenter mouseleave'"),t&&t.replace(H,"mouseenter$1 mouseleave$1"))};e.event.props&&"attrChange"!==e.event.props[0]&&e.event.props.unshift("attrChange","attrName","relatedNode","srcElement"),e.event.dispatch&&a(e.event,"handle",e.event.dispatch,"jQuery.event.handle is undocumented and deprecated"),e.event.add=function(e,t,n,a,i){e!==document&&C.test(t)&&r("AJAX events should be attached to document: "+t),Q.call(this,e,A(t||""),n,a,i)},e.event.remove=function(e,t,n,r,a){x.call(this,e,A(t)||"",n,r,a)},e.fn.error=function(){var e=Array.prototype.slice.call(arguments,0);return r("jQuery.fn.error() is deprecated"),e.splice(0,0,"error"),arguments.length?this.bind.apply(this,e):(this.triggerHandler.apply(this,e),this)},e.fn.toggle=function(t,n){if(!e.isFunction(t)||!e.isFunction(n))return N.apply(this,arguments);r("jQuery.fn.toggle(handler, handler...) is deprecated");var a=arguments,i=t.guid||e.guid++,o=0,s=function(n){var r=(e._data(this,"lastToggle"+t.guid)||0)%o;return e._data(this,"lastToggle"+t.guid,r+1),n.preventDefault(),a[r].apply(this,arguments)||!1};for(s.guid=i;a.length>o;)a[o++].guid=i;return this.click(s)},e.fn.live=function(t,n,a){return r("jQuery.fn.live() is deprecated"),T?T.apply(this,arguments):(e(this.context).on(t,this.selector,n,a),this)},e.fn.die=function(t,n){return r("jQuery.fn.die() is deprecated"),M?M.apply(this,arguments):(e(this.context).off(t,this.selector||"**",n),this)},e.event.trigger=function(e,t,n,a){return n||C.test(e)||r("Global events are undocumented and deprecated"),k.call(this,e,t,n||document,a)},e.each(S.split("|"),function(t,n){e.event.special[n]={setup:function(){var t=this;return t!==document&&(e.event.add(document,n+"."+e.guid,function(){e.event.trigger(n,null,t,!0)}),e._data(this,n,e.guid++)),!1},teardown:function(){return this!==document&&e.event.remove(document,n+"."+e._data(this,n)),!1}}})}(jQuery,window);(function($,undefined){'use strict';if($.rails!==undefined){$.error('jquery-ujs has already been loaded!');}
var rails;var $document=$(document);$.rails=rails={linkClickSelector:'a[data-confirm], a[data-method], a[data-remote]:not([disabled]), a[data-disable-with], a[data-disable]',buttonClickSelector:'button[data-remote]:not([form]):not(form button), button[data-confirm]:not([form]):not(form button)',inputChangeSelector:'select[data-remote], input[data-remote], textarea[data-remote]',formSubmitSelector:'form',formInputClickSelector:'form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])',disableSelector:'input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled',enableSelector:'input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled',requiredInputSelector:'input[name][required]:not([disabled]), textarea[name][required]:not([disabled])',fileInputSelector:'input[name][type=file]:not([disabled])',linkDisableSelector:'a[data-disable-with], a[data-disable]',buttonDisableSelector:'button[data-remote][data-disable-with], button[data-remote][data-disable]',csrfToken:function(){return $('meta[name=csrf-token]').attr('content');},csrfParam:function(){return $('meta[name=csrf-param]').attr('content');},CSRFProtection:function(xhr){var token=rails.csrfToken();if(token)xhr.setRequestHeader('X-CSRF-Token',token);},refreshCSRFTokens:function(){$('form input[name="'+rails.csrfParam()+'"]').val(rails.csrfToken());},fire:function(obj,name,data){var event=$.Event(name);obj.trigger(event,data);return event.result!==false;},confirm:function(message){return confirm(message);},ajax:function(options){return $.ajax(options);},href:function(element){return element[0].href;},isRemote:function(element){return element.data('remote')!==undefined&&element.data('remote')!==false;},handleRemote:function(element){var method,url,data,withCredentials,dataType,options;if(rails.fire(element,'ajax:before')){withCredentials=element.data('with-credentials')||null;dataType=element.data('type')||($.ajaxSettings&&$.ajaxSettings.dataType);if(element.is('form')){method=element.data('ujs:submit-button-formmethod')||element.attr('method');url=element.data('ujs:submit-button-formaction')||element.attr('action');data=$(element[0]).serializeArray();var button=element.data('ujs:submit-button');if(button){data.push(button);element.data('ujs:submit-button',null);}
element.data('ujs:submit-button-formmethod',null);element.data('ujs:submit-button-formaction',null);}else if(element.is(rails.inputChangeSelector)){method=element.data('method');url=element.data('url');data=element.serialize();if(element.data('params'))data=data+'&'+element.data('params');}else if(element.is(rails.buttonClickSelector)){method=element.data('method')||'get';url=element.data('url');data=element.serialize();if(element.data('params'))data=data+'&'+element.data('params');}else{method=element.data('method');url=rails.href(element);data=element.data('params')||null;}
options={type:method||'GET',data:data,dataType:dataType,beforeSend:function(xhr,settings){if(settings.dataType===undefined){xhr.setRequestHeader('accept','*/*;q=0.5, '+settings.accepts.script);}
if(rails.fire(element,'ajax:beforeSend',[xhr,settings])){element.trigger('ajax:send',xhr);}else{return false;}},success:function(data,status,xhr){element.trigger('ajax:success',[data,status,xhr]);},complete:function(xhr,status){element.trigger('ajax:complete',[xhr,status]);},error:function(xhr,status,error){element.trigger('ajax:error',[xhr,status,error]);},crossDomain:rails.isCrossDomain(url)};if(withCredentials){options.xhrFields={withCredentials:withCredentials};}
if(url){options.url=url;}
return rails.ajax(options);}else{return false;}},isCrossDomain:function(url){var originAnchor=document.createElement('a');originAnchor.href=location.href;var urlAnchor=document.createElement('a');try{urlAnchor.href=url;urlAnchor.href=urlAnchor.href;return!(((!urlAnchor.protocol||urlAnchor.protocol===':')&&!urlAnchor.host)||(originAnchor.protocol+'//'+originAnchor.host===urlAnchor.protocol+'//'+urlAnchor.host));}catch(e){return true;}},handleMethod:function(link){var href=rails.href(link),method=link.data('method'),target=link.attr('target'),csrfToken=rails.csrfToken(),csrfParam=rails.csrfParam(),form=$('<form method="post" action="'+href+'"></form>'),metadataInput='<input name="_method" value="'+method+'" type="hidden" />';if(csrfParam!==undefined&&csrfToken!==undefined&&!rails.isCrossDomain(href)){metadataInput+='<input name="'+csrfParam+'" value="'+csrfToken+'" type="hidden" />';}
if(target){form.attr('target',target);}
form.hide().append(metadataInput).appendTo('body');form.submit();},formElements:function(form,selector){return form.is('form')?$(form[0].elements).filter(selector):form.find(selector);},disableFormElements:function(form){rails.formElements(form,rails.disableSelector).each(function(){rails.disableFormElement($(this));});},disableFormElement:function(element){var method,replacement;method=element.is('button')?'html':'val';replacement=element.data('disable-with');if(replacement!==undefined){element.data('ujs:enable-with',element[method]());element[method](replacement);}
element.prop('disabled',true);element.data('ujs:disabled',true);},enableFormElements:function(form){rails.formElements(form,rails.enableSelector).each(function(){rails.enableFormElement($(this));});},enableFormElement:function(element){var method=element.is('button')?'html':'val';if(element.data('ujs:enable-with')!==undefined){element[method](element.data('ujs:enable-with'));element.removeData('ujs:enable-with');}
element.prop('disabled',false);element.removeData('ujs:disabled');},allowAction:function(element){var message=element.data('confirm'),answer=false,callback;if(!message){return true;}
if(rails.fire(element,'confirm')){try{answer=rails.confirm(message);}catch(e){(console.error||console.log).call(console,e.stack||e);}
callback=rails.fire(element,'confirm:complete',[answer]);}
return answer&&callback;},blankInputs:function(form,specifiedSelector,nonBlank){var foundInputs=$(),input,valueToCheck,radiosForNameWithNoneSelected,radioName,selector=specifiedSelector||'input,textarea',requiredInputs=form.find(selector),checkedRadioButtonNames={};requiredInputs.each(function(){input=$(this);if(input.is('input[type=radio]')){radioName=input.attr('name');if(!checkedRadioButtonNames[radioName]){if(form.find('input[type=radio]:checked[name="'+radioName+'"]').length===0){radiosForNameWithNoneSelected=form.find('input[type=radio][name="'+radioName+'"]');foundInputs=foundInputs.add(radiosForNameWithNoneSelected);}
checkedRadioButtonNames[radioName]=radioName;}}else{valueToCheck=input.is('input[type=checkbox],input[type=radio]')?input.is(':checked'):!!input.val();if(valueToCheck===nonBlank){foundInputs=foundInputs.add(input);}}});return foundInputs.length?foundInputs:false;},nonBlankInputs:function(form,specifiedSelector){return rails.blankInputs(form,specifiedSelector,true);},stopEverything:function(e){$(e.target).trigger('ujs:everythingStopped');e.stopImmediatePropagation();return false;},disableElement:function(element){var replacement=element.data('disable-with');if(replacement!==undefined){element.data('ujs:enable-with',element.html());element.html(replacement);}
element.on('click.railsDisable',function(e){return rails.stopEverything(e);});element.data('ujs:disabled',true);},enableElement:function(element){if(element.data('ujs:enable-with')!==undefined){element.html(element.data('ujs:enable-with'));element.removeData('ujs:enable-with');}
element.off('click.railsDisable');element.removeData('ujs:disabled');}};if(rails.fire($document,'rails:attachBindings')){$.ajaxPrefilter(function(options,originalOptions,xhr){if(!options.crossDomain){rails.CSRFProtection(xhr);}});$(window).on('pageshow.rails',function(){$($.rails.enableSelector).each(function(){var element=$(this);if(element.data('ujs:disabled')){$.rails.enableFormElement(element);}});$($.rails.linkDisableSelector).each(function(){var element=$(this);if(element.data('ujs:disabled')){$.rails.enableElement(element);}});});$document.on('ajax:complete',rails.linkDisableSelector,function(){rails.enableElement($(this));});$document.on('ajax:complete',rails.buttonDisableSelector,function(){rails.enableFormElement($(this));});$document.on('click.rails',rails.linkClickSelector,function(e){var link=$(this),method=link.data('method'),data=link.data('params'),metaClick=e.metaKey||e.ctrlKey;if(!rails.allowAction(link))return rails.stopEverything(e);if(!metaClick&&link.is(rails.linkDisableSelector))rails.disableElement(link);if(rails.isRemote(link)){if(metaClick&&(!method||method==='GET')&&!data){return true;}
var handleRemote=rails.handleRemote(link);if(handleRemote===false){rails.enableElement(link);}else{handleRemote.fail(function(){rails.enableElement(link);});}
return false;}else if(method){rails.handleMethod(link);return false;}});$document.on('click.rails',rails.buttonClickSelector,function(e){var button=$(this);if(!rails.allowAction(button)||!rails.isRemote(button))return rails.stopEverything(e);if(button.is(rails.buttonDisableSelector))rails.disableFormElement(button);var handleRemote=rails.handleRemote(button);if(handleRemote===false){rails.enableFormElement(button);}else{handleRemote.fail(function(){rails.enableFormElement(button);});}
return false;});$document.on('change.rails',rails.inputChangeSelector,function(e){var link=$(this);if(!rails.allowAction(link)||!rails.isRemote(link))return rails.stopEverything(e);rails.handleRemote(link);return false;});$document.on('submit.rails',rails.formSubmitSelector,function(e){var form=$(this),remote=rails.isRemote(form),blankRequiredInputs,nonBlankFileInputs;if(!rails.allowAction(form))return rails.stopEverything(e);if(form.attr('novalidate')===undefined){if(form.data('ujs:formnovalidate-button')===undefined){blankRequiredInputs=rails.blankInputs(form,rails.requiredInputSelector,false);if(blankRequiredInputs&&rails.fire(form,'ajax:aborted:required',[blankRequiredInputs])){return rails.stopEverything(e);}}else{form.data('ujs:formnovalidate-button',undefined);}}
if(remote){nonBlankFileInputs=rails.nonBlankInputs(form,rails.fileInputSelector);if(nonBlankFileInputs){setTimeout(function(){rails.disableFormElements(form);},13);var aborted=rails.fire(form,'ajax:aborted:file',[nonBlankFileInputs]);if(!aborted){setTimeout(function(){rails.enableFormElements(form);},13);}
return aborted;}
rails.handleRemote(form);return false;}else{setTimeout(function(){rails.disableFormElements(form);},13);}});$document.on('click.rails',rails.formInputClickSelector,function(event){var button=$(this);if(!rails.allowAction(button))return rails.stopEverything(event);var name=button.attr('name'),data=name?{name:name,value:button.val()}:null;var form=button.closest('form');if(form.length===0){form=$('#'+button.attr('form'));}
form.data('ujs:submit-button',data);form.data('ujs:formnovalidate-button',button.attr('formnovalidate'));form.data('ujs:submit-button-formaction',button.attr('formaction'));form.data('ujs:submit-button-formmethod',button.attr('formmethod'));});$document.on('ajax:send.rails',rails.formSubmitSelector,function(event){if(this===event.target)rails.disableFormElements($(this));});$document.on('ajax:complete.rails',rails.formSubmitSelector,function(event){if(this===event.target)rails.enableFormElements($(this));});$(function(){rails.refreshCSRFTokens();});}})(jQuery);(function($){$.fn.spinner=function(options){var opts=$.extend({},$.fn.spinner.defaults,options);return this.each(function(){var l=0,t=0,w=0,h=0,shim=0,$s;var $this=$(this);if(options=='remove'||options=='close'){var $s=$this.data('spinner');var o=$this.data('opts');if(typeof $s!='undefined'){$s.remove();$this.removeData('spinner').removeData('opts');if(o.hide)$this.css('visibility','visible');o.onFinish.call(this);}
return;}
var pos=$this.offset();w=$this.outerWidth();h=$this.outerHeight();if(h>opts.height)shim=Math.round((h-opts.height)/2);else if(h<opts.height)shim=0-Math.round((opts.height-h)/2);t=pos.top+shim+'px';if(opts.position=='right'){l=pos.left+w+10+'px';}else if(opts.position=='left'){l=pos.left-opts.width-10+'px';}else if(opts.position&&isFinite(opts.position.top)&&isFinite(opts.position.left)){t=(pos.top+opts.position.top)+'px';l=(pos.left+opts.position.left)+'px';}else{l=pos.left+Math.round(.5*w)-Math.round(.5*opts.width)+'px';}
opts.onStart.call(this);if(opts.hide)$this.css('visibility','hidden');$s=$('<img src="'+opts.img+'" style="position: absolute; left: '+l+'; top: '+t+'; width: '+opts.width+'px; height: '+opts.height+'px; z-index: '+opts.zIndex+';" />').appendTo('body');$this.data('spinner',$s).data('opts',opts);});};$.fn.spinner.defaults={position:'right',img:'/images/spinner.gif',height:32,width:32,zIndex:1001,hide:false,onStart:function(){},onFinish:function(){}};})(jQuery);;(function(f,h,$){var a='placeholder'in h.createElement('input'),d='placeholder'in h.createElement('textarea'),i=$.fn,c=$.valHooks,k,j;if(a&&d){j=i.placeholder=function(){return this};j.input=j.textarea=true}else{j=i.placeholder=function(){var l=this;l.filter((a?'textarea':':input')+'[placeholder]').not('.placeholder').bind({'focus.placeholder':b,'blur.placeholder':e}).data('placeholder-enabled',true).trigger('blur.placeholder');return l};j.input=a;j.textarea=d;k={get:function(m){var l=$(m);return l.data('placeholder-enabled')&&l.hasClass('placeholder')?'':m.value},set:function(m,n){var l=$(m);if(!l.data('placeholder-enabled')){return m.value=n}if(n==''){m.value=n;if(m!=h.activeElement){e.call(m)}}else{if(l.hasClass('placeholder')){b.call(m,true,n)||(m.value=n)}else{m.value=n}}return l}};a||(c.input=k);d||(c.textarea=k);$(function(){$(h).delegate('form','submit.placeholder',function(){var l=$('.placeholder',this).each(b);setTimeout(function(){l.each(e)},10)})});$(f).bind('beforeunload.placeholder',function(){$('.placeholder').each(function(){this.value=''})})}function g(m){var l={},n=/^jQuery\d+$/;$.each(m.attributes,function(p,o){if(o.specified&&!n.test(o.name)){l[o.name]=o.value}});return l}function b(m,n){var l=this,o=$(l);if(l.value==o.attr('placeholder')&&o.hasClass('placeholder')){if(o.data('placeholder-password')){o=o.hide().next().show().attr('id',o.removeAttr('id').data('placeholder-id'));if(m===true){return o[0].value=n}o.focus()}else{l.value='';o.removeClass('placeholder');l==h.activeElement&&l.select()}}}function e(){var q,l=this,p=$(l),m=p,o=this.id;if(l.value==''){if(l.type=='password'){if(!p.data('placeholder-textinput')){try{q=p.clone().attr({type:'text'})}catch(n){q=$('<input>').attr($.extend(g(this),{type:'text'}))}q.removeAttr('name').data({'placeholder-password':true,'placeholder-id':o}).bind('focus.placeholder',b);p.data({'placeholder-textinput':q,'placeholder-id':o}).before(q)}p=p.removeAttr('id').hide().prev().attr('id',o).show()}p.addClass('placeholder');p[0].value=p.attr('placeholder')}else{p.removeClass('placeholder')}}}(this,document,jQuery));(function($){$.belowthefold=function(element,settings){var fold=$(window).height()+$(window).scrollTop();return fold<=$(element).offset().top-settings.threshold;};$.abovethetop=function(element,settings){var top=$(window).scrollTop();return top>=$(element).offset().top+$(element).height()-settings.threshold;};$.rightofscreen=function(element,settings){var fold=$(window).width()+$(window).scrollLeft();return fold<=$(element).offset().left-settings.threshold;};$.leftofscreen=function(element,settings){var left=$(window).scrollLeft();return left>=$(element).offset().left+$(element).width()-settings.threshold;};$.inviewport=function(element,settings){return!$.rightofscreen(element,settings)&&!$.leftofscreen(element,settings)&&!$.belowthefold(element,settings)&&!$.abovethetop(element,settings);};$.extend($.expr[':'],{"below-the-fold":function(a,i,m){return $.belowthefold(a,{threshold:0});},"above-the-top":function(a,i,m){return $.abovethetop(a,{threshold:0});},"left-of-screen":function(a,i,m){return $.leftofscreen(a,{threshold:0});},"right-of-screen":function(a,i,m){return $.rightofscreen(a,{threshold:0});},"in-viewport":function(a,i,m){return $.inviewport(a,{threshold:0});}});})(jQuery);!function(){"use strict";function t(o){if(!o)throw new Error("No options passed to Waypoint constructor");if(!o.element)throw new Error("No element option passed to Waypoint constructor");if(!o.handler)throw new Error("No handler option passed to Waypoint constructor");this.key="waypoint-"+e,this.options=t.Adapter.extend({},t.defaults,o),this.element=this.options.element,this.adapter=new t.Adapter(this.element),this.callback=o.handler,this.axis=this.options.horizontal?"horizontal":"vertical",this.enabled=this.options.enabled,this.triggerPoint=null,this.group=t.Group.findOrCreate({name:this.options.group,axis:this.axis}),this.context=t.Context.findOrCreateByElement(this.options.context),t.offsetAliases[this.options.offset]&&(this.options.offset=t.offsetAliases[this.options.offset]),this.group.add(this),this.context.add(this),i[this.key]=this,e+=1}var e=0,i={};t.prototype.queueTrigger=function(t){this.group.queueTrigger(this,t)},t.prototype.trigger=function(t){this.enabled&&this.callback&&this.callback.apply(this,t)},t.prototype.destroy=function(){this.context.remove(this),this.group.remove(this),delete i[this.key]},t.prototype.disable=function(){return this.enabled=!1,this},t.prototype.enable=function(){return this.context.refresh(),this.enabled=!0,this},t.prototype.next=function(){return this.group.next(this)},t.prototype.previous=function(){return this.group.previous(this)},t.invokeAll=function(t){var e=[];for(var o in i)e.push(i[o]);for(var n=0,r=e.length;r>n;n++)e[n][t]()},t.destroyAll=function(){t.invokeAll("destroy")},t.disableAll=function(){t.invokeAll("disable")},t.enableAll=function(){t.invokeAll("enable")},t.refreshAll=function(){t.Context.refreshAll()},t.viewportHeight=function(){return window.innerHeight||document.documentElement.clientHeight},t.viewportWidth=function(){return document.documentElement.clientWidth},t.adapters=[],t.defaults={context:window,continuous:!0,enabled:!0,group:"default",horizontal:!1,offset:0},t.offsetAliases={"bottom-in-view":function(){return this.context.innerHeight()-this.adapter.outerHeight()},"right-in-view":function(){return this.context.innerWidth()-this.adapter.outerWidth()}},window.Waypoint=t}(),function(){"use strict";function t(t){window.setTimeout(t,1e3/60)}function e(t){this.element=t,this.Adapter=n.Adapter,this.adapter=new this.Adapter(t),this.key="waypoint-context-"+i,this.didScroll=!1,this.didResize=!1,this.oldScroll={x:this.adapter.scrollLeft(),y:this.adapter.scrollTop()},this.waypoints={vertical:{},horizontal:{}},t.waypointContextKey=this.key,o[t.waypointContextKey]=this,i+=1,this.createThrottledScrollHandler(),this.createThrottledResizeHandler()}var i=0,o={},n=window.Waypoint,r=window.onload;e.prototype.add=function(t){var e=t.options.horizontal?"horizontal":"vertical";this.waypoints[e][t.key]=t,this.refresh()},e.prototype.checkEmpty=function(){var t=this.Adapter.isEmptyObject(this.waypoints.horizontal),e=this.Adapter.isEmptyObject(this.waypoints.vertical);t&&e&&(this.adapter.off(".waypoints"),delete o[this.key])},e.prototype.createThrottledResizeHandler=function(){function t(){e.handleResize(),e.didResize=!1}var e=this;this.adapter.on("resize.waypoints",function(){e.didResize||(e.didResize=!0,n.requestAnimationFrame(t))})},e.prototype.createThrottledScrollHandler=function(){function t(){e.handleScroll(),e.didScroll=!1}var e=this;this.adapter.on("scroll.waypoints",function(){(!e.didScroll||n.isTouch)&&(e.didScroll=!0,n.requestAnimationFrame(t))})},e.prototype.handleResize=function(){n.Context.refreshAll()},e.prototype.handleScroll=function(){var t={},e={horizontal:{newScroll:this.adapter.scrollLeft(),oldScroll:this.oldScroll.x,forward:"right",backward:"left"},vertical:{newScroll:this.adapter.scrollTop(),oldScroll:this.oldScroll.y,forward:"down",backward:"up"}};for(var i in e){var o=e[i],n=o.newScroll>o.oldScroll,r=n?o.forward:o.backward;for(var s in this.waypoints[i]){var a=this.waypoints[i][s],l=o.oldScroll<a.triggerPoint,h=o.newScroll>=a.triggerPoint,p=l&&h,u=!l&&!h;(p||u)&&(a.queueTrigger(r),t[a.group.id]=a.group)}}for(var c in t)t[c].flushTriggers();this.oldScroll={x:e.horizontal.newScroll,y:e.vertical.newScroll}},e.prototype.innerHeight=function(){return this.element==this.element.window?n.viewportHeight():this.adapter.innerHeight()},e.prototype.remove=function(t){delete this.waypoints[t.axis][t.key],this.checkEmpty()},e.prototype.innerWidth=function(){return this.element==this.element.window?n.viewportWidth():this.adapter.innerWidth()},e.prototype.destroy=function(){var t=[];for(var e in this.waypoints)for(var i in this.waypoints[e])t.push(this.waypoints[e][i]);for(var o=0,n=t.length;n>o;o++)t[o].destroy()},e.prototype.refresh=function(){var t,e=this.element==this.element.window,i=this.adapter.offset(),o={};this.handleScroll(),t={horizontal:{contextOffset:e?0:i.left,contextScroll:e?0:this.oldScroll.x,contextDimension:this.innerWidth(),oldScroll:this.oldScroll.x,forward:"right",backward:"left",offsetProp:"left"},vertical:{contextOffset:e?0:i.top,contextScroll:e?0:this.oldScroll.y,contextDimension:this.innerHeight(),oldScroll:this.oldScroll.y,forward:"down",backward:"up",offsetProp:"top"}};for(var n in t){var r=t[n];for(var s in this.waypoints[n]){var a,l,h,p,u,c=this.waypoints[n][s],d=c.options.offset,f=c.triggerPoint,w=0,y=null==f;c.element!==c.element.window&&(w=c.adapter.offset()[r.offsetProp]),"function"==typeof d?d=d.apply(c):"string"==typeof d&&(d=parseFloat(d),c.options.offset.indexOf("%")>-1&&(d=Math.ceil(r.contextDimension*d/100))),a=r.contextScroll-r.contextOffset,c.triggerPoint=w+a-d,l=f<r.oldScroll,h=c.triggerPoint>=r.oldScroll,p=l&&h,u=!l&&!h,!y&&p?(c.queueTrigger(r.backward),o[c.group.id]=c.group):!y&&u?(c.queueTrigger(r.forward),o[c.group.id]=c.group):y&&r.oldScroll>=c.triggerPoint&&(c.queueTrigger(r.forward),o[c.group.id]=c.group)}}for(var g in o)o[g].flushTriggers();return this},e.findOrCreateByElement=function(t){return e.findByElement(t)||new e(t)},e.refreshAll=function(){for(var t in o)o[t].refresh()},e.findByElement=function(t){return o[t.waypointContextKey]},window.onload=function(){r&&r(),e.refreshAll()},n.requestAnimationFrame=function(e){var i=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||t;i.call(window,e)},n.Context=e}(),function(){"use strict";function t(t,e){return t.triggerPoint-e.triggerPoint}function e(t,e){return e.triggerPoint-t.triggerPoint}function i(t){this.name=t.name,this.axis=t.axis,this.id=this.name+"-"+this.axis,this.waypoints=[],this.clearTriggerQueues(),o[this.axis][this.name]=this}var o={vertical:{},horizontal:{}},n=window.Waypoint;i.prototype.add=function(t){this.waypoints.push(t)},i.prototype.clearTriggerQueues=function(){this.triggerQueues={up:[],down:[],left:[],right:[]}},i.prototype.flushTriggers=function(){for(var i in this.triggerQueues){var o=this.triggerQueues[i],n="up"===i||"left"===i;o.sort(n?e:t);for(var r=0,s=o.length;s>r;r+=1){var a=o[r];(a.options.continuous||r===o.length-1)&&a.trigger([i])}}this.clearTriggerQueues()},i.prototype.next=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints),o=i===this.waypoints.length-1;return o?null:this.waypoints[i+1]},i.prototype.previous=function(e){this.waypoints.sort(t);var i=n.Adapter.inArray(e,this.waypoints);return i?this.waypoints[i-1]:null},i.prototype.queueTrigger=function(t,e){this.triggerQueues[e].push(t)},i.prototype.remove=function(t){var e=n.Adapter.inArray(t,this.waypoints);e>-1&&this.waypoints.splice(e,1)},i.prototype.first=function(){return this.waypoints[0]},i.prototype.last=function(){return this.waypoints[this.waypoints.length-1]},i.findOrCreate=function(t){return o[t.axis][t.name]||new i(t)},n.Group=i}(),function(){"use strict";function t(t){this.$element=e(t)}var e=window.jQuery,i=window.Waypoint;e.each(["innerHeight","innerWidth","off","offset","on","outerHeight","outerWidth","scrollLeft","scrollTop"],function(e,i){t.prototype[i]=function(){var t=Array.prototype.slice.call(arguments);return this.$element[i].apply(this.$element,t)}}),e.each(["extend","inArray","isEmptyObject"],function(i,o){t[o]=e[o]}),i.adapters.push({name:"jquery",Adapter:t}),i.Adapter=t}(),function(){"use strict";function t(t){return function(){var i=[],o=arguments[0];return t.isFunction(arguments[0])&&(o=t.extend({},arguments[1]),o.handler=arguments[0]),this.each(function(){var n=t.extend({},o,{element:this});"string"==typeof n.context&&(n.context=t(this).closest(n.context)[0]),i.push(new e(n))}),i}}var e=window.Waypoint;window.jQuery&&(window.jQuery.fn.waypoint=t(window.jQuery)),window.Zepto&&(window.Zepto.fn.waypoint=t(window.Zepto))}();(function($){$.timeago=function(timestamp){if(timestamp instanceof Date){return inWords(timestamp);}else if(typeof timestamp==="string"){return inWords($.timeago.parse(timestamp));}else if(typeof timestamp==="number"){return inWords(new Date(timestamp));}else{return inWords($.timeago.datetime(timestamp));}};var $t=$.timeago;$.extend($.timeago,{settings:{refreshMillis:60000,allowFuture:false,strings:{prefixAgo:null,prefixFromNow:null,suffixAgo:"ago",suffixFromNow:"from now",seconds:"less than a minute",minute:"about a minute",minutes:"%d minutes",hour:"about an hour",hours:"about %d hours",day:"a day",days:"%d days",month:"about a month",months:"%d months",year:"about a year",years:"%d years",wordSeparator:" ",numbers:[]}},inWords:function(distanceMillis){var $l=this.settings.strings;var prefix=$l.prefixAgo;var suffix=$l.suffixAgo;if(this.settings.allowFuture){if(distanceMillis<0){prefix=$l.prefixFromNow;suffix=$l.suffixFromNow;}}
var seconds=Math.abs(distanceMillis)/1000;var minutes=seconds/60;var hours=minutes/60;var days=hours/24;var years=days/365;function substitute(stringOrFunction,number){var string=$.isFunction(stringOrFunction)?stringOrFunction(number,distanceMillis):stringOrFunction;var value=($l.numbers&&$l.numbers[number])||number;return string.replace(/%d/i,value);}
var words=seconds<45&&substitute($l.seconds,Math.round(seconds))||seconds<90&&substitute($l.minute,1)||minutes<45&&substitute($l.minutes,Math.round(minutes))||minutes<90&&substitute($l.hour,1)||hours<24&&substitute($l.hours,Math.round(hours))||hours<42&&substitute($l.day,1)||days<30&&substitute($l.days,Math.round(days))||days<45&&substitute($l.month,1)||days<365&&substitute($l.months,Math.round(days/30))||years<1.5&&substitute($l.year,1)||substitute($l.years,Math.round(years));var separator=$l.wordSeparator===undefined?" ":$l.wordSeparator;return $.trim([prefix,words,suffix].join(separator));},parse:function(iso8601){var s=$.trim(iso8601);s=s.replace(/\.\d+/,"");s=s.replace(/-/,"/").replace(/-/,"/");s=s.replace(/T/," ").replace(/Z/," UTC");s=s.replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2");return new Date(s);},datetime:function(elem){var iso8601=$t.isTime(elem)?$(elem).attr("datetime"):$(elem).attr("title");return $t.parse(iso8601);},isTime:function(elem){return $(elem).get(0).tagName.toLowerCase()==="time";}});$.fn.timeago=function(){var self=this;self.each(refresh);var $s=$t.settings;if($s.refreshMillis>0){setInterval(function(){self.each(refresh);},$s.refreshMillis);}
return self;};function refresh(){var data=prepareData(this);if(!isNaN(data.datetime)){$(this).text(inWords(data.datetime));}
return this;}
function prepareData(element){element=$(element);if(!element.data("timeago")){element.data("timeago",{datetime:$t.datetime(element)});var text=$.trim(element.text());if(text.length>0&&!($t.isTime(element)&&element.attr("title"))){element.attr("title",text);}}
return element.data("timeago");}
function inWords(date){return $t.inWords(distance(date));}
function distance(date){return(new Date().getTime()-date.getTime());}
document.createElement("abbr");document.createElement("time");}(jQuery));(function($){$.fn.hashForm=function(){var self=this,$self=$(this);self.wrapStringValue=function(value){if(typeof value==='string'){value='"'+value+'"';}
return value;};self.expandArrayToString=function(arrayValue){var stringValue='[';$.each(arrayValue,function(index,value){stringValue+=self.wrapStringValue(value)+',';});stringValue=stringValue.slice(0,stringValue.length-1);stringValue+=']';return stringValue;};self.expandStringFieldToHash=function(fieldName,fieldValue){var keys=fieldName.replace(/\]/g,'').split('[');var hashStart='{';var hashEnd='';$.each(keys,function(index,value){hashStart+='"'+value+'":{';hashEnd+='}';});hashStart=hashStart.slice(0,hashStart.length-1);if($.isArray(fieldValue)){fieldValue=self.expandArrayToString(fieldValue);}else{fieldValue=self.wrapStringValue(fieldValue);}
hashStart+=fieldValue;var hash=hashStart+hashEnd;return JSON.parse(hash);};self.formHash={};self.addHashFieldToFormHash=function(hashField){$.extend(true,self.formHash,hashField);};self.serializedFormData=$self.serializeArray();self.filteredFields={};$.each(self.serializedFormData,function(index,field){if(self.filteredFields[field.name]){var existentData=self.filteredFields[field.name];if(!$.isArray(existentData)){self.filteredFields[field.name]=[existentData];}
self.filteredFields[field.name].push(field.value);}else{self.filteredFields[field.name]=field.value;}});$.each(self.filteredFields,function(name,value){var hashField=self.expandStringFieldToHash(name,value);self.addHashFieldToFormHash(hashField);});return self.formHash;};})(jQuery);(function($){$.extend($.fn,{livequery:function(type,fn,fn2){var self=this,q;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&type==query.type&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid))
return(q=query)&&false;});q=q||new $.livequery(this.selector,this.context,type,fn,fn2);q.stopped=false;q.run();return this;},expire:function(type,fn,fn2){var self=this;if($.isFunction(type))
fn2=fn,fn=type,type=undefined;$.each($.livequery.queries,function(i,query){if(self.selector==query.selector&&self.context==query.context&&(!type||type==query.type)&&(!fn||fn.$lqguid==query.fn.$lqguid)&&(!fn2||fn2.$lqguid==query.fn2.$lqguid)&&!this.stopped)
$.livequery.stop(query.id);});return this;}});$.livequery=function(selector,context,type,fn,fn2){this.selector=selector;this.context=context||document;this.type=type;this.fn=fn;this.fn2=fn2;this.elements=[];this.stopped=false;this.id=$.livequery.queries.push(this)-1;fn.$lqguid=fn.$lqguid||$.livequery.guid++;if(fn2)fn2.$lqguid=fn2.$lqguid||$.livequery.guid++;return this;};$.livequery.prototype={stop:function(){var query=this;if(this.type)
this.elements.unbind(this.type,this.fn);else if(this.fn2)
this.elements.each(function(i,el){query.fn2.apply(el);});this.elements=[];this.stopped=true;},run:function(){if(this.stopped)return;var query=this;var oEls=this.elements,els=$(this.selector,this.context),nEls=els.not(oEls);this.elements=els;if(this.type){nEls.bind(this.type,this.fn);if(oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
$.event.remove(el,query.type,query.fn);});}
else{nEls.each(function(){query.fn.apply(this);});if(this.fn2&&oEls.length>0)
$.each(oEls,function(i,el){if($.inArray(el,els)<0)
query.fn2.apply(el);});}}};$.extend($.livequery,{guid:0,queries:[],queue:[],running:false,timeout:null,checkQueue:function(){if($.livequery.running&&$.livequery.queue.length){var length=$.livequery.queue.length;while(length--)
$.livequery.queries[$.livequery.queue.shift()].run();}},pause:function(){$.livequery.running=false;},play:function(){$.livequery.running=true;$.livequery.run();},registerPlugin:function(){$.each(arguments,function(i,n){if(!$.fn[n])return;var old=$.fn[n];$.fn[n]=function(){var r=old.apply(this,arguments);$.livequery.run();return r;}});},run:function(id){if(id!=undefined){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);}
else
$.each($.livequery.queries,function(id){if($.inArray(id,$.livequery.queue)<0)
$.livequery.queue.push(id);});if($.livequery.timeout)clearTimeout($.livequery.timeout);$.livequery.timeout=setTimeout($.livequery.checkQueue,20);},stop:function(id){if(id!=undefined)
$.livequery.queries[id].stop();else
$.each($.livequery.queries,function(id){$.livequery.queries[id].stop();});}});$.livequery.registerPlugin('append','prepend','after','before','wrap','attr','removeAttr','addClass','removeClass','toggleClass','empty','remove');$(function(){$.livequery.play();});var init=$.prototype.init;$.prototype.init=function(a,c){var r=init.apply(this,arguments);if(a&&a.selector)
r.context=a.context,r.selector=a.selector;if(typeof a=='string')
r.context=c||document,r.selector=a;return r;};$.prototype.init.prototype=$.prototype;})(jQuery);(function($){$.fn.lightBox=function(settings){settings=jQuery.extend({overlayBgColor:'#000',overlayOpacity:0.8,fixedNavigation:false,imageLoading:'/images/lightbox-ico-loading.gif',imageBtnPrev:'/images/lightbox-btn-prev.gif',imageBtnNext:'/images/lightbox-btn-next.gif',imageBtnClose:'/images/lightbox-btn-close.gif',imageBlank:'/images/lightbox-blank.gif',containerBorderSize:10,containerResizeSpeed:400,txtImage:'Image',txtOf:'of',keyToClose:'c',keyToPrev:'p',keyToNext:'n',imageArray:[],activeImage:0},settings);var jQueryMatchedObj=this;function _initialize(){_start(this,jQueryMatchedObj);return false;}
function _start(objClicked,jQueryMatchedObj){$('embed, object, select').css({'visibility':'hidden'});_set_interface();settings.imageArray.length=0;settings.activeImage=0;if(jQueryMatchedObj.length==1){settings.imageArray.push(new Array(objClicked.getAttribute('href'),objClicked.getAttribute('title')));}else{for(var i=0;i<jQueryMatchedObj.length;i++){settings.imageArray.push(new Array(jQueryMatchedObj[i].getAttribute('href'),jQueryMatchedObj[i].getAttribute('title')));}}
while(settings.imageArray[settings.activeImage][0]!=objClicked.getAttribute('href')){settings.activeImage++;}
_set_image_to_view();}
function _set_interface(){$('body').append('<div id="jquery-overlay"></div><div id="jquery-lightbox"><div id="lightbox-container-image-box"><div id="lightbox-container-image"><img id="lightbox-image"><div style="" id="lightbox-nav"><a href="#" id="lightbox-nav-btnPrev"></a><a href="#" id="lightbox-nav-btnNext"></a></div><div id="lightbox-loading"><a href="#" id="lightbox-loading-link"><img src="'+settings.imageLoading+'"></a></div></div></div><div id="lightbox-container-image-data-box"><div id="lightbox-container-image-data"><div id="lightbox-image-details"><span id="lightbox-image-details-caption"></span><span id="lightbox-image-details-currentNumber"></span></div><div id="lightbox-secNav"><a href="#" id="lightbox-secNav-btnClose"><img src="'+settings.imageBtnClose+'"></a></div></div></div></div>');var arrPageSizes=___getPageSize();$('#jquery-overlay').css({backgroundColor:settings.overlayBgColor,opacity:settings.overlayOpacity,width:arrPageSizes[0],height:arrPageSizes[1]}).fadeIn();var arrPageScroll=___getPageScroll();$('#jquery-lightbox').css({top:arrPageScroll[1]+(arrPageSizes[3]/10),left:arrPageScroll[0]}).show();$('#jquery-overlay,#jquery-lightbox').click(function(){_finish();});$('#lightbox-loading-link,#lightbox-secNav-btnClose').click(function(){_finish();return false;});$(window).resize(function(){var arrPageSizes=___getPageSize();$('#jquery-overlay').css({width:arrPageSizes[0],height:arrPageSizes[1]});var arrPageScroll=___getPageScroll();$('#jquery-lightbox').css({top:arrPageScroll[1]+(arrPageSizes[3]/10),left:arrPageScroll[0]});});}
function _set_image_to_view(){$('#lightbox-loading').show();if(settings.fixedNavigation){$('#lightbox-image,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();}else{$('#lightbox-image,#lightbox-nav,#lightbox-nav-btnPrev,#lightbox-nav-btnNext,#lightbox-container-image-data-box,#lightbox-image-details-currentNumber').hide();}
var objImagePreloader=new Image();objImagePreloader.onload=function(){$('#lightbox-image').attr('src',settings.imageArray[settings.activeImage][0]);_resize_container_image_box(objImagePreloader.width,objImagePreloader.height);objImagePreloader.onload=function(){};};objImagePreloader.src=settings.imageArray[settings.activeImage][0];};function _resize_container_image_box(intImageWidth,intImageHeight){var intCurrentWidth=$('#lightbox-container-image-box').width();var intCurrentHeight=$('#lightbox-container-image-box').height();var intWidth=(intImageWidth+(settings.containerBorderSize*2));var intHeight=(intImageHeight+(settings.containerBorderSize*2));var intDiffW=intCurrentWidth-intWidth;var intDiffH=intCurrentHeight-intHeight;$('#lightbox-container-image-box').animate({width:intWidth,height:intHeight},settings.containerResizeSpeed,function(){_show_image();});if((intDiffW==0)&&(intDiffH==0)){if($.browser.msie){___pause(250);}else{___pause(100);}}
$('#lightbox-container-image-data-box').css({width:intImageWidth});$('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({height:intImageHeight+(settings.containerBorderSize*2)});};function _show_image(){$('#lightbox-loading').hide();$('#lightbox-image').fadeIn(function(){_show_image_data();_set_navigation();});_preload_neighbor_images();};function _show_image_data(){$('#lightbox-container-image-data-box').slideDown('fast');$('#lightbox-image-details-caption').hide();if(settings.imageArray[settings.activeImage][1]){$('#lightbox-image-details-caption').html(settings.imageArray[settings.activeImage][1]).show();}
if(settings.imageArray.length>1){$('#lightbox-image-details-currentNumber').html(settings.txtImage+' '+(settings.activeImage+1)+' '+settings.txtOf+' '+settings.imageArray.length).show();}}
function _set_navigation(){$('#lightbox-nav').show();$('#lightbox-nav-btnPrev,#lightbox-nav-btnNext').css({'background':'transparent url('+settings.imageBlank+') no-repeat'});if(settings.activeImage!=0){if(settings.fixedNavigation){$('#lightbox-nav-btnPrev').css({'background':'url('+settings.imageBtnPrev+') left 15% no-repeat'}).unbind().bind('click',function(){settings.activeImage=settings.activeImage-1;_set_image_to_view();return false;});}else{$('#lightbox-nav-btnPrev').unbind().hover(function(){$(this).css({'background':'url('+settings.imageBtnPrev+') left 15% no-repeat'});},function(){$(this).css({'background':'transparent url('+settings.imageBlank+') no-repeat'});}).show().bind('click',function(){settings.activeImage=settings.activeImage-1;_set_image_to_view();return false;});}}
if(settings.activeImage!=(settings.imageArray.length-1)){if(settings.fixedNavigation){$('#lightbox-nav-btnNext').css({'background':'url('+settings.imageBtnNext+') right 15% no-repeat'}).unbind().bind('click',function(){settings.activeImage=settings.activeImage+1;_set_image_to_view();return false;});}else{$('#lightbox-nav-btnNext').unbind().hover(function(){$(this).css({'background':'url('+settings.imageBtnNext+') right 15% no-repeat'});},function(){$(this).css({'background':'transparent url('+settings.imageBlank+') no-repeat'});}).show().bind('click',function(){settings.activeImage=settings.activeImage+1;_set_image_to_view();return false;});}}
_enable_keyboard_navigation();}
function _enable_keyboard_navigation(){$(document).keydown(function(objEvent){_keyboard_action(objEvent);});}
function _disable_keyboard_navigation(){$(document).unbind();}
function _keyboard_action(objEvent){if(objEvent==null){keycode=event.keyCode;escapeKey=27;}else{keycode=objEvent.keyCode;escapeKey=objEvent.DOM_VK_ESCAPE;}
key=String.fromCharCode(keycode).toLowerCase();if((key==settings.keyToClose)||(key=='x')||(keycode==escapeKey)){_finish();}
if((key==settings.keyToPrev)||(keycode==37)){if(settings.activeImage!=0){settings.activeImage=settings.activeImage-1;_set_image_to_view();_disable_keyboard_navigation();}}
if((key==settings.keyToNext)||(keycode==39)){if(settings.activeImage!=(settings.imageArray.length-1)){settings.activeImage=settings.activeImage+1;_set_image_to_view();_disable_keyboard_navigation();}}}
function _preload_neighbor_images(){if((settings.imageArray.length-1)>settings.activeImage){objNext=new Image();objNext.src=settings.imageArray[settings.activeImage+1][0];}
if(settings.activeImage>0){objPrev=new Image();objPrev.src=settings.imageArray[settings.activeImage-1][0];}}
function _finish(){$('#jquery-lightbox').remove();$('#jquery-overlay').fadeOut(function(){$('#jquery-overlay').remove();});$('embed, object, select').css({'visibility':'visible'});}
function ___getPageSize(){var xScroll,yScroll;if(window.innerHeight&&window.scrollMaxY){xScroll=window.innerWidth+window.scrollMaxX;yScroll=window.innerHeight+window.scrollMaxY;}else if(document.body.scrollHeight>document.body.offsetHeight){xScroll=document.body.scrollWidth;yScroll=document.body.scrollHeight;}else{xScroll=document.body.offsetWidth;yScroll=document.body.offsetHeight;}
var windowWidth,windowHeight;if(self.innerHeight){if(document.documentElement.clientWidth){windowWidth=document.documentElement.clientWidth;}else{windowWidth=self.innerWidth;}
windowHeight=self.innerHeight;}else if(document.documentElement&&document.documentElement.clientHeight){windowWidth=document.documentElement.clientWidth;windowHeight=document.documentElement.clientHeight;}else if(document.body){windowWidth=document.body.clientWidth;windowHeight=document.body.clientHeight;}
if(yScroll<windowHeight){pageHeight=windowHeight;}else{pageHeight=yScroll;}
if(xScroll<windowWidth){pageWidth=xScroll;}else{pageWidth=windowWidth;}
arrayPageSize=new Array(pageWidth,pageHeight,windowWidth,windowHeight);return arrayPageSize;};function ___getPageScroll(){var xScroll,yScroll;if(self.pageYOffset){yScroll=self.pageYOffset;xScroll=self.pageXOffset;}else if(document.documentElement&&document.documentElement.scrollTop){yScroll=document.documentElement.scrollTop;xScroll=document.documentElement.scrollLeft;}else if(document.body){yScroll=document.body.scrollTop;xScroll=document.body.scrollLeft;}
arrayPageScroll=new Array(xScroll,yScroll);return arrayPageScroll;};function ___pause(ms){var date=new Date();curDate=null;do{var curDate=new Date();}
while(curDate-date<ms);};return this.unbind('click').click(_initialize);};})(jQuery);(function($){$.fn.easySlider=function(options){var defaults={prevId:'prevBtn',prevText:'Previous',nextId:'nextBtn',nextText:'Next',controlsShow:true,controlsBefore:'',controlsAfter:'',controlsFade:true,firstId:'firstBtn',firstText:'First',firstShow:false,lastId:'lastBtn',lastText:'Last',lastShow:false,vertical:false,speed:800,auto:false,pause:2000,continuous:false,numeric:false,numericId:'controls'};var options=$.extend(defaults,options);this.each(function(){var obj=$(this);var s=$("li",obj).length;var w=956+36+36;var h=310+20+20;var clickable=true;obj.width(w);obj.height(h);obj.css("overflow","hidden");var ts=s-1;var t=0;$("ul",obj).css('width',s*w);if(options.continuous){$("ul",obj).prepend($("ul li:last-child",obj).clone().css("margin-left","-"+w+"px"));$("ul",obj).append($("ul li:nth-child(2)",obj).clone());$("ul",obj).css('width',(s+1)*w);};if(!options.vertical)$("li",obj).css('float','left');if(options.controlsShow){var html=options.controlsBefore;if(options.numeric){html+='<ol id="'+options.numericId+'"></ol>';}else{if(options.firstShow)html+='<span id="'+options.firstId+'"><a href=\"javascript:void(0);\">'+options.firstText+'</a></span>';html+=' <span id="'+options.prevId+'"><a href=\"javascript:void(0);\">'+options.prevText+'</a></span>';html+=' <span id="'+options.nextId+'"><a href=\"javascript:void(0);\">'+options.nextText+'</a></span>';if(options.lastShow)html+=' <span id="'+options.lastId+'"><a href=\"javascript:void(0);\">'+options.lastText+'</a></span>';};html+=options.controlsAfter;$(obj).after(html);};if(options.numeric){if(options.controlsShow){for(var i=0;i<s;i++){$(document.createElement("li")).attr('id',options.numericId+(i+1)).html('<a rel='+i+' href=\"javascript:void(0);\">'+(i+1)+'</a>').appendTo($("#"+options.numericId)).click(function(){animate($("a",$(this)).attr('rel'),true);});}}else{$('#'+options.numericId+' a').click(function(){animate($(this).attr('data-number')-1,true);return false;});}}
$("a#"+options.nextId).click(function(){animate("next",true);});$("a#"+options.prevId).click(function(){animate("prev",true);});$("a#"+options.firstId).click(function(){animate("first",true);});$("a#"+options.lastId).click(function(){animate("last",true);});function setCurrent(i){i=parseInt(i)+1;$("li","#"+options.numericId).removeClass("active");$("li#"+options.numericId+i).addClass("active");};function adjust(){if(t>ts)t=0;if(t<0)t=ts;if(!options.vertical){$("ul",obj).css("margin-left",(t*w*-1));}else{$("ul",obj).css("margin-left",(t*h*-1));}
clickable=true;if(options.numeric)setCurrent(t);};function animate(dir,clicked){if(clickable){clickable=false;var ot=t;switch(dir){case"next":t=(ot>=ts)?(options.continuous?t+1:ts):t+1;break;case"prev":t=(t<=0)?(options.continuous?t-1:0):t-1;break;case"first":t=0;break;case"last":t=ts;break;default:t=dir;break;};var diff=Math.abs(ot-t);var speed=diff*options.speed;if(!options.vertical){p=(t*w*-1);$("ul",obj).animate({marginLeft:p},{queue:false,duration:speed,complete:adjust});}else{p=(t*h*-1);$("ul",obj).animate({marginTop:p},{queue:false,duration:speed,complete:adjust});};if(!options.continuous&&options.controlsFade){if(t==ts){$("a","#"+options.nextId).hide();$("a","#"+options.lastId).hide();}else{$("a","#"+options.nextId).show();$("a","#"+options.lastId).show();};if(t==0){$("a","#"+options.prevId).hide();$("a","#"+options.firstId).hide();}else{$("a","#"+options.prevId).show();$("a","#"+options.firstId).show();};};if(clicked)clearTimeout(timeout);if(options.auto&&dir=="next"&&!clicked){;timeout=setTimeout(function(){animate("next",false);},diff*options.speed+options.pause);};};};var timeout;if(options.auto){;timeout=setTimeout(function(){animate("next",false);},options.pause);};if(options.numeric)setCurrent(0);if(!options.continuous&&options.controlsFade){$("a","#"+options.prevId).hide();$("a","#"+options.firstId).hide();};});};})(jQuery);(function($){$.fn.hoverIntent=function(f,g){var cfg={sensitivity:7,interval:100,timeout:0};cfg=$.extend(cfg,g?{over:f,out:g}:f);var cX,cY,pX,pY;var track=function(ev){cX=ev.pageX;cY=ev.pageY};var compare=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);if((Math.abs(pX-cX)+Math.abs(pY-cY))<cfg.sensitivity){$(ob).unbind("mousemove",track);ob.hoverIntent_s=1;return cfg.over.apply(ob,[ev])}else{pX=cX;pY=cY;ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}};var delay=function(ev,ob){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t);ob.hoverIntent_s=0;return cfg.out.apply(ob,[ev])};var handleHover=function(e){var ev=jQuery.extend({},e);var ob=this;if(ob.hoverIntent_t){ob.hoverIntent_t=clearTimeout(ob.hoverIntent_t)}if(e.type=="mouseenter"){pX=ev.pageX;pY=ev.pageY;$(ob).bind("mousemove",track);if(ob.hoverIntent_s!=1){ob.hoverIntent_t=setTimeout(function(){compare(ev,ob)},cfg.interval)}}else{$(ob).unbind("mousemove",track);if(ob.hoverIntent_s==1){ob.hoverIntent_t=setTimeout(function(){delay(ev,ob)},cfg.timeout)}}};return this.bind('mouseenter',handleHover).bind('mouseleave',handleHover)}})(jQuery);(function(e,t){function i(t,n){var r,i,o,u=t.nodeName.toLowerCase();return"area"===u?(r=t.parentNode,i=r.name,!t.href||!i||r.nodeName.toLowerCase()!=="map"?!1:(o=e("img[usemap=#"+i+"]")[0],!!o&&s(o))):(/input|select|textarea|button|object/.test(u)?!t.disabled:"a"===u?t.href||n:n)&&s(t)}function s(t){return e.expr.filters.visible(t)&&!e(t).parents().addBack().filter(function(){return e.css(this,"visibility")==="hidden"}).length}var n=0,r=/^ui-id-\d+$/;e.ui=e.ui||{};if(e.ui.version)return;e.extend(e.ui,{version:"1.10.0",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),e.fn.extend({_focus:e.fn.focus,focus:function(t,n){return typeof t=="number"?this.each(function(){var r=this;setTimeout(function(){e(r).focus(),n&&n.call(r)},t)}):this._focus.apply(this,arguments)},scrollParent:function(){var t;return e.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?t=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(e.css(this,"position"))&&/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0):t=this.parents().filter(function(){return/(auto|scroll)/.test(e.css(this,"overflow")+e.css(this,"overflow-y")+e.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!t.length?e(document):t},zIndex:function(n){if(n!==t)return this.css("zIndex",n);if(this.length){var r=e(this[0]),i,s;while(r.length&&r[0]!==document){i=r.css("position");if(i==="absolute"||i==="relative"||i==="fixed"){s=parseInt(r.css("zIndex"),10);if(!isNaN(s)&&s!==0)return s}r=r.parent()}}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+(++n))})},removeUniqueId:function(){return this.each(function(){r.test(this.id)&&e(this).removeAttr("id")})}}),e.extend(e.expr[":"],{data:e.expr.createPseudo?e.expr.createPseudo(function(t){return function(n){return!!e.data(n,t)}}):function(t,n,r){return!!e.data(t,r[3])},focusable:function(t){return i(t,!isNaN(e.attr(t,"tabindex")))},tabbable:function(t){var n=e.attr(t,"tabindex"),r=isNaN(n);return(r||n>=0)&&i(t,!r)}}),e("<a>").outerWidth(1).jquery||e.each(["Width","Height"],function(n,r){function u(t,n,r,s){return e.each(i,function(){n-=parseFloat(e.css(t,"padding"+this))||0,r&&(n-=parseFloat(e.css(t,"border"+this+"Width"))||0),s&&(n-=parseFloat(e.css(t,"margin"+this))||0)}),n}var i=r==="Width"?["Left","Right"]:["Top","Bottom"],s=r.toLowerCase(),o={innerWidth:e.fn.innerWidth,innerHeight:e.fn.innerHeight,outerWidth:e.fn.outerWidth,outerHeight:e.fn.outerHeight};e.fn["inner"+r]=function(n){return n===t?o["inner"+r].call(this):this.each(function(){e(this).css(s,u(this,n)+"px")})},e.fn["outer"+r]=function(t,n){return typeof t!="number"?o["outer"+r].call(this,t):this.each(function(){e(this).css(s,u(this,t,!0,n)+"px")})}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(e.fn.removeData=function(t){return function(n){return arguments.length?t.call(this,e.camelCase(n)):t.call(this)}}(e.fn.removeData)),e.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),e.support.selectstart="onselectstart"in document.createElement("div"),e.fn.extend({disableSelection:function(){return this.bind((e.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(e){e.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),e.extend(e.ui,{plugin:{add:function(t,n,r){var i,s=e.ui[t].prototype;for(i in r)s.plugins[i]=s.plugins[i]||[],s.plugins[i].push([n,r[i]])},call:function(e,t,n){var r,i=e.plugins[t];if(!i||!e.element[0].parentNode||e.element[0].parentNode.nodeType===11)return;for(r=0;r<i.length;r++)e.options[i[r][0]]&&i[r][1].apply(e.element,n)}},hasScroll:function(t,n){if(e(t).css("overflow")==="hidden")return!1;var r=n&&n==="left"?"scrollLeft":"scrollTop",i=!1;return t[r]>0?!0:(t[r]=1,i=t[r]>0,t[r]=0,i)}})})(jQuery);(function(e,t){var n=0,r=Array.prototype.slice,i=e.cleanData;e.cleanData=function(t){for(var n=0,r;(r=t[n])!=null;n++)try{e(r).triggerHandler("remove")}catch(s){}i(t)},e.widget=function(t,n,r){var i,s,o,u,a={},f=t.split(".")[0];t=t.split(".")[1],i=f+"-"+t,r||(r=n,n=e.Widget),e.expr[":"][i.toLowerCase()]=function(t){return!!e.data(t,i)},e[f]=e[f]||{},s=e[f][t],o=e[f][t]=function(e,t){if(!this._createWidget)return new o(e,t);arguments.length&&this._createWidget(e,t)},e.extend(o,s,{version:r.version,_proto:e.extend({},r),_childConstructors:[]}),u=new n,u.options=e.widget.extend({},u.options),e.each(r,function(t,r){if(!e.isFunction(r)){a[t]=r;return}a[t]=function(){var e=function(){return n.prototype[t].apply(this,arguments)},i=function(e){return n.prototype[t].apply(this,e)};return function(){var t=this._super,n=this._superApply,s;return this._super=e,this._superApply=i,s=r.apply(this,arguments),this._super=t,this._superApply=n,s}}()}),o.prototype=e.widget.extend(u,{widgetEventPrefix:s?u.widgetEventPrefix:t},a,{constructor:o,namespace:f,widgetName:t,widgetFullName:i}),s?(e.each(s._childConstructors,function(t,n){var r=n.prototype;e.widget(r.namespace+"."+r.widgetName,o,n._proto)}),delete s._childConstructors):n._childConstructors.push(o),e.widget.bridge(t,o)},e.widget.extend=function(n){var i=r.call(arguments,1),s=0,o=i.length,u,a;for(;s<o;s++)for(u in i[s])a=i[s][u],i[s].hasOwnProperty(u)&&a!==t&&(e.isPlainObject(a)?n[u]=e.isPlainObject(n[u])?e.widget.extend({},n[u],a):e.widget.extend({},a):n[u]=a);return n},e.widget.bridge=function(n,i){var s=i.prototype.widgetFullName||n;e.fn[n]=function(o){var u=typeof o=="string",a=r.call(arguments,1),f=this;return o=!u&&a.length?e.widget.extend.apply(null,[o].concat(a)):o,u?this.each(function(){var r,i=e.data(this,s);if(!i)return e.error("cannot call methods on "+n+" prior to initialization; "+"attempted to call method '"+o+"'");if(!e.isFunction(i[o])||o.charAt(0)==="_")return e.error("no such method '"+o+"' for "+n+" widget instance");r=i[o].apply(i,a);if(r!==i&&r!==t)return f=r&&r.jquery?f.pushStack(r.get()):r,!1}):this.each(function(){var t=e.data(this,s);t?t.option(o||{})._init():e.data(this,s,new i(o,this))}),f}},e.Widget=function(){},e.Widget._childConstructors=[],e.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(t,r){r=e(r||this.defaultElement||this)[0],this.element=e(r),this.uuid=n++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=e.widget.extend({},this.options,this._getCreateOptions(),t),this.bindings=e(),this.hoverable=e(),this.focusable=e(),r!==this&&(e.data(r,this.widgetFullName,this),this._on(!0,this.element,{remove:function(e){e.target===r&&this.destroy()}}),this.document=e(r.style?r.ownerDocument:r.document||r),this.window=e(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:e.noop,_getCreateEventData:e.noop,_create:e.noop,_init:e.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled "+"ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:e.noop,widget:function(){return this.element},option:function(n,r){var i=n,s,o,u;if(arguments.length===0)return e.widget.extend({},this.options);if(typeof n=="string"){i={},s=n.split("."),n=s.shift();if(s.length){o=i[n]=e.widget.extend({},this.options[n]);for(u=0;u<s.length-1;u++)o[s[u]]=o[s[u]]||{},o=o[s[u]];n=s.pop();if(r===t)return o[n]===t?null:o[n];o[n]=r}else{if(r===t)return this.options[n]===t?null:this.options[n];i[n]=r}}return this._setOptions(i),this},_setOptions:function(e){var t;for(t in e)this._setOption(t,e[t]);return this},_setOption:function(e,t){return this.options[e]=t,e==="disabled"&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!t).attr("aria-disabled",t),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(t,n,r){var i,s=this;typeof t!="boolean"&&(r=n,n=t,t=!1),r?(n=i=e(n),this.bindings=this.bindings.add(n)):(r=n,n=this.element,i=this.widget()),e.each(r,function(r,o){function u(){if(!t&&(s.options.disabled===!0||e(this).hasClass("ui-state-disabled")))return;return(typeof o=="string"?s[o]:o).apply(s,arguments)}typeof o!="string"&&(u.guid=o.guid=o.guid||u.guid||e.guid++);var a=r.match(/^(\w+)\s*(.*)$/),f=a[1]+s.eventNamespace,l=a[2];l?i.delegate(l,f,u):n.bind(f,u)})},_off:function(e,t){t=(t||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(t).undelegate(t)},_delay:function(e,t){function n(){return(typeof e=="string"?r[e]:e).apply(r,arguments)}var r=this;return setTimeout(n,t||0)},_hoverable:function(t){this.hoverable=this.hoverable.add(t),this._on(t,{mouseenter:function(t){e(t.currentTarget).addClass("ui-state-hover")},mouseleave:function(t){e(t.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(t){this.focusable=this.focusable.add(t),this._on(t,{focusin:function(t){e(t.currentTarget).addClass("ui-state-focus")},focusout:function(t){e(t.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(t,n,r){var i,s,o=this.options[t];r=r||{},n=e.Event(n),n.type=(t===this.widgetEventPrefix?t:this.widgetEventPrefix+t).toLowerCase(),n.target=this.element[0],s=n.originalEvent;if(s)for(i in s)i in n||(n[i]=s[i]);return this.element.trigger(n,r),!(e.isFunction(o)&&o.apply(this.element[0],[n].concat(r))===!1||n.isDefaultPrevented())}},e.each({show:"fadeIn",hide:"fadeOut"},function(t,n){e.Widget.prototype["_"+t]=function(r,i,s){typeof i=="string"&&(i={effect:i});var o,u=i?i===!0||typeof i=="number"?n:i.effect||n:t;i=i||{},typeof i=="number"&&(i={duration:i}),o=!e.isEmptyObject(i),i.complete=s,i.delay&&r.delay(i.delay),o&&e.effects&&e.effects.effect[u]?r[t](i):u!==t&&r[u]?r[u](i.duration,i.easing,s):r.queue(function(n){e(this)[t](),s&&s.call(r[0]),n()})}})})(jQuery);(function(e,t){var n=!1;e(document).mouseup(function(){n=!1}),e.widget("ui.mouse",{version:"1.10.0",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var t=this;this.element.bind("mousedown."+this.widgetName,function(e){return t._mouseDown(e)}).bind("click."+this.widgetName,function(n){if(!0===e.data(n.target,t.widgetName+".preventClickEvent"))return e.removeData(n.target,t.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(t){if(n)return;this._mouseStarted&&this._mouseUp(t),this._mouseDownEvent=t;var r=this,i=t.which===1,s=typeof this.options.cancel=="string"&&t.target.nodeName?e(t.target).closest(this.options.cancel).length:!1;if(!i||s||!this._mouseCapture(t))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){r.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)){this._mouseStarted=this._mouseStart(t)!==!1;if(!this._mouseStarted)return t.preventDefault(),!0}return!0===e.data(t.target,this.widgetName+".preventClickEvent")&&e.removeData(t.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(e){return r._mouseMove(e)},this._mouseUpDelegate=function(e){return r._mouseUp(e)},e(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),t.preventDefault(),n=!0,!0},_mouseMove:function(t){return e.ui.ie&&(!document.documentMode||document.documentMode<9)&&!t.button?this._mouseUp(t):this._mouseStarted?(this._mouseDrag(t),t.preventDefault()):(this._mouseDistanceMet(t)&&this._mouseDelayMet(t)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,t)!==!1,this._mouseStarted?this._mouseDrag(t):this._mouseUp(t)),!this._mouseStarted)},_mouseUp:function(t){return e(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,t.target===this._mouseDownEvent.target&&e.data(t.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(t)),!1},_mouseDistanceMet:function(e){return Math.max(Math.abs(this._mouseDownEvent.pageX-e.pageX),Math.abs(this._mouseDownEvent.pageY-e.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})})(jQuery);(function(e,t){function h(e,t,n){return[parseInt(e[0],10)*(l.test(e[0])?t/100:1),parseInt(e[1],10)*(l.test(e[1])?n/100:1)]}function p(t,n){return parseInt(e.css(t,n),10)||0}function d(t){var n=t[0];return n.nodeType===9?{width:t.width(),height:t.height(),offset:{top:0,left:0}}:e.isWindow(n)?{width:t.width(),height:t.height(),offset:{top:t.scrollTop(),left:t.scrollLeft()}}:n.preventDefault?{width:0,height:0,offset:{top:n.pageY,left:n.pageX}}:{width:t.outerWidth(),height:t.outerHeight(),offset:t.offset()}}e.ui=e.ui||{};var n,r=Math.max,i=Math.abs,s=Math.round,o=/left|center|right/,u=/top|center|bottom/,a=/[\+\-]\d+%?/,f=/^\w+/,l=/%$/,c=e.fn.position;e.position={scrollbarWidth:function(){if(n!==t)return n;var r,i,s=e("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=s.children()[0];return e("body").append(s),r=o.offsetWidth,s.css("overflow","scroll"),i=o.offsetWidth,r===i&&(i=s[0].clientWidth),s.remove(),n=r-i},getScrollInfo:function(t){var n=t.isWindow?"":t.element.css("overflow-x"),r=t.isWindow?"":t.element.css("overflow-y"),i=n==="scroll"||n==="auto"&&t.width<t.element[0].scrollWidth,s=r==="scroll"||r==="auto"&&t.height<t.element[0].scrollHeight;return{width:i?e.position.scrollbarWidth():0,height:s?e.position.scrollbarWidth():0}},getWithinInfo:function(t){var n=e(t||window),r=e.isWindow(n[0]);return{element:n,isWindow:r,offset:n.offset()||{left:0,top:0},scrollLeft:n.scrollLeft(),scrollTop:n.scrollTop(),width:r?n.width():n.outerWidth(),height:r?n.height():n.outerHeight()}}},e.fn.position=function(t){if(!t||!t.of)return c.apply(this,arguments);t=e.extend({},t);var n,l,v,m,g,y,b=e(t.of),w=e.position.getWithinInfo(t.within),E=e.position.getScrollInfo(w),S=(t.collision||"flip").split(" "),x={};return y=d(b),b[0].preventDefault&&(t.at="left top"),l=y.width,v=y.height,m=y.offset,g=e.extend({},m),e.each(["my","at"],function(){var e=(t[this]||"").split(" "),n,r;e.length===1&&(e=o.test(e[0])?e.concat(["center"]):u.test(e[0])?["center"].concat(e):["center","center"]),e[0]=o.test(e[0])?e[0]:"center",e[1]=u.test(e[1])?e[1]:"center",n=a.exec(e[0]),r=a.exec(e[1]),x[this]=[n?n[0]:0,r?r[0]:0],t[this]=[f.exec(e[0])[0],f.exec(e[1])[0]]}),S.length===1&&(S[1]=S[0]),t.at[0]==="right"?g.left+=l:t.at[0]==="center"&&(g.left+=l/2),t.at[1]==="bottom"?g.top+=v:t.at[1]==="center"&&(g.top+=v/2),n=h(x.at,l,v),g.left+=n[0],g.top+=n[1],this.each(function(){var o,u,a=e(this),f=a.outerWidth(),c=a.outerHeight(),d=p(this,"marginLeft"),y=p(this,"marginTop"),T=f+d+p(this,"marginRight")+E.width,N=c+y+p(this,"marginBottom")+E.height,C=e.extend({},g),k=h(x.my,a.outerWidth(),a.outerHeight());t.my[0]==="right"?C.left-=f:t.my[0]==="center"&&(C.left-=f/2),t.my[1]==="bottom"?C.top-=c:t.my[1]==="center"&&(C.top-=c/2),C.left+=k[0],C.top+=k[1],e.support.offsetFractions||(C.left=s(C.left),C.top=s(C.top)),o={marginLeft:d,marginTop:y},e.each(["left","top"],function(r,i){e.ui.position[S[r]]&&e.ui.position[S[r]][i](C,{targetWidth:l,targetHeight:v,elemWidth:f,elemHeight:c,collisionPosition:o,collisionWidth:T,collisionHeight:N,offset:[n[0]+k[0],n[1]+k[1]],my:t.my,at:t.at,within:w,elem:a})}),t.using&&(u=function(e){var n=m.left-C.left,s=n+l-f,o=m.top-C.top,u=o+v-c,h={target:{element:b,left:m.left,top:m.top,width:l,height:v},element:{element:a,left:C.left,top:C.top,width:f,height:c},horizontal:s<0?"left":n>0?"right":"center",vertical:u<0?"top":o>0?"bottom":"middle"};l<f&&i(n+s)<l&&(h.horizontal="center"),v<c&&i(o+u)<v&&(h.vertical="middle"),r(i(n),i(s))>r(i(o),i(u))?h.important="horizontal":h.important="vertical",t.using.call(this,e,h)}),a.offset(e.extend(C,{using:u}))})},e.ui.position={fit:{left:function(e,t){var n=t.within,i=n.isWindow?n.scrollLeft:n.offset.left,s=n.width,o=e.left-t.collisionPosition.marginLeft,u=i-o,a=o+t.collisionWidth-s-i,f;t.collisionWidth>s?u>0&&a<=0?(f=e.left+u+t.collisionWidth-s-i,e.left+=u-f):a>0&&u<=0?e.left=i:u>a?e.left=i+s-t.collisionWidth:e.left=i:u>0?e.left+=u:a>0?e.left-=a:e.left=r(e.left-o,e.left)},top:function(e,t){var n=t.within,i=n.isWindow?n.scrollTop:n.offset.top,s=t.within.height,o=e.top-t.collisionPosition.marginTop,u=i-o,a=o+t.collisionHeight-s-i,f;t.collisionHeight>s?u>0&&a<=0?(f=e.top+u+t.collisionHeight-s-i,e.top+=u-f):a>0&&u<=0?e.top=i:u>a?e.top=i+s-t.collisionHeight:e.top=i:u>0?e.top+=u:a>0?e.top-=a:e.top=r(e.top-o,e.top)}},flip:{left:function(e,t){var n=t.within,r=n.offset.left+n.scrollLeft,s=n.width,o=n.isWindow?n.scrollLeft:n.offset.left,u=e.left-t.collisionPosition.marginLeft,a=u-o,f=u+t.collisionWidth-s-o,l=t.my[0]==="left"?-t.elemWidth:t.my[0]==="right"?t.elemWidth:0,c=t.at[0]==="left"?t.targetWidth:t.at[0]==="right"?-t.targetWidth:0,h=-2*t.offset[0],p,d;if(a<0){p=e.left+l+c+h+t.collisionWidth-s-r;if(p<0||p<i(a))e.left+=l+c+h}else if(f>0){d=e.left-t.collisionPosition.marginLeft+l+c+h-o;if(d>0||i(d)<f)e.left+=l+c+h}},top:function(e,t){var n=t.within,r=n.offset.top+n.scrollTop,s=n.height,o=n.isWindow?n.scrollTop:n.offset.top,u=e.top-t.collisionPosition.marginTop,a=u-o,f=u+t.collisionHeight-s-o,l=t.my[1]==="top",c=l?-t.elemHeight:t.my[1]==="bottom"?t.elemHeight:0,h=t.at[1]==="top"?t.targetHeight:t.at[1]==="bottom"?-t.targetHeight:0,p=-2*t.offset[1],d,v;a<0?(v=e.top+c+h+p+t.collisionHeight-s-r,e.top+c+h+p>a&&(v<0||v<i(a))&&(e.top+=c+h+p)):f>0&&(d=e.top-t.collisionPosition.marginTop+c+h+p-o,e.top+c+h+p>f&&(d>0||i(d)<f)&&(e.top+=c+h+p))}},flipfit:{left:function(){e.ui.position.flip.left.apply(this,arguments),e.ui.position.fit.left.apply(this,arguments)},top:function(){e.ui.position.flip.top.apply(this,arguments),e.ui.position.fit.top.apply(this,arguments)}}},function(){var t,n,r,i,s,o=document.getElementsByTagName("body")[0],u=document.createElement("div");t=document.createElement(o?"div":"body"),r={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&e.extend(r,{position:"absolute",left:"-1000px",top:"-1000px"});for(s in r)t.style[s]=r[s];t.appendChild(u),n=o||document.documentElement,n.insertBefore(t,n.firstChild),u.style.cssText="position: absolute; left: 10.7432222px;",i=e(u).offset().left,e.support.offsetFractions=i>10&&i<11,t.innerHTML="",n.removeChild(t)}()})(jQuery);(function(e,t){e.widget("ui.draggable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){this.options.helper==="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(t){var n=this.options;return this.helper||n.disabled||e(t.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(t),this.handle?(e(n.iframeFix===!0?"iframe":n.iframeFix).each(function(){e("<div class='ui-draggable-iframeFix' style='background: #fff;'></div>").css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(e(this).offset()).appendTo("body")}),!0):!1)},_mouseStart:function(t){var n=this.options;return this.helper=this._createHelper(t),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),e.ui.ddmanager&&(e.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),n.containment&&this._setContainment(),this._trigger("start",t)===!1?(this._clear(),!1):(this._cacheHelperProportions(),e.ui.ddmanager&&!n.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this._mouseDrag(t,!0),e.ui.ddmanager&&e.ui.ddmanager.dragStart(this,t),!0)},_mouseDrag:function(t,n){this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute");if(!n){var r=this._uiHash();if(this._trigger("drag",t,r)===!1)return this._mouseUp({}),!1;this.position=r.position}if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";return e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),!1},_mouseStop:function(t){var n,r=this,i=!1,s=!1;e.ui.ddmanager&&!this.options.dropBehaviour&&(s=e.ui.ddmanager.drop(this,t)),this.dropped&&(s=this.dropped,this.dropped=!1),n=this.element[0];while(n&&(n=n.parentNode))n===document&&(i=!0);return!i&&this.options.helper==="original"?!1:(this.options.revert==="invalid"&&!s||this.options.revert==="valid"&&s||this.options.revert===!0||e.isFunction(this.options.revert)&&this.options.revert.call(this.element,s)?e(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){r._trigger("stop",t)!==!1&&r._clear()}):this._trigger("stop",t)!==!1&&this._clear(),!1)},_mouseUp:function(t){return e("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),e.ui.ddmanager&&e.ui.ddmanager.dragStop(this,t),e.ui.mouse.prototype._mouseUp.call(this,t)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(t){var n=!this.options.handle||!e(this.options.handle,this.element).length?!0:!1;return e(this.options.handle,this.element).find("*").addBack().each(function(){this===t.target&&(n=!0)}),n},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t])):n.helper==="clone"?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo(n.appendTo==="parent"?this.element[0].parentNode:n.appendTo),r[0]!==this.element[0]&&!/(fixed|absolute)/.test(r.css("position"))&&r.css("position","absolute"),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.element.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[i.containment==="document"?0:e(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,i.containment==="document"?0:e(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(i.containment==="document"?0:e(window).scrollLeft())+e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(i.containment==="document"?0:e(window).scrollTop())+(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(i.containment)&&i.containment.constructor!==Array){n=e(i.containment),r=n[0];if(!r)return;t=e(r).css("overflow")!=="hidden",this.containment=[(parseInt(e(r).css("borderLeftWidth"),10)||0)+(parseInt(e(r).css("paddingLeft"),10)||0),(parseInt(e(r).css("borderTopWidth"),10)||0)+(parseInt(e(r).css("paddingTop"),10)||0),(t?Math.max(r.scrollWidth,r.offsetWidth):r.offsetWidth)-(parseInt(e(r).css("borderLeftWidth"),10)||0)-(parseInt(e(r).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(t?Math.max(r.scrollHeight,r.offsetHeight):r.offsetHeight)-(parseInt(e(r).css("borderTopWidth"),10)||0)-(parseInt(e(r).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=n}else i.containment.constructor===Array&&(this.containment=i.containment)},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i,s,o=this.options,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName),f=t.pageX,l=t.pageY;return this.originalPosition&&(this.containment&&(this.relative_container?(r=this.relative_container.offset(),n=[this.containment[0]+r.left,this.containment[1]+r.top,this.containment[2]+r.left,this.containment[3]+r.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(f=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(l=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(f=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(l=n[3]+this.offset.click.top)),o.grid&&(i=o.grid[1]?this.originalPageY+Math.round((l-this.originalPageY)/o.grid[1])*o.grid[1]:this.originalPageY,l=n?i-this.offset.click.top>=n[1]||i-this.offset.click.top>n[3]?i:i-this.offset.click.top>=n[1]?i-o.grid[1]:i+o.grid[1]:i,s=o.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/o.grid[0])*o.grid[0]:this.originalPageX,f=n?s-this.offset.click.left>=n[0]||s-this.offset.click.left>n[2]?s:s-this.offset.click.left>=n[0]?s-o.grid[0]:s+o.grid[0]:s)),{top:l-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!==this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(t,n,r){return r=r||this._uiHash(),e.ui.plugin.call(this,t,[n,r]),t==="drag"&&(this.positionAbs=this._convertPositionTo("absolute")),e.Widget.prototype._trigger.call(this,t,n,r)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),e.ui.plugin.add("draggable","connectToSortable",{start:function(t,n){var r=e(this).data("ui-draggable"),i=r.options,s=e.extend({},n,{item:r.element});r.sortables=[],e(i.connectToSortable).each(function(){var n=e.data(this,"ui-sortable");n&&!n.options.disabled&&(r.sortables.push({instance:n,shouldRevert:n.options.revert}),n.refreshPositions(),n._trigger("activate",t,s))})},stop:function(t,n){var r=e(this).data("ui-draggable"),i=e.extend({},n,{item:r.element});e.each(r.sortables,function(){this.instance.isOver?(this.instance.isOver=0,r.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(t),this.instance.options.helper=this.instance.options._helper,r.options.helper==="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",t,i))})},drag:function(t,n){var r=e(this).data("ui-draggable"),i=this;e.each(r.sortables,function(){var s=!1,o=this;this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(s=!0,e.each(r.sortables,function(){return this.instance.positionAbs=r.positionAbs,this.instance.helperProportions=r.helperProportions,this.instance.offset.click=r.offset.click,this!==o&&this.instance._intersectsWith(this.instance.containerCache)&&e.ui.contains(o.instance.element[0],this.instance.element[0])&&(s=!1),s})),s?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=e(i).clone().removeAttr("id").appendTo(this.instance.element).data("ui-sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return n.helper[0]},t.target=this.instance.currentItem[0],this.instance._mouseCapture(t,!0),this.instance._mouseStart(t,!0,!0),this.instance.offset.click.top=r.offset.click.top,this.instance.offset.click.left=r.offset.click.left,this.instance.offset.parent.left-=r.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=r.offset.parent.top-this.instance.offset.parent.top,r._trigger("toSortable",t),r.dropped=this.instance.element,r.currentItem=r.element,this.instance.fromOutside=r),this.instance.currentItem&&this.instance._mouseDrag(t)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",t,this.instance._uiHash(this.instance)),this.instance._mouseStop(t,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),r._trigger("fromSortable",t),r.dropped=!1)})}}),e.ui.plugin.add("draggable","cursor",{start:function(){var t=e("body"),n=e(this).data("ui-draggable").options;t.css("cursor")&&(n._cursor=t.css("cursor")),t.css("cursor",n.cursor)},stop:function(){var t=e(this).data("ui-draggable").options;t._cursor&&e("body").css("cursor",t._cursor)}}),e.ui.plugin.add("draggable","opacity",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("opacity")&&(i._opacity=r.css("opacity")),r.css("opacity",i.opacity)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._opacity&&e(n.helper).css("opacity",r._opacity)}}),e.ui.plugin.add("draggable","scroll",{start:function(){var t=e(this).data("ui-draggable");t.scrollParent[0]!==document&&t.scrollParent[0].tagName!=="HTML"&&(t.overflowOffset=t.scrollParent.offset())},drag:function(t){var n=e(this).data("ui-draggable"),r=n.options,i=!1;if(n.scrollParent[0]!==document&&n.scrollParent[0].tagName!=="HTML"){if(!r.axis||r.axis!=="x")n.overflowOffset.top+n.scrollParent[0].offsetHeight-t.pageY<r.scrollSensitivity?n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop+r.scrollSpeed:t.pageY-n.overflowOffset.top<r.scrollSensitivity&&(n.scrollParent[0].scrollTop=i=n.scrollParent[0].scrollTop-r.scrollSpeed);if(!r.axis||r.axis!=="y")n.overflowOffset.left+n.scrollParent[0].offsetWidth-t.pageX<r.scrollSensitivity?n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft+r.scrollSpeed:t.pageX-n.overflowOffset.left<r.scrollSensitivity&&(n.scrollParent[0].scrollLeft=i=n.scrollParent[0].scrollLeft-r.scrollSpeed)}else{if(!r.axis||r.axis!=="x")t.pageY-e(document).scrollTop()<r.scrollSensitivity?i=e(document).scrollTop(e(document).scrollTop()-r.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<r.scrollSensitivity&&(i=e(document).scrollTop(e(document).scrollTop()+r.scrollSpeed));if(!r.axis||r.axis!=="y")t.pageX-e(document).scrollLeft()<r.scrollSensitivity?i=e(document).scrollLeft(e(document).scrollLeft()-r.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<r.scrollSensitivity&&(i=e(document).scrollLeft(e(document).scrollLeft()+r.scrollSpeed))}i!==!1&&e.ui.ddmanager&&!r.dropBehaviour&&e.ui.ddmanager.prepareOffsets(n,t)}}),e.ui.plugin.add("draggable","snap",{start:function(){var t=e(this).data("ui-draggable"),n=t.options;t.snapElements=[],e(n.snap.constructor!==String?n.snap.items||":data(ui-draggable)":n.snap).each(function(){var n=e(this),r=n.offset();this!==t.element[0]&&t.snapElements.push({item:this,width:n.outerWidth(),height:n.outerHeight(),top:r.top,left:r.left})})},drag:function(t,n){var r,i,s,o,u,a,f,l,c,h,p=e(this).data("ui-draggable"),d=p.options,v=d.snapTolerance,m=n.offset.left,g=m+p.helperProportions.width,y=n.offset.top,b=y+p.helperProportions.height;for(c=p.snapElements.length-1;c>=0;c--){u=p.snapElements[c].left,a=u+p.snapElements[c].width,f=p.snapElements[c].top,l=f+p.snapElements[c].height;if(!(u-v<m&&m<a+v&&f-v<y&&y<l+v||u-v<m&&m<a+v&&f-v<b&&b<l+v||u-v<g&&g<a+v&&f-v<y&&y<l+v||u-v<g&&g<a+v&&f-v<b&&b<l+v)){p.snapElements[c].snapping&&p.options.snap.release&&p.options.snap.release.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=!1;continue}d.snapMode!=="inner"&&(r=Math.abs(f-b)<=v,i=Math.abs(l-y)<=v,s=Math.abs(u-g)<=v,o=Math.abs(a-m)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f-p.helperProportions.height,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u-p.helperProportions.width}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a}).left-p.margins.left)),h=r||i||s||o,d.snapMode!=="outer"&&(r=Math.abs(f-y)<=v,i=Math.abs(l-b)<=v,s=Math.abs(u-m)<=v,o=Math.abs(a-g)<=v,r&&(n.position.top=p._convertPositionTo("relative",{top:f,left:0}).top-p.margins.top),i&&(n.position.top=p._convertPositionTo("relative",{top:l-p.helperProportions.height,left:0}).top-p.margins.top),s&&(n.position.left=p._convertPositionTo("relative",{top:0,left:u}).left-p.margins.left),o&&(n.position.left=p._convertPositionTo("relative",{top:0,left:a-p.helperProportions.width}).left-p.margins.left)),!p.snapElements[c].snapping&&(r||i||s||o||h)&&p.options.snap.snap&&p.options.snap.snap.call(p.element,t,e.extend(p._uiHash(),{snapItem:p.snapElements[c].item})),p.snapElements[c].snapping=r||i||s||o||h}}}),e.ui.plugin.add("draggable","stack",{start:function(){var t,n=e(this).data("ui-draggable").options,r=e.makeArray(e(n.stack)).sort(function(t,n){return(parseInt(e(t).css("zIndex"),10)||0)-(parseInt(e(n).css("zIndex"),10)||0)});if(!r.length)return;t=parseInt(r[0].style.zIndex,10)||0,e(r).each(function(e){this.style.zIndex=t+e}),this[0].style.zIndex=t+r.length}}),e.ui.plugin.add("draggable","zIndex",{start:function(t,n){var r=e(n.helper),i=e(this).data("ui-draggable").options;r.css("zIndex")&&(i._zIndex=r.css("zIndex")),r.css("zIndex",i.zIndex)},stop:function(t,n){var r=e(this).data("ui-draggable").options;r._zIndex&&e(n.helper).css("zIndex",r._zIndex)}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.droppable",{version:"1.10.0",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var t=this.options,n=t.accept;this.isover=!1,this.isout=!0,this.accept=e.isFunction(n)?n:function(e){return e.is(n)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},e.ui.ddmanager.droppables[t.scope]=e.ui.ddmanager.droppables[t.scope]||[],e.ui.ddmanager.droppables[t.scope].push(this),t.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){var t=0,n=e.ui.ddmanager.droppables[this.options.scope];for(;t<n.length;t++)n[t]===this&&n.splice(t,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(t,n){t==="accept"&&(this.accept=e.isFunction(n)?n:function(e){return e.is(n)}),e.Widget.prototype._setOption.apply(this,arguments)},_activate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",t,this.ui(n))},_deactivate:function(t){var n=e.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",t,this.ui(n))},_over:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",t,this.ui(n)))},_out:function(t){var n=e.ui.ddmanager.current;if(!n||(n.currentItem||n.element)[0]===this.element[0])return;this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",t,this.ui(n)))},_drop:function(t,n){var r=n||e.ui.ddmanager.current,i=!1;return!r||(r.currentItem||r.element)[0]===this.element[0]?!1:(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var t=e.data(this,"ui-droppable");if(t.options.greedy&&!t.options.disabled&&t.options.scope===r.options.scope&&t.accept.call(t.element[0],r.currentItem||r.element)&&e.ui.intersect(r,e.extend(t,{offset:t.element.offset()}),t.options.tolerance))return i=!0,!1}),i?!1:this.accept.call(this.element[0],r.currentItem||r.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",t,this.ui(r)),this.element):!1)},ui:function(e){return{draggable:e.currentItem||e.element,helper:e.helper,position:e.position,offset:e.positionAbs}}}),e.ui.intersect=function(e,t,r){if(!t.offset)return!1;var i,s,o=(e.positionAbs||e.position.absolute).left,u=o+e.helperProportions.width,a=(e.positionAbs||e.position.absolute).top,f=a+e.helperProportions.height,l=t.offset.left,c=l+t.proportions.width,h=t.offset.top,p=h+t.proportions.height;switch(r){case"fit":return l<=o&&u<=c&&h<=a&&f<=p;case"intersect":return l<o+e.helperProportions.width/2&&u-e.helperProportions.width/2<c&&h<a+e.helperProportions.height/2&&f-e.helperProportions.height/2<p;case"pointer":return i=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,s=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top,n(s,h,t.proportions.height)&&n(i,l,t.proportions.width);case"touch":return(a>=h&&a<=p||f>=h&&f<=p||a<h&&f>p)&&(o>=l&&o<=c||u>=l&&u<=c||o<l&&u>c);default:return!1}},e.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(t,n){var r,i,s=e.ui.ddmanager.droppables[t.options.scope]||[],o=n?n.type:null,u=(t.currentItem||t.element).find(":data(ui-droppable)").addBack();e:for(r=0;r<s.length;r++){if(s[r].options.disabled||t&&!s[r].accept.call(s[r].element[0],t.currentItem||t.element))continue;for(i=0;i<u.length;i++)if(u[i]===s[r].element[0]){s[r].proportions.height=0;continue e}s[r].visible=s[r].element.css("display")!=="none";if(!s[r].visible)continue;o==="mousedown"&&s[r]._activate.call(s[r],n),s[r].offset=s[r].element.offset(),s[r].proportions={width:s[r].element[0].offsetWidth,height:s[r].element[0].offsetHeight}}},drop:function(t,n){var r=!1;return e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(!this.options)return;!this.options.disabled&&this.visible&&e.ui.intersect(t,this,this.options.tolerance)&&(r=this._drop.call(this,n)||r),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],t.currentItem||t.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n))}),r},dragStart:function(t,n){t.element.parentsUntil("body").bind("scroll.droppable",function(){t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)})},drag:function(t,n){t.options.refreshPositions&&e.ui.ddmanager.prepareOffsets(t,n),e.each(e.ui.ddmanager.droppables[t.options.scope]||[],function(){if(this.options.disabled||this.greedyChild||!this.visible)return;var r,i,s,o=e.ui.intersect(t,this,this.options.tolerance),u=!o&&this.isover?"isout":o&&!this.isover?"isover":null;if(!u)return;this.options.greedy&&(i=this.options.scope,s=this.element.parents(":data(ui-droppable)").filter(function(){return e.data(this,"ui-droppable").options.scope===i}),s.length&&(r=e.data(s[0],"ui-droppable"),r.greedyChild=u==="isover")),r&&u==="isover"&&(r.isover=!1,r.isout=!0,r._out.call(r,n)),this[u]=!0,this[u==="isout"?"isover":"isout"]=!1,this[u==="isover"?"_over":"_out"].call(this,n),r&&u==="isout"&&(r.isout=!1,r.isover=!0,r._over.call(r,n))})},dragStop:function(t,n){t.element.parentsUntil("body").unbind("scroll.droppable"),t.options.refreshPositions||e.ui.ddmanager.prepareOffsets(t,n)}}})(jQuery);(function(e,t){function n(e){return parseInt(e,10)||0}function r(e){return!isNaN(parseInt(e,10))}e.widget("ui.resizable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:90,resize:null,start:null,stop:null},_create:function(){var t,n,r,i,s,o=this,u=this.options;this.element.addClass("ui-resizable"),e.extend(this,{_aspectRatio:!!u.aspectRatio,aspectRatio:u.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:u.helper||u.ghost||u.animate?u.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(e("<div class='ui-wrapper' style='overflow: hidden;'></div>").css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("ui-resizable",this.element.data("ui-resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=u.handles||(e(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se");if(this.handles.constructor===String){this.handles==="all"&&(this.handles="n,e,s,w,se,sw,ne,nw"),t=this.handles.split(","),this.handles={};for(n=0;n<t.length;n++)r=e.trim(t[n]),s="ui-resizable-"+r,i=e("<div class='ui-resizable-handle "+s+"'></div>"),i.css({zIndex:u.zIndex}),"se"===r&&i.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[r]=".ui-resizable-"+r,this.element.append(i)}this._renderAxis=function(t){var n,r,i,s;t=t||this.element;for(n in this.handles){this.handles[n].constructor===String&&(this.handles[n]=e(this.handles[n],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)&&(r=e(this.handles[n],this.element),s=/sw|ne|nw|se|n|s/.test(n)?r.outerHeight():r.outerWidth(),i=["padding",/ne|nw|n/.test(n)?"Top":/se|sw|s/.test(n)?"Bottom":/^e$/.test(n)?"Right":"Left"].join(""),t.css(i,s),this._proportionallyResize());if(!e(this.handles[n]).length)continue}},this._renderAxis(this.element),this._handles=e(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){o.resizing||(this.className&&(i=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i)),o.axis=i&&i[1]?i[1]:"se")}),u.autoHide&&(this._handles.hide(),e(this.element).addClass("ui-resizable-autohide").mouseenter(function(){if(u.disabled)return;e(this).removeClass("ui-resizable-autohide"),o._handles.show()}).mouseleave(function(){if(u.disabled)return;o.resizing||(e(this).addClass("ui-resizable-autohide"),o._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var t,n=function(t){e(t).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};return this.elementIsWrapper&&(n(this.element),t=this.element,this.originalElement.css({position:t.css("position"),width:t.outerWidth(),height:t.outerHeight(),top:t.css("top"),left:t.css("left")}).insertAfter(t),t.remove()),this.originalElement.css("resize",this.originalResizeStyle),n(this.originalElement),this},_mouseCapture:function(t){var n,r,i=!1;for(n in this.handles){r=e(this.handles[n])[0];if(r===t.target||e.contains(r,t.target))i=!0}return!this.options.disabled&&i},_mouseStart:function(t){var r,i,s,o=this.options,u=this.element.position(),a=this.element;return this.resizing=!0,/absolute/.test(a.css("position"))?a.css({position:"absolute",top:a.css("top"),left:a.css("left")}):a.is(".ui-draggable")&&a.css({position:"absolute",top:u.top,left:u.left}),this._renderProxy(),r=n(this.helper.css("left")),i=n(this.helper.css("top")),o.containment&&(r+=e(o.containment).scrollLeft()||0,i+=e(o.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:r,top:i},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:r,top:i},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:t.pageX,top:t.pageY},this.aspectRatio=typeof o.aspectRatio=="number"?o.aspectRatio:this.originalSize.width/this.originalSize.height||1,s=e(".ui-resizable-"+this.axis).css("cursor"),e("body").css("cursor",s==="auto"?this.axis+"-resize":s),a.addClass("ui-resizable-resizing"),this._propagate("start",t),!0},_mouseDrag:function(t){var n,r=this.helper,i={},s=this.originalMousePosition,o=this.axis,u=this.position.top,a=this.position.left,f=this.size.width,l=this.size.height,c=t.pageX-s.left||0,h=t.pageY-s.top||0,p=this._change[o];if(!p)return!1;n=p.apply(this,[t,c,h]),this._updateVirtualBoundaries(t.shiftKey);if(this._aspectRatio||t.shiftKey)n=this._updateRatio(n,t);return n=this._respectSize(n,t),this._updateCache(n),this._propagate("resize",t),this.position.top!==u&&(i.top=this.position.top+"px"),this.position.left!==a&&(i.left=this.position.left+"px"),this.size.width!==f&&(i.width=this.size.width+"px"),this.size.height!==l&&(i.height=this.size.height+"px"),r.css(i),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),e.isEmptyObject(i)||this._trigger("resize",t,this.ui()),!1},_mouseStop:function(t){this.resizing=!1;var n,r,i,s,o,u,a,f=this.options,l=this;return this._helper&&(n=this._proportionallyResizeElements,r=n.length&&/textarea/i.test(n[0].nodeName),i=r&&e.ui.hasScroll(n[0],"left")?0:l.sizeDiff.height,s=r?0:l.sizeDiff.width,o={width:l.helper.width()-s,height:l.helper.height()-i},u=parseInt(l.element.css("left"),10)+(l.position.left-l.originalPosition.left)||null,a=parseInt(l.element.css("top"),10)+(l.position.top-l.originalPosition.top)||null,f.animate||this.element.css(e.extend(o,{top:a,left:u})),l.helper.height(l.size.height),l.helper.width(l.size.width),this._helper&&!f.animate&&this._proportionallyResize()),e("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",t),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(e){var t,n,i,s,o,u=this.options;o={minWidth:r(u.minWidth)?u.minWidth:0,maxWidth:r(u.maxWidth)?u.maxWidth:Infinity,minHeight:r(u.minHeight)?u.minHeight:0,maxHeight:r(u.maxHeight)?u.maxHeight:Infinity};if(this._aspectRatio||e)t=o.minHeight*this.aspectRatio,i=o.minWidth/this.aspectRatio,n=o.maxHeight*this.aspectRatio,s=o.maxWidth/this.aspectRatio,t>o.minWidth&&(o.minWidth=t),i>o.minHeight&&(o.minHeight=i),n<o.maxWidth&&(o.maxWidth=n),s<o.maxHeight&&(o.maxHeight=s);this._vBoundaries=o},_updateCache:function(e){this.offset=this.helper.offset(),r(e.left)&&(this.position.left=e.left),r(e.top)&&(this.position.top=e.top),r(e.height)&&(this.size.height=e.height),r(e.width)&&(this.size.width=e.width)},_updateRatio:function(e){var t=this.position,n=this.size,i=this.axis;return r(e.height)?e.width=e.height*this.aspectRatio:r(e.width)&&(e.height=e.width/this.aspectRatio),i==="sw"&&(e.left=t.left+(n.width-e.width),e.top=null),i==="nw"&&(e.top=t.top+(n.height-e.height),e.left=t.left+(n.width-e.width)),e},_respectSize:function(e){var t=this._vBoundaries,n=this.axis,i=r(e.width)&&t.maxWidth&&t.maxWidth<e.width,s=r(e.height)&&t.maxHeight&&t.maxHeight<e.height,o=r(e.width)&&t.minWidth&&t.minWidth>e.width,u=r(e.height)&&t.minHeight&&t.minHeight>e.height,a=this.originalPosition.left+this.originalSize.width,f=this.position.top+this.size.height,l=/sw|nw|w/.test(n),c=/nw|ne|n/.test(n);return o&&(e.width=t.minWidth),u&&(e.height=t.minHeight),i&&(e.width=t.maxWidth),s&&(e.height=t.maxHeight),o&&l&&(e.left=a-t.minWidth),i&&l&&(e.left=a-t.maxWidth),u&&c&&(e.top=f-t.minHeight),s&&c&&(e.top=f-t.maxHeight),!e.width&&!e.height&&!e.left&&e.top?e.top=null:!e.width&&!e.height&&!e.top&&e.left&&(e.left=null),e},_proportionallyResize:function(){if(!this._proportionallyResizeElements.length)return;var e,t,n,r,i,s=this.helper||this.element;for(e=0;e<this._proportionallyResizeElements.length;e++){i=this._proportionallyResizeElements[e];if(!this.borderDif){this.borderDif=[],n=[i.css("borderTopWidth"),i.css("borderRightWidth"),i.css("borderBottomWidth"),i.css("borderLeftWidth")],r=[i.css("paddingTop"),i.css("paddingRight"),i.css("paddingBottom"),i.css("paddingLeft")];for(t=0;t<n.length;t++)this.borderDif[t]=(parseInt(n[t],10)||0)+(parseInt(r[t],10)||0)}i.css({height:s.height()-this.borderDif[0]-this.borderDif[2]||0,width:s.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var t=this.element,n=this.options;this.elementOffset=t.offset(),this._helper?(this.helper=this.helper||e("<div style='overflow:hidden;'></div>"),this.helper.addClass(this._helper).css({width:this.element.outerWidth()-1,height:this.element.outerHeight()-1,position:"absolute",left:this.elementOffset.left+"px",top:this.elementOffset.top+"px",zIndex:++n.zIndex}),this.helper.appendTo("body").disableSelection()):this.helper=this.element},_change:{e:function(e,t){return{width:this.originalSize.width+t}},w:function(e,t){var n=this.originalSize,r=this.originalPosition;return{left:r.left+t,width:n.width-t}},n:function(e,t,n){var r=this.originalSize,i=this.originalPosition;return{top:i.top+n,height:r.height-n}},s:function(e,t,n){return{height:this.originalSize.height+n}},se:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},sw:function(t,n,r){return e.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[t,n,r]))},ne:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[t,n,r]))},nw:function(t,n,r){return e.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[t,n,r]))}},_propagate:function(t,n){e.ui.plugin.call(this,t,[n,this.ui()]),t!=="resize"&&this._trigger(t,n,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),e.ui.plugin.add("resizable","animate",{stop:function(t){var n=e(this).data("ui-resizable"),r=n.options,i=n._proportionallyResizeElements,s=i.length&&/textarea/i.test(i[0].nodeName),o=s&&e.ui.hasScroll(i[0],"left")?0:n.sizeDiff.height,u=s?0:n.sizeDiff.width,a={width:n.size.width-u,height:n.size.height-o},f=parseInt(n.element.css("left"),10)+(n.position.left-n.originalPosition.left)||null,l=parseInt(n.element.css("top"),10)+(n.position.top-n.originalPosition.top)||null;n.element.animate(e.extend(a,l&&f?{top:l,left:f}:{}),{duration:r.animateDuration,easing:r.animateEasing,step:function(){var r={width:parseInt(n.element.css("width"),10),height:parseInt(n.element.css("height"),10),top:parseInt(n.element.css("top"),10),left:parseInt(n.element.css("left"),10)};i&&i.length&&e(i[0]).css({width:r.width,height:r.height}),n._updateCache(r),n._propagate("resize",t)}})}}),e.ui.plugin.add("resizable","containment",{start:function(){var t,r,i,s,o,u,a,f=e(this).data("ui-resizable"),l=f.options,c=f.element,h=l.containment,p=h instanceof e?h.get(0):/parent/.test(h)?c.parent().get(0):h;if(!p)return;f.containerElement=e(p),/document/.test(h)||h===document?(f.containerOffset={left:0,top:0},f.containerPosition={left:0,top:0},f.parentData={element:e(document),left:0,top:0,width:e(document).width(),height:e(document).height()||document.body.parentNode.scrollHeight}):(t=e(p),r=[],e(["Top","Right","Left","Bottom"]).each(function(e,i){r[e]=n(t.css("padding"+i))}),f.containerOffset=t.offset(),f.containerPosition=t.position(),f.containerSize={height:t.innerHeight()-r[3],width:t.innerWidth()-r[1]},i=f.containerOffset,s=f.containerSize.height,o=f.containerSize.width,u=e.ui.hasScroll(p,"left")?p.scrollWidth:o,a=e.ui.hasScroll(p)?p.scrollHeight:s,f.parentData={element:p,left:i.left,top:i.top,width:u,height:a})},resize:function(t){var n,r,i,s,o=e(this).data("ui-resizable"),u=o.options,a=o.containerOffset,f=o.position,l=o._aspectRatio||t.shiftKey,c={top:0,left:0},h=o.containerElement;h[0]!==document&&/static/.test(h.css("position"))&&(c=a),f.left<(o._helper?a.left:0)&&(o.size.width=o.size.width+(o._helper?o.position.left-a.left:o.position.left-c.left),l&&(o.size.height=o.size.width/o.aspectRatio),o.position.left=u.helper?a.left:0),f.top<(o._helper?a.top:0)&&(o.size.height=o.size.height+(o._helper?o.position.top-a.top:o.position.top),l&&(o.size.width=o.size.height*o.aspectRatio),o.position.top=o._helper?a.top:0),o.offset.left=o.parentData.left+o.position.left,o.offset.top=o.parentData.top+o.position.top,n=Math.abs((o._helper?o.offset.left-c.left:o.offset.left-c.left)+o.sizeDiff.width),r=Math.abs((o._helper?o.offset.top-c.top:o.offset.top-a.top)+o.sizeDiff.height),i=o.containerElement.get(0)===o.element.parent().get(0),s=/relative|absolute/.test(o.containerElement.css("position")),i&&s&&(n-=o.parentData.left),n+o.size.width>=o.parentData.width&&(o.size.width=o.parentData.width-n,l&&(o.size.height=o.size.width/o.aspectRatio)),r+o.size.height>=o.parentData.height&&(o.size.height=o.parentData.height-r,l&&(o.size.width=o.size.height*o.aspectRatio))},stop:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.containerOffset,i=t.containerPosition,s=t.containerElement,o=e(t.helper),u=o.offset(),a=o.outerWidth()-t.sizeDiff.width,f=o.outerHeight()-t.sizeDiff.height;t._helper&&!n.animate&&/relative/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f}),t._helper&&!n.animate&&/static/.test(s.css("position"))&&e(this).css({left:u.left-i.left-r.left,width:a,height:f})}}),e.ui.plugin.add("resizable","alsoResize",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=function(t){e(t).each(function(){var t=e(this);t.data("ui-resizable-alsoresize",{width:parseInt(t.width(),10),height:parseInt(t.height(),10),left:parseInt(t.css("left"),10),top:parseInt(t.css("top"),10)})})};typeof n.alsoResize=="object"&&!n.alsoResize.parentNode?n.alsoResize.length?(n.alsoResize=n.alsoResize[0],r(n.alsoResize)):e.each(n.alsoResize,function(e){r(e)}):r(n.alsoResize)},resize:function(t,n){var r=e(this).data("ui-resizable"),i=r.options,s=r.originalSize,o=r.originalPosition,u={height:r.size.height-s.height||0,width:r.size.width-s.width||0,top:r.position.top-o.top||0,left:r.position.left-o.left||0},a=function(t,r){e(t).each(function(){var t=e(this),i=e(this).data("ui-resizable-alsoresize"),s={},o=r&&r.length?r:t.parents(n.originalElement[0]).length?["width","height"]:["width","height","top","left"];e.each(o,function(e,t){var n=(i[t]||0)+(u[t]||0);n&&n>=0&&(s[t]=n||null)}),t.css(s)})};typeof i.alsoResize=="object"&&!i.alsoResize.nodeType?e.each(i.alsoResize,function(e,t){a(e,t)}):a(i.alsoResize)},stop:function(){e(this).removeData("resizable-alsoresize")}}),e.ui.plugin.add("resizable","ghost",{start:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size;t.ghost=t.originalElement.clone(),t.ghost.css({opacity:.25,display:"block",position:"relative",height:r.height,width:r.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass(typeof n.ghost=="string"?n.ghost:""),t.ghost.appendTo(t.helper)},resize:function(){var t=e(this).data("ui-resizable");t.ghost&&t.ghost.css({position:"relative",height:t.size.height,width:t.size.width})},stop:function(){var t=e(this).data("ui-resizable");t.ghost&&t.helper&&t.helper.get(0).removeChild(t.ghost.get(0))}}),e.ui.plugin.add("resizable","grid",{resize:function(){var t=e(this).data("ui-resizable"),n=t.options,r=t.size,i=t.originalSize,s=t.originalPosition,o=t.axis,u=typeof n.grid=="number"?[n.grid,n.grid]:n.grid,a=u[0]||1,f=u[1]||1,l=Math.round((r.width-i.width)/a)*a,c=Math.round((r.height-i.height)/f)*f,h=i.width+l,p=i.height+c,d=n.maxWidth&&n.maxWidth<h,v=n.maxHeight&&n.maxHeight<p,m=n.minWidth&&n.minWidth>h,g=n.minHeight&&n.minHeight>p;n.grid=u,m&&(h+=a),g&&(p+=f),d&&(h-=a),v&&(p-=f),/^(se|s|e)$/.test(o)?(t.size.width=h,t.size.height=p):/^(ne)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.top=s.top-c):/^(sw)$/.test(o)?(t.size.width=h,t.size.height=p,t.position.left=s.left-l):(t.size.width=h,t.size.height=p,t.position.top=s.top-c,t.position.left=s.left-l)}})})(jQuery);(function(e,t){e.widget("ui.selectable",e.ui.mouse,{version:"1.10.0",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch",selected:null,selecting:null,start:null,stop:null,unselected:null,unselecting:null},_create:function(){var t,n=this;this.element.addClass("ui-selectable"),this.dragged=!1,this.refresh=function(){t=e(n.options.filter,n.element[0]),t.addClass("ui-selectee"),t.each(function(){var t=e(this),n=t.offset();e.data(this,"selectable-item",{element:this,$element:t,left:n.left,top:n.top,right:n.left+t.outerWidth(),bottom:n.top+t.outerHeight(),startselected:!1,selected:t.hasClass("ui-selected"),selecting:t.hasClass("ui-selecting"),unselecting:t.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=t.addClass("ui-selectee"),this._mouseInit(),this.helper=e("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(t){var n=this,r=this.options;this.opos=[t.pageX,t.pageY];if(this.options.disabled)return;this.selectees=e(r.filter,this.element[0]),this._trigger("start",t),e(r.appendTo).append(this.helper),this.helper.css({left:t.pageX,top:t.pageY,width:0,height:0}),r.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var r=e.data(this,"selectable-item");r.startselected=!0,!t.metaKey&&!t.ctrlKey&&(r.$element.removeClass("ui-selected"),r.selected=!1,r.$element.addClass("ui-unselecting"),r.unselecting=!0,n._trigger("unselecting",t,{unselecting:r.element}))}),e(t.target).parents().addBack().each(function(){var r,i=e.data(this,"selectable-item");if(i)return r=!t.metaKey&&!t.ctrlKey||!i.$element.hasClass("ui-selected"),i.$element.removeClass(r?"ui-unselecting":"ui-selected").addClass(r?"ui-selecting":"ui-unselecting"),i.unselecting=!r,i.selecting=r,i.selected=r,r?n._trigger("selecting",t,{selecting:i.element}):n._trigger("unselecting",t,{unselecting:i.element}),!1})},_mouseDrag:function(t){this.dragged=!0;if(this.options.disabled)return;var n,r=this,i=this.options,s=this.opos[0],o=this.opos[1],u=t.pageX,a=t.pageY;return s>u&&(n=u,u=s,s=n),o>a&&(n=a,a=o,o=n),this.helper.css({left:s,top:o,width:u-s,height:a-o}),this.selectees.each(function(){var n=e.data(this,"selectable-item"),f=!1;if(!n||n.element===r.element[0])return;i.tolerance==="touch"?f=!(n.left>u||n.right<s||n.top>a||n.bottom<o):i.tolerance==="fit"&&(f=n.left>s&&n.right<u&&n.top>o&&n.bottom<a),f?(n.selected&&(n.$element.removeClass("ui-selected"),n.selected=!1),n.unselecting&&(n.$element.removeClass("ui-unselecting"),n.unselecting=!1),n.selecting||(n.$element.addClass("ui-selecting"),n.selecting=!0,r._trigger("selecting",t,{selecting:n.element}))):(n.selecting&&((t.metaKey||t.ctrlKey)&&n.startselected?(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.$element.addClass("ui-selected"),n.selected=!0):(n.$element.removeClass("ui-selecting"),n.selecting=!1,n.startselected&&(n.$element.addClass("ui-unselecting"),n.unselecting=!0),r._trigger("unselecting",t,{unselecting:n.element}))),n.selected&&!t.metaKey&&!t.ctrlKey&&!n.startselected&&(n.$element.removeClass("ui-selected"),n.selected=!1,n.$element.addClass("ui-unselecting"),n.unselecting=!0,r._trigger("unselecting",t,{unselecting:n.element})))}),!1},_mouseStop:function(t){var n=this;return this.dragged=!1,e(".ui-unselecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-unselecting"),r.unselecting=!1,r.startselected=!1,n._trigger("unselected",t,{unselected:r.element})}),e(".ui-selecting",this.element[0]).each(function(){var r=e.data(this,"selectable-item");r.$element.removeClass("ui-selecting").addClass("ui-selected"),r.selecting=!1,r.selected=!0,r.startselected=!0,n._trigger("selected",t,{selected:r.element})}),this._trigger("stop",t),this.helper.remove(),!1}})})(jQuery);(function(e,t){function n(e,t,n){return e>t&&e<t+n}e.widget("ui.sortable",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_create:function(){var e=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=this.items.length?e.axis==="x"||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display")):!1,this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var e=this.items.length-1;e>=0;e--)this.items[e].item.removeData(this.widgetName+"-item");return this},_setOption:function(t,n){t==="disabled"?(this.options[t]=n,this.widget().toggleClass("ui-sortable-disabled",!!n)):e.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(t,n){var r=null,i=!1,s=this;if(this.reverting)return!1;if(this.options.disabled||this.options.type==="static")return!1;this._refreshItems(t),e(t.target).parents().each(function(){if(e.data(this,s.widgetName+"-item")===s)return r=e(this),!1}),e.data(t.target,s.widgetName+"-item")===s&&(r=e(t.target));if(!r)return!1;if(this.options.handle&&!n){e(this.options.handle,r).find("*").addBack().each(function(){this===t.target&&(i=!0)});if(!i)return!1}return this.currentItem=r,this._removeCurrentsFromItems(),!0},_mouseStart:function(t,n,r){var i,s=this.options;this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(t),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},e.extend(this.offset,{click:{left:t.pageX-this.offset.left,top:t.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(t),this.originalPageX=t.pageX,this.originalPageY=t.pageY,s.cursorAt&&this._adjustOffsetFromHelper(s.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),s.containment&&this._setContainment(),s.cursor&&(e("body").css("cursor")&&(this._storedCursor=e("body").css("cursor")),e("body").css("cursor",s.cursor)),s.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",s.opacity)),s.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",s.zIndex)),this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",t,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions();if(!r)for(i=this.containers.length-1;i>=0;i--)this.containers[i]._trigger("activate",t,this._uiHash(this));return e.ui.ddmanager&&(e.ui.ddmanager.current=this),e.ui.ddmanager&&!s.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(t),!0},_mouseDrag:function(t){var n,r,i,s,o=this.options,u=!1;this.position=this._generatePosition(t),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==document&&this.scrollParent[0].tagName!=="HTML"?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-t.pageY<o.scrollSensitivity?this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop+o.scrollSpeed:t.pageY-this.overflowOffset.top<o.scrollSensitivity&&(this.scrollParent[0].scrollTop=u=this.scrollParent[0].scrollTop-o.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-t.pageX<o.scrollSensitivity?this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft+o.scrollSpeed:t.pageX-this.overflowOffset.left<o.scrollSensitivity&&(this.scrollParent[0].scrollLeft=u=this.scrollParent[0].scrollLeft-o.scrollSpeed)):(t.pageY-e(document).scrollTop()<o.scrollSensitivity?u=e(document).scrollTop(e(document).scrollTop()-o.scrollSpeed):e(window).height()-(t.pageY-e(document).scrollTop())<o.scrollSensitivity&&(u=e(document).scrollTop(e(document).scrollTop()+o.scrollSpeed)),t.pageX-e(document).scrollLeft()<o.scrollSensitivity?u=e(document).scrollLeft(e(document).scrollLeft()-o.scrollSpeed):e(window).width()-(t.pageX-e(document).scrollLeft())<o.scrollSensitivity&&(u=e(document).scrollLeft(e(document).scrollLeft()+o.scrollSpeed))),u!==!1&&e.ui.ddmanager&&!o.dropBehaviour&&e.ui.ddmanager.prepareOffsets(this,t)),this.positionAbs=this._convertPositionTo("absolute");if(!this.options.axis||this.options.axis!=="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!=="x")this.helper[0].style.top=this.position.top+"px";for(n=this.items.length-1;n>=0;n--){r=this.items[n],i=r.item[0],s=this._intersectsWithPointer(r);if(!s)continue;if(r.instance!==this.currentContainer)continue;if(i!==this.currentItem[0]&&this.placeholder[s===1?"next":"prev"]()[0]!==i&&!e.contains(this.placeholder[0],i)&&(this.options.type==="semi-dynamic"?!e.contains(this.element[0],i):!0)){this.direction=s===1?"down":"up";if(this.options.tolerance!=="pointer"&&!this._intersectsWithSides(r))break;this._rearrange(t,r),this._trigger("change",t,this._uiHash());break}}return this._contactContainers(t),e.ui.ddmanager&&e.ui.ddmanager.drag(this,t),this._trigger("sort",t,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(t,n){if(!t)return;e.ui.ddmanager&&!this.options.dropBehaviour&&e.ui.ddmanager.drop(this,t);if(this.options.revert){var r=this,i=this.placeholder.offset();this.reverting=!0,e(this.helper).animate({left:i.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollLeft),top:i.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){r._clear(t)})}else this._clear(t,n);return!1},cancel:function(){if(this.dragging){this._mouseUp({target:null}),this.options.helper==="original"?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var t=this.containers.length-1;t>=0;t--)this.containers[t]._trigger("deactivate",null,this._uiHash(this)),this.containers[t].containerCache.over&&(this.containers[t]._trigger("out",null,this._uiHash(this)),this.containers[t].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.options.helper!=="original"&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),e.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?e(this.domPosition.prev).after(this.currentItem):e(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},e(n).each(function(){var n=(e(t.item||this).attr(t.attribute||"id")||"").match(t.expression||/(.+)[\-=_](.+)/);n&&r.push((t.key||n[1]+"[]")+"="+(t.key&&t.expression?n[1]:n[2]))}),!r.length&&t.key&&r.push(t.key+"="),r.join("&")},toArray:function(t){var n=this._getItemsAsjQuery(t&&t.connected),r=[];return t=t||{},n.each(function(){r.push(e(t.item||this).attr(t.attribute||"id")||"")}),r},_intersectsWith:function(e){var t=this.positionAbs.left,n=t+this.helperProportions.width,r=this.positionAbs.top,i=r+this.helperProportions.height,s=e.left,o=s+e.width,u=e.top,a=u+e.height,f=this.offset.click.top,l=this.offset.click.left,c=r+f>u&&r+f<a&&t+l>s&&t+l<o;return this.options.tolerance==="pointer"||this.options.forcePointerForContainers||this.options.tolerance!=="pointer"&&this.helperProportions[this.floating?"width":"height"]>e[this.floating?"width":"height"]?c:s<t+this.helperProportions.width/2&&n-this.helperProportions.width/2<o&&u<r+this.helperProportions.height/2&&i-this.helperProportions.height/2<a},_intersectsWithPointer:function(e){var t=this.options.axis==="x"||n(this.positionAbs.top+this.offset.click.top,e.top,e.height),r=this.options.axis==="y"||n(this.positionAbs.left+this.offset.click.left,e.left,e.width),i=t&&r,s=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&o==="right"||s==="down"?2:1:s&&(s==="down"?2:1):!1},_intersectsWithSides:function(e){var t=n(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),r=n(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),i=this._getDragVerticalDirection(),s=this._getDragHorizontalDirection();return this.floating&&s?s==="right"&&r||s==="left"&&!r:i&&(i==="down"&&t||i==="up"&&!t)},_getDragVerticalDirection:function(){var e=this.positionAbs.top-this.lastPositionAbs.top;return e!==0&&(e>0?"down":"up")},_getDragHorizontalDirection:function(){var e=this.positionAbs.left-this.lastPositionAbs.left;return e!==0&&(e>0?"right":"left")},refresh:function(e){return this._refreshItems(e),this.refreshPositions(),this},_connectWith:function(){var e=this.options;return e.connectWith.constructor===String?[e.connectWith]:e.connectWith},_getItemsAsjQuery:function(t){var n,r,i,s,o=[],u=[],a=this._connectWith();if(a&&t)for(n=a.length-1;n>=0;n--){i=e(a[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&u.push([e.isFunction(s.options.items)?s.options.items.call(s.element):e(s.options.items,s.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),s])}u.push([e.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):e(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(n=u.length-1;n>=0;n--)u[n][0].each(function(){o.push(this)});return e(o)},_removeCurrentsFromItems:function(){var t=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=e.grep(this.items,function(e){for(var n=0;n<t.length;n++)if(t[n]===e.item[0])return!1;return!0})},_refreshItems:function(t){this.items=[],this.containers=[this];var n,r,i,s,o,u,a,f,l=this.items,c=[[e.isFunction(this.options.items)?this.options.items.call(this.element[0],t,{item:this.currentItem}):e(this.options.items,this.element),this]],h=this._connectWith();if(h&&this.ready)for(n=h.length-1;n>=0;n--){i=e(h[n]);for(r=i.length-1;r>=0;r--)s=e.data(i[r],this.widgetFullName),s&&s!==this&&!s.options.disabled&&(c.push([e.isFunction(s.options.items)?s.options.items.call(s.element[0],t,{item:this.currentItem}):e(s.options.items,s.element),s]),this.containers.push(s))}for(n=c.length-1;n>=0;n--){o=c[n][1],u=c[n][0];for(r=0,f=u.length;r<f;r++)a=e(u[r]),a.data(this.widgetName+"-item",o),l.push({item:a,instance:o,width:0,height:0,left:0,top:0})}},refreshPositions:function(t){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,r,i,s;for(n=this.items.length-1;n>=0;n--){r=this.items[n];if(r.instance!==this.currentContainer&&this.currentContainer&&r.item[0]!==this.currentItem[0])continue;i=this.options.toleranceElement?e(this.options.toleranceElement,r.item):r.item,t||(r.width=i.outerWidth(),r.height=i.outerHeight()),s=i.offset(),r.left=s.left,r.top=s.top}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)s=this.containers[n].element.offset(),this.containers[n].containerCache.left=s.left,this.containers[n].containerCache.top=s.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(t){t=t||this;var n,r=t.options;if(!r.placeholder||r.placeholder.constructor===String)n=r.placeholder,r.placeholder={element:function(){var r=e(document.createElement(t.currentItem[0].nodeName)).addClass(n||t.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return n||(r.style.visibility="hidden"),r},update:function(e,i){if(n&&!r.forcePlaceholderSize)return;i.height()||i.height(t.currentItem.innerHeight()-parseInt(t.currentItem.css("paddingTop")||0,10)-parseInt(t.currentItem.css("paddingBottom")||0,10)),i.width()||i.width(t.currentItem.innerWidth()-parseInt(t.currentItem.css("paddingLeft")||0,10)-parseInt(t.currentItem.css("paddingRight")||0,10))}};t.placeholder=e(r.placeholder.element.call(t.element,t.currentItem)),t.currentItem.after(t.placeholder),r.placeholder.update(t,t.placeholder)},_contactContainers:function(t){var n,r,i,s,o,u,a,f,l,c=null,h=null;for(n=this.containers.length-1;n>=0;n--){if(e.contains(this.currentItem[0],this.containers[n].element[0]))continue;if(this._intersectsWith(this.containers[n].containerCache)){if(c&&e.contains(this.containers[n].element[0],c.element[0]))continue;c=this.containers[n],h=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",t,this._uiHash(this)),this.containers[n].containerCache.over=0)}if(!c)return;if(this.containers.length===1)this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1;else{i=1e4,s=null,o=this.containers[h].floating?"left":"top",u=this.containers[h].floating?"width":"height",a=this.positionAbs[o]+this.offset.click[o];for(r=this.items.length-1;r>=0;r--){if(!e.contains(this.containers[h].element[0],this.items[r].item[0]))continue;if(this.items[r].item[0]===this.currentItem[0])continue;f=this.items[r].item.offset()[o],l=!1,Math.abs(f-a)>Math.abs(f+this.items[r][u]-a)&&(l=!0,f+=this.items[r][u]),Math.abs(f-a)<i&&(i=Math.abs(f-a),s=this.items[r],this.direction=l?"up":"down")}if(!s&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[h],s?this._rearrange(t,s,null,!0):this._rearrange(t,null,this.containers[h].element,!0),this._trigger("change",t,this._uiHash()),this.containers[h]._trigger("change",t,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[h]._trigger("over",t,this._uiHash(this)),this.containers[h].containerCache.over=1}},_createHelper:function(t){var n=this.options,r=e.isFunction(n.helper)?e(n.helper.apply(this.element[0],[t,this.currentItem])):n.helper==="clone"?this.currentItem.clone():this.currentItem;return r.parents("body").length||e(n.appendTo!=="parent"?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(r[0]),r[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!r[0].style.width||n.forceHelperSize)&&r.width(this.currentItem.width()),(!r[0].style.height||n.forceHelperSize)&&r.height(this.currentItem.height()),r},_adjustOffsetFromHelper:function(t){typeof t=="string"&&(t=t.split(" ")),e.isArray(t)&&(t={left:+t[0],top:+t[1]||0}),"left"in t&&(this.offset.click.left=t.left+this.margins.left),"right"in t&&(this.offset.click.left=this.helperProportions.width-t.right+this.margins.left),"top"in t&&(this.offset.click.top=t.top+this.margins.top),"bottom"in t&&(this.offset.click.top=this.helperProportions.height-t.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var t=this.offsetParent.offset();this.cssPosition==="absolute"&&this.scrollParent[0]!==document&&e.contains(this.scrollParent[0],this.offsetParent[0])&&(t.left+=this.scrollParent.scrollLeft(),t.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]===document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()==="html"&&e.ui.ie)t={top:0,left:0};return{top:t.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:t.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition==="relative"){var e=this.currentItem.position();return{top:e.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:e.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var t,n,r,i=this.options;i.containment==="parent"&&(i.containment=this.helper[0].parentNode);if(i.containment==="document"||i.containment==="window")this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,e(i.containment==="document"?document:window).width()-this.helperProportions.width-this.margins.left,(e(i.containment==="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];/^(document|window|parent)$/.test(i.containment)||(t=e(i.containment)[0],n=e(i.containment).offset(),r=e(t).css("overflow")!=="hidden",this.containment=[n.left+(parseInt(e(t).css("borderLeftWidth"),10)||0)+(parseInt(e(t).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(e(t).css("borderTopWidth"),10)||0)+(parseInt(e(t).css("paddingTop"),10)||0)-this.margins.top,n.left+(r?Math.max(t.scrollWidth,t.offsetWidth):t.offsetWidth)-(parseInt(e(t).css("borderLeftWidth"),10)||0)-(parseInt(e(t).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(r?Math.max(t.scrollHeight,t.offsetHeight):t.offsetHeight)-(parseInt(e(t).css("borderTopWidth"),10)||0)-(parseInt(e(t).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(t,n){n||(n=this.position);var r=t==="absolute"?1:-1,i=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,s=/(html|body)/i.test(i[0].tagName);return{top:n.top+this.offset.relative.top*r+this.offset.parent.top*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():s?0:i.scrollTop())*r,left:n.left+this.offset.relative.left*r+this.offset.parent.left*r-(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():s?0:i.scrollLeft())*r}},_generatePosition:function(t){var n,r,i=this.options,s=t.pageX,o=t.pageY,u=this.cssPosition!=="absolute"||this.scrollParent[0]!==document&&!!e.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,a=/(html|body)/i.test(u[0].tagName);return this.cssPosition==="relative"&&(this.scrollParent[0]===document||this.scrollParent[0]===this.offsetParent[0])&&(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(t.pageX-this.offset.click.left<this.containment[0]&&(s=this.containment[0]+this.offset.click.left),t.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),t.pageX-this.offset.click.left>this.containment[2]&&(s=this.containment[2]+this.offset.click.left),t.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid&&(n=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1],o=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-i.grid[1]:n+i.grid[1]:n,r=this.originalPageX+Math.round((s-this.originalPageX)/i.grid[0])*i.grid[0],s=this.containment?r-this.offset.click.left>=this.containment[0]&&r-this.offset.click.left<=this.containment[2]?r:r-this.offset.click.left>=this.containment[0]?r-i.grid[0]:r+i.grid[0]:r)),{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(this.cssPosition==="fixed"?-this.scrollParent.scrollTop():a?0:u.scrollTop()),left:s-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(this.cssPosition==="fixed"?-this.scrollParent.scrollLeft():a?0:u.scrollLeft())}},_rearrange:function(e,t,n,r){n?n[0].appendChild(this.placeholder[0]):t.item[0].parentNode.insertBefore(this.placeholder[0],this.direction==="down"?t.item[0]:t.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var i=this.counter;this._delay(function(){i===this.counter&&this.refreshPositions(!r)})},_clear:function(t,n){this.reverting=!1;var r,i=[];!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null;if(this.helper[0]===this.currentItem[0]){for(r in this._storedCSS)if(this._storedCSS[r]==="auto"||this._storedCSS[r]==="static")this._storedCSS[r]="";this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!n&&i.push(function(e){this._trigger("receive",e,this._uiHash(this.fromOutside))}),(this.fromOutside||this.domPosition.prev!==this.currentItem.prev().not(".ui-sortable-helper")[0]||this.domPosition.parent!==this.currentItem.parent()[0])&&!n&&i.push(function(e){this._trigger("update",e,this._uiHash())}),this!==this.currentContainer&&(n||(i.push(function(e){this._trigger("remove",e,this._uiHash())}),i.push(function(e){return function(t){e._trigger("receive",t,this._uiHash(this))}}.call(this,this.currentContainer)),i.push(function(e){return function(t){e._trigger("update",t,this._uiHash(this))}}.call(this,this.currentContainer))));for(r=this.containers.length-1;r>=0;r--)n||i.push(function(e){return function(t){e._trigger("deactivate",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over&&(i.push(function(e){return function(t){e._trigger("out",t,this._uiHash(this))}}.call(this,this.containers[r])),this.containers[r].containerCache.over=0);this._storedCursor&&e("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex",this._storedZIndex==="auto"?"":this._storedZIndex),this.dragging=!1;if(this.cancelHelperRemoval){if(!n){this._trigger("beforeStop",t,this._uiHash());for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!1}n||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null;if(!n){for(r=0;r<i.length;r++)i[r].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){e.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(t){var n=t||this;return{helper:n.helper,placeholder:n.placeholder||e([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:t?t.element:null}}})})(jQuery);(function(e,t){var n=0,r={},i={};r.height=r.paddingTop=r.paddingBottom=r.borderTopWidth=r.borderBottomWidth="hide",i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="show",e.widget("ui.accordion",{version:"1.10.0",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var t=this.options;this.prevShow=this.prevHide=e(),this.element.addClass("ui-accordion ui-widget ui-helper-reset").attr("role","tablist"),!t.collapsible&&(t.active===!1||t.active==null)&&(t.active=0),this._processPanels(),t.active<0&&(t.active+=this.headers.length),this._refresh()},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():e()}},_createIcons:function(){var t=this.options.icons;t&&(e("<span>").addClass("ui-accordion-header-icon ui-icon "+t.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(t.header).addClass(t.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var e;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),e=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this.options.heightStyle!=="content"&&e.css("height","")},_setOption:function(e,t){if(e==="active"){this._activate(t);return}e==="event"&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(t)),this._super(e,t),e==="collapsible"&&!t&&this.options.active===!1&&this._activate(0),e==="icons"&&(this._destroyIcons(),t&&this._createIcons()),e==="disabled"&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!t)},_keydown:function(t){if(t.altKey||t.ctrlKey)return;var n=e.ui.keyCode,r=this.headers.length,i=this.headers.index(t.target),s=!1;switch(t.keyCode){case n.RIGHT:case n.DOWN:s=this.headers[(i+1)%r];break;case n.LEFT:case n.UP:s=this.headers[(i-1+r)%r];break;case n.SPACE:case n.ENTER:this._eventHandler(t);break;case n.HOME:s=this.headers[0];break;case n.END:s=this.headers[r-1]}s&&(e(t.target).attr("tabIndex",-1),e(s).attr("tabIndex",0),s.focus(),t.preventDefault())},_panelKeyDown:function(t){t.keyCode===e.ui.keyCode.UP&&t.ctrlKey&&e(t.currentTarget).prev().focus()},refresh:function(){var t=this.options;this._processPanels();if(t.active===!1&&t.collapsible===!0||!this.headers.length)t.active=!1,this.active=e();t.active===!1?this._activate(0):this.active.length&&!e.contains(this.element[0],this.active[0])?this.headers.length===this.headers.find(".ui-state-disabled").length?(t.active=!1,this.active=e()):this._activate(Math.max(0,t.active-1)):t.active=this.headers.index(this.active),this._destroyIcons(),this._refresh()},_processPanels:function(){this.headers=this.element.find(this.options.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").filter(":not(.ui-accordion-content-active)").hide()},_refresh:function(){var t,r=this.options,i=r.heightStyle,s=this.element.parent(),o=this.accordionId="ui-accordion-"+(this.element.attr("id")||++n);this.active=this._findActive(r.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this.headers.attr("role","tab").each(function(t){var n=e(this),r=n.attr("id"),i=n.next(),s=i.attr("id");r||(r=o+"-header-"+t,n.attr("id",r)),s||(s=o+"-panel-"+t,i.attr("id",s)),n.attr("aria-controls",s),i.attr("aria-labelledby",r)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._createIcons(),this._setupEvents(r.event),i==="fill"?(t=s.height(),this.element.siblings(":visible").each(function(){var n=e(this),r=n.css("position");if(r==="absolute"||r==="fixed")return;t-=n.outerHeight(!0)}),this.headers.each(function(){t-=e(this).outerHeight(!0)}),this.headers.next().each(function(){e(this).height(Math.max(0,t-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):i==="auto"&&(t=0,this.headers.next().each(function(){t=Math.max(t,e(this).css("height","").height())}).height(t))},_activate:function(t){var n=this._findActive(t)[0];if(n===this.active[0])return;n=n||this.active[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return typeof t=="number"?this.headers.eq(t):e()},_setupEvents:function(t){var n={keydown:"_keydown"};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.headers.add(this.headers.next())),this._on(this.headers,n),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._hoverable(this.headers),this._focusable(this.headers)},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i[0]===r[0],o=s&&n.collapsible,u=o?e():i.next(),a=r.next(),f={oldHeader:r,oldPanel:a,newHeader:o?e():i,newPanel:u};t.preventDefault();if(s&&!n.collapsible||this._trigger("beforeActivate",t,f)===!1)return;n.active=o?!1:this.headers.index(i),this.active=s?e():i,this._toggle(f),r.removeClass("ui-accordion-header-active ui-state-active"),n.icons&&r.children(".ui-accordion-header-icon").removeClass(n.icons.activeHeader).addClass(n.icons.header),s||(i.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),n.icons&&i.children(".ui-accordion-header-icon").removeClass(n.icons.header).addClass(n.icons.activeHeader),i.next().addClass("ui-accordion-content-active"))},_toggle:function(t){var n=t.newPanel,r=this.prevShow.length?this.prevShow:t.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=n,this.prevHide=r,this.options.animate?this._animate(n,r,t):(r.hide(),n.show(),this._toggleComplete(t)),r.attr({"aria-expanded":"false","aria-hidden":"true"}),r.prev().attr("aria-selected","false"),n.length&&r.length?r.prev().attr("tabIndex",-1):n.length&&this.headers.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),n.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(e,t,n){var s,o,u,a=this,f=0,l=e.length&&(!t.length||e.index()<t.index()),c=this.options.animate||{},h=l&&c.down||c,p=function(){a._toggleComplete(n)};typeof h=="number"&&(u=h),typeof h=="string"&&(o=h),o=o||h.easing||c.easing,u=u||h.duration||c.duration;if(!t.length)return e.animate(i,u,o,p);if(!e.length)return t.animate(r,u,o,p);s=e.show().outerHeight(),t.animate(r,{duration:u,easing:o,step:function(e,t){t.now=Math.round(e)}}),e.hide().animate(i,{duration:u,easing:o,complete:p,step:function(e,n){n.now=Math.round(e),n.prop!=="height"?f+=n.now:a.options.heightStyle!=="content"&&(n.now=Math.round(s-t.outerHeight()-f),f=0)}})},_toggleComplete:function(e){var t=e.oldPanel;t.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),t.length&&(t.parent()[0].className=t.parent()[0].className),this._trigger("activate",null,e)}})})(jQuery);(function(e,t){var n=0;e.widget("ui.autocomplete",{version:"1.10.0",defaultElement:"<input>",options:{appendTo:null,autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var t,n,r;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(i){if(this.element.prop("readOnly")){t=!0,r=!0,n=!0;return}t=!1,r=!1,n=!1;var s=e.ui.keyCode;switch(i.keyCode){case s.PAGE_UP:t=!0,this._move("previousPage",i);break;case s.PAGE_DOWN:t=!0,this._move("nextPage",i);break;case s.UP:t=!0,this._keyEvent("previous",i);break;case s.DOWN:t=!0,this._keyEvent("next",i);break;case s.ENTER:case s.NUMPAD_ENTER:this.menu.active&&(t=!0,i.preventDefault(),this.menu.select(i));break;case s.TAB:this.menu.active&&this.menu.select(i);break;case s.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(i),i.preventDefault());break;default:n=!0,this._searchTimeout(i)}},keypress:function(r){if(t){t=!1,r.preventDefault();return}if(n)return;var i=e.ui.keyCode;switch(r.keyCode){case i.PAGE_UP:this._move("previousPage",r);break;case i.PAGE_DOWN:this._move("nextPage",r);break;case i.UP:this._keyEvent("previous",r);break;case i.DOWN:this._keyEvent("next",r)}},input:function(e){if(r){r=!1,e.preventDefault();return}this._searchTimeout(e)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(e){if(this.cancelBlur){delete this.cancelBlur;return}clearTimeout(this.searching),this.close(e),this._change(e)}}),this._initSource(),this.menu=e("<ul>").addClass("ui-autocomplete").appendTo(this._appendTo()).menu({input:e(),role:null}).zIndex(this.element.zIndex()+1).hide().data("ui-menu"),this._on(this.menu.element,{mousedown:function(t){t.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var n=this.menu.element[0];e(t.target).closest(".ui-menu-item").length||this._delay(function(){var t=this;this.document.one("mousedown",function(r){r.target!==t.element[0]&&r.target!==n&&!e.contains(n,r.target)&&t.close()})})},menufocus:function(t,n){if(this.isNewMenu){this.isNewMenu=!1;if(t.originalEvent&&/^mouse/.test(t.originalEvent.type)){this.menu.blur(),this.document.one("mousemove",function(){e(t.target).trigger(t.originalEvent)});return}}var r=n.item.data("ui-autocomplete-item");!1!==this._trigger("focus",t,{item:r})?t.originalEvent&&/^key/.test(t.originalEvent.type)&&this._value(r.value):this.liveRegion.text(r.value)},menuselect:function(e,t){var n=t.item.data("ui-autocomplete-item"),r=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=r,this._delay(function(){this.previous=r,this.selectedItem=n})),!1!==this._trigger("select",e,{item:n})&&this._value(n.value),this.term=this._value(),this.close(e),this.selectedItem=n}}),this.liveRegion=e("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(e,t){this._super(e,t),e==="source"&&this._initSource(),e==="appendTo"&&this.menu.element.appendTo(this._appendTo()),e==="disabled"&&t&&this.xhr&&this.xhr.abort()},_appendTo:function(){var t=this.options.appendTo;return t&&(t=t.jquery||t.nodeType?e(t):this.document.find(t).eq(0)),t||(t=this.element.closest(".ui-front")),t.length||(t=this.document[0].body),t},_isMultiLine:function(){return this.element.is("textarea")?!0:this.element.is("input")?!1:this.element.prop("isContentEditable")},_initSource:function(){var t,n,r=this;e.isArray(this.options.source)?(t=this.options.source,this.source=function(n,r){r(e.ui.autocomplete.filter(t,n.term))}):typeof this.options.source=="string"?(n=this.options.source,this.source=function(t,i){r.xhr&&r.xhr.abort(),r.xhr=e.ajax({url:n,data:t,dataType:"json",success:function(e){i(e)},error:function(){i([])}})}):this.source=this.options.source},_searchTimeout:function(e){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,e))},this.options.delay)},search:function(e,t){e=e!=null?e:this._value(),this.term=this._value();if(e.length<this.options.minLength)return this.close(t);if(this._trigger("search",t)===!1)return;return this._search(e)},_search:function(e){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:e},this._response())},_response:function(){var e=this,t=++n;return function(r){t===n&&e.__response(r),e.pending--,e.pending||e.element.removeClass("ui-autocomplete-loading")}},__response:function(e){e&&(e=this._normalize(e)),this._trigger("response",null,{content:e}),!this.options.disabled&&e&&e.length&&!this.cancelSearch?(this._suggest(e),this._trigger("open")):this._close()},close:function(e){this.cancelSearch=!0,this._close(e)},_close:function(e){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",e))},_change:function(e){this.previous!==this._value()&&this._trigger("change",e,{item:this.selectedItem})},_normalize:function(t){return t.length&&t[0].label&&t[0].value?t:e.map(t,function(t){return typeof t=="string"?{label:t,value:t}:e.extend({label:t.label||t.value,value:t.value||t.label},t)})},_suggest:function(t){var n=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(n,t),this.menu.refresh(),n.show(),this._resizeMenu(),n.position(e.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var e=this.menu.element;e.outerWidth(Math.max(e.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(t,n){var r=this;e.each(n,function(e,n){r._renderItemData(t,n)})},_renderItemData:function(e,t){return this._renderItem(e,t).data("ui-autocomplete-item",t)},_renderItem:function(t,n){return e("<li>").append(e("<a>").text(n.label)).appendTo(t)},_move:function(e,t){if(!this.menu.element.is(":visible")){this.search(null,t);return}if(this.menu.isFirstItem()&&/^previous/.test(e)||this.menu.isLastItem()&&/^next/.test(e)){this._value(this.term),this.menu.blur();return}this.menu[e](t)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(e,t){if(!this.isMultiLine||this.menu.element.is(":visible"))this._move(e,t),t.preventDefault()}}),e.extend(e.ui.autocomplete,{escapeRegex:function(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(t,n){var r=new RegExp(e.ui.autocomplete.escapeRegex(n),"i");return e.grep(t,function(e){return r.test(e.label||e.value||e)})}}),e.widget("ui.autocomplete",e.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(e){return e+(e>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(e){var t;this._superApply(arguments);if(this.options.disabled||this.cancelSearch)return;e&&e.length?t=this.options.messages.results(e.length):t=this.options.messages.noResults,this.liveRegion.text(t)}})})(jQuery);(function(e,t){var n,r,i,s,o="ui-button ui-widget ui-state-default ui-corner-all",u="ui-state-hover ui-state-active ",a="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",f=function(){var t=e(this).find(":ui-button");setTimeout(function(){t.button("refresh")},1)},l=function(t){var n=t.name,r=t.form,i=e([]);return n&&(n=n.replace(/'/g,"\\'"),r?i=e(r).find("[name='"+n+"']"):i=e("[name='"+n+"']",t.ownerDocument).filter(function(){return!this.form})),i};e.widget("ui.button",{version:"1.10.0",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,f),typeof this.options.disabled!="boolean"?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var t=this,u=this.options,a=this.type==="checkbox"||this.type==="radio",c=a?"":"ui-state-active",h="ui-state-focus";u.label===null&&(u.label=this.type==="input"?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(o).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){if(u.disabled)return;this===n&&e(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){if(u.disabled)return;e(this).removeClass(c)}).bind("click"+this.eventNamespace,function(e){u.disabled&&(e.preventDefault(),e.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){t.buttonElement.addClass(h)}).bind("blur"+this.eventNamespace,function(){t.buttonElement.removeClass(h)}),a&&(this.element.bind("change"+this.eventNamespace,function(){if(s)return;t.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(e){if(u.disabled)return;s=!1,r=e.pageX,i=e.pageY}).bind("mouseup"+this.eventNamespace,function(e){if(u.disabled)return;if(r!==e.pageX||i!==e.pageY)s=!0})),this.type==="checkbox"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1}):this.type==="radio"?this.buttonElement.bind("click"+this.eventNamespace,function(){if(u.disabled||s)return!1;e(this).addClass("ui-state-active"),t.buttonElement.attr("aria-pressed","true");var n=t.element[0];l(n).not(n).map(function(){return e(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).addClass("ui-state-active"),n=this,t.document.one("mouseup",function(){n=null})}).bind("mouseup"+this.eventNamespace,function(){if(u.disabled)return!1;e(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(t){if(u.disabled)return!1;(t.keyCode===e.ui.keyCode.SPACE||t.keyCode===e.ui.keyCode.ENTER)&&e(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace+" blur"+this.eventNamespace,function(){e(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(t){t.keyCode===e.ui.keyCode.SPACE&&e(this).click()})),this._setOption("disabled",u.disabled),this._resetButton()},_determineButtonType:function(){var e,t,n;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button",this.type==="checkbox"||this.type==="radio"?(e=this.element.parents().last(),t="label[for='"+this.element.attr("id")+"']",this.buttonElement=e.find(t),this.buttonElement.length||(e=e.length?e.siblings():this.element.siblings(),this.buttonElement=e.filter(t),this.buttonElement.length||(this.buttonElement=e.find(t))),this.element.addClass("ui-helper-hidden-accessible"),n=this.element.is(":checked"),n&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",n)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(o+" "+u+" "+a).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(e,t){this._super(e,t);if(e==="disabled"){t?this.element.prop("disabled",!0):this.element.prop("disabled",!1);return}this._resetButton()},refresh:function(){var t=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");t!==this.options.disabled&&this._setOption("disabled",t),this.type==="radio"?l(this.element[0]).each(function(){e(this).is(":checked")?e(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):e(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):this.type==="checkbox"&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if(this.type==="input"){this.options.label&&this.element.val(this.options.label);return}var t=this.buttonElement.removeClass(a),n=e("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(t.empty()).text(),r=this.options.icons,i=r.primary&&r.secondary,s=[];r.primary||r.secondary?(this.options.text&&s.push("ui-button-text-icon"+(i?"s":r.primary?"-primary":"-secondary")),r.primary&&t.prepend("<span class='ui-button-icon-primary ui-icon "+r.primary+"'></span>"),r.secondary&&t.append("<span class='ui-button-icon-secondary ui-icon "+r.secondary+"'></span>"),this.options.text||(s.push(i?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||t.attr("title",e.trim(n)))):s.push("ui-button-text-only"),t.addClass(s.join(" "))}}),e.widget("ui.buttonset",{version:"1.10.0",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(ui-button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(e,t){e==="disabled"&&this.buttons.button("option",e,t),this._super(e,t)},refresh:function(){var t=this.element.css("direction")==="rtl";this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(t?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(t?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return e(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})})(jQuery);(function(e,t){function s(){this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},e.extend(this._defaults,this.regional[""]),this.dpDiv=o(e("<div id='"+this._mainDivId+"' class='ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>"))}function o(t){var n="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(n,"mouseout",function(){e(this).removeClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).removeClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).removeClass("ui-datepicker-next-hover")}).delegate(n,"mouseover",function(){e.datepicker._isDisabledDatepicker(i.inline?t.parent()[0]:i.input[0])||(e(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),e(this).addClass("ui-state-hover"),this.className.indexOf("ui-datepicker-prev")!==-1&&e(this).addClass("ui-datepicker-prev-hover"),this.className.indexOf("ui-datepicker-next")!==-1&&e(this).addClass("ui-datepicker-next-hover"))})}function u(t,n){e.extend(t,n);for(var r in n)n[r]==null&&(t[r]=n[r]);return t}e.extend(e.ui,{datepicker:{version:"1.10.0"}});var n="datepicker",r=(new Date).getTime(),i;e.extend(s.prototype,{markerClassName:"hasDatepicker",maxRows:4,_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(e){return u(this._defaults,e||{}),this},_attachDatepicker:function(t,n){var r,i,s;r=t.nodeName.toLowerCase(),i=r==="div"||r==="span",t.id||(this.uuid+=1,t.id="dp"+this.uuid),s=this._newInst(e(t),i),s.settings=e.extend({},n||{}),r==="input"?this._connectDatepicker(t,s):i&&this._inlineDatepicker(t,s)},_newInst:function(t,n){var r=t[0].id.replace(/([^A-Za-z0-9_\-])/g,"\\\\$1");return{id:r,input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:n,dpDiv:n?o(e("<div class='"+this._inlineClass+" ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all'></div>")):this.dpDiv}},_connectDatepicker:function(t,r){var i=e(t);r.append=e([]),r.trigger=e([]);if(i.hasClass(this.markerClassName))return;this._attachments(i,r),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp),this._autoSize(r),e.data(t,n,r),r.settings.disabled&&this._disableDatepicker(t)},_attachments:function(t,n){var r,i,s,o=this._get(n,"appendText"),u=this._get(n,"isRTL");n.append&&n.append.remove(),o&&(n.append=e("<span class='"+this._appendClass+"'>"+o+"</span>"),t[u?"before":"after"](n.append)),t.unbind("focus",this._showDatepicker),n.trigger&&n.trigger.remove(),r=this._get(n,"showOn"),(r==="focus"||r==="both")&&t.focus(this._showDatepicker);if(r==="button"||r==="both")i=this._get(n,"buttonText"),s=this._get(n,"buttonImage"),n.trigger=e(this._get(n,"buttonImageOnly")?e("<img/>").addClass(this._triggerClass).attr({src:s,alt:i,title:i}):e("<button type='button'></button>").addClass(this._triggerClass).html(s?e("<img/>").attr({src:s,alt:i,title:i}):i)),t[u?"before":"after"](n.trigger),n.trigger.click(function(){return e.datepicker._datepickerShowing&&e.datepicker._lastInput===t[0]?e.datepicker._hideDatepicker():e.datepicker._datepickerShowing&&e.datepicker._lastInput!==t[0]?(e.datepicker._hideDatepicker(),e.datepicker._showDatepicker(t[0])):e.datepicker._showDatepicker(t[0]),!1})},_autoSize:function(e){if(this._get(e,"autoSize")&&!e.inline){var t,n,r,i,s=new Date(2009,11,20),o=this._get(e,"dateFormat");o.match(/[DM]/)&&(t=function(e){n=0,r=0;for(i=0;i<e.length;i++)e[i].length>n&&(n=e[i].length,r=i);return r},s.setMonth(t(this._get(e,o.match(/MM/)?"monthNames":"monthNamesShort"))),s.setDate(t(this._get(e,o.match(/DD/)?"dayNames":"dayNamesShort"))+20-s.getDay())),e.input.attr("size",this._formatDate(e,s).length)}},_inlineDatepicker:function(t,r){var i=e(t);if(i.hasClass(this.markerClassName))return;i.addClass(this.markerClassName).append(r.dpDiv),e.data(t,n,r),this._setDate(r,this._getDefaultDate(r),!0),this._updateDatepicker(r),this._updateAlternate(r),r.settings.disabled&&this._disableDatepicker(t),r.dpDiv.css("display","block")},_dialogDatepicker:function(t,r,i,s,o){var a,f,l,c,h,p=this._dialogInst;return p||(this.uuid+=1,a="dp"+this.uuid,this._dialogInput=e("<input type='text' id='"+a+"' style='position: absolute; top: -100px; width: 0px;'/>"),this._dialogInput.keydown(this._doKeyDown),e("body").append(this._dialogInput),p=this._dialogInst=this._newInst(this._dialogInput,!1),p.settings={},e.data(this._dialogInput[0],n,p)),u(p.settings,s||{}),r=r&&r.constructor===Date?this._formatDate(p,r):r,this._dialogInput.val(r),this._pos=o?o.length?o:[o.pageX,o.pageY]:null,this._pos||(f=document.documentElement.clientWidth,l=document.documentElement.clientHeight,c=document.documentElement.scrollLeft||document.body.scrollLeft,h=document.documentElement.scrollTop||document.body.scrollTop,this._pos=[f/2-100+c,l/2-150+h]),this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),p.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),e.blockUI&&e.blockUI(this.dpDiv),e.data(this._dialogInput[0],n,p),this},_destroyDatepicker:function(t){var r,i=e(t),s=e.data(t,n);if(!i.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase(),e.removeData(t,n),r==="input"?(s.append.remove(),s.trigger.remove(),i.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):(r==="div"||r==="span")&&i.removeClass(this.markerClassName).empty()},_enableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!1,o.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().removeClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e})},_disableDatepicker:function(t){var r,i,s=e(t),o=e.data(t,n);if(!s.hasClass(this.markerClassName))return;r=t.nodeName.toLowerCase();if(r==="input")t.disabled=!0,o.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if(r==="div"||r==="span")i=s.children("."+this._inlineClass),i.children().addClass("ui-state-disabled"),i.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0);this._disabledInputs=e.map(this._disabledInputs,function(e){return e===t?null:e}),this._disabledInputs[this._disabledInputs.length]=t},_isDisabledDatepicker:function(e){if(!e)return!1;for(var t=0;t<this._disabledInputs.length;t++)if(this._disabledInputs[t]===e)return!0;return!1},_getInst:function(t){try{return e.data(t,n)}catch(r){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(n,r,i){var s,o,a,f,l=this._getInst(n);if(arguments.length===2&&typeof r=="string")return r==="defaults"?e.extend({},e.datepicker._defaults):l?r==="all"?e.extend({},l.settings):this._get(l,r):null;s=r||{},typeof r=="string"&&(s={},s[r]=i),l&&(this._curInst===l&&this._hideDatepicker(),o=this._getDateDatepicker(n,!0),a=this._getMinMaxDate(l,"min"),f=this._getMinMaxDate(l,"max"),u(l.settings,s),a!==null&&s.dateFormat!==t&&s.minDate===t&&(l.settings.minDate=this._formatDate(l,a)),f!==null&&s.dateFormat!==t&&s.maxDate===t&&(l.settings.maxDate=this._formatDate(l,f)),"disabled"in s&&(s.disabled?this._disableDatepicker(n):this._enableDatepicker(n)),this._attachments(e(n),l),this._autoSize(l),this._setDate(l,o),this._updateAlternate(l),this._updateDatepicker(l))},_changeDatepicker:function(e,t,n){this._optionDatepicker(e,t,n)},_refreshDatepicker:function(e){var t=this._getInst(e);t&&this._updateDatepicker(t)},_setDateDatepicker:function(e,t){var n=this._getInst(e);n&&(this._setDate(n,t),this._updateDatepicker(n),this._updateAlternate(n))},_getDateDatepicker:function(e,t){var n=this._getInst(e);return n&&!n.inline&&this._setDateFromField(n,t),n?this._getDate(n):null},_doKeyDown:function(t){var n,r,i,s=e.datepicker._getInst(t.target),o=!0,u=s.dpDiv.is(".ui-datepicker-rtl");s._keyEvent=!0;if(e.datepicker._datepickerShowing)switch(t.keyCode){case 9:e.datepicker._hideDatepicker(),o=!1;break;case 13:return i=e("td."+e.datepicker._dayOverClass+":not(."+e.datepicker._currentClass+")",s.dpDiv),i[0]&&e.datepicker._selectDay(t.target,s.selectedMonth,s.selectedYear,i[0]),n=e.datepicker._get(s,"onSelect"),n?(r=e.datepicker._formatDate(s),n.apply(s.input?s.input[0]:null,[r,s])):e.datepicker._hideDatepicker(),!1;case 27:e.datepicker._hideDatepicker();break;case 33:e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 34:e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&e.datepicker._clearDate(t.target),o=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&e.datepicker._gotoToday(t.target),o=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?1:-1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?-e.datepicker._get(s,"stepBigMonths"):-e.datepicker._get(s,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,-7,"D"),o=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,u?-1:1,"D"),o=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&e.datepicker._adjustDate(t.target,t.ctrlKey?+e.datepicker._get(s,"stepBigMonths"):+e.datepicker._get(s,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&e.datepicker._adjustDate(t.target,7,"D"),o=t.ctrlKey||t.metaKey;break;default:o=!1}else t.keyCode===36&&t.ctrlKey?e.datepicker._showDatepicker(this):o=!1;o&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var n,r,i=e.datepicker._getInst(t.target);if(e.datepicker._get(i,"constrainInput"))return n=e.datepicker._possibleChars(e.datepicker._get(i,"dateFormat")),r=String.fromCharCode(t.charCode==null?t.keyCode:t.charCode),t.ctrlKey||t.metaKey||r<" "||!n||n.indexOf(r)>-1},_doKeyUp:function(t){var n,r=e.datepicker._getInst(t.target);if(r.input.val()!==r.lastVal)try{n=e.datepicker.parseDate(e.datepicker._get(r,"dateFormat"),r.input?r.input.val():null,e.datepicker._getFormatConfig(r)),n&&(e.datepicker._setDateFromField(r),e.datepicker._updateAlternate(r),e.datepicker._updateDatepicker(r))}catch(i){}return!0},_showDatepicker:function(t){t=t.target||t,t.nodeName.toLowerCase()!=="input"&&(t=e("input",t.parentNode)[0]);if(e.datepicker._isDisabledDatepicker(t)||e.datepicker._lastInput===t)return;var n,r,i,s,o,a,f;n=e.datepicker._getInst(t),e.datepicker._curInst&&e.datepicker._curInst!==n&&(e.datepicker._curInst.dpDiv.stop(!0,!0),n&&e.datepicker._datepickerShowing&&e.datepicker._hideDatepicker(e.datepicker._curInst.input[0])),r=e.datepicker._get(n,"beforeShow"),i=r?r.apply(t,[t,n]):{};if(i===!1)return;u(n.settings,i),n.lastVal=null,e.datepicker._lastInput=t,e.datepicker._setDateFromField(n),e.datepicker._inDialog&&(t.value=""),e.datepicker._pos||(e.datepicker._pos=e.datepicker._findPos(t),e.datepicker._pos[1]+=t.offsetHeight),s=!1,e(t).parents().each(function(){return s|=e(this).css("position")==="fixed",!s}),o={left:e.datepicker._pos[0],top:e.datepicker._pos[1]},e.datepicker._pos=null,n.dpDiv.empty(),n.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),e.datepicker._updateDatepicker(n),o=e.datepicker._checkOffset(n,o,s),n.dpDiv.css({position:e.datepicker._inDialog&&e.blockUI?"static":s?"fixed":"absolute",display:"none",left:o.left+"px",top:o.top+"px"}),n.inline||(a=e.datepicker._get(n,"showAnim"),f=e.datepicker._get(n,"duration"),n.dpDiv.zIndex(e(t).zIndex()+1),e.datepicker._datepickerShowing=!0,e.effects&&e.effects.effect[a]?n.dpDiv.show(a,e.datepicker._get(n,"showOptions"),f):n.dpDiv[a||"show"](a?f:null),n.input.is(":visible")&&!n.input.is(":disabled")&&n.input.focus(),e.datepicker._curInst=n)},_updateDatepicker:function(t){this.maxRows=4,i=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var n,r=this._getNumberOfMonths(t),s=r[1],o=17;t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),s>1&&t.dpDiv.addClass("ui-datepicker-multi-"+s).css("width",o*s+"em"),t.dpDiv[(r[0]!==1||r[1]!==1?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t===e.datepicker._curInst&&e.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!==document.activeElement&&t.input.focus(),t.yearshtml&&(n=t.yearshtml,setTimeout(function(){n===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),n=t.yearshtml=null},0))},_getBorders:function(e){var t=function(e){return{thin:1,medium:2,thick:3}[e]||e};return[parseFloat(t(e.css("border-left-width"))),parseFloat(t(e.css("border-top-width")))]},_checkOffset:function(t,n,r){var i=t.dpDiv.outerWidth(),s=t.dpDiv.outerHeight(),o=t.input?t.input.outerWidth():0,u=t.input?t.input.outerHeight():0,a=document.documentElement.clientWidth+(r?0:e(document).scrollLeft()),f=document.documentElement.clientHeight+(r?0:e(document).scrollTop());return n.left-=this._get(t,"isRTL")?i-o:0,n.left-=r&&n.left===t.input.offset().left?e(document).scrollLeft():0,n.top-=r&&n.top===t.input.offset().top+u?e(document).scrollTop():0,n.left-=Math.min(n.left,n.left+i>a&&a>i?Math.abs(n.left+i-a):0),n.top-=Math.min(n.top,n.top+s>f&&f>s?Math.abs(s+u):0),n},_findPos:function(t){var n,r=this._getInst(t),i=this._get(r,"isRTL");while(t&&(t.type==="hidden"||t.nodeType!==1||e.expr.filters.hidden(t)))t=t[i?"previousSibling":"nextSibling"];return n=e(t).offset(),[n.left,n.top]},_hideDatepicker:function(t){var r,i,s,o,u=this._curInst;if(!u||t&&u!==e.data(t,n))return;this._datepickerShowing&&(r=this._get(u,"showAnim"),i=this._get(u,"duration"),s=function(){e.datepicker._tidyDialog(u)},e.effects&&(e.effects.effect[r]||e.effects[r])?u.dpDiv.hide(r,e.datepicker._get(u,"showOptions"),i,s):u.dpDiv[r==="slideDown"?"slideUp":r==="fadeIn"?"fadeOut":"hide"](r?i:null,s),r||s(),this._datepickerShowing=!1,o=this._get(u,"onClose"),o&&o.apply(u.input?u.input[0]:null,[u.input?u.input.val():"",u]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),e.blockUI&&(e.unblockUI(),e("body").append(this.dpDiv))),this._inDialog=!1)},_tidyDialog:function(e){e.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if(!e.datepicker._curInst)return;var n=e(t.target),r=e.datepicker._getInst(n[0]);(n[0].id!==e.datepicker._mainDivId&&n.parents("#"+e.datepicker._mainDivId).length===0&&!n.hasClass(e.datepicker.markerClassName)&&!n.closest("."+e.datepicker._triggerClass).length&&e.datepicker._datepickerShowing&&(!e.datepicker._inDialog||!e.blockUI)||n.hasClass(e.datepicker.markerClassName)&&e.datepicker._curInst!==r)&&e.datepicker._hideDatepicker()},_adjustDate:function(t,n,r){var i=e(t),s=this._getInst(i[0]);if(this._isDisabledDatepicker(i[0]))return;this._adjustInstDate(s,n+(r==="M"?this._get(s,"showCurrentAtPos"):0),r),this._updateDatepicker(s)},_gotoToday:function(t){var n,r=e(t),i=this._getInst(r[0]);this._get(i,"gotoCurrent")&&i.currentDay?(i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear):(n=new Date,i.selectedDay=n.getDate(),i.drawMonth=i.selectedMonth=n.getMonth(),i.drawYear=i.selectedYear=n.getFullYear()),this._notifyChange(i),this._adjustDate(r)},_selectMonthYear:function(t,n,r){var i=e(t),s=this._getInst(i[0]);s["selected"+(r==="M"?"Month":"Year")]=s["draw"+(r==="M"?"Month":"Year")]=parseInt(n.options[n.selectedIndex].value,10),this._notifyChange(s),this._adjustDate(i)},_selectDay:function(t,n,r,i){var s,o=e(t);if(e(i).hasClass(this._unselectableClass)||this._isDisabledDatepicker(o[0]))return;s=this._getInst(o[0]),s.selectedDay=s.currentDay=e("a",i).html(),s.selectedMonth=s.currentMonth=n,s.selectedYear=s.currentYear=r,this._selectDate(t,this._formatDate(s,s.currentDay,s.currentMonth,s.currentYear))},_clearDate:function(t){var n=e(t);this._selectDate(n,"")},_selectDate:function(t,n){var r,i=e(t),s=this._getInst(i[0]);n=n!=null?n:this._formatDate(s),s.input&&s.input.val(n),this._updateAlternate(s),r=this._get(s,"onSelect"),r?r.apply(s.input?s.input[0]:null,[n,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],typeof s.input[0]!="object"&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var n,r,i,s=this._get(t,"altField");s&&(n=this._get(t,"altFormat")||this._get(t,"dateFormat"),r=this._getDate(t),i=this.formatDate(n,r,this._getFormatConfig(t)),e(s).each(function(){e(this).val(i)}))},noWeekends:function(e){var t=e.getDay();return[t>0&&t<6,""]},iso8601Week:function(e){var t,n=new Date(e.getTime());return n.setDate(n.getDate()+4-(n.getDay()||7)),t=n.getTime(),n.setMonth(0),n.setDate(1),Math.floor(Math.round((t-n)/864e5)/7)+1},parseDate:function(t,n,r){if(t==null||n==null)throw"Invalid arguments";n=typeof n=="object"?n.toString():n+"";if(n==="")return null;var i,s,o,u=0,a=(r?r.shortYearCutoff:null)||this._defaults.shortYearCutoff,f=typeof a!="string"?a:(new Date).getFullYear()%100+parseInt(a,10),l=(r?r.dayNamesShort:null)||this._defaults.dayNamesShort,c=(r?r.dayNames:null)||this._defaults.dayNames,h=(r?r.monthNamesShort:null)||this._defaults.monthNamesShort,p=(r?r.monthNames:null)||this._defaults.monthNames,d=-1,v=-1,m=-1,g=-1,y=!1,b,w=function(e){var n=i+1<t.length&&t.charAt(i+1)===e;return n&&i++,n},E=function(e){var t=w(e),r=e==="@"?14:e==="!"?20:e==="y"&&t?4:e==="o"?3:2,i=new RegExp("^\\d{1,"+r+"}"),s=n.substring(u).match(i);if(!s)throw"Missing number at position "+u;return u+=s[0].length,parseInt(s[0],10)},S=function(t,r,i){var s=-1,o=e.map(w(t)?i:r,function(e,t){return[[t,e]]}).sort(function(e,t){return-(e[1].length-t[1].length)});e.each(o,function(e,t){var r=t[1];if(n.substr(u,r.length).toLowerCase()===r.toLowerCase())return s=t[0],u+=r.length,!1});if(s!==-1)return s+1;throw"Unknown name at position "+u},x=function(){if(n.charAt(u)!==t.charAt(i))throw"Unexpected literal at position "+u;u++};for(i=0;i<t.length;i++)if(y)t.charAt(i)==="'"&&!w("'")?y=!1:x();else switch(t.charAt(i)){case"d":m=E("d");break;case"D":S("D",l,c);break;case"o":g=E("o");break;case"m":v=E("m");break;case"M":v=S("M",h,p);break;case"y":d=E("y");break;case"@":b=new Date(E("@")),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"!":b=new Date((E("!")-this._ticksTo1970)/1e4),d=b.getFullYear(),v=b.getMonth()+1,m=b.getDate();break;case"'":w("'")?x():y=!0;break;default:x()}if(u<n.length){o=n.substr(u);if(!/^\s+/.test(o))throw"Extra/unparsed characters found in date: "+o}d===-1?d=(new Date).getFullYear():d<100&&(d+=(new Date).getFullYear()-(new Date).getFullYear()%100+(d<=f?0:-100));if(g>-1){v=1,m=g;do{s=this._getDaysInMonth(d,v-1);if(m<=s)break;v++,m-=s}while(!0)}b=this._daylightSavingAdjust(new Date(d,v-1,m));if(b.getFullYear()!==d||b.getMonth()+1!==v||b.getDate()!==m)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*24*60*60*1e7,formatDate:function(e,t,n){if(!t)return"";var r,i=(n?n.dayNamesShort:null)||this._defaults.dayNamesShort,s=(n?n.dayNames:null)||this._defaults.dayNames,o=(n?n.monthNamesShort:null)||this._defaults.monthNamesShort,u=(n?n.monthNames:null)||this._defaults.monthNames,a=function(t){var n=r+1<e.length&&e.charAt(r+1)===t;return n&&r++,n},f=function(e,t,n){var r=""+t;if(a(e))while(r.length<n)r="0"+r;return r},l=function(e,t,n,r){return a(e)?r[t]:n[t]},c="",h=!1;if(t)for(r=0;r<e.length;r++)if(h)e.charAt(r)==="'"&&!a("'")?h=!1:c+=e.charAt(r);else switch(e.charAt(r)){case"d":c+=f("d",t.getDate(),2);break;case"D":c+=l("D",t.getDay(),i,s);break;case"o":c+=f("o",Math.round(((new Date(t.getFullYear(),t.getMonth(),t.getDate())).getTime()-(new Date(t.getFullYear(),0,0)).getTime())/864e5),3);break;case"m":c+=f("m",t.getMonth()+1,2);break;case"M":c+=l("M",t.getMonth(),o,u);break;case"y":c+=a("y")?t.getFullYear():(t.getYear()%100<10?"0":"")+t.getYear()%100;break;case"@":c+=t.getTime();break;case"!":c+=t.getTime()*1e4+this._ticksTo1970;break;case"'":a("'")?c+="'":h=!0;break;default:c+=e.charAt(r)}return c},_possibleChars:function(e){var t,n="",r=!1,i=function(n){var r=t+1<e.length&&e.charAt(t+1)===n;return r&&t++,r};for(t=0;t<e.length;t++)if(r)e.charAt(t)==="'"&&!i("'")?r=!1:n+=e.charAt(t);else switch(e.charAt(t)){case"d":case"m":case"y":case"@":n+="0123456789";break;case"D":case"M":return null;case"'":i("'")?n+="'":r=!0;break;default:n+=e.charAt(t)}return n},_get:function(e,n){return e.settings[n]!==t?e.settings[n]:this._defaults[n]},_setDateFromField:function(e,t){if(e.input.val()===e.lastVal)return;var n=this._get(e,"dateFormat"),r=e.lastVal=e.input?e.input.val():null,i=this._getDefaultDate(e),s=i,o=this._getFormatConfig(e);try{s=this.parseDate(n,r,o)||i}catch(u){r=t?"":r}e.selectedDay=s.getDate(),e.drawMonth=e.selectedMonth=s.getMonth(),e.drawYear=e.selectedYear=s.getFullYear(),e.currentDay=r?s.getDate():0,e.currentMonth=r?s.getMonth():0,e.currentYear=r?s.getFullYear():0,this._adjustInstDate(e)},_getDefaultDate:function(e){return this._restrictMinMax(e,this._determineDate(e,this._get(e,"defaultDate"),new Date))},_determineDate:function(t,n,r){var i=function(e){var t=new Date;return t.setDate(t.getDate()+e),t},s=function(n){try{return e.datepicker.parseDate(e.datepicker._get(t,"dateFormat"),n,e.datepicker._getFormatConfig(t))}catch(r){}var i=(n.toLowerCase().match(/^c/)?e.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),o=i.getMonth(),u=i.getDate(),a=/([+\-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,f=a.exec(n);while(f){switch(f[2]||"d"){case"d":case"D":u+=parseInt(f[1],10);break;case"w":case"W":u+=parseInt(f[1],10)*7;break;case"m":case"M":o+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o));break;case"y":case"Y":s+=parseInt(f[1],10),u=Math.min(u,e.datepicker._getDaysInMonth(s,o))}f=a.exec(n)}return new Date(s,o,u)},o=n==null||n===""?r:typeof n=="string"?s(n):typeof n=="number"?isNaN(n)?r:i(n):new Date(n.getTime());return o=o&&o.toString()==="Invalid Date"?r:o,o&&(o.setHours(0),o.setMinutes(0),o.setSeconds(0),o.setMilliseconds(0)),this._daylightSavingAdjust(o)},_daylightSavingAdjust:function(e){return e?(e.setHours(e.getHours()>12?e.getHours()+2:0),e):null},_setDate:function(e,t,n){var r=!t,i=e.selectedMonth,s=e.selectedYear,o=this._restrictMinMax(e,this._determineDate(e,t,new Date));e.selectedDay=e.currentDay=o.getDate(),e.drawMonth=e.selectedMonth=e.currentMonth=o.getMonth(),e.drawYear=e.selectedYear=e.currentYear=o.getFullYear(),(i!==e.selectedMonth||s!==e.selectedYear)&&!n&&this._notifyChange(e),this._adjustInstDate(e),e.input&&e.input.val(r?"":this._formatDate(e))},_getDate:function(e){var t=!e.currentYear||e.input&&e.input.val()===""?null:this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return t},_attachHandlers:function(t){var n=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,-n,"M")},next:function(){window["DP_jQuery_"+r].datepicker._adjustDate(i,+n,"M")},hide:function(){window["DP_jQuery_"+r].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+r].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+r].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+r].datepicker._selectMonthYear(i,this,"Y"),!1}};e(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(e){var t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w,E,S,x,T,N,C,k,L,A,O,M,_,D,P,H,B,j,F,I,q=new Date,R=this._daylightSavingAdjust(new Date(q.getFullYear(),q.getMonth(),q.getDate())),U=this._get(e,"isRTL"),z=this._get(e,"showButtonPanel"),W=this._get(e,"hideIfNoPrevNext"),X=this._get(e,"navigationAsDateFormat"),V=this._getNumberOfMonths(e),$=this._get(e,"showCurrentAtPos"),J=this._get(e,"stepMonths"),K=V[0]!==1||V[1]!==1,Q=this._daylightSavingAdjust(e.currentDay?new Date(e.currentYear,e.currentMonth,e.currentDay):new Date(9999,9,9)),G=this._getMinMaxDate(e,"min"),Y=this._getMinMaxDate(e,"max"),Z=e.drawMonth-$,et=e.drawYear;Z<0&&(Z+=12,et--);if(Y){t=this._daylightSavingAdjust(new Date(Y.getFullYear(),Y.getMonth()-V[0]*V[1]+1,Y.getDate())),t=G&&t<G?G:t;while(this._daylightSavingAdjust(new Date(et,Z,1))>t)Z--,Z<0&&(Z=11,et--)}e.drawMonth=Z,e.drawYear=et,n=this._get(e,"prevText"),n=X?this.formatDate(n,this._daylightSavingAdjust(new Date(et,Z-J,1)),this._getFormatConfig(e)):n,r=this._canAdjustMonth(e,-1,et,Z)?"<a class='ui-datepicker-prev ui-corner-all' data-handler='prev' data-event='click' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>":W?"":"<a class='ui-datepicker-prev ui-corner-all ui-state-disabled' title='"+n+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"e":"w")+"'>"+n+"</span></a>",i=this._get(e,"nextText"),i=X?this.formatDate(i,this._daylightSavingAdjust(new Date(et,Z+J,1)),this._getFormatConfig(e)):i,s=this._canAdjustMonth(e,1,et,Z)?"<a class='ui-datepicker-next ui-corner-all' data-handler='next' data-event='click' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>":W?"":"<a class='ui-datepicker-next ui-corner-all ui-state-disabled' title='"+i+"'><span class='ui-icon ui-icon-circle-triangle-"+(U?"w":"e")+"'>"+i+"</span></a>",o=this._get(e,"currentText"),u=this._get(e,"gotoCurrent")&&e.currentDay?Q:R,o=X?this.formatDate(o,u,this._getFormatConfig(e)):o,a=e.inline?"":"<button type='button' class='ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all' data-handler='hide' data-event='click'>"+this._get(e,"closeText")+"</button>",f=z?"<div class='ui-datepicker-buttonpane ui-widget-content'>"+(U?a:"")+(this._isInRange(e,u)?"<button type='button' class='ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all' data-handler='today' data-event='click'>"+o+"</button>":"")+(U?"":a)+"</div>":"",l=parseInt(this._get(e,"firstDay"),10),l=isNaN(l)?0:l,c=this._get(e,"showWeek"),h=this._get(e,"dayNames"),p=this._get(e,"dayNamesMin"),d=this._get(e,"monthNames"),v=this._get(e,"monthNamesShort"),m=this._get(e,"beforeShowDay"),g=this._get(e,"showOtherMonths"),y=this._get(e,"selectOtherMonths"),b=this._getDefaultDate(e),w="",E;for(S=0;S<V[0];S++){x="",this.maxRows=4;for(T=0;T<V[1];T++){N=this._daylightSavingAdjust(new Date(et,Z,e.selectedDay)),C=" ui-corner-all",k="";if(K){k+="<div class='ui-datepicker-group";if(V[1]>1)switch(T){case 0:k+=" ui-datepicker-group-first",C=" ui-corner-"+(U?"right":"left");break;case V[1]-1:k+=" ui-datepicker-group-last",C=" ui-corner-"+(U?"left":"right");break;default:k+=" ui-datepicker-group-middle",C=""}k+="'>"}k+="<div class='ui-datepicker-header ui-widget-header ui-helper-clearfix"+C+"'>"+(/all|left/.test(C)&&S===0?U?s:r:"")+(/all|right/.test(C)&&S===0?U?r:s:"")+this._generateMonthYearHeader(e,Z,et,G,Y,S>0||T>0,d,v)+"</div><table class='ui-datepicker-calendar'><thead>"+"<tr>",L=c?"<th class='ui-datepicker-week-col'>"+this._get(e,"weekHeader")+"</th>":"";for(E=0;E<7;E++)A=(E+l)%7,L+="<th"+((E+l+6)%7>=5?" class='ui-datepicker-week-end'":"")+">"+"<span title='"+h[A]+"'>"+p[A]+"</span></th>";k+=L+"</tr></thead><tbody>",O=this._getDaysInMonth(et,Z),et===e.selectedYear&&Z===e.selectedMonth&&(e.selectedDay=Math.min(e.selectedDay,O)),M=(this._getFirstDayOfMonth(et,Z)-l+7)%7,_=Math.ceil((M+O)/7),D=K?this.maxRows>_?this.maxRows:_:_,this.maxRows=D,P=this._daylightSavingAdjust(new Date(et,Z,1-M));for(H=0;H<D;H++){k+="<tr>",B=c?"<td class='ui-datepicker-week-col'>"+this._get(e,"calculateWeek")(P)+"</td>":"";for(E=0;E<7;E++)j=m?m.apply(e.input?e.input[0]:null,[P]):[!0,""],F=P.getMonth()!==Z,I=F&&!y||!j[0]||G&&P<G||Y&&P>Y,B+="<td class='"+((E+l+6)%7>=5?" ui-datepicker-week-end":"")+(F?" ui-datepicker-other-month":"")+(P.getTime()===N.getTime()&&Z===e.selectedMonth&&e._keyEvent||b.getTime()===P.getTime()&&b.getTime()===N.getTime()?" "+this._dayOverClass:"")+(I?" "+this._unselectableClass+" ui-state-disabled":"")+(F&&!g?"":" "+j[1]+(P.getTime()===Q.getTime()?" "+this._currentClass:"")+(P.getTime()===R.getTime()?" ui-datepicker-today":""))+"'"+((!F||g)&&j[2]?" title='"+j[2]+"'":"")+(I?"":" data-handler='selectDay' data-event='click' data-month='"+P.getMonth()+"' data-year='"+P.getFullYear()+"'")+">"+(F&&!g?"&#xa0;":I?"<span class='ui-state-default'>"+P.getDate()+"</span>":"<a class='ui-state-default"+(P.getTime()===R.getTime()?" ui-state-highlight":"")+(P.getTime()===Q.getTime()?" ui-state-active":"")+(F?" ui-priority-secondary":"")+"' href='#'>"+P.getDate()+"</a>")+"</td>",P.setDate(P.getDate()+1),P=this._daylightSavingAdjust(P);k+=B+"</tr>"}Z++,Z>11&&(Z=0,et++),k+="</tbody></table>"+(K?"</div>"+(V[0]>0&&T===V[1]-1?"<div class='ui-datepicker-row-break'></div>":""):""),x+=k}w+=x}return w+=f,e._keyEvent=!1,w},_generateMonthYearHeader:function(e,t,n,r,i,s,o,u){var a,f,l,c,h,p,d,v,m=this._get(e,"changeMonth"),g=this._get(e,"changeYear"),y=this._get(e,"showMonthAfterYear"),b="<div class='ui-datepicker-title'>",w="";if(s||!m)w+="<span class='ui-datepicker-month'>"+o[t]+"</span>";else{a=r&&r.getFullYear()===n,f=i&&i.getFullYear()===n,w+="<select class='ui-datepicker-month' data-handler='selectMonth' data-event='change'>";for(l=0;l<12;l++)(!a||l>=r.getMonth())&&(!f||l<=i.getMonth())&&(w+="<option value='"+l+"'"+(l===t?" selected='selected'":"")+">"+u[l]+"</option>");w+="</select>"}y||(b+=w+(s||!m||!g?"&#xa0;":""));if(!e.yearshtml){e.yearshtml="";if(s||!g)b+="<span class='ui-datepicker-year'>"+n+"</span>";else{c=this._get(e,"yearRange").split(":"),h=(new Date).getFullYear(),p=function(e){var t=e.match(/c[+\-].*/)?n+parseInt(e.substring(1),10):e.match(/[+\-].*/)?h+parseInt(e,10):parseInt(e,10);return isNaN(t)?h:t},d=p(c[0]),v=Math.max(d,p(c[1]||"")),d=r?Math.max(d,r.getFullYear()):d,v=i?Math.min(v,i.getFullYear()):v,e.yearshtml+="<select class='ui-datepicker-year' data-handler='selectYear' data-event='change'>";for(;d<=v;d++)e.yearshtml+="<option value='"+d+"'"+(d===n?" selected='selected'":"")+">"+d+"</option>";e.yearshtml+="</select>",b+=e.yearshtml,e.yearshtml=null}}return b+=this._get(e,"yearSuffix"),y&&(b+=(s||!m||!g?"&#xa0;":"")+w),b+="</div>",b},_adjustInstDate:function(e,t,n){var r=e.drawYear+(n==="Y"?t:0),i=e.drawMonth+(n==="M"?t:0),s=Math.min(e.selectedDay,this._getDaysInMonth(r,i))+(n==="D"?t:0),o=this._restrictMinMax(e,this._daylightSavingAdjust(new Date(r,i,s)));e.selectedDay=o.getDate(),e.drawMonth=e.selectedMonth=o.getMonth(),e.drawYear=e.selectedYear=o.getFullYear(),(n==="M"||n==="Y")&&this._notifyChange(e)},_restrictMinMax:function(e,t){var n=this._getMinMaxDate(e,"min"),r=this._getMinMaxDate(e,"max"),i=n&&t<n?n:t;return r&&i>r?r:i},_notifyChange:function(e){var t=this._get(e,"onChangeMonthYear");t&&t.apply(e.input?e.input[0]:null,[e.selectedYear,e.selectedMonth+1,e])},_getNumberOfMonths:function(e){var t=this._get(e,"numberOfMonths");return t==null?[1,1]:typeof t=="number"?[1,t]:t},_getMinMaxDate:function(e,t){return this._determineDate(e,this._get(e,t+"Date"),null)},_getDaysInMonth:function(e,t){return 32-this._daylightSavingAdjust(new Date(e,t,32)).getDate()},_getFirstDayOfMonth:function(e,t){return(new Date(e,t,1)).getDay()},_canAdjustMonth:function(e,t,n,r){var i=this._getNumberOfMonths(e),s=this._daylightSavingAdjust(new Date(n,r+(t<0?t:i[0]*i[1]),1));return t<0&&s.setDate(this._getDaysInMonth(s.getFullYear(),s.getMonth())),this._isInRange(e,s)},_isInRange:function(e,t){var n,r,i=this._getMinMaxDate(e,"min"),s=this._getMinMaxDate(e,"max"),o=null,u=null,a=this._get(e,"yearRange");return a&&(n=a.split(":"),r=(new Date).getFullYear(),o=parseInt(n[0],10)+r,u=parseInt(n[1],10)+r),(!i||t.getTime()>=i.getTime())&&(!s||t.getTime()<=s.getTime())&&(!o||t.getFullYear()>=o)&&(!u||t.getFullYear()<=u)},_getFormatConfig:function(e){var t=this._get(e,"shortYearCutoff");return t=typeof t!="string"?t:(new Date).getFullYear()%100+parseInt(t,10),{shortYearCutoff:t,dayNamesShort:this._get(e,"dayNamesShort"),dayNames:this._get(e,"dayNames"),monthNamesShort:this._get(e,"monthNamesShort"),monthNames:this._get(e,"monthNames")}},_formatDate:function(e,t,n,r){t||(e.currentDay=e.selectedDay,e.currentMonth=e.selectedMonth,e.currentYear=e.selectedYear);var i=t?typeof t=="object"?t:this._daylightSavingAdjust(new Date(r,n,t)):this._daylightSavingAdjust(new Date(e.currentYear,e.currentMonth,e.currentDay));return this.formatDate(this._get(e,"dateFormat"),i,this._getFormatConfig(e))}}),e.fn.datepicker=function(t){if(!this.length)return this;e.datepicker.initialized||(e(document).mousedown(e.datepicker._checkExternalClick),e.datepicker.initialized=!0),e("#"+e.datepicker._mainDivId).length===0&&e("body").append(e.datepicker.dpDiv);var n=Array.prototype.slice.call(arguments,1);return typeof t!="string"||t!=="isDisabled"&&t!=="getDate"&&t!=="widget"?t==="option"&&arguments.length===2&&typeof arguments[1]=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n)):this.each(function(){typeof t=="string"?e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this].concat(n)):e.datepicker._attachDatepicker(this,t)}):e.datepicker["_"+t+"Datepicker"].apply(e.datepicker,[this[0]].concat(n))},e.datepicker=new s,e.datepicker.initialized=!1,e.datepicker.uuid=(new Date).getTime(),e.datepicker.version="1.10.0",window["DP_jQuery_"+r]=e})(jQuery);(function(e,t){var n={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},r={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};e.widget("ui.dialog",{version:"1.10.0",options:{appendTo:"body",autoOpen:!0,buttons:[],closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:null,maxWidth:null,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(t){var n=e(this).css(t).offset().top;n<0&&e(this).css("top",t.top-n)}},resizable:!0,show:null,title:null,width:300,beforeClose:null,close:null,drag:null,dragStart:null,dragStop:null,focus:null,open:null,resize:null,resizeStart:null,resizeStop:null},_create:function(){this.originalCss={display:this.element[0].style.display,width:this.element[0].style.width,minHeight:this.element[0].style.minHeight,maxHeight:this.element[0].style.maxHeight,height:this.element[0].style.height},this.originalPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.originalTitle=this.element.attr("title"),this.options.title=this.options.title||this.originalTitle,this._createWrapper(),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(this.uiDialog),this._createTitlebar(),this._createButtonPane(),this.options.draggable&&e.fn.draggable&&this._makeDraggable(),this.options.resizable&&e.fn.resizable&&this._makeResizable(),this._isOpen=!1},_init:function(){this.options.autoOpen&&this.open()},_appendTo:function(){var t=this.options.appendTo;return t&&(t.jquery||t.nodeType)?e(t):this.document.find(t||"body").eq(0)},_destroy:function(){var e,t=this.originalPosition;this._destroyOverlay(),this.element.removeUniqueId().removeClass("ui-dialog-content ui-widget-content").css(this.originalCss).detach(),this.uiDialog.stop(!0,!0).remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),e=t.parent.children().eq(t.index),e.length&&e[0]!==this.element[0]?e.before(this.element):t.parent.append(this.element)},widget:function(){return this.uiDialog},disable:e.noop,enable:e.noop,close:function(t){var n=this;if(!this._isOpen||this._trigger("beforeClose",t)===!1)return;this._isOpen=!1,this._destroyOverlay(),this.opener.filter(":focusable").focus().length||e(this.document[0].activeElement).blur(),this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",t)})},isOpen:function(){return this._isOpen},moveToTop:function(){this._moveToTop()},_moveToTop:function(e,t){var n=!!this.uiDialog.nextAll(":visible").insertBefore(this.uiDialog).length;return n&&!t&&this._trigger("focus",e),n},open:function(){if(this._isOpen){this._moveToTop()&&this._focusTabbable();return}this.opener=e(this.document[0].activeElement),this._size(),this._position(),this._createOverlay(),this._moveToTop(null,!0),this._show(this.uiDialog,this.options.show),this._focusTabbable(),this._isOpen=!0,this._trigger("open"),this._trigger("focus")},_focusTabbable:function(){var e=this.element.find("[autofocus]");e.length||(e=this.element.find(":tabbable")),e.length||(e=this.uiDialogButtonPane.find(":tabbable")),e.length||(e=this.uiDialogTitlebarClose.filter(":tabbable")),e.length||(e=this.uiDialog),e.eq(0).focus()},_keepFocus:function(t){function n(){var t=this.document[0].activeElement,n=this.uiDialog[0]===t||e.contains(this.uiDialog[0],t);n||this._focusTabbable()}t.preventDefault(),n.call(this),this._delay(n)},_createWrapper:function(){this.uiDialog=e("<div>").addClass("ui-dialog ui-widget ui-widget-content ui-corner-all ui-front "+this.options.dialogClass).hide().attr({tabIndex:-1,role:"dialog"}).appendTo(this._appendTo()),this._on(this.uiDialog,{keydown:function(t){if(this.options.closeOnEscape&&!t.isDefaultPrevented()&&t.keyCode&&t.keyCode===e.ui.keyCode.ESCAPE){t.preventDefault(),this.close(t);return}if(t.keyCode!==e.ui.keyCode.TAB)return;var n=this.uiDialog.find(":tabbable"),r=n.filter(":first"),i=n.filter(":last");t.target!==i[0]&&t.target!==this.uiDialog[0]||!!t.shiftKey?(t.target===r[0]||t.target===this.uiDialog[0])&&t.shiftKey&&(i.focus(1),t.preventDefault()):(r.focus(1),t.preventDefault())},mousedown:function(e){this._moveToTop(e)&&this._focusTabbable()}}),this.element.find("[aria-describedby]").length||this.uiDialog.attr({"aria-describedby":this.element.uniqueId().attr("id")})},_createTitlebar:function(){var t;this.uiDialogTitlebar=e("<div>").addClass("ui-dialog-titlebar ui-widget-header ui-corner-all ui-helper-clearfix").prependTo(this.uiDialog),this._on(this.uiDialogTitlebar,{mousedown:function(t){e(t.target).closest(".ui-dialog-titlebar-close")||this.uiDialog.focus()}}),this.uiDialogTitlebarClose=e("<button></button>").button({label:this.options.closeText,icons:{primary:"ui-icon-closethick"},text:!1}).addClass("ui-dialog-titlebar-close").appendTo(this.uiDialogTitlebar),this._on(this.uiDialogTitlebarClose,{click:function(e){e.preventDefault(),this.close(e)}}),t=e("<span>").uniqueId().addClass("ui-dialog-title").prependTo(this.uiDialogTitlebar),this._title(t),this.uiDialog.attr({"aria-labelledby":t.attr("id")})},_title:function(e){this.options.title||e.html("&#160;"),e.text(this.options.title)},_createButtonPane:function(){this.uiDialogButtonPane=e("<div>").addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),this.uiButtonSet=e("<div>").addClass("ui-dialog-buttonset").appendTo(this.uiDialogButtonPane),this._createButtons()},_createButtons:function(){var t=this,n=this.options.buttons;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty();if(e.isEmptyObject(n)){this.uiDialog.removeClass("ui-dialog-buttons");return}e.each(n,function(n,r){var i,s;r=e.isFunction(r)?{click:r,text:n}:r,r=e.extend({type:"button"},r),i=r.click,r.click=function(){i.apply(t.element[0],arguments)},s={icons:r.icons,text:r.showText},delete r.icons,delete r.showText,e("<button></button>",r).button(s).appendTo(t.uiButtonSet)}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)},_makeDraggable:function(){function r(e){return{position:e.position,offset:e.offset}}var t=this,n=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(n,i){e(this).addClass("ui-dialog-dragging"),t._trigger("dragStart",n,r(i))},drag:function(e,n){t._trigger("drag",e,r(n))},stop:function(i,s){n.position=[s.position.left-t.document.scrollLeft(),s.position.top-t.document.scrollTop()],e(this).removeClass("ui-dialog-dragging"),t._trigger("dragStop",i,r(s))}})},_makeResizable:function(){function o(e){return{originalPosition:e.originalPosition,originalSize:e.originalSize,position:e.position,size:e.size}}var t=this,n=this.options,r=n.resizable,i=this.uiDialog.css("position"),s=typeof r=="string"?r:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:n.maxWidth,maxHeight:n.maxHeight,minWidth:n.minWidth,minHeight:this._minHeight(),handles:s,start:function(n,r){e(this).addClass("ui-dialog-resizing"),t._trigger("resizeStart",n,o(r))},resize:function(e,n){t._trigger("resize",e,o(n))},stop:function(r,i){n.height=e(this).height(),n.width=e(this).width(),e(this).removeClass("ui-dialog-resizing"),t._trigger("resizeStop",r,o(i))}}).css("position",i)},_minHeight:function(){var e=this.options;return e.height==="auto"?e.minHeight:Math.min(e.minHeight,e.height)},_position:function(){var e=this.uiDialog.is(":visible");e||this.uiDialog.show(),this.uiDialog.position(this.options.position),e||this.uiDialog.hide()},_setOptions:function(t){var i=this,s=!1,o={};e.each(t,function(e,t){i._setOption(e,t),e in n&&(s=!0),e in r&&(o[e]=t)}),s&&(this._size(),this._position()),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option",o)},_setOption:function(e,t){var n,r,i=this.uiDialog;e==="dialogClass"&&i.removeClass(this.options.dialogClass).addClass(t);if(e==="disabled")return;this._super(e,t),e==="appendTo"&&this.uiDialog.appendTo(this._appendTo()),e==="buttons"&&this._createButtons(),e==="closeText"&&this.uiDialogTitlebarClose.button({label:""+t}),e==="draggable"&&(n=i.is(":data(ui-draggable)"),n&&!t&&i.draggable("destroy"),!n&&t&&this._makeDraggable()),e==="position"&&this._position(),e==="resizable"&&(r=i.is(":data(ui-resizable)"),r&&!t&&i.resizable("destroy"),r&&typeof t=="string"&&i.resizable("option","handles",t),!r&&t!==!1&&this._makeResizable()),e==="title"&&this._title(this.uiDialogTitlebar.find(".ui-dialog-title"))},_size:function(){var e,t,n,r=this.options;this.element.show().css({width:"auto",minHeight:0,maxHeight:"none",height:0}),r.minWidth>r.width&&(r.width=r.minWidth),e=this.uiDialog.css({height:"auto",width:r.width}).outerHeight(),t=Math.max(0,r.minHeight-e),n=typeof r.maxHeight=="number"?Math.max(0,r.maxHeight-e):"none",r.height==="auto"?this.element.css({minHeight:t,maxHeight:n,height:"auto"}):this.element.height(Math.max(0,r.height-e)),this.uiDialog.is(":data(ui-resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())},_createOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances||this._delay(function(){e.ui.dialog.overlayInstances&&this._on(this.document,{focusin:function(t){e(t.target).closest(".ui-dialog").length||(t.preventDefault(),e(".ui-dialog:visible:last .ui-dialog-content").data("ui-dialog")._focusTabbable())}})}),this.overlay=e("<div>").addClass("ui-widget-overlay ui-front").appendTo(this.document[0].body),this._on(this.overlay,{mousedown:"_keepFocus"}),e.ui.dialog.overlayInstances++},_destroyOverlay:function(){if(!this.options.modal)return;e.ui.dialog.overlayInstances--,e.ui.dialog.overlayInstances||this._off(this.document,"focusin"),this.overlay.remove()}}),e.ui.dialog.overlayInstances=0,e.uiBackCompat!==!1&&e.widget("ui.dialog",e.ui.dialog,{_position:function(){var t=this.options.position,n=[],r=[0,0],i;if(t){if(typeof t=="string"||typeof t=="object"&&"0"in t)n=t.split?t.split(" "):[t[0],t[1]],n.length===1&&(n[1]=n[0]),e.each(["left","top"],function(e,t){+n[e]===n[e]&&(r[e]=n[e],n[e]=t)}),t={my:n[0]+(r[0]<0?r[0]:"+"+r[0])+" "+n[1]+(r[1]<0?r[1]:"+"+r[1]),at:n.join(" ")};t=e.extend({},e.ui.dialog.prototype.options.position,t)}else t=e.ui.dialog.prototype.options.position;i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(t),i||this.uiDialog.hide()}})})(jQuery);(function(e,t){e.widget("ui.menu",{version:"1.10.0",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.mouseHandled=!1,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,e.proxy(function(e){this.options.disabled&&e.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({"mousedown .ui-menu-item > a":function(e){e.preventDefault()},"click .ui-state-disabled > a":function(e){e.preventDefault()},"click .ui-menu-item:has(a)":function(t){var n=e(t.target).closest(".ui-menu-item");!this.mouseHandled&&n.not(".ui-state-disabled").length&&(this.mouseHandled=!0,this.select(t),n.has(".ui-menu").length?this.expand(t):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&this.active.parents(".ui-menu").length===1&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(t){var n=e(t.currentTarget);n.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(t,n)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(e,t){var n=this.active||this.element.children(".ui-menu-item").eq(0);t||this.focus(e,n)},blur:function(t){this._delay(function(){e.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(t)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(t){e(t.target).closest(".ui-menu").length||this.collapseAll(t),this.mouseHandled=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").addBack().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var t=e(this);t.data("ui-menu-submenu-carat")&&t.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(t){function a(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var n,r,i,s,o,u=!0;switch(t.keyCode){case e.ui.keyCode.PAGE_UP:this.previousPage(t);break;case e.ui.keyCode.PAGE_DOWN:this.nextPage(t);break;case e.ui.keyCode.HOME:this._move("first","first",t);break;case e.ui.keyCode.END:this._move("last","last",t);break;case e.ui.keyCode.UP:this.previous(t);break;case e.ui.keyCode.DOWN:this.next(t);break;case e.ui.keyCode.LEFT:this.collapse(t);break;case e.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(t);break;case e.ui.keyCode.ENTER:case e.ui.keyCode.SPACE:this._activate(t);break;case e.ui.keyCode.ESCAPE:this.collapse(t);break;default:u=!1,r=this.previousFilter||"",i=String.fromCharCode(t.keyCode),s=!1,clearTimeout(this.filterTimer),i===r?s=!0:i=r+i,o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())}),n=s&&n.index(this.active.next())!==-1?this.active.nextAll(".ui-menu-item"):n,n.length||(i=String.fromCharCode(t.keyCode),o=new RegExp("^"+a(i),"i"),n=this.activeMenu.children(".ui-menu-item").filter(function(){return o.test(e(this).children("a").text())})),n.length?(this.focus(t,n),n.length>1?(this.previousFilter=i,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}u&&t.preventDefault()},_activate:function(e){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(e):this.select(e))},refresh:function(){var t,n=this.options.icons.submenu,r=this.element.find(this.options.menus);r.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var t=e(this),r=t.prev("a"),i=e("<span>").addClass("ui-menu-icon ui-icon "+n).data("ui-menu-submenu-carat",!0);r.attr("aria-haspopup","true").prepend(i),t.attr("aria-labelledby",r.attr("id"))}),t=r.add(this.element),t.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),t.children(":not(.ui-menu-item)").each(function(){var t=e(this);/[^\-—–\s]/.test(t.text())||t.addClass("ui-widget-content ui-menu-divider")}),t.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!e.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},_setOption:function(e,t){e==="icons"&&this.element.find(".ui-menu-icon").removeClass(this.options.icons.submenu).addClass(t.submenu),this._super(e,t)},focus:function(e,t){var n,r;this.blur(e,e&&e.type==="focus"),this._scrollIntoView(t),this.active=t.first(),r=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",r.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),e&&e.type==="keydown"?this._close():this.timer=this._delay(function(){this._close()},this.delay),n=t.children(".ui-menu"),n.length&&/^mouse/.test(e.type)&&this._startOpening(n),this.activeMenu=t.parent(),this._trigger("focus",e,{item:t})},_scrollIntoView:function(t){var n,r,i,s,o,u;this._hasScroll()&&(n=parseFloat(e.css(this.activeMenu[0],"borderTopWidth"))||0,r=parseFloat(e.css(this.activeMenu[0],"paddingTop"))||0,i=t.offset().top-this.activeMenu.offset().top-n-r,s=this.activeMenu.scrollTop(),o=this.activeMenu.height(),u=t.height(),i<0?this.activeMenu.scrollTop(s+i):i+u>o&&this.activeMenu.scrollTop(s+i-o+u))},blur:function(e,t){t||clearTimeout(this.timer);if(!this.active)return;this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",e,{item:this.active})},_startOpening:function(e){clearTimeout(this.timer);if(e.attr("aria-hidden")!=="true")return;this.timer=this._delay(function(){this._close(),this._open(e)},this.delay)},_open:function(t){var n=e.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(t.parents(".ui-menu")).hide().attr("aria-hidden","true"),t.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(n)},collapseAll:function(t,n){clearTimeout(this.timer),this.timer=this._delay(function(){var r=n?this.element:e(t&&t.target).closest(this.element.find(".ui-menu"));r.length||(r=this.element),this._close(r),this.blur(t),this.activeMenu=r},this.delay)},_close:function(e){e||(e=this.active?this.active.parent():this.element),e.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(e){var t=this.active&&this.active.parent().closest(".ui-menu-item",this.element);t&&t.length&&(this._close(),this.focus(e,t))},expand:function(e){var t=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();t&&t.length&&(this._open(t.parent()),this._delay(function(){this.focus(e,t)}))},next:function(e){this._move("next","first",e)},previous:function(e){this._move("prev","last",e)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(e,t,n){var r;this.active&&(e==="first"||e==="last"?r=this.active[e==="first"?"prevAll":"nextAll"](".ui-menu-item").eq(-1):r=this.active[e+"All"](".ui-menu-item").eq(0));if(!r||!r.length||!this.active)r=this.activeMenu.children(".ui-menu-item")[t]();this.focus(n,r)},nextPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isLastItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r-i<0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]())},previousPage:function(t){var n,r,i;if(!this.active){this.next(t);return}if(this.isFirstItem())return;this._hasScroll()?(r=this.active.offset().top,i=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return n=e(this),n.offset().top-r+i>0}),this.focus(t,n)):this.focus(t,this.activeMenu.children(".ui-menu-item").first())},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(t){this.active=this.active||e(t.target).closest(".ui-menu-item");var n={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(t,!0),this._trigger("select",t,n)}})})(jQuery);(function(e,t){e.widget("ui.progressbar",{version:"1.10.0",options:{max:100,value:0,change:null,complete:null},min:0,_create:function(){this.oldValue=this.options.value=this._constrainedValue(),this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min}),this.valueDiv=e("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(e){if(e===t)return this.options.value;this.options.value=this._constrainedValue(e),this._refreshValue()},_constrainedValue:function(e){return e===t&&(e=this.options.value),this.indeterminate=e===!1,typeof e!="number"&&(e=0),this.indeterminate?!1:Math.min(this.options.max,Math.max(this.min,e))},_setOptions:function(e){var t=e.value;delete e.value,this._super(e),this.options.value=this._constrainedValue(t),this._refreshValue()},_setOption:function(e,t){e==="max"&&(t=Math.max(this.min,t)),this._super(e,t)},_percentage:function(){return this.indeterminate?100:100*(this.options.value-this.min)/(this.options.max-this.min)},_refreshValue:function(){var t=this.options.value,n=this._percentage();this.valueDiv.toggle(this.indeterminate||t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(n.toFixed(0)+"%"),this.element.toggleClass("ui-progressbar-indeterminate",this.indeterminate),this.indeterminate?(this.element.removeAttr("aria-valuenow"),this.overlayDiv||(this.overlayDiv=e("<div class='ui-progressbar-overlay'></div>").appendTo(this.valueDiv))):(this.element.attr({"aria-valuemax":this.options.max,"aria-valuenow":t}),this.overlayDiv&&(this.overlayDiv.remove(),this.overlayDiv=null)),this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),t===this.options.max&&this._trigger("complete")}})})(jQuery);(function(e,t){var n=5;e.widget("ui.slider",e.ui.mouse,{version:"1.10.0",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null,change:null,slide:null,start:null,stop:null},_create:function(){var t,n,r=this.options,i=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),s="<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>",o=[];this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget"+" ui-widget-content"+" ui-corner-all"),this.range=e([]),r.range&&(r.range===!0&&(r.values?r.values.length&&r.values.length!==2?r.values=[r.values[0],r.values[0]]:e.isArray(r.values)&&(r.values=r.values.slice(0)):r.values=[this._valueMin(),this._valueMin()]),this.range=e("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+(r.range==="min"||r.range==="max"?" ui-slider-range-"+r.range:""))),n=r.values&&r.values.length||1;for(t=i.length;t<n;t++)o.push(s);this.handles=i.add(e(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(e){e.preventDefault()}).mouseenter(function(){r.disabled||e(this).addClass("ui-state-hover")}).mouseleave(function(){e(this).removeClass("ui-state-hover")}).focus(function(){r.disabled?e(this).blur():(e(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),e(this).addClass("ui-state-focus"))}).blur(function(){e(this).removeClass("ui-state-focus")}),this.handles.each(function(t){e(this).data("ui-slider-handle-index",t)}),this._setOption("disabled",r.disabled),this._on(this.handles,this._handleEvents),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(t){var n,r,i,s,o,u,a,f,l=this,c=this.options;return c.disabled?!1:(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),n={x:t.pageX,y:t.pageY},r=this._normValueFromMouse(n),i=this._valueMax()-this._valueMin()+1,this.handles.each(function(t){var n=Math.abs(r-l.values(t));if(i>n||i===n&&(t===l._lastChangedValue||l.values(t)===c.min))i=n,s=e(this),o=t}),u=this._start(t,o),u===!1?!1:(this._mouseSliding=!0,this._handleIndex=o,s.addClass("ui-state-active").focus(),a=s.offset(),f=!e(t.target).parents().addBack().is(".ui-slider-handle"),this._clickOffset=f?{left:0,top:0}:{left:t.pageX-a.left-s.width()/2,top:t.pageY-a.top-s.height()/2-(parseInt(s.css("borderTopWidth"),10)||0)-(parseInt(s.css("borderBottomWidth"),10)||0)+(parseInt(s.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(t,o,r),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(e){var t={x:e.pageX,y:e.pageY},n=this._normValueFromMouse(t);return this._slide(e,this._handleIndex,n),!1},_mouseStop:function(e){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(e,this._handleIndex),this._change(e,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation=this.options.orientation==="vertical"?"vertical":"horizontal"},_normValueFromMouse:function(e){var t,n,r,i,s;return this.orientation==="horizontal"?(t=this.elementSize.width,n=e.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(t=this.elementSize.height,n=e.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),r=n/t,r>1&&(r=1),r<0&&(r=0),this.orientation==="vertical"&&(r=1-r),i=this._valueMax()-this._valueMin(),s=this._valueMin()+r*i,this._trimAlignValue(s)},_start:function(e,t){var n={handle:this.handles[t],value:this.value()};return this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("start",e,n)},_slide:function(e,t,n){var r,i,s;this.options.values&&this.options.values.length?(r=this.values(t?0:1),this.options.values.length===2&&this.options.range===!0&&(t===0&&n>r||t===1&&n<r)&&(n=r),n!==this.values(t)&&(i=this.values(),i[t]=n,s=this._trigger("slide",e,{handle:this.handles[t],value:n,values:i}),r=this.values(t?0:1),s!==!1&&this.values(t,n,!0))):n!==this.value()&&(s=this._trigger("slide",e,{handle:this.handles[t],value:n}),s!==!1&&this.value(n))},_stop:function(e,t){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._trigger("stop",e,n)},_change:function(e,t){if(!this._keySliding&&!this._mouseSliding){var n={handle:this.handles[t],value:this.value()};this.options.values&&this.options.values.length&&(n.value=this.values(t),n.values=this.values()),this._lastChangedValue=t,this._trigger("change",e,n)}},value:function(e){if(arguments.length){this.options.value=this._trimAlignValue(e),this._refreshValue(),this._change(null,0);return}return this._value()},values:function(t,n){var r,i,s;if(arguments.length>1){this.options.values[t]=this._trimAlignValue(n),this._refreshValue(),this._change(null,t);return}if(!arguments.length)return this._values();if(!e.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(t):this.value();r=this.options.values,i=arguments[0];for(s=0;s<r.length;s+=1)r[s]=this._trimAlignValue(i[s]),this._change(null,s);this._refreshValue()},_setOption:function(t,n){var r,i=0;e.isArray(this.options.values)&&(i=this.options.values.length),e.Widget.prototype._setOption.apply(this,arguments);switch(t){case"disabled":n?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0)):this.handles.prop("disabled",!1);break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":this._animateOff=!0,this._refreshValue();for(r=0;r<i;r+=1)this._change(null,r);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var e=this.options.value;return e=this._trimAlignValue(e),e},_values:function(e){var t,n,r;if(arguments.length)return t=this.options.values[e],t=this._trimAlignValue(t),t;n=this.options.values.slice();for(r=0;r<n.length;r+=1)n[r]=this._trimAlignValue(n[r]);return n},_trimAlignValue:function(e){if(e<=this._valueMin())return this._valueMin();if(e>=this._valueMax())return this._valueMax();var t=this.options.step>0?this.options.step:1,n=(e-this._valueMin())%t,r=e-n;return Math.abs(n)*2>=t&&(r+=n>0?t:-t),parseFloat(r.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var t,n,r,i,s,o=this.options.range,u=this.options,a=this,f=this._animateOff?!1:u.animate,l={};this.options.values&&this.options.values.length?this.handles.each(function(r){n=(a.values(r)-a._valueMin())/(a._valueMax()-a._valueMin())*100,l[a.orientation==="horizontal"?"left":"bottom"]=n+"%",e(this).stop(1,1)[f?"animate":"css"](l,u.animate),a.options.range===!0&&(a.orientation==="horizontal"?(r===0&&a.range.stop(1,1)[f?"animate":"css"]({left:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({width:n-t+"%"},{queue:!1,duration:u.animate})):(r===0&&a.range.stop(1,1)[f?"animate":"css"]({bottom:n+"%"},u.animate),r===1&&a.range[f?"animate":"css"]({height:n-t+"%"},{queue:!1,duration:u.animate}))),t=n}):(r=this.value(),i=this._valueMin(),s=this._valueMax(),n=s!==i?(r-i)/(s-i)*100:0,l[this.orientation==="horizontal"?"left":"bottom"]=n+"%",this.handle.stop(1,1)[f?"animate":"css"](l,u.animate),o==="min"&&this.orientation==="horizontal"&&this.range.stop(1,1)[f?"animate":"css"]({width:n+"%"},u.animate),o==="max"&&this.orientation==="horizontal"&&this.range[f?"animate":"css"]({width:100-n+"%"},{queue:!1,duration:u.animate}),o==="min"&&this.orientation==="vertical"&&this.range.stop(1,1)[f?"animate":"css"]({height:n+"%"},u.animate),o==="max"&&this.orientation==="vertical"&&this.range[f?"animate":"css"]({height:100-n+"%"},{queue:!1,duration:u.animate}))},_handleEvents:{keydown:function(t){var r,i,s,o,u=e(t.target).data("ui-slider-handle-index");switch(t.keyCode){case e.ui.keyCode.HOME:case e.ui.keyCode.END:case e.ui.keyCode.PAGE_UP:case e.ui.keyCode.PAGE_DOWN:case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:t.preventDefault();if(!this._keySliding){this._keySliding=!0,e(t.target).addClass("ui-state-active"),r=this._start(t,u);if(r===!1)return}}o=this.options.step,this.options.values&&this.options.values.length?i=s=this.values(u):i=s=this.value();switch(t.keyCode){case e.ui.keyCode.HOME:s=this._valueMin();break;case e.ui.keyCode.END:s=this._valueMax();break;case e.ui.keyCode.PAGE_UP:s=this._trimAlignValue(i+(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.PAGE_DOWN:s=this._trimAlignValue(i-(this._valueMax()-this._valueMin())/n);break;case e.ui.keyCode.UP:case e.ui.keyCode.RIGHT:if(i===this._valueMax())return;s=this._trimAlignValue(i+o);break;case e.ui.keyCode.DOWN:case e.ui.keyCode.LEFT:if(i===this._valueMin())return;s=this._trimAlignValue(i-o)}this._slide(t,u,s)},keyup:function(t){var n=e(t.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(t,n),this._change(t,n),e(t.target).removeClass("ui-state-active"))}}})})(jQuery);(function(e,t){function i(){return++n}function s(e){return e.hash.length>1&&decodeURIComponent(e.href.replace(r,""))===decodeURIComponent(location.href.replace(r,""))}var n=0,r=/#.*$/;e.widget("ui.tabs",{version:"1.10.0",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){var t=this,n=this.options;this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",n.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(t){e(this).is(".ui-state-disabled")&&t.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){e(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),n.active=this._initialActive(),e.isArray(n.disabled)&&(n.disabled=e.unique(n.disabled.concat(e.map(this.tabs.filter(".ui-state-disabled"),function(e){return t.tabs.index(e)}))).sort()),this.options.active!==!1&&this.anchors.length?this.active=this._findActive(n.active):this.active=e(),this._refresh(),this.active.length&&this.load(n.active)},_initialActive:function(){var t=this.options.active,n=this.options.collapsible,r=location.hash.substring(1);if(t===null){r&&this.tabs.each(function(n,i){if(e(i).attr("aria-controls")===r)return t=n,!1}),t===null&&(t=this.tabs.index(this.tabs.filter(".ui-tabs-active")));if(t===null||t===-1)t=this.tabs.length?0:!1}return t!==!1&&(t=this.tabs.index(this.tabs.eq(t)),t===-1&&(t=n?!1:0)),!n&&t===!1&&this.anchors.length&&(t=0),t},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):e()}},_tabKeydown:function(t){var n=e(this.document[0].activeElement).closest("li"),r=this.tabs.index(n),i=!0;if(this._handlePageNav(t))return;switch(t.keyCode){case e.ui.keyCode.RIGHT:case e.ui.keyCode.DOWN:r++;break;case e.ui.keyCode.UP:case e.ui.keyCode.LEFT:i=!1,r--;break;case e.ui.keyCode.END:r=this.anchors.length-1;break;case e.ui.keyCode.HOME:r=0;break;case e.ui.keyCode.SPACE:t.preventDefault(),clearTimeout(this.activating),this._activate(r);return;case e.ui.keyCode.ENTER:t.preventDefault(),clearTimeout(this.activating),this._activate(r===this.options.active?!1:r);return;default:return}t.preventDefault(),clearTimeout(this.activating),r=this._focusNextTab(r,i),t.ctrlKey||(n.attr("aria-selected","false"),this.tabs.eq(r).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",r)},this.delay))},_panelKeydown:function(t){if(this._handlePageNav(t))return;t.ctrlKey&&t.keyCode===e.ui.keyCode.UP&&(t.preventDefault(),this.active.focus())},_handlePageNav:function(t){if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_UP)return this._activate(this._focusNextTab(this.options.active-1,!1)),!0;if(t.altKey&&t.keyCode===e.ui.keyCode.PAGE_DOWN)return this._activate(this._focusNextTab(this.options.active+1,!0)),!0},_findNextTab:function(t,n){function i(){return t>r&&(t=0),t<0&&(t=r),t}var r=this.tabs.length-1;while(e.inArray(i(),this.options.disabled)!==-1)t=n?t+1:t-1;return t},_focusNextTab:function(e,t){return e=this._findNextTab(e,t),this.tabs.eq(e).focus(),e},_setOption:function(e,t){if(e==="active"){this._activate(t);return}if(e==="disabled"){this._setupDisabled(t);return}this._super(e,t),e==="collapsible"&&(this.element.toggleClass("ui-tabs-collapsible",t),!t&&this.options.active===!1&&this._activate(0)),e==="event"&&this._setupEvents(t),e==="heightStyle"&&this._setupHeightStyle(t)},_tabId:function(e){return e.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(e){return e?e.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var t=this.options,n=this.tablist.children(":has(a[href])");t.disabled=e.map(n.filter(".ui-state-disabled"),function(e){return n.index(e)}),this._processTabs(),t.active===!1||!this.anchors.length?(t.active=!1,this.active=e()):this.active.length&&!e.contains(this.tablist[0],this.active[0])?this.tabs.length===t.disabled.length?(t.active=!1,this.active=e()):this._activate(this._findNextTab(Math.max(0,t.active-1),!1)):t.active=this.tabs.index(this.active),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var t=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return e("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=e(),this.anchors.each(function(n,r){var i,o,u,a=e(r).uniqueId().attr("id"),f=e(r).closest("li"),l=f.attr("aria-controls");s(r)?(i=r.hash,o=t.element.find(t._sanitizeSelector(i))):(u=t._tabId(f),i="#"+u,o=t.element.find(i),o.length||(o=t._createPanel(u),o.insertAfter(t.panels[n-1]||t.tablist)),o.attr("aria-live","polite")),o.length&&(t.panels=t.panels.add(o)),l&&f.data("ui-tabs-aria-controls",l),f.attr({"aria-controls":i.substring(1),"aria-labelledby":a}),o.attr("aria-labelledby",a)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(t){return e("<div>").attr("id",t).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(t){e.isArray(t)&&(t.length?t.length===this.anchors.length&&(t=!0):t=!1);for(var n=0,r;r=this.tabs[n];n++)t===!0||e.inArray(n,t)!==-1?e(r).addClass("ui-state-disabled").attr("aria-disabled","true"):e(r).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=t},_setupEvents:function(t){var n={click:function(e){e.preventDefault()}};t&&e.each(t.split(" "),function(e,t){n[t]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,n),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(t){var n,r=this.element.parent();t==="fill"?(n=r.height(),n-=this.element.outerHeight()-this.element.height(),this.element.siblings(":visible").each(function(){var t=e(this),r=t.css("position");if(r==="absolute"||r==="fixed")return;n-=t.outerHeight(!0)}),this.element.children().not(this.panels).each(function(){n-=e(this).outerHeight(!0)}),this.panels.each(function(){e(this).height(Math.max(0,n-e(this).innerHeight()+e(this).height()))}).css("overflow","auto")):t==="auto"&&(n=0,this.panels.each(function(){n=Math.max(n,e(this).height("").height())}).height(n))},_eventHandler:function(t){var n=this.options,r=this.active,i=e(t.currentTarget),s=i.closest("li"),o=s[0]===r[0],u=o&&n.collapsible,a=u?e():this._getPanelForTab(s),f=r.length?this._getPanelForTab(r):e(),l={oldTab:r,oldPanel:f,newTab:u?e():s,newPanel:a};t.preventDefault();if(s.hasClass("ui-state-disabled")||s.hasClass("ui-tabs-loading")||this.running||o&&!n.collapsible||this._trigger("beforeActivate",t,l)===!1)return;n.active=u?!1:this.tabs.index(s),this.active=o?e():s,this.xhr&&this.xhr.abort(),!f.length&&!a.length&&e.error("jQuery UI Tabs: Mismatching fragment identifier."),a.length&&this.load(this.tabs.index(s),t),this._toggle(t,l)},_toggle:function(t,n){function o(){r.running=!1,r._trigger("activate",t,n)}function u(){n.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),i.length&&r.options.show?r._show(i,r.options.show,o):(i.show(),o())}var r=this,i=n.newPanel,s=n.oldPanel;this.running=!0,s.length&&this.options.hide?this._hide(s,this.options.hide,function(){n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),u()}):(n.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s.hide(),u()),s.attr({"aria-expanded":"false","aria-hidden":"true"}),n.oldTab.attr("aria-selected","false"),i.length&&s.length?n.oldTab.attr("tabIndex",-1):i.length&&this.tabs.filter(function(){return e(this).attr("tabIndex")===0}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}),n.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(t){var n,r=this._findActive(t);if(r[0]===this.active[0])return;r.length||(r=this.active),n=r.find(".ui-tabs-anchor")[0],this._eventHandler({target:n,currentTarget:n,preventDefault:e.noop})},_findActive:function(t){return t===!1?e():this.tabs.eq(t)},_getIndex:function(e){return typeof e=="string"&&(e=this.anchors.index(this.anchors.filter("[href$='"+e+"']"))),e},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeUniqueId(),this.tabs.add(this.panels).each(function(){e.data(this,"ui-tabs-destroy")?e(this).remove():e(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var t=e(this),n=t.data("ui-tabs-aria-controls");n?t.attr("aria-controls",n).removeData("ui-tabs-aria-controls"):t.removeAttr("aria-controls")}),this.panels.show(),this.options.heightStyle!=="content"&&this.panels.css("height","")},enable:function(n){var r=this.options.disabled;if(r===!1)return;n===t?r=!1:(n=this._getIndex(n),e.isArray(r)?r=e.map(r,function(e){return e!==n?e:null}):r=e.map(this.tabs,function(e,t){return t!==n?t:null})),this._setupDisabled(r)},disable:function(n){var r=this.options.disabled;if(r===!0)return;if(n===t)r=!0;else{n=this._getIndex(n);if(e.inArray(n,r)!==-1)return;e.isArray(r)?r=e.merge([n],r).sort():r=[n]}this._setupDisabled(r)},load:function(t,n){t=this._getIndex(t);var r=this,i=this.tabs.eq(t),o=i.find(".ui-tabs-anchor"),u=this._getPanelForTab(i),a={tab:i,panel:u};if(s(o[0]))return;this.xhr=e.ajax(this._ajaxSettings(o,n,a)),this.xhr&&this.xhr.statusText!=="canceled"&&(i.addClass("ui-tabs-loading"),u.attr("aria-busy","true"),this.xhr.success(function(e){setTimeout(function(){u.html(e),r._trigger("load",n,a)},1)}).complete(function(e,t){setTimeout(function(){t==="abort"&&r.panels.stop(!1,!0),i.removeClass("ui-tabs-loading"),u.removeAttr("aria-busy"),e===r.xhr&&delete r.xhr},1)}))},_ajaxSettings:function(t,n,r){var i=this;return{url:t.attr("href"),beforeSend:function(t,s){return i._trigger("beforeLoad",n,e.extend({jqXHR:t,ajaxSettings:s},r))}}},_getPanelForTab:function(t){var n=e(t).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+n))}})})(jQuery);(function(e){function n(t,n){var r=(t.attr("aria-describedby")||"").split(/\s+/);r.push(n),t.data("ui-tooltip-id",n).attr("aria-describedby",e.trim(r.join(" ")))}function r(t){var n=t.data("ui-tooltip-id"),r=(t.attr("aria-describedby")||"").split(/\s+/),i=e.inArray(n,r);i!==-1&&r.splice(i,1),t.removeData("ui-tooltip-id"),r=e.trim(r.join(" ")),r?t.attr("aria-describedby",r):t.removeAttr("aria-describedby")}var t=0;e.widget("ui.tooltip",{version:"1.10.0",options:{content:function(){var t=e(this).attr("title")||"";return e("<a>").text(t).html()},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(t,n){var r=this;if(t==="disabled"){this[n?"_disable":"_enable"](),this.options[t]=n;return}this._super(t,n),t==="content"&&e.each(this.tooltips,function(e,t){r._updateContent(t)})},_disable:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0)}),this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.is("[title]")&&t.data("ui-tooltip-title",t.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).addBack().each(function(){var t=e(this);t.data("ui-tooltip-title")&&t.attr("title",t.data("ui-tooltip-title"))})},open:function(t){var n=this,r=e(t?t.target:this.element).closest(this.options.items);if(!r.length||r.data("ui-tooltip-id"))return;r.attr("title")&&r.data("ui-tooltip-title",r.attr("title")),r.data("ui-tooltip-open",!0),t&&t.type==="mouseover"&&r.parents().each(function(){var t=e(this),r;t.data("ui-tooltip-open")&&(r=e.Event("blur"),r.target=r.currentTarget=this,n.close(r,!0)),t.attr("title")&&(t.uniqueId(),n.parents[this.id]={element:this,title:t.attr("title")},t.attr("title",""))}),this._updateContent(r,t)},_updateContent:function(e,t){var n,r=this.options.content,i=this,s=t?t.type:null;if(typeof r=="string")return this._open(t,e,r);n=r.call(e[0],function(n){if(!e.data("ui-tooltip-open"))return;i._delay(function(){t&&(t.type=s),this._open(t,e,n)})}),n&&this._open(t,e,n)},_open:function(t,r,i){function f(e){a.of=e;if(s.is(":hidden"))return;s.position(a)}var s,o,u,a=e.extend({},this.options.position);if(!i)return;s=this._find(r);if(s.length){s.find(".ui-tooltip-content").html(i);return}r.is("[title]")&&(t&&t.type==="mouseover"?r.attr("title",""):r.removeAttr("title")),s=this._tooltip(r),n(r,s.attr("id")),s.find(".ui-tooltip-content").html(i),this.options.track&&t&&/^mouse/.test(t.type)?(this._on(this.document,{mousemove:f}),f(t)):s.position(e.extend({of:r},this.options.position)),s.hide(),this._show(s,this.options.show),this.options.show&&this.options.show.delay&&(u=this.delayedShow=setInterval(function(){s.is(":visible")&&(f(a.of),clearInterval(u))},e.fx.interval)),this._trigger("open",t,{tooltip:s}),o={keyup:function(t){if(t.keyCode===e.ui.keyCode.ESCAPE){var n=e.Event(t);n.currentTarget=r[0],this.close(n,!0)}},remove:function(){this._removeTooltip(s)}};if(!t||t.type==="mouseover")o.mouseleave="close";if(!t||t.type==="focusin")o.focusout="close";this._on(!0,r,o)},close:function(t){var n=this,i=e(t?t.currentTarget:this.element),s=this._find(i);if(this.closing)return;clearInterval(this.delayedShow),i.data("ui-tooltip-title")&&i.attr("title",i.data("ui-tooltip-title")),r(i),s.stop(!0),this._hide(s,this.options.hide,function(){n._removeTooltip(e(this))}),i.removeData("ui-tooltip-open"),this._off(i,"mouseleave focusout keyup"),i[0]!==this.element[0]&&this._off(i,"remove"),this._off(this.document,"mousemove"),t&&t.type==="mouseleave"&&e.each(this.parents,function(t,r){e(r.element).attr("title",r.title),delete n.parents[t]}),this.closing=!0,this._trigger("close",t,{tooltip:s}),this.closing=!1},_tooltip:function(n){var r="ui-tooltip-"+t++,i=e("<div>").attr({id:r,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return e("<div>").addClass("ui-tooltip-content").appendTo(i),i.appendTo(this.document[0].body),this.tooltips[r]=n,i},_find:function(t){var n=t.data("ui-tooltip-id");return n?e("#"+n):e()},_removeTooltip:function(e){e.remove(),delete this.tooltips[e.attr("id")]},_destroy:function(){var t=this;e.each(this.tooltips,function(n,r){var i=e.Event("blur");i.target=i.currentTarget=r[0],t.close(i,!0),e("#"+n).remove(),r.data("ui-tooltip-title")&&(r.attr("title",r.data("ui-tooltip-title")),r.removeData("ui-tooltip-title"))})}})})(jQuery);jQuery.effects||function(e,t){var n="ui-effects-";e.effects={effect:{}},function(e,t){function h(e,t,n){var r=u[t.type]||{};return e==null?n||!t.def?null:t.def:(e=r.floor?~~e:parseFloat(e),isNaN(e)?t.def:r.mod?(e+r.mod)%r.mod:0>e?0:r.max<e?r.max:e)}function p(t){var n=s(),r=n._rgba=[];return t=t.toLowerCase(),c(i,function(e,i){var s,u=i.re.exec(t),a=u&&i.parse(u),f=i.space||"rgba";if(a)return s=n[f](a),n[o[f].cache]=s[o[f].cache],r=n._rgba=s._rgba,!1}),r.length?(r.join()==="0,0,0,0"&&e.extend(r,l.transparent),n):l[t]}function d(e,t,n){return n=(n+1)%1,n*6<1?e+(t-e)*n*6:n*2<1?t:n*3<2?e+(t-e)*(2/3-n)*6:e}var n="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor",r=/^([\-+])=\s*(\d+\.?\d*)/,i=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1],e[2],e[3],e[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,parse:function(e){return[e[1]*2.55,e[2]*2.55,e[3]*2.55,e[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(e){return[parseInt(e[1],16),parseInt(e[2],16),parseInt(e[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(e){return[parseInt(e[1]+e[1],16),parseInt(e[2]+e[2],16),parseInt(e[3]+e[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d?(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(e){return[e[1],e[2]/100,e[3]/100,e[4]]}}],s=e.Color=function(t,n,r,i){return new e.Color.fn.parse(t,n,r,i)},o={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},u={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},a=s.support={},f=e("<p>")[0],l,c=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",a.rgba=f.style.backgroundColor.indexOf("rgba")>-1,c(o,function(e,t){t.cache="_"+e,t.props.alpha={idx:3,type:"percent",def:1}}),s.fn=e.extend(s.prototype,{parse:function(n,r,i,u){if(n===t)return this._rgba=[null,null,null,null],this;if(n.jquery||n.nodeType)n=e(n).css(r),r=t;var a=this,f=e.type(n),d=this._rgba=[];r!==t&&(n=[n,r,i,u],f="array");if(f==="string")return this.parse(p(n)||l._default);if(f==="array")return c(o.rgba.props,function(e,t){d[t.idx]=h(n[t.idx],t)}),this;if(f==="object")return n instanceof s?c(o,function(e,t){n[t.cache]&&(a[t.cache]=n[t.cache].slice())}):c(o,function(t,r){var i=r.cache;c(r.props,function(e,t){if(!a[i]&&r.to){if(e==="alpha"||n[e]==null)return;a[i]=r.to(a._rgba)}a[i][t.idx]=h(n[e],t,!0)}),a[i]&&e.inArray(null,a[i].slice(0,3))<0&&(a[i][3]=1,r.from&&(a._rgba=r.from(a[i])))}),this},is:function(e){var t=s(e),n=!0,r=this;return c(o,function(e,i){var s,o=t[i.cache];return o&&(s=r[i.cache]||i.to&&i.to(r._rgba)||[],c(i.props,function(e,t){if(o[t.idx]!=null)return n=o[t.idx]===s[t.idx],n})),n}),n},_space:function(){var e=[],t=this;return c(o,function(n,r){t[r.cache]&&e.push(n)}),e.pop()},transition:function(e,t){var n=s(e),r=n._space(),i=o[r],a=this.alpha()===0?s("transparent"):this,f=a[i.cache]||i.to(a._rgba),l=f.slice();return n=n[i.cache],c(i.props,function(e,r){var i=r.idx,s=f[i],o=n[i],a=u[r.type]||{};if(o===null)return;s===null?l[i]=o:(a.mod&&(o-s>a.mod/2?s+=a.mod:s-o>a.mod/2&&(s-=a.mod)),l[i]=h((o-s)*t+s,r))}),this[r](l)},blend:function(t){if(this._rgba[3]===1)return this;var n=this._rgba.slice(),r=n.pop(),i=s(t)._rgba;return s(e.map(n,function(e,t){return(1-r)*i[t]+r*e}))},toRgbaString:function(){var t="rgba(",n=e.map(this._rgba,function(e,t){return e==null?t>2?1:0:e});return n[3]===1&&(n.pop(),t="rgb("),t+n.join()+")"},toHslaString:function(){var t="hsla(",n=e.map(this.hsla(),function(e,t){return e==null&&(e=t>2?1:0),t&&t<3&&(e=Math.round(e*100)+"%"),e});return n[3]===1&&(n.pop(),t="hsl("),t+n.join()+")"},toHexString:function(t){var n=this._rgba.slice(),r=n.pop();return t&&n.push(~~(r*255)),"#"+e.map(n,function(e){return e=(e||0).toString(16),e.length===1?"0"+e:e}).join("")},toString:function(){return this._rgba[3]===0?"transparent":this.toRgbaString()}}),s.fn.parse.prototype=s.fn,o.hsla.to=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/255,n=e[1]/255,r=e[2]/255,i=e[3],s=Math.max(t,n,r),o=Math.min(t,n,r),u=s-o,a=s+o,f=a*.5,l,c;return o===s?l=0:t===s?l=60*(n-r)/u+360:n===s?l=60*(r-t)/u+120:l=60*(t-n)/u+240,u===0?c=0:f<=.5?c=u/a:c=u/(2-a),[Math.round(l)%360,c,f,i==null?1:i]},o.hsla.from=function(e){if(e[0]==null||e[1]==null||e[2]==null)return[null,null,null,e[3]];var t=e[0]/360,n=e[1],r=e[2],i=e[3],s=r<=.5?r*(1+n):r+n-r*n,o=2*r-s;return[Math.round(d(o,s,t+1/3)*255),Math.round(d(o,s,t)*255),Math.round(d(o,s,t-1/3)*255),i]},c(o,function(n,i){var o=i.props,u=i.cache,a=i.to,f=i.from;s.fn[n]=function(n){a&&!this[u]&&(this[u]=a(this._rgba));if(n===t)return this[u].slice();var r,i=e.type(n),l=i==="array"||i==="object"?n:arguments,p=this[u].slice();return c(o,function(e,t){var n=l[i==="object"?e:t.idx];n==null&&(n=p[t.idx]),p[t.idx]=h(n,t)}),f?(r=s(f(p)),r[u]=p,r):s(p)},c(o,function(t,i){if(s.fn[t])return;s.fn[t]=function(s){var o=e.type(s),u=t==="alpha"?this._hsla?"hsla":"rgba":n,a=this[u](),f=a[i.idx],l;return o==="undefined"?f:(o==="function"&&(s=s.call(this,f),o=e.type(s)),s==null&&i.empty?this:(o==="string"&&(l=r.exec(s),l&&(s=f+parseFloat(l[2])*(l[1]==="+"?1:-1))),a[i.idx]=s,this[u](a)))}})}),s.hook=function(t){var n=t.split(" ");c(n,function(t,n){e.cssHooks[n]={set:function(t,r){var i,o,u="";if(r!=="transparent"&&(e.type(r)!=="string"||(i=p(r)))){r=s(i||r);if(!a.rgba&&r._rgba[3]!==1){o=n==="backgroundColor"?t.parentNode:t;while((u===""||u==="transparent")&&o&&o.style)try{u=e.css(o,"backgroundColor"),o=o.parentNode}catch(f){}r=r.blend(u&&u!=="transparent"?u:"_default")}r=r.toRgbaString()}try{t.style[n]=r}catch(f){}}},e.fx.step[n]=function(t){t.colorInit||(t.start=s(t.elem,n),t.end=s(t.end),t.colorInit=!0),e.cssHooks[n].set(t.elem,t.start.transition(t.end,t.pos))}})},s.hook(n),e.cssHooks.borderColor={expand:function(e){var t={};return c(["Top","Right","Bottom","Left"],function(n,r){t["border"+r+"Color"]=e}),t}},l=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(t){var n,r,i=t.ownerDocument.defaultView?t.ownerDocument.defaultView.getComputedStyle(t,null):t.currentStyle,s={};if(i&&i.length&&i[0]&&i[i[0]]){r=i.length;while(r--)n=i[r],typeof i[n]=="string"&&(s[e.camelCase(n)]=i[n])}else for(n in i)typeof i[n]=="string"&&(s[n]=i[n]);return s}function s(t,n){var i={},s,o;for(s in n)o=n[s],t[s]!==o&&!r[s]&&(e.fx.step[s]||!isNaN(parseFloat(o)))&&(i[s]=o);return i}var n=["add","remove","toggle"],r={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};e.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(t,n){e.fx.step[n]=function(e){if(e.end!=="none"&&!e.setAttr||e.pos===1&&!e.setAttr)jQuery.style(e.elem,n,e.end),e.setAttr=!0}}),e.fn.addBack||(e.fn.addBack=function(e){return this.add(e==null?this.prevObject:this.prevObject.filter(e))}),e.effects.animateClass=function(t,r,o,u){var a=e.speed(r,o,u);return this.queue(function(){var r=e(this),o=r.attr("class")||"",u,f=a.children?r.find("*").addBack():r;f=f.map(function(){var t=e(this);return{el:t,start:i(this)}}),u=function(){e.each(n,function(e,n){t[n]&&r[n+"Class"](t[n])})},u(),f=f.map(function(){return this.end=i(this.el[0]),this.diff=s(this.start,this.end),this}),r.attr("class",o),f=f.map(function(){var t=this,n=e.Deferred(),r=e.extend({},a,{queue:!1,complete:function(){n.resolve(t)}});return this.el.animate(this.diff,r),n.promise()}),e.when.apply(e,f.get()).done(function(){u(),e.each(arguments,function(){var t=this.el;e.each(this.diff,function(e){t.css(e,"")})}),a.complete.call(r[0])})})},e.fn.extend({_addClass:e.fn.addClass,addClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{add:t},n,r,i):this._addClass(t)},_removeClass:e.fn.removeClass,removeClass:function(t,n,r,i){return n?e.effects.animateClass.call(this,{remove:t},n,r,i):this._removeClass(t)},_toggleClass:e.fn.toggleClass,toggleClass:function(n,r,i,s,o){return typeof r=="boolean"||r===t?i?e.effects.animateClass.call(this,r?{add:n}:{remove:n},i,s,o):this._toggleClass(n,r):e.effects.animateClass.call(this,{toggle:n},r,i,s)},switchClass:function(t,n,r,i,s){return e.effects.animateClass.call(this,{add:n,remove:t},r,i,s)}})}(),function(){function r(t,n,r,i){e.isPlainObject(t)&&(n=t,t=t.effect),t={effect:t},n==null&&(n={}),e.isFunction(n)&&(i=n,r=null,n={});if(typeof n=="number"||e.fx.speeds[n])i=r,r=n,n={};return e.isFunction(r)&&(i=r,r=null),n&&e.extend(t,n),r=r||n.duration,t.duration=e.fx.off?0:typeof r=="number"?r:r in e.fx.speeds?e.fx.speeds[r]:e.fx.speeds._default,t.complete=i||n.complete,t}function i(t){return!t||typeof t=="number"||e.fx.speeds[t]?!0:typeof t=="string"&&!e.effects.effect[t]}e.extend(e.effects,{version:"1.10.0",save:function(e,t){for(var r=0;r<t.length;r++)t[r]!==null&&e.data(n+t[r],e[0].style[t[r]])},restore:function(e,r){var i,s;for(s=0;s<r.length;s++)r[s]!==null&&(i=e.data(n+r[s]),i===t&&(i=""),e.css(r[s],i))},setMode:function(e,t){return t==="toggle"&&(t=e.is(":hidden")?"show":"hide"),t},getBaseline:function(e,t){var n,r;switch(e[0]){case"top":n=0;break;case"middle":n=.5;break;case"bottom":n=1;break;default:n=e[0]/t.height}switch(e[1]){case"left":r=0;break;case"center":r=.5;break;case"right":r=1;break;default:r=e[1]/t.width}return{x:r,y:n}},createWrapper:function(t){if(t.parent().is(".ui-effects-wrapper"))return t.parent();var n={width:t.outerWidth(!0),height:t.outerHeight(!0),"float":t.css("float")},r=e("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),i={width:t.width(),height:t.height()},s=document.activeElement;try{s.id}catch(o){s=document.body}return t.wrap(r),(t[0]===s||e.contains(t[0],s))&&e(s).focus(),r=t.parent(),t.css("position")==="static"?(r.css({position:"relative"}),t.css({position:"relative"})):(e.extend(n,{position:t.css("position"),zIndex:t.css("z-index")}),e.each(["top","left","bottom","right"],function(e,r){n[r]=t.css(r),isNaN(parseInt(n[r],10))&&(n[r]="auto")}),t.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),t.css(i),r.css(n).show()},removeWrapper:function(t){var n=document.activeElement;return t.parent().is(".ui-effects-wrapper")&&(t.parent().replaceWith(t),(t[0]===n||e.contains(t[0],n))&&e(n).focus()),t},setTransition:function(t,n,r,i){return i=i||{},e.each(n,function(e,n){var s=t.cssUnit(n);s[0]>0&&(i[n]=s[0]*r+s[1])}),i}}),e.fn.extend({effect:function(){function o(n){function u(){e.isFunction(i)&&i.call(r[0]),e.isFunction(n)&&n()}var r=e(this),i=t.complete,o=t.mode;(r.is(":hidden")?o==="hide":o==="show")?u():s.call(r[0],t,u)}var t=r.apply(this,arguments),n=t.mode,i=t.queue,s=e.effects.effect[t.effect];return e.fx.off||!s?n?this[n](t.duration,t.complete):this.each(function(){t.complete&&t.complete.call(this)}):i===!1?this.each(o):this.queue(i||"fx",o)},_show:e.fn.show,show:function(e){if(i(e))return this._show.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="show",this.effect.call(this,t)},_hide:e.fn.hide,hide:function(e){if(i(e))return this._hide.apply(this,arguments);var t=r.apply(this,arguments);return t.mode="hide",this.effect.call(this,t)},__toggle:e.fn.toggle,toggle:function(t){if(i(t)||typeof t=="boolean"||e.isFunction(t))return this.__toggle.apply(this,arguments);var n=r.apply(this,arguments);return n.mode="toggle",this.effect.call(this,n)},cssUnit:function(t){var n=this.css(t),r=[];return e.each(["em","px","%","pt"],function(e,t){n.indexOf(t)>0&&(r=[parseFloat(n),t])}),r}})}(),function(){var t={};e.each(["Quad","Cubic","Quart","Quint","Expo"],function(e,n){t[n]=function(t){return Math.pow(t,e+2)}}),e.extend(t,{Sine:function(e){return 1-Math.cos(e*Math.PI/2)},Circ:function(e){return 1-Math.sqrt(1-e*e)},Elastic:function(e){return e===0||e===1?e:-Math.pow(2,8*(e-1))*Math.sin(((e-1)*80-7.5)*Math.PI/15)},Back:function(e){return e*e*(3*e-2)},Bounce:function(e){var t,n=4;while(e<((t=Math.pow(2,--n))-1)/11);return 1/Math.pow(4,3-n)-7.5625*Math.pow((t*3-2)/22-e,2)}}),e.each(t,function(t,n){e.easing["easeIn"+t]=n,e.easing["easeOut"+t]=function(e){return 1-n(1-e)},e.easing["easeInOut"+t]=function(e){return e<.5?n(e*2)/2:1-n(e*-2+2)/2}})}()}(jQuery);(function(e,t){var n=/up|down|vertical/,r=/up|left|vertical|horizontal/;e.effects.effect.blind=function(t,i){var s=e(this),o=["position","top","bottom","left","right","height","width"],u=e.effects.setMode(s,t.mode||"hide"),a=t.direction||"up",f=n.test(a),l=f?"height":"width",c=f?"top":"left",h=r.test(a),p={},d=u==="show",v,m,g;s.parent().is(".ui-effects-wrapper")?e.effects.save(s.parent(),o):e.effects.save(s,o),s.show(),v=e.effects.createWrapper(s).css({overflow:"hidden"}),m=v[l](),g=parseFloat(v.css(c))||0,p[l]=d?m:0,h||(s.css(f?"bottom":"right",0).css(f?"top":"left","auto").css({position:"absolute"}),p[c]=d?g:m+g),d&&(v.css(l,0),h||v.css(c,g+m)),v.animate(p,{duration:t.duration,easing:t.easing,queue:!1,complete:function(){u==="hide"&&s.hide(),e.effects.restore(s,o),e.effects.removeWrapper(s),i()}})}})(jQuery);(function(e,t){e.effects.effect.bounce=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=s==="hide",u=s==="show",a=t.direction||"up",f=t.distance,l=t.times||5,c=l*2+(u||o?1:0),h=t.duration/c,p=t.easing,d=a==="up"||a==="down"?"top":"left",v=a==="up"||a==="left",m,g,y,b=r.queue(),w=b.length;(u||o)&&i.push("opacity"),e.effects.save(r,i),r.show(),e.effects.createWrapper(r),f||(f=r[d==="top"?"outerHeight":"outerWidth"]()/3),u&&(y={opacity:1},y[d]=0,r.css("opacity",0).css(d,v?-f*2:f*2).animate(y,h,p)),o&&(f/=Math.pow(2,l-1)),y={},y[d]=0;for(m=0;m<l;m++)g={},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p).animate(y,h,p),f=o?f*2:f/2;o&&(g={opacity:0},g[d]=(v?"-=":"+=")+f,r.animate(g,h,p)),r.queue(function(){o&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),w>1&&b.splice.apply(b,[1,0].concat(b.splice(w,c+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.clip=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"vertical",a=u==="vertical",f=a?"height":"width",l=a?"top":"left",c={},h,p,d;e.effects.save(r,i),r.show(),h=e.effects.createWrapper(r).css({overflow:"hidden"}),p=r[0].tagName==="IMG"?h:r,d=p[f](),o&&(p.css(f,0),p.css(l,d/2)),c[f]=o?d:0,c[l]=o?0:d/2,p.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o||r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.drop=function(t,n){var r=e(this),i=["position","top","bottom","left","right","opacity","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left"?"pos":"neg",l={opacity:o?1:0},c;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),c=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0)/2,o&&r.css("opacity",0).css(a,f==="pos"?-c:c),l[a]=(o?f==="pos"?"+=":"-=":f==="pos"?"-=":"+=")+c,r.animate(l,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.explode=function(t,n){function y(){c.push(this),c.length===r*i&&b()}function b(){s.css({visibility:"visible"}),e(c).remove(),u||s.hide(),n()}var r=t.pieces?Math.round(Math.sqrt(t.pieces)):3,i=r,s=e(this),o=e.effects.setMode(s,t.mode||"hide"),u=o==="show",a=s.show().css("visibility","hidden").offset(),f=Math.ceil(s.outerWidth()/i),l=Math.ceil(s.outerHeight()/r),c=[],h,p,d,v,m,g;for(h=0;h<r;h++){v=a.top+h*l,g=h-(r-1)/2;for(p=0;p<i;p++)d=a.left+p*f,m=p-(i-1)/2,s.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-p*f,top:-h*l}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:f,height:l,left:d+(u?m*f:0),top:v+(u?g*l:0),opacity:u?0:1}).animate({left:d+(u?0:m*f),top:v+(u?0:g*l),opacity:u?1:0},t.duration||500,t.easing,y)}}})(jQuery);(function(e,t){e.effects.effect.fade=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"toggle");r.animate({opacity:i},{queue:!1,duration:t.duration,easing:t.easing,complete:n})}})(jQuery);(function(e,t){e.effects.effect.fold=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"hide"),o=s==="show",u=s==="hide",a=t.size||15,f=/([0-9]+)%/.exec(a),l=!!t.horizFirst,c=o!==l,h=c?["width","height"]:["height","width"],p=t.duration/2,d,v,m={},g={};e.effects.save(r,i),r.show(),d=e.effects.createWrapper(r).css({overflow:"hidden"}),v=c?[d.width(),d.height()]:[d.height(),d.width()],f&&(a=parseInt(f[1],10)/100*v[u?0:1]),o&&d.css(l?{height:0,width:a}:{height:a,width:0}),m[h[0]]=o?v[0]:a,g[h[1]]=o?v[1]:0,d.animate(m,p,t.easing).animate(g,p,t.easing,function(){u&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()})}})(jQuery);(function(e,t){e.effects.effect.highlight=function(t,n){var r=e(this),i=["backgroundImage","backgroundColor","opacity"],s=e.effects.setMode(r,t.mode||"show"),o={backgroundColor:r.css("backgroundColor")};s==="hide"&&(o.opacity=0),e.effects.save(r,i),r.show().css({backgroundImage:"none",backgroundColor:t.color||"#ffff99"}).animate(o,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),n()}})}})(jQuery);(function(e,t){e.effects.effect.pulsate=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"show"),s=i==="show",o=i==="hide",u=s||i==="hide",a=(t.times||5)*2+(u?1:0),f=t.duration/a,l=0,c=r.queue(),h=c.length,p;if(s||!r.is(":visible"))r.css("opacity",0).show(),l=1;for(p=1;p<a;p++)r.animate({opacity:l},f,t.easing),l=1-l;r.animate({opacity:l},f,t.easing),r.queue(function(){o&&r.hide(),n()}),h>1&&c.splice.apply(c,[1,0].concat(c.splice(h,a+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.puff=function(t,n){var r=e(this),i=e.effects.setMode(r,t.mode||"hide"),s=i==="hide",o=parseInt(t.percent,10)||150,u=o/100,a={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()};e.extend(t,{effect:"scale",queue:!1,fade:!0,mode:i,complete:n,percent:s?o:100,from:s?a:{height:a.height*u,width:a.width*u,outerHeight:a.outerHeight*u,outerWidth:a.outerWidth*u}}),r.effect(t)},e.effects.effect.scale=function(t,n){var r=e(this),i=e.extend(!0,{},t),s=e.effects.setMode(r,t.mode||"effect"),o=parseInt(t.percent,10)||(parseInt(t.percent,10)===0?0:s==="hide"?0:100),u=t.direction||"both",a=t.origin,f={height:r.height(),width:r.width(),outerHeight:r.outerHeight(),outerWidth:r.outerWidth()},l={y:u!=="horizontal"?o/100:1,x:u!=="vertical"?o/100:1};i.effect="size",i.queue=!1,i.complete=n,s!=="effect"&&(i.origin=a||["middle","center"],i.restore=!0),i.from=t.from||(s==="show"?{height:0,width:0,outerHeight:0,outerWidth:0}:f),i.to={height:f.height*l.y,width:f.width*l.x,outerHeight:f.outerHeight*l.y,outerWidth:f.outerWidth*l.x},i.fade&&(s==="show"&&(i.from.opacity=0,i.to.opacity=1),s==="hide"&&(i.from.opacity=1,i.to.opacity=0)),r.effect(i)},e.effects.effect.size=function(t,n){var r,i,s,o=e(this),u=["position","top","bottom","left","right","width","height","overflow","opacity"],a=["position","top","bottom","left","right","overflow","opacity"],f=["width","height","overflow"],l=["fontSize"],c=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],h=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=e.effects.setMode(o,t.mode||"effect"),d=t.restore||p!=="effect",v=t.scale||"both",m=t.origin||["middle","center"],g=o.css("position"),y=d?u:a,b={height:0,width:0,outerHeight:0,outerWidth:0};p==="show"&&o.show(),r={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},t.mode==="toggle"&&p==="show"?(o.from=t.to||b,o.to=t.from||r):(o.from=t.from||(p==="show"?b:r),o.to=t.to||(p==="hide"?b:r)),s={from:{y:o.from.height/r.height,x:o.from.width/r.width},to:{y:o.to.height/r.height,x:o.to.width/r.width}};if(v==="box"||v==="both")s.from.y!==s.to.y&&(y=y.concat(c),o.from=e.effects.setTransition(o,c,s.from.y,o.from),o.to=e.effects.setTransition(o,c,s.to.y,o.to)),s.from.x!==s.to.x&&(y=y.concat(h),o.from=e.effects.setTransition(o,h,s.from.x,o.from),o.to=e.effects.setTransition(o,h,s.to.x,o.to));(v==="content"||v==="both")&&s.from.y!==s.to.y&&(y=y.concat(l).concat(f),o.from=e.effects.setTransition(o,l,s.from.y,o.from),o.to=e.effects.setTransition(o,l,s.to.y,o.to)),e.effects.save(o,y),o.show(),e.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(i=e.effects.getBaseline(m,r),o.from.top=(r.outerHeight-o.outerHeight())*i.y,o.from.left=(r.outerWidth-o.outerWidth())*i.x,o.to.top=(r.outerHeight-o.to.outerHeight)*i.y,o.to.left=(r.outerWidth-o.to.outerWidth)*i.x),o.css(o.from);if(v==="content"||v==="both")c=c.concat(["marginTop","marginBottom"]).concat(l),h=h.concat(["marginLeft","marginRight"]),f=u.concat(c).concat(h),o.find("*[width]").each(function(){var n=e(this),r={height:n.height(),width:n.width(),outerHeight:n.outerHeight(),outerWidth:n.outerWidth()};d&&e.effects.save(n,f),n.from={height:r.height*s.from.y,width:r.width*s.from.x,outerHeight:r.outerHeight*s.from.y,outerWidth:r.outerWidth*s.from.x},n.to={height:r.height*s.to.y,width:r.width*s.to.x,outerHeight:r.height*s.to.y,outerWidth:r.width*s.to.x},s.from.y!==s.to.y&&(n.from=e.effects.setTransition(n,c,s.from.y,n.from),n.to=e.effects.setTransition(n,c,s.to.y,n.to)),s.from.x!==s.to.x&&(n.from=e.effects.setTransition(n,h,s.from.x,n.from),n.to=e.effects.setTransition(n,h,s.to.x,n.to)),n.css(n.from),n.animate(n.to,t.duration,t.easing,function(){d&&e.effects.restore(n,f)})});o.animate(o.to,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){o.to.opacity===0&&o.css("opacity",o.from.opacity),p==="hide"&&o.hide(),e.effects.restore(o,y),d||(g==="static"?o.css({position:"relative",top:o.to.top,left:o.to.left}):e.each(["top","left"],function(e,t){o.css(t,function(t,n){var r=parseInt(n,10),i=e?o.to.left:o.to.top;return n==="auto"?i+"px":r+i+"px"})})),e.effects.removeWrapper(o),n()}})}})(jQuery);(function(e,t){e.effects.effect.shake=function(t,n){var r=e(this),i=["position","top","bottom","left","right","height","width"],s=e.effects.setMode(r,t.mode||"effect"),o=t.direction||"left",u=t.distance||20,a=t.times||3,f=a*2+1,l=Math.round(t.duration/f),c=o==="up"||o==="down"?"top":"left",h=o==="up"||o==="left",p={},d={},v={},m,g=r.queue(),y=g.length;e.effects.save(r,i),r.show(),e.effects.createWrapper(r),p[c]=(h?"-=":"+=")+u,d[c]=(h?"+=":"-=")+u*2,v[c]=(h?"-=":"+=")+u*2,r.animate(p,l,t.easing);for(m=1;m<a;m++)r.animate(d,l,t.easing).animate(v,l,t.easing);r.animate(d,l,t.easing).animate(p,l/2,t.easing).queue(function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}),y>1&&g.splice.apply(g,[1,0].concat(g.splice(y,f+1))),r.dequeue()}})(jQuery);(function(e,t){e.effects.effect.slide=function(t,n){var r=e(this),i=["position","top","bottom","left","right","width","height"],s=e.effects.setMode(r,t.mode||"show"),o=s==="show",u=t.direction||"left",a=u==="up"||u==="down"?"top":"left",f=u==="up"||u==="left",l,c={};e.effects.save(r,i),r.show(),l=t.distance||r[a==="top"?"outerHeight":"outerWidth"](!0),e.effects.createWrapper(r).css({overflow:"hidden"}),o&&r.css(a,f?isNaN(l)?"-"+l:-l:l),c[a]=(o?f?"+=":"-=":f?"-=":"+=")+l,r.animate(c,{queue:!1,duration:t.duration,easing:t.easing,complete:function(){s==="hide"&&r.hide(),e.effects.restore(r,i),e.effects.removeWrapper(r),n()}})}})(jQuery);(function(e,t){e.effects.effect.transfer=function(t,n){var r=e(this),i=e(t.to),s=i.css("position")==="fixed",o=e("body"),u=s?o.scrollTop():0,a=s?o.scrollLeft():0,f=i.offset(),l={top:f.top-u,left:f.left-a,height:i.innerHeight(),width:i.innerWidth()},c=r.offset(),h=e("<div class='ui-effects-transfer'></div>").appendTo(document.body).addClass(t.className).css({top:c.top-u,left:c.left-a,height:r.innerHeight(),width:r.innerWidth(),position:s?"fixed":"absolute"}).animate(l,t.duration,t.easing,function(){h.remove(),n()})}})(jQuery);(function(e,t){"use strict";function n(e){var t=Array.prototype.slice.call(arguments,1);return e.prop?e.prop.apply(e,t):e.attr.apply(e,t)}function s(e,t,n){var s,a;for(s in n)n.hasOwnProperty(s)&&(a=s.replace(/ |$/g,t.eventNamespace),e.bind(s,n[s]))}function a(e,t,n){s(e,n,{focus:function(){t.addClass(n.focusClass)},blur:function(){t.removeClass(n.focusClass),t.removeClass(n.activeClass)},mouseenter:function(){t.addClass(n.hoverClass)},mouseleave:function(){t.removeClass(n.hoverClass),t.removeClass(n.activeClass)},"mousedown touchbegin":function(){e.is(":disabled")||t.addClass(n.activeClass)},"mouseup touchend":function(){t.removeClass(n.activeClass)}})}function i(e,t){e.removeClass(t.hoverClass+" "+t.focusClass+" "+t.activeClass)}function r(e,t,n){n?e.addClass(t):e.removeClass(t)}function o(e,t,n){var s="checked",a=t.is(":"+s);t.prop?t.prop(s,a):a?t.attr(s,s):t.removeAttr(s),r(e,n.checkedClass,a)}function l(e,t,n){r(e,n.disabledClass,t.is(":disabled"))}function u(e,t,n){switch(n){case"after":return e.after(t),e.next();case"before":return e.before(t),e.prev();case"wrap":return e.wrap(t),e.parent()}return null}function c(t,s,a){var i,r,o;return a||(a={}),a=e.extend({bind:{},divClass:null,divWrap:"wrap",spanClass:null,spanHtml:null,spanWrap:"wrap"},a),i=e("<div />"),r=e("<span />"),s.autoHide&&t.is(":hidden")&&"none"===t.css("display")&&i.hide(),a.divClass&&i.addClass(a.divClass),a.spanClass&&r.addClass(a.spanClass),o=n(t,"id"),s.useID&&o&&n(i,"id",s.idPrefix+"-"+o),a.spanHtml&&r.html(a.spanHtml),i=u(t,i,a.divWrap),r=u(t,r,a.spanWrap),l(i,t,s),{div:i,span:r}}function f(){var t,n,s,a;return a="rgb(120,2,153)",n=e('<div style="width:0;height:0;color:'+a+'">'),e("body").append(n),s=n.get(0),t=window.getComputedStyle?window.getComputedStyle(s,"").color:(s.currentStyle||s.style||{}).color,n.remove(),t.replace(/ /g,"")!==a}function d(t){return t?e("<span />").text(t).html():""}function m(e){var t;return e[0].multiple?!0:(t=n(e,"size"),!t||1>=t?!1:!0)}function p(){return!1}function v(e,t){var n="none";s(e,t,{"selectstart dragstart mousedown":p}),e.css({MozUserSelect:n,msUserSelect:n,webkitUserSelect:n,userSelect:n})}function h(e,t,n){var s=e.val();""===s?s=n.fileDefaultHtml:(s=s.split(/[\/\\]+/),s=s[s.length-1]),t.text(s)}function C(e,t,n){var s,a;for(s=[],e.each(function(){var e;for(e in t)Object.prototype.hasOwnProperty.call(t,e)&&(s.push({el:this,name:e,old:this.style[e]}),this.style[e]=t[e])}),n();s.length;)a=s.pop(),a.el.style[a.name]=a.old}function b(e,t){C(e.parents().andSelf().not(":visible"),{visibility:"hidden",display:"block",position:"absolute"},t)}function w(e,t){return function(){e.unwrap().unwrap().unbind(t.eventNamespace)}}var y=!0,g=!1,k=[{match:function(e){return e.is("a, button, :submit, :reset, input[type='button']")},apply:function(e,t){var r,o,u,f,m;return o=t.submitDefaultHtml,e.is(":reset")&&(o=t.resetDefaultHtml),f=e.is("a, button")?function(){return e.html()||o}:function(){return d(n(e,"value"))||o},u=c(e,t,{divClass:t.buttonClass,spanHtml:f()}),r=u.div,a(e,r,t),m=!1,s(r,t,{"click touchend":function(){var t,s,a,i;m||(m=!0,e[0].dispatchEvent?(t=document.createEvent("MouseEvents"),t.initEvent("click",!0,!0),s=e[0].dispatchEvent(t),(jQuery.browser.msie||jQuery.browser.mozilla)&&e.is("a")&&s&&(a=n(e,"target"),i=n(e,"href"),a&&"_self"!==a?window.open(i,a):document.location.href=i)):e.click(),m=!1)}}),v(r,t),{remove:function(){return r.after(e),r.remove(),e.unbind(t.eventNamespace),e},update:function(){i(r,t),l(r,e,t),u.span.html(f())}}}},{match:function(e){return e.is(":checkbox")},apply:function(e,t){var n,r,u;return n=c(e,t,{divClass:t.checkboxClass}),r=n.div,u=n.span,a(e,r,t),s(e,t,{"click touchend":function(){o(u,e,t)}}),o(u,e,t),{remove:w(e,t),update:function(){i(r,t),u.removeClass(t.checkedClass),o(u,e,t),l(r,e,t)}}}},{match:function(e){return e.is(":file")},apply:function(t,r){function o(){h(t,m,r)}var f,d,m,p;return f=c(t,r,{divClass:r.fileClass,spanClass:r.fileButtonClass,spanHtml:r.fileButtonHtml,spanWrap:"after"}),d=f.div,p=f.span,m=e("<span />").html(r.fileDefaultHtml),m.addClass(r.filenameClass),m=u(t,m,"after"),n(t,"size")||n(t,"size",d.width()/10),a(t,d,r),o(),e.browser.msie?s(t,r,{click:function(){t.trigger("change"),setTimeout(o,0)}}):s(t,r,{change:o}),v(m,r),v(p,r),{remove:function(){return m.remove(),p.remove(),t.unwrap().unbind(r.eventNamespace)},update:function(){i(d,r),h(t,m,r),l(d,t,r)}}}},{match:function(e){if(e.is("input")){var t=(" "+n(e,"type")+" ").toLowerCase(),s=" color date datetime datetime-local email month number password search tel text time url week ";return s.indexOf(t)>=0}return!1},apply:function(e){var t=n(e,"type");return e.addClass(t),{remove:function(){e.removeClass(t)},update:p}}},{match:function(e){return e.is(":radio")},apply:function(t,r){var u,f,d;return u=c(t,r,{divClass:r.radioClass}),f=u.div,d=u.span,a(t,f,r),s(t,r,{"click touchend":function(){e.uniform.update(e(':radio[name="'+n(t,"name")+'"]'))}}),o(d,t,r),{remove:w(t,r),update:function(){i(f,r),o(d,t,r),l(f,t,r)}}}},{match:function(e){return e.is("select")&&!m(e)?!0:!1},apply:function(t,n){var r,o,u,f;return n.selectAutoWidth&&b(t,function(){f=t.width()}),r=c(t,n,{divClass:n.selectClass,spanHtml:(t.find(":selected:first")||t.find("option:first")).html(),spanWrap:"before"}),o=r.div,u=r.span,n.selectAutoWidth?b(t,function(){var e;e=u.outerWidth()-u.width(),o.width(f+e),u.width(f)}):o.addClass("fixedWidth"),a(t,o,n),s(t,n,{change:function(){u.html(t.find(":selected").html()),o.removeClass(n.activeClass)},"click touchend":function(){var e=t.find(":selected").html();u.html()!==e&&t.trigger("change")},keyup:function(){u.html(t.find(":selected").html())}}),v(u,n),{remove:function(){return u.remove(),t.unwrap().unbind(n.eventNamespace),t},update:function(){n.selectAutoWidth?(e.uniform.restore(t),t.uniform(n)):(i(o,n),u.html(t.find(":selected").html()),l(o,t,n))}}}},{match:function(e){return e.is("select")&&m(e)?!0:!1},apply:function(e,t){return e.addClass(t.selectMultiClass),{remove:function(){e.removeClass(t.selectMultiClass)},update:p}}},{match:function(e){return e.is("textarea")},apply:function(e,t){return e.addClass(t.textareaClass),{remove:function(){e.removeClass(t.textareaClass)},update:p}}}];e.browser.msie&&7>e.browser.version&&(y=!1),e.uniform={defaults:{activeClass:"active",autoHide:!0,buttonClass:"button",checkboxClass:"checker",checkedClass:"checked",disabledClass:"disabled",eventNamespace:".uniform",fileButtonClass:"action",fileButtonHtml:"Choose File",fileClass:"uploader",fileDefaultHtml:"No file selected",filenameClass:"filename",focusClass:"focus",hoverClass:"hover",idPrefix:"uniform",radioClass:"radio",resetDefaultHtml:"Reset",resetSelector:!1,selectAutoWidth:!0,selectClass:"selector",selectMultiClass:"uniform-multiselect",submitDefaultHtml:"Submit",textareaClass:"uniform",useID:!0},elements:[]},e.fn.uniform=function(t){var n=this;return t=e.extend({},e.uniform.defaults,t),g||(g=!0,f()&&(y=!1)),y?(t.resetSelector&&e(t.resetSelector).mouseup(function(){window.setTimeout(function(){e.uniform.update(n)},10)}),this.each(function(){var n,s,a,i=e(this);if(i.data("uniformed"))return e.uniform.update(i),void 0;for(n=0;k.length>n;n+=1)if(s=k[n],s.match(i,t))return a=s.apply(i,t),i.data("uniformed",a),e.uniform.elements.push(i.get(0)),void 0})):this},e.uniform.restore=e.fn.uniform.restore=function(n){n===t&&(n=e.uniform.elements),e(n).each(function(){var t,n,s=e(this);n=s.data("uniformed"),n&&(n.remove(),t=e.inArray(this,e.uniform.elements),t>=0&&e.uniform.elements.splice(t,1),s.removeData("uniformed"))})},e.uniform.update=e.fn.uniform.update=function(n){n===t&&(n=e.uniform.elements),e(n).each(function(){var t,n=e(this);t=n.data("uniformed"),t&&t.update(n,t.options)})}})(jQuery);(function(factory){"use strict";if(typeof define==='function'&&define.amd){define(['jquery'],factory);}
else if(typeof exports=="object"&&typeof module=="object"){module.exports=factory(require('jquery'));}
else{factory(jQuery);}})(function($,undefined){"use strict";var defaultOpts={beforeShow:noop,move:noop,change:noop,show:noop,hide:noop,color:false,flat:false,showInput:false,allowEmpty:false,showButtons:true,clickoutFiresChange:true,showInitial:false,showPalette:false,showPaletteOnly:false,hideAfterPaletteSelect:false,togglePaletteOnly:false,showSelectionPalette:true,localStorageKey:false,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:false,className:"",containerClassName:"",replacerClassName:"",showAlpha:false,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:false,offset:null,whitelist:{}},spectrums=[],IE=!!/msie/i.exec(window.navigator.userAgent),rgbaSupport=(function(){function contains(str,substr){return!!~(''+str).indexOf(substr);}
var elem=document.createElement('div');var style=elem.style;style.cssText='background-color:rgba(0,0,0,.5)';return contains(style.backgroundColor,'rgba')||contains(style.backgroundColor,'hsla');})(),replaceInput=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(''),markup=(function(){var gradientFix="";if(IE){for(var i=1;i<=6;i++){gradientFix+="<div class='sp-"+i+"'></div>";}}
return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",gradientFix,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("");})();function paletteTemplate(p,color,className,opts){var html=[];for(var i=0;i<p.length;i++){var current=p[i];var whitelisted=opts.whitelist.get(current);if(whitelisted){html.push($('<div />').append($('<span data-color="" style="background-color:transparent;" class="'+(whitelisted.classes||'')+'"></span>').attr('title',current)).html());}else if(current){var tiny=tinycolor(current);var c=tiny.toHsl().l<0.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=(tinycolor.equals(color,current))?" sp-thumb-active":"";var formattedString=tiny.toString(opts.preferredFormat||"rgb");var swatchStyle=rgbaSupport?("background-color:"+tiny.toRgbString()):"filter:"+tiny.toFilter();html.push('<span title="'+formattedString+'" data-color="'+tiny.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+swatchStyle+';" /></span>');}else{var cls='sp-clear-display';html.push($('<div />').append($('<span data-color="" style="background-color:transparent;" class="'+cls+'"></span>').attr('title',opts.noColorSelectedText)).html());}}
return"<div class='sp-cf "+className+"'>"+html.join('')+"</div>";}
function hideAll(){for(var i=0;i<spectrums.length;i++){if(spectrums[i]){spectrums[i].hide();}}}
function instanceOptions(o,callbackContext){var opts=$.extend({},defaultOpts,o);opts.callbacks={'move':bind(opts.move,callbackContext),'change':bind(opts.change,callbackContext),'show':bind(opts.show,callbackContext),'hide':bind(opts.hide,callbackContext),'beforeShow':bind(opts.beforeShow,callbackContext)};return opts;}
function spectrum(element,o){var opts=instanceOptions(o,element),flat=opts.flat,showSelectionPalette=opts.showSelectionPalette,localStorageKey=opts.localStorageKey,theme=opts.theme,callbacks=opts.callbacks,resize=throttle(reflow,10),visible=false,isDragging=false,dragWidth=0,dragHeight=0,dragHelperHeight=0,slideHeight=0,slideWidth=0,alphaWidth=0,alphaSlideHelperWidth=0,slideHelperHeight=0,currentHue=0,currentSaturation=0,currentValue=0,currentAlpha=1,currentNameValue="",palette=[],paletteArray=[],paletteLookup={},selectionPalette=opts.selectionPalette.slice(0),maxSelectionSize=opts.maxSelectionSize,draggingClass="sp-dragging",shiftMovementDirection=null,whitelist=opts.whitelist;var doc=element.ownerDocument,body=doc.body,boundElement=$(element),disabled=false,container=$(markup,doc).addClass(theme),pickerContainer=container.find(".sp-picker-container"),dragger=container.find(".sp-color"),dragHelper=container.find(".sp-dragger"),slider=container.find(".sp-hue"),slideHelper=container.find(".sp-slider"),alphaSliderInner=container.find(".sp-alpha-inner"),alphaSlider=container.find(".sp-alpha"),alphaSlideHelper=container.find(".sp-alpha-handle"),textInput=container.find(".sp-input"),paletteContainer=container.find(".sp-palette"),initialColorContainer=container.find(".sp-initial"),cancelButton=container.find(".sp-cancel"),clearButton=container.find(".sp-clear"),chooseButton=container.find(".sp-choose"),toggleButton=container.find(".sp-palette-toggle"),isInput=boundElement.is("input"),isInputTypeColor=isInput&&boundElement.attr("type")==="color"&&inputTypeColorSupport(),shouldReplace=isInput&&!flat,replacer=(shouldReplace)?$(replaceInput).addClass(theme).addClass(opts.className).addClass(opts.replacerClassName):$([]),offsetElement=(shouldReplace)?replacer:boundElement,previewElement=replacer.find(".sp-preview-inner"),initialColor=opts.color||(isInput&&boundElement.val()),colorOnShow=false,currentPreferredFormat=opts.preferredFormat,clickoutFiresChange=!opts.showButtons||opts.clickoutFiresChange,isEmpty=!initialColor,allowEmpty=opts.allowEmpty&&!isInputTypeColor;function applyOptions(){if(opts.showPaletteOnly){opts.showPalette=true;}
toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);if(opts.palette){palette=opts.palette.slice(0);paletteArray=$.isArray(palette[0])?palette:[palette];paletteLookup={};for(var i=0;i<paletteArray.length;i++){for(var j=0;j<paletteArray[i].length;j++){var rgb=tinycolor(paletteArray[i][j]).toRgbString();paletteLookup[rgb]=true;}}}
container.toggleClass("sp-flat",flat);container.toggleClass("sp-input-disabled",!opts.showInput);container.toggleClass("sp-alpha-enabled",opts.showAlpha);container.toggleClass("sp-clear-enabled",allowEmpty);container.toggleClass("sp-buttons-disabled",!opts.showButtons);container.toggleClass("sp-palette-buttons-disabled",!opts.togglePaletteOnly);container.toggleClass("sp-palette-disabled",!opts.showPalette);container.toggleClass("sp-palette-only",opts.showPaletteOnly);container.toggleClass("sp-initial-disabled",!opts.showInitial);container.addClass(opts.className).addClass(opts.containerClassName);if(!opts.whitelist.hasOwnProperty('get')){opts.whitelist.get=function(name){if($.type(name)!=="string"){return opts.whitelist[name];}
for(var prop in opts.whitelist){if(name.match(prop)){return opts.whitelist[prop];}}
return undefined;}}
reflow();}
function initialize(){if(IE){container.find("*:not(input)").attr("unselectable","on");}
applyOptions();if(shouldReplace){boundElement.after(replacer).hide();}
if(!allowEmpty){clearButton.hide();}
if(flat){boundElement.after(container).hide();}
else{var appendTo=opts.appendTo==="parent"?boundElement.parent():$(opts.appendTo);if(appendTo.length!==1){appendTo=$("body");}
appendTo.append(container);}
updateSelectionPaletteFromStorage();offsetElement.on("click.spectrum touchstart.spectrum",function(e){if(!disabled){toggle();}
e.stopPropagation();if(!$(e.target).is("input")){e.preventDefault();}});if(boundElement.is(":disabled")||(opts.disabled===true)){disable();}
container.click(stopPropagation);textInput.change(setFromTextInput);textInput.on("paste",function(){setTimeout(setFromTextInput,1);});textInput.keydown(function(e){if(e.keyCode==13){setFromTextInput();}});cancelButton.text(opts.cancelText);cancelButton.on("click.spectrum",function(e){e.stopPropagation();e.preventDefault();revert();hide();});clearButton.attr("title",opts.clearText);clearButton.on("click.spectrum",function(e){e.stopPropagation();e.preventDefault();isEmpty=true;removeWhitelisted();move();if(flat){updateOriginalInput(true);}});chooseButton.text(opts.chooseText);chooseButton.on("click.spectrum",function(e){e.stopPropagation();e.preventDefault();if(IE&&textInput.is(":focus")){textInput.trigger('change');}
if(isValid()){updateOriginalInput(true);hide();}});toggleButton.text(opts.showPaletteOnly?opts.togglePaletteMoreText:opts.togglePaletteLessText);toggleButton.on("click.spectrum",function(e){e.stopPropagation();e.preventDefault();opts.showPaletteOnly=!opts.showPaletteOnly;if(!opts.showPaletteOnly&&!flat){container.css('left','-='+(pickerContainer.outerWidth(true)+5));}
applyOptions();});draggable(alphaSlider,function(dragX,dragY,e){currentAlpha=(dragX/alphaWidth);isEmpty=false;if(e.shiftKey){currentAlpha=Math.round(currentAlpha*10)/10;}
move();},dragStart,dragStop);draggable(slider,function(dragX,dragY){currentHue=parseFloat(dragY/slideHeight);isEmpty=false;if(!opts.showAlpha){currentAlpha=1;}
move();},dragStart,dragStop);draggable(dragger,function(dragX,dragY,e){if(!e.shiftKey){shiftMovementDirection=null;}
else if(!shiftMovementDirection){var oldDragX=currentSaturation*dragWidth;var oldDragY=dragHeight-(currentValue*dragHeight);var furtherFromX=Math.abs(dragX-oldDragX)>Math.abs(dragY-oldDragY);shiftMovementDirection=furtherFromX?"x":"y";}
var setSaturation=!shiftMovementDirection||shiftMovementDirection==="x";var setValue=!shiftMovementDirection||shiftMovementDirection==="y";if(setSaturation){currentSaturation=parseFloat(dragX/dragWidth);}
if(setValue){currentValue=parseFloat((dragHeight-dragY)/dragHeight);}
isEmpty=false;if(!opts.showAlpha){currentAlpha=1;}
move();},dragStart,dragStop);if(!!initialColor){set(initialColor);updateUI();currentPreferredFormat=opts.preferredFormat||tinycolor(initialColor).format;addColorToSelectionPalette(initialColor);}
else{updateUI();}
if(flat){show();}
function paletteElementClick(e){if(e.data&&e.data.ignore){set($(e.target).closest(".sp-thumb-el").data("color"));move();}
else{set($(e.target).closest(".sp-thumb-el").data("color"));move();if(opts.hideAfterPaletteSelect){updateOriginalInput(true);hide();}else{updateOriginalInput();}}
return false;}
var paletteEvent=IE?"mousedown.spectrum":"click.spectrum touchstart.spectrum";paletteContainer.on(paletteEvent,".sp-thumb-el",paletteElementClick);initialColorContainer.on(paletteEvent,".sp-thumb-el:nth-child(1)",{ignore:true},paletteElementClick);}
function updateSelectionPaletteFromStorage(){if(localStorageKey&&window.localStorage){try{var oldPalette=window.localStorage[localStorageKey].split(",#");if(oldPalette.length>1){delete window.localStorage[localStorageKey];$.each(oldPalette,function(i,c){addColorToSelectionPalette(c);});}}
catch(e){}
try{selectionPalette=window.localStorage[localStorageKey].split(";");}
catch(e){}}}
function addColorToSelectionPalette(color){if(showSelectionPalette){var rgb=tinycolor(color).toRgbString();if(!paletteLookup[rgb]&&$.inArray(rgb,selectionPalette)===-1){selectionPalette.push(rgb);while(selectionPalette.length>maxSelectionSize){selectionPalette.shift();}}
if(localStorageKey&&window.localStorage){try{window.localStorage[localStorageKey]=selectionPalette.join(";");}
catch(e){}}}}
function getUniqueSelectionPalette(){var unique=[];if(opts.showPalette){for(var i=0;i<selectionPalette.length;i++){var rgb=tinycolor(selectionPalette[i]).toRgbString();if(!paletteLookup[rgb]){unique.push(selectionPalette[i]);}}}
return unique.reverse().slice(0,opts.maxSelectionSize);}
function drawPalette(){var currentColor=get();var html=$.map(paletteArray,function(palette,i){return paletteTemplate(palette,currentColor,"sp-palette-row sp-palette-row-"+i,opts);});updateSelectionPaletteFromStorage();if(selectionPalette){html.push(paletteTemplate(getUniqueSelectionPalette(),currentColor,"sp-palette-row sp-palette-row-selection",opts));}
paletteContainer.html(html.join(""));}
function drawInitial(){if(opts.showInitial){var initial=colorOnShow;var current=get();initialColorContainer.html(paletteTemplate([initial,current],current,"sp-palette-row-initial",opts));}}
function removeWhitelisted(){var whitelisted=whitelist.get(currentNameValue);if(whitelisted&&whitelisted.classes){previewElement.removeClass(whitelisted.classes);}
currentNameValue=null;}
function dragStart(){removeWhitelisted();if(dragHeight<=0||dragWidth<=0||slideHeight<=0){reflow();}
isDragging=true;container.addClass(draggingClass);shiftMovementDirection=null;boundElement.trigger('dragstart.spectrum',[get()]);}
function dragStop(){isDragging=false;container.removeClass(draggingClass);boundElement.trigger('dragstop.spectrum',[get()]);}
function setFromTextInput(){var value=textInput.val();if((value===null||value==="")&&allowEmpty){set(null);move();updateOriginalInput();}else if(whitelist.get(value)){set(value);move();updateOriginalInput();}
else{var tiny=tinycolor(value);if(tiny.isValid()){set(tiny);move();updateOriginalInput();}
else{textInput.addClass("sp-validation-error");}}}
function toggle(){if(visible){hide();}
else{show();}}
function show(){var event=$.Event('beforeShow.spectrum');if(visible){reflow();return;}
boundElement.trigger(event,[get()]);if(callbacks.beforeShow(get())===false||event.isDefaultPrevented()){return;}
hideAll();visible=true;$(doc).on("keydown.spectrum",onkeydown);$(doc).on("click.spectrum",clickout);$(window).on("resize.spectrum",resize);replacer.addClass("sp-active");container.removeClass("sp-hidden");reflow();updateUI();colorOnShow=get();drawInitial();callbacks.show(colorOnShow);boundElement.trigger('show.spectrum',[colorOnShow]);}
function onkeydown(e){if(e.keyCode===27){hide();}}
function clickout(e){if(e.button==2){return;}
if(isDragging){return;}
if(clickoutFiresChange){updateOriginalInput(true);}
else{revert();}
hide();}
function hide(){if(!visible||flat){return;}
visible=false;$(doc).off("keydown.spectrum",onkeydown);$(doc).off("click.spectrum",clickout);$(window).off("resize.spectrum",resize);replacer.removeClass("sp-active");container.addClass("sp-hidden");callbacks.hide(get());boundElement.trigger('hide.spectrum',[get()]);}
function revert(){set(colorOnShow,true);updateOriginalInput(true);}
function set(color,ignoreFormatChange){if(tinycolor.equals(color,get())){updateUI();return;}
removeWhitelisted();var newColor,newHsv;if(!color&&allowEmpty){isEmpty=true;}else if(whitelist.get(color)){isEmpty=false;currentNameValue=color;}else{isEmpty=false;newColor=tinycolor(color);newHsv=newColor.toHsv();currentHue=(newHsv.h%360)/360;currentSaturation=newHsv.s;currentValue=newHsv.v;currentAlpha=newHsv.a;}
updateUI();if(newColor&&newColor.isValid()&&!ignoreFormatChange){currentPreferredFormat=opts.preferredFormat||newColor.getFormat();}}
function get(opts){opts=opts||{};if(allowEmpty&&isEmpty){return null;}
if(currentNameValue){return currentNameValue;}
return tinycolor.fromRatio({h:currentHue,s:currentSaturation,v:currentValue,a:Math.round(currentAlpha*1000)/1000},{format:opts.format||currentPreferredFormat});}
function isValid(){return!textInput.hasClass("sp-validation-error");}
function move(){updateUI();callbacks.move(get());boundElement.trigger('move.spectrum',[get()]);}
function updateUI(){textInput.removeClass("sp-validation-error");updateHelperLocations();var flatColor=tinycolor.fromRatio({h:currentHue,s:1,v:1});dragger.css("background-color",flatColor.toHexString());var format=currentPreferredFormat;if(currentAlpha<1&&!(currentAlpha===0&&format==="name")){if(format==="hex"||format==="hex3"||format==="hex6"||format==="name"){format="rgb";}}
var realColor=get({format:format}),displayColor='';var whitelisted=whitelist.get(realColor);previewElement.removeClass("sp-clear-display");previewElement.css('background-color','transparent');if(!realColor&&allowEmpty){previewElement.addClass("sp-clear-display");}else if(whitelisted){if(whitelisted.classes){previewElement.addClass(whitelisted.classes);previewElement.css("background-color","");}
displayColor=realColor;}
else{var realHex=realColor.toHexString(),realRgb=realColor.toRgbString();if(rgbaSupport||realColor.alpha===1){previewElement.css("background-color",realRgb);}
else{previewElement.css("background-color","transparent");previewElement.css("filter",realColor.toFilter());}
if(opts.showAlpha){var rgb=realColor.toRgb();rgb.a=0;var realAlpha=tinycolor(rgb).toRgbString();var gradient="linear-gradient(left, "+realAlpha+", "+realHex+")";if(IE){alphaSliderInner.css("filter",tinycolor(realAlpha).toFilter({gradientType:1},realHex));}
else{alphaSliderInner.css("background","-webkit-"+gradient);alphaSliderInner.css("background","-moz-"+gradient);alphaSliderInner.css("background","-ms-"+gradient);alphaSliderInner.css("background","linear-gradient(to right, "+realAlpha+", "+realHex+")");}}
displayColor=realColor.toString(format);}
if(opts.showInput){textInput.val(displayColor);}
if(opts.showPalette){drawPalette();}
drawInitial();}
function updateHelperLocations(){var s=currentSaturation;var v=currentValue;if(allowEmpty&&isEmpty){alphaSlideHelper.hide();slideHelper.hide();dragHelper.hide();}
else{alphaSlideHelper.show();slideHelper.show();dragHelper.show();var dragX=s*dragWidth;var dragY=dragHeight-(v*dragHeight);dragX=Math.max(-dragHelperHeight,Math.min(dragWidth-dragHelperHeight,dragX-dragHelperHeight));dragY=Math.max(-dragHelperHeight,Math.min(dragHeight-dragHelperHeight,dragY-dragHelperHeight));dragHelper.css({"top":dragY+"px","left":dragX+"px"});var alphaX=currentAlpha*alphaWidth;alphaSlideHelper.css({"left":(alphaX-(alphaSlideHelperWidth/2))+"px"});var slideY=(currentHue)*slideHeight;slideHelper.css({"top":(slideY-slideHelperHeight)+"px"});}}
function updateOriginalInput(fireCallback){var color=get(),displayColor='',hasChanged=!tinycolor.equals(color,colorOnShow);if(color){displayColor=color.toString(currentPreferredFormat);addColorToSelectionPalette(color);}
if(isInput){boundElement.val(displayColor);}
if(fireCallback&&hasChanged){callbacks.change(color);boundElement.trigger('change',[color]);}}
function reflow(){if(!visible){return;}
dragWidth=dragger.width();dragHeight=dragger.height();dragHelperHeight=dragHelper.height();slideWidth=slider.width();slideHeight=slider.height();slideHelperHeight=slideHelper.height();alphaWidth=alphaSlider.width();alphaSlideHelperWidth=alphaSlideHelper.width();if(!flat){container.css("position","absolute");if(opts.offset){container.offset(opts.offset);}else{container.offset(getOffset(container,offsetElement));}}
updateHelperLocations();if(opts.showPalette){drawPalette();}
boundElement.trigger('reflow.spectrum');}
function destroy(){boundElement.show();offsetElement.off("click.spectrum touchstart.spectrum");container.remove();replacer.remove();spectrums[spect.id]=null;}
function option(optionName,optionValue){if(optionName===undefined){return $.extend({},opts);}
if(optionValue===undefined){return opts[optionName];}
opts[optionName]=optionValue;opts=instanceOptions(opts,element);callbacks=opts.callbacks;whitelist=opts.whitelist;if(optionName==="preferredFormat"){currentPreferredFormat=opts.preferredFormat;}
applyOptions();}
function enable(){disabled=false;boundElement.attr("disabled",false);offsetElement.removeClass("sp-disabled");}
function disable(){hide();disabled=true;boundElement.attr("disabled",true);offsetElement.addClass("sp-disabled");}
function setOffset(coord){opts.offset=coord;reflow();}
initialize();var spect={show:show,hide:hide,toggle:toggle,reflow:reflow,option:option,enable:enable,disable:disable,offset:setOffset,set:function(c){set(c);updateOriginalInput();},get:get,destroy:destroy,container:container};spect.id=spectrums.push(spect)-1;return spect;}
function getOffset(picker,input){var extraY=0;var dpWidth=picker.outerWidth();var dpHeight=picker.outerHeight();var inputHeight=input.outerHeight();var doc=picker[0].ownerDocument;var docElem=doc.documentElement;var viewWidth=docElem.clientWidth+$(doc).scrollLeft();var viewHeight=docElem.clientHeight+$(doc).scrollTop();var offset=input.offset();var offsetLeft=offset.left;var offsetTop=offset.top;offsetTop+=inputHeight;offsetLeft-=Math.min(offsetLeft,(offsetLeft+dpWidth>viewWidth&&viewWidth>dpWidth)?Math.abs(offsetLeft+dpWidth-viewWidth):0);offsetTop-=Math.min(offsetTop,((offsetTop+dpHeight>viewHeight&&viewHeight>dpHeight)?Math.abs(dpHeight+inputHeight-extraY):extraY));return{top:offsetTop,bottom:offset.bottom,left:offsetLeft,right:offset.right,width:offset.width,height:offset.height};}
function noop(){}
function stopPropagation(e){e.stopPropagation();}
function bind(func,obj){var slice=Array.prototype.slice;var args=slice.call(arguments,2);return function(){return func.apply(obj,args.concat(slice.call(arguments)));};}
function draggable(element,onmove,onstart,onstop){onmove=onmove||function(){};onstart=onstart||function(){};onstop=onstop||function(){};var doc=document;var dragging=false;var offset={};var maxHeight=0;var maxWidth=0;var hasTouch=('ontouchstart'in window);var duringDragEvents={};duringDragEvents["selectstart"]=prevent;duringDragEvents["dragstart"]=prevent;duringDragEvents["touchmove mousemove"]=move;duringDragEvents["touchend mouseup"]=stop;function prevent(e){if(e.stopPropagation){e.stopPropagation();}
if(e.preventDefault){e.preventDefault();}
e.returnValue=false;}
function move(e){if(dragging){if(IE&&doc.documentMode<9&&!e.button){return stop();}
var t0=e.originalEvent&&e.originalEvent.touches&&e.originalEvent.touches[0];var pageX=t0&&t0.pageX||e.pageX;var pageY=t0&&t0.pageY||e.pageY;var dragX=Math.max(0,Math.min(pageX-offset.left,maxWidth));var dragY=Math.max(0,Math.min(pageY-offset.top,maxHeight));if(hasTouch){prevent(e);}
onmove.apply(element,[dragX,dragY,e]);}}
function start(e){var rightclick=(e.which)?(e.which==3):(e.button==2);if(!rightclick&&!dragging){if(onstart.apply(element,arguments)!==false){dragging=true;maxHeight=$(element).height();maxWidth=$(element).width();offset=$(element).offset();$(doc).on(duringDragEvents);$(doc.body).addClass("sp-dragging");move(e);prevent(e);}}}
function stop(){if(dragging){$(doc).off(duringDragEvents);$(doc.body).removeClass("sp-dragging");setTimeout(function(){onstop.apply(element,arguments);},0);}
dragging=false;}
$(element).on("touchstart mousedown",start);}
function throttle(func,wait,debounce){var timeout;return function(){var context=this,args=arguments;var throttler=function(){timeout=null;func.apply(context,args);};if(debounce)clearTimeout(timeout);if(debounce||!timeout)timeout=setTimeout(throttler,wait);};}
function inputTypeColorSupport(){return $.fn.spectrum.inputTypeColorSupport();}
var dataID="spectrum.id";$.fn.spectrum=function(opts,extra){if(typeof opts=="string"){var returnValue=this;var args=Array.prototype.slice.call(arguments,1);this.each(function(){var spect=spectrums[$(this).data(dataID)];if(spect){var method=spect[opts];if(!method){throw new Error("Spectrum: no such method: '"+opts+"'");}
if(opts=="get"){returnValue=spect.get();}
else if(opts=="container"){returnValue=spect.container;}
else if(opts=="option"){returnValue=spect.option.apply(spect,args);}
else if(opts=="destroy"){spect.destroy();$(this).removeData(dataID);}
else{method.apply(spect,args);}}});return returnValue;}
return this.spectrum("destroy").each(function(){var options=$.extend({},$(this).data(),opts);var spect=spectrum(this,options);$(this).data(dataID,spect.id);});};$.fn.spectrum.load=true;$.fn.spectrum.loadOpts={};$.fn.spectrum.draggable=draggable;$.fn.spectrum.defaults=defaultOpts;$.fn.spectrum.inputTypeColorSupport=function inputTypeColorSupport(){if(typeof inputTypeColorSupport._cachedResult==="undefined"){var colorInput=$("<input type='color'/>")[0];inputTypeColorSupport._cachedResult=colorInput.type==="color"&&colorInput.value!=="";}
return inputTypeColorSupport._cachedResult;};$.spectrum={};$.spectrum.localization={};$.spectrum.palettes={};$.fn.spectrum.processNativeColorInputs=function(){var colorInputs=$("input[type=color]");if(colorInputs.length&&!inputTypeColorSupport()){colorInputs.spectrum({preferredFormat:"hex6"});}};(function(){var trimLeft=/^[\s,#]+/,trimRight=/\s+$/,tinyCounter=0,math=Math,mathRound=math.round,mathMin=math.min,mathMax=math.max,mathRandom=math.random;var tinycolor=function(color,opts){color=(color)?color:'';opts=opts||{};if(color instanceof tinycolor){return color;}
if(!(this instanceof tinycolor)){return new tinycolor(color,opts);}
var rgb=inputToRGB(color);this._originalInput=color,this._r=rgb.r,this._g=rgb.g,this._b=rgb.b,this._a=rgb.a,this._roundA=mathRound(1000*this._a)/1000,this._format=(opts.format||rgb.format);this._gradientType=opts.gradientType;if(this._r<1){this._r=mathRound(this._r);}
if(this._g<1){this._g=mathRound(this._g);}
if(this._b<1){this._b=mathRound(this._b);}
this._ok=rgb.ok;this._tc_id=tinyCounter++;};tinycolor.prototype={isDark:function(){return this.getBrightness()<128;},isLight:function(){return!this.isDark();},isValid:function(){return this._ok;},getOriginalInput:function(){return this._originalInput;},getFormat:function(){return this._format;},getAlpha:function(){return this._a;},getBrightness:function(){var rgb=this.toRgb();return(rgb.r*299+rgb.g*587+rgb.b*114)/1000;},setAlpha:function(value){this._a=boundAlpha(value);this._roundA=mathRound(1000*this._a)/1000;return this;},toHsv:function(){var hsv=rgbToHsv(this._r,this._g,this._b);return{h:hsv.h*360,s:hsv.s,v:hsv.v,a:this._a};},toHsvString:function(){var hsv=rgbToHsv(this._r,this._g,this._b);var h=mathRound(hsv.h*360),s=mathRound(hsv.s*100),v=mathRound(hsv.v*100);return(this._a==1)?"hsv("+h+", "+s+"%, "+v+"%)":"hsva("+h+", "+s+"%, "+v+"%, "+this._roundA+")";},toHsl:function(){var hsl=rgbToHsl(this._r,this._g,this._b);return{h:hsl.h*360,s:hsl.s,l:hsl.l,a:this._a};},toHslString:function(){var hsl=rgbToHsl(this._r,this._g,this._b);var h=mathRound(hsl.h*360),s=mathRound(hsl.s*100),l=mathRound(hsl.l*100);return(this._a==1)?"hsl("+h+", "+s+"%, "+l+"%)":"hsla("+h+", "+s+"%, "+l+"%, "+this._roundA+")";},toHex:function(allow3Char){return rgbToHex(this._r,this._g,this._b,allow3Char);},toHexString:function(allow3Char){return'#'+this.toHex(allow3Char);},toHex8:function(){return rgbaToHex(this._r,this._g,this._b,this._a);},toHex8String:function(){return'#'+this.toHex8();},toRgb:function(){return{r:mathRound(this._r),g:mathRound(this._g),b:mathRound(this._b),a:this._a};},toRgbString:function(){return(this._a==1)?"rgb("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+")":"rgba("+mathRound(this._r)+", "+mathRound(this._g)+", "+mathRound(this._b)+", "+this._roundA+")";},toPercentageRgb:function(){return{r:mathRound(bound01(this._r,255)*100)+"%",g:mathRound(bound01(this._g,255)*100)+"%",b:mathRound(bound01(this._b,255)*100)+"%",a:this._a};},toPercentageRgbString:function(){return(this._a==1)?"rgb("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%)":"rgba("+mathRound(bound01(this._r,255)*100)+"%, "+mathRound(bound01(this._g,255)*100)+"%, "+mathRound(bound01(this._b,255)*100)+"%, "+this._roundA+")";},toName:function(){if(this._a===0){return"transparent";}
if(this._a<1){return false;}
return hexNames[rgbToHex(this._r,this._g,this._b,true)]||false;},toFilter:function(secondColor){var hex8String='#'+rgbaToHex(this._r,this._g,this._b,this._a);var secondHex8String=hex8String;var gradientType=this._gradientType?"GradientType = 1, ":"";if(secondColor){var s=tinycolor(secondColor);secondHex8String=s.toHex8String();}
return"progid:DXImageTransform.Microsoft.gradient("+gradientType+"startColorstr="+hex8String+",endColorstr="+secondHex8String+")";},toString:function(format){var formatSet=!!format;format=format||this._format;var formattedString=false;var hasAlpha=this._a<1&&this._a>=0;var needsAlphaFormat=!formatSet&&hasAlpha&&(format==="hex"||format==="hex6"||format==="hex3"||format==="name");if(needsAlphaFormat){if(format==="name"&&this._a===0){return this.toName();}
return this.toRgbString();}
if(format==="rgb"){formattedString=this.toRgbString();}
if(format==="prgb"){formattedString=this.toPercentageRgbString();}
if(format==="hex"||format==="hex6"){formattedString=this.toHexString();}
if(format==="hex3"){formattedString=this.toHexString(true);}
if(format==="hex8"){formattedString=this.toHex8String();}
if(format==="name"){formattedString=this.toName();}
if(format==="hsl"){formattedString=this.toHslString();}
if(format==="hsv"){formattedString=this.toHsvString();}
return formattedString||this.toHexString();},_applyModification:function(fn,args){var color=fn.apply(null,[this].concat([].slice.call(args)));this._r=color._r;this._g=color._g;this._b=color._b;this.setAlpha(color._a);return this;},lighten:function(){return this._applyModification(lighten,arguments);},brighten:function(){return this._applyModification(brighten,arguments);},darken:function(){return this._applyModification(darken,arguments);},desaturate:function(){return this._applyModification(desaturate,arguments);},saturate:function(){return this._applyModification(saturate,arguments);},greyscale:function(){return this._applyModification(greyscale,arguments);},spin:function(){return this._applyModification(spin,arguments);},_applyCombination:function(fn,args){return fn.apply(null,[this].concat([].slice.call(args)));},analogous:function(){return this._applyCombination(analogous,arguments);},complement:function(){return this._applyCombination(complement,arguments);},monochromatic:function(){return this._applyCombination(monochromatic,arguments);},splitcomplement:function(){return this._applyCombination(splitcomplement,arguments);},triad:function(){return this._applyCombination(triad,arguments);},tetrad:function(){return this._applyCombination(tetrad,arguments);}};tinycolor.fromRatio=function(color,opts){if(typeof color=="object"){var newColor={};for(var i in color){if(color.hasOwnProperty(i)){if(i==="a"){newColor[i]=color[i];}
else{newColor[i]=convertToPercentage(color[i]);}}}
color=newColor;}
return tinycolor(color,opts);};function inputToRGB(color){var rgb={r:0,g:0,b:0};var a=1;var ok=false;var format=false;if(typeof color=="string"){color=stringInputToObject(color);}
if(typeof color=="object"){if(color.hasOwnProperty("r")&&color.hasOwnProperty("g")&&color.hasOwnProperty("b")){rgb=rgbToRgb(color.r,color.g,color.b);ok=true;format=String(color.r).substr(-1)==="%"?"prgb":"rgb";}
else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("v")){color.s=convertToPercentage(color.s);color.v=convertToPercentage(color.v);rgb=hsvToRgb(color.h,color.s,color.v);ok=true;format="hsv";}
else if(color.hasOwnProperty("h")&&color.hasOwnProperty("s")&&color.hasOwnProperty("l")){color.s=convertToPercentage(color.s);color.l=convertToPercentage(color.l);rgb=hslToRgb(color.h,color.s,color.l);ok=true;format="hsl";}
if(color.hasOwnProperty("a")){a=color.a;}}
a=boundAlpha(a);return{ok:ok,format:color.format||format,r:mathMin(255,mathMax(rgb.r,0)),g:mathMin(255,mathMax(rgb.g,0)),b:mathMin(255,mathMax(rgb.b,0)),a:a};}
function rgbToRgb(r,g,b){return{r:bound01(r,255)*255,g:bound01(g,255)*255,b:bound01(b,255)*255};}
function rgbToHsl(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,l=(max+min)/2;if(max==min){h=s=0;}
else{var d=max-min;s=l>0.5?d/(2-max-min):d/(max+min);switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return{h:h,s:s,l:l};}
function hslToRgb(h,s,l){var r,g,b;h=bound01(h,360);s=bound01(s,100);l=bound01(l,100);function hue2rgb(p,q,t){if(t<0)t+=1;if(t>1)t-=1;if(t<1/6)return p+(q-p)*6*t;if(t<1/2)return q;if(t<2/3)return p+(q-p)*(2/3-t)*6;return p;}
if(s===0){r=g=b=l;}
else{var q=l<0.5?l*(1+s):l+s-l*s;var p=2*l-q;r=hue2rgb(p,q,h+1/3);g=hue2rgb(p,q,h);b=hue2rgb(p,q,h-1/3);}
return{r:r*255,g:g*255,b:b*255};}
function rgbToHsv(r,g,b){r=bound01(r,255);g=bound01(g,255);b=bound01(b,255);var max=mathMax(r,g,b),min=mathMin(r,g,b);var h,s,v=max;var d=max-min;s=max===0?0:d/max;if(max==min){h=0;}
else{switch(max){case r:h=(g-b)/d+(g<b?6:0);break;case g:h=(b-r)/d+2;break;case b:h=(r-g)/d+4;break;}
h/=6;}
return{h:h,s:s,v:v};}
function hsvToRgb(h,s,v){h=bound01(h,360)*6;s=bound01(s,100);v=bound01(v,100);var i=math.floor(h),f=h-i,p=v*(1-s),q=v*(1-f*s),t=v*(1-(1-f)*s),mod=i%6,r=[v,q,p,p,t,v][mod],g=[t,v,v,q,p,p][mod],b=[p,p,t,v,v,q][mod];return{r:r*255,g:g*255,b:b*255};}
function rgbToHex(r,g,b,allow3Char){var hex=[pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];if(allow3Char&&hex[0].charAt(0)==hex[0].charAt(1)&&hex[1].charAt(0)==hex[1].charAt(1)&&hex[2].charAt(0)==hex[2].charAt(1)){return hex[0].charAt(0)+hex[1].charAt(0)+hex[2].charAt(0);}
return hex.join("");}
function rgbaToHex(r,g,b,a){var hex=[pad2(convertDecimalToHex(a)),pad2(mathRound(r).toString(16)),pad2(mathRound(g).toString(16)),pad2(mathRound(b).toString(16))];return hex.join("");}
tinycolor.equals=function(color1,color2){if(!color1||!color2){return false;}
var tiny1=tinycolor(color1);var tiny2=tinycolor(color2);return tiny1.isValid()&&tiny2.isValid()&&tiny1.toRgbString()==tiny2.toRgbString()||(""+color1)===(""+color2);};tinycolor.random=function(){return tinycolor.fromRatio({r:mathRandom(),g:mathRandom(),b:mathRandom()});};function desaturate(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.s-=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}
function saturate(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.s+=amount/100;hsl.s=clamp01(hsl.s);return tinycolor(hsl);}
function greyscale(color){return tinycolor(color).desaturate(100);}
function lighten(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.l+=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}
function brighten(color,amount){amount=(amount===0)?0:(amount||10);var rgb=tinycolor(color).toRgb();rgb.r=mathMax(0,mathMin(255,rgb.r-mathRound(255*-(amount/100))));rgb.g=mathMax(0,mathMin(255,rgb.g-mathRound(255*-(amount/100))));rgb.b=mathMax(0,mathMin(255,rgb.b-mathRound(255*-(amount/100))));return tinycolor(rgb);}
function darken(color,amount){amount=(amount===0)?0:(amount||10);var hsl=tinycolor(color).toHsl();hsl.l-=amount/100;hsl.l=clamp01(hsl.l);return tinycolor(hsl);}
function spin(color,amount){var hsl=tinycolor(color).toHsl();var hue=(mathRound(hsl.h)+amount)%360;hsl.h=hue<0?360+hue:hue;return tinycolor(hsl);}
function complement(color){var hsl=tinycolor(color).toHsl();hsl.h=(hsl.h+180)%360;return tinycolor(hsl);}
function triad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+120)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+240)%360,s:hsl.s,l:hsl.l})];}
function tetrad(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+90)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+180)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+270)%360,s:hsl.s,l:hsl.l})];}
function splitcomplement(color){var hsl=tinycolor(color).toHsl();var h=hsl.h;return[tinycolor(color),tinycolor({h:(h+72)%360,s:hsl.s,l:hsl.l}),tinycolor({h:(h+216)%360,s:hsl.s,l:hsl.l})];}
function analogous(color,results,slices){results=results||6;slices=slices||30;var hsl=tinycolor(color).toHsl();var part=360/slices;var ret=[tinycolor(color)];for(hsl.h=((hsl.h-(part*results>>1))+720)%360;--results;){hsl.h=(hsl.h+part)%360;ret.push(tinycolor(hsl));}
return ret;}
function monochromatic(color,results){results=results||6;var hsv=tinycolor(color).toHsv();var h=hsv.h,s=hsv.s,v=hsv.v;var ret=[];var modification=1/results;while(results--){ret.push(tinycolor({h:h,s:s,v:v}));v=(v+modification)%1;}
return ret;}
tinycolor.mix=function(color1,color2,amount){amount=(amount===0)?0:(amount||50);var rgb1=tinycolor(color1).toRgb();var rgb2=tinycolor(color2).toRgb();var p=amount/100;var w=p*2-1;var a=rgb2.a-rgb1.a;var w1;if(w*a==-1){w1=w;}else{w1=(w+a)/(1+w*a);}
w1=(w1+1)/2;var w2=1-w1;var rgba={r:rgb2.r*w1+rgb1.r*w2,g:rgb2.g*w1+rgb1.g*w2,b:rgb2.b*w1+rgb1.b*w2,a:rgb2.a*p+rgb1.a*(1-p)};return tinycolor(rgba);};tinycolor.readability=function(color1,color2){var c1=tinycolor(color1);var c2=tinycolor(color2);var rgb1=c1.toRgb();var rgb2=c2.toRgb();var brightnessA=c1.getBrightness();var brightnessB=c2.getBrightness();var colorDiff=(Math.max(rgb1.r,rgb2.r)-Math.min(rgb1.r,rgb2.r)+
Math.max(rgb1.g,rgb2.g)-Math.min(rgb1.g,rgb2.g)+
Math.max(rgb1.b,rgb2.b)-Math.min(rgb1.b,rgb2.b));return{brightness:Math.abs(brightnessA-brightnessB),color:colorDiff};};tinycolor.isReadable=function(color1,color2){var readability=tinycolor.readability(color1,color2);return readability.brightness>125&&readability.color>500;};tinycolor.mostReadable=function(baseColor,colorList){var bestColor=null;var bestScore=0;var bestIsReadable=false;for(var i=0;i<colorList.length;i++){var readability=tinycolor.readability(baseColor,colorList[i]);var readable=readability.brightness>125&&readability.color>500;var score=3*(readability.brightness/125)+(readability.color/500);if((readable&&!bestIsReadable)||(readable&&bestIsReadable&&score>bestScore)||((!readable)&&(!bestIsReadable)&&score>bestScore)){bestIsReadable=readable;bestScore=score;bestColor=tinycolor(colorList[i]);}}
return bestColor;};var names=tinycolor.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"};var hexNames=tinycolor.hexNames=flip(names);function flip(o){var flipped={};for(var i in o){if(o.hasOwnProperty(i)){flipped[o[i]]=i;}}
return flipped;}
function boundAlpha(a){a=parseFloat(a);if(isNaN(a)||a<0||a>1){a=1;}
return a;}
function bound01(n,max){if(isOnePointZero(n)){n="100%";}
var processPercent=isPercentage(n);n=mathMin(max,mathMax(0,parseFloat(n)));if(processPercent){n=parseInt(n*max,10)/100;}
if((math.abs(n-max)<0.000001)){return 1;}
return(n%max)/parseFloat(max);}
function clamp01(val){return mathMin(1,mathMax(0,val));}
function parseIntFromHex(val){return parseInt(val,16);}
function isOnePointZero(n){return typeof n=="string"&&n.indexOf('.')!=-1&&parseFloat(n)===1;}
function isPercentage(n){return typeof n==="string"&&n.indexOf('%')!=-1;}
function pad2(c){return c.length==1?'0'+c:''+c;}
function convertToPercentage(n){if(n<=1){n=(n*100)+"%";}
return n;}
function convertDecimalToHex(d){return Math.round(parseFloat(d)*255).toString(16);}
function convertHexToDecimal(h){return(parseIntFromHex(h)/255);}
var matchers=(function(){var CSS_INTEGER="[-\\+]?\\d+%?";var CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?";var CSS_UNIT="(?:"+CSS_NUMBER+")|(?:"+CSS_INTEGER+")";var PERMISSIVE_MATCH3="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";var PERMISSIVE_MATCH4="[\\s|\\(]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")[,|\\s]+("+CSS_UNIT+")\\s*\\)?";return{rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};})();function stringInputToObject(color){color=color.replace(trimLeft,'').replace(trimRight,'').toLowerCase();var named=false;if(names[color]){color=names[color];named=true;}
else if(color=='transparent'){return{r:0,g:0,b:0,a:0,format:"name"};}
var match;if((match=matchers.rgb.exec(color))){return{r:match[1],g:match[2],b:match[3]};}
if((match=matchers.rgba.exec(color))){return{r:match[1],g:match[2],b:match[3],a:match[4]};}
if((match=matchers.hsl.exec(color))){return{h:match[1],s:match[2],l:match[3]};}
if((match=matchers.hsla.exec(color))){return{h:match[1],s:match[2],l:match[3],a:match[4]};}
if((match=matchers.hsv.exec(color))){return{h:match[1],s:match[2],v:match[3]};}
if((match=matchers.hsva.exec(color))){return{h:match[1],s:match[2],v:match[3],a:match[4]};}
if((match=matchers.hex8.exec(color))){return{a:convertHexToDecimal(match[1]),r:parseIntFromHex(match[2]),g:parseIntFromHex(match[3]),b:parseIntFromHex(match[4]),format:named?"name":"hex8"};}
if((match=matchers.hex6.exec(color))){return{r:parseIntFromHex(match[1]),g:parseIntFromHex(match[2]),b:parseIntFromHex(match[3]),format:named?"name":"hex"};}
if((match=matchers.hex3.exec(color))){return{r:parseIntFromHex(match[1]+''+match[1]),g:parseIntFromHex(match[2]+''+match[2]),b:parseIntFromHex(match[3]+''+match[3]),format:named?"name":"hex"};}
return false;}
window.tinycolor=tinycolor;})();$(function(){if($.fn.spectrum.load){$.fn.spectrum.processNativeColorInputs();}});});(function(c){c.address=function(){var r=function(a){a=c.extend(c.Event(a),function(){for(var b={},f=c.address.parameterNames(),m=0,p=f.length;m<p;m++)b[f[m]]=c.address.parameter(f[m]);return{value:c.address.value(),path:c.address.path(),pathNames:c.address.pathNames(),parameterNames:f,parameters:b,queryString:c.address.queryString()}}.call(c.address));c(c.address).trigger(a);return a},s=function(a){return Array.prototype.slice.call(a)},h=function(){c().bind.apply(c(c.address),Array.prototype.slice.call(arguments));return c.address},ea=function(){c().unbind.apply(c(c.address),Array.prototype.slice.call(arguments));return c.address},E=function(){return z.pushState&&d.state!==g},U=function(){return("/"+i.pathname.replace(new RegExp(d.state),"")+i.search+(L()?"#"+L():"")).replace(T,"/")},L=function(){var a=i.href.indexOf("#");return a!=-1?t(i.href.substr(a+1),k):""},u=function(){return E()?U():L()},V=function(){return"javascript"},O=function(a){a=a.toString();return(d.strict&&a.substr(0,1)!="/"?"/":"")+a},t=function(a,b){if(d.crawlable&&b)return(a!==""?"!":"")+a;return a.replace(/^\!/,"")},v=function(a,b){return parseInt(a.css(b),10)},H=function(){if(!x){var a=u();if(decodeURI(e)!=decodeURI(a))if(w&&A<7)i.reload();else{w&&!F&&d.history&&q(M,50);_old=e;e=a;G(k)}}},G=function(a){var b=r(W);a=r(a?X:Y);q(fa,10);if(b.isDefaultPrevented()||a.isDefaultPrevented())ga()},ga=function(){e=_old;if(E())z.popState({},"",d.state.replace(/\/$/,"")+(e===""?"/":e));else{x=n;if(B)if(d.history)i.hash="#"+t(e,n);else i.replace("#"+
t(e,n));else if(e!=u())if(d.history)i.hash="#"+t(e,n);else i.replace("#"+t(e,n));w&&!F&&d.history&&q(M,50);if(B)q(function(){x=k},1);else x=k}},fa=function(){if(d.tracker!=="null"&&d.tracker!==I){var a=c.isFunction(d.tracker)?d.tracker:j[d.tracker],b=(i.pathname+i.search+(c.address&&!E()?c.address.value():"")).replace(/\/\//,"/").replace(/^\/$/,"");if(c.isFunction(a))a(b);else if(c.isFunction(j.urchinTracker))j.urchinTracker(b);else if(j.pageTracker!==g&&c.isFunction(j.pageTracker._trackPageview))j.pageTracker._trackPageview(b);else j._gaq!==g&&c.isFunction(j._gaq.push)&&j._gaq.push(["_trackPageview",decodeURI(b).replace('console/lui','console')])}},M=function(){var a=V()+":"+k+";document.open();document.writeln('<html><head><title>"+o.title.replace(/\'/g,"\\'")+"</title><script>var "+C+' = "'+encodeURIComponent(u()).replace(/\'/g,"\\'")+(o.domain!=i.hostname?'";document.domain="'+o.domain:"")+"\";<\/script></head></html>');document.close();";if(A<7)l.src=a;else l.contentWindow.location.replace(a)},$=function(){if(J&&Z!=-1){var a,b,f=J.substr(Z+1).split("&");for(a=0;a<f.length;a++){b=f[a].split("=");if(/^(autoUpdate|crawlable|history|strict|wrap)$/.test(b[0]))d[b[0]]=isNaN(b[1])?/^(true|yes)$/i.test(b[1]):parseInt(b[1],10)!==0;if(/^(state|tracker)$/.test(b[0]))d[b[0]]=b[1]}J=I}_old=e;e=u()},ba=function(){if(!aa){aa=n;$();var a=function(){ha.call(this);ia.call(this)},b=c("body").ajaxComplete(a);a();if(d.wrap){c("body > *").wrapAll('<div style="padding:'+(v(b,"marginTop")+v(b,"paddingTop"))+"px "+(v(b,"marginRight")+v(b,"paddingRight"))+"px "+(v(b,"marginBottom")+
v(b,"paddingBottom"))+"px "+(v(b,"marginLeft")+v(b,"paddingLeft"))+'px;" />').parent().wrap('<div id="'+C+'" style="height:100%;overflow:auto;position:relative;'+(B&&!window.statusbar.visible?"resize:both;":"")+'" />');c("html, body").css({height:"100%",margin:0,padding:0,overflow:"hidden"});B&&c('<style type="text/css" />').appendTo("head").text("#"+C+"::-webkit-resizer { background-color: #fff; }")}if(w&&!F){a=o.getElementsByTagName("frameset")[0];l=o.createElement((a?"":"i")+"frame");l.src=V()+":"+k;if(a){a.insertAdjacentElement("beforeEnd",l);a[a.cols?"cols":"rows"]+=",0";l.noResize=n;l.frameBorder=l.frameSpacing=0}else{l.style.display="none";l.style.width=l.style.height=0;l.tabIndex=-1;o.body.insertAdjacentElement("afterBegin",l)}q(function(){c(l).bind("load",function(){var f=l.contentWindow;_old=e;e=f[C]!==g?f[C]:"";if(e!=u()){G(k);i.hash=t(e,n)}});l.contentWindow[C]===g&&M()},50)}q(function(){r("init");G(k)},1);if(!E())if(w&&A>7||!w&&F)if(j.addEventListener)j.addEventListener(K,H,k);else j.attachEvent&&j.attachEvent("on"+K,H);else ja(H,50);"state"in window.history&&c(window).trigger("popstate")}},ha=function(){var a,b=c("a"),f=b.size(),m=-1,p=function(){if(++m!=f){a=c(b.get(m));a.is('[rel*="address:"]')&&a.address('[rel*="address:"]');q(p,1)}};q(p,1)},ia=function(){if(d.crawlable){var a=i.pathname.replace(/\/$/,"");c("body").html().indexOf("_escaped_fragment_")!=-1&&c('a[href]:not([href^=http]), a[href*="'+document.domain+'"]').each(function(){var b=c(this).attr("href").replace(/^http:/,"").replace(new RegExp(a+"/?$"),"");if(b===""||b.indexOf("_escaped_fragment_")!=-1)c(this).attr("href","#"+encodeURI(decodeURIComponent(b.replace(/\/(.*)\?_escaped_fragment_=(.*)$/,"!$2"))))})}},g,I=null,C="jQueryAddress",K="hashchange",W="change",X="internalChange",Y="externalChange",n=true,k=false,d={autoUpdate:n,crawlable:k,history:n,strict:n,wrap:k},D=c.browser,A=parseFloat(D.version),w=!c.support.opacity,B=D.webkit||D.safari,j=function(){try{return top.document!==g&&top.document.title!==g&&(window.location.pathname.indexOf('console/lui')==-1)?top:window}catch(a){return window}}(),o=j.document,z=j.history,i=j.location,ja=setInterval,q=setTimeout,T=/\/{2,9}/g;D=navigator.userAgent;var F="on"+K in j,l,J=c("script:last").attr("src"),Z=J?J.indexOf("?"):-1,P=o.title,x=k,aa=k,ca=n,N=k,e=u();_old=e;if(w){A=parseFloat(D.substr(D.indexOf("MSIE")+4));if(o.documentMode&&o.documentMode!=A)A=o.documentMode!=8?7:8;var da=o.onpropertychange;o.onpropertychange=function(){da&&da.call(o);if(o.title!=P&&o.title.indexOf("#"+u())!=-1)o.title=P}}if(z.navigationMode)z.navigationMode="compatible";if(document.readyState=="complete")var ka=setInterval(function(){if(c.address){ba();clearInterval(ka)}},50);else{$();c(ba)}c(window).bind("popstate",function(){if(decodeURI(e)!=decodeURI(u())){_old=e;e=u();G(k)}}).bind("unload",function(){if(j.removeEventListener)j.removeEventListener(K,H,k);else j.detachEvent&&j.detachEvent("on"+K,H)});return{bind:function(){return h.apply(this,s(arguments))},unbind:function(){return ea.apply(this,s(arguments))},init:function(){return h.apply(this,["init"].concat(s(arguments)))},change:function(){return h.apply(this,[W].concat(s(arguments)))},internalChange:function(){return h.apply(this,[X].concat(s(arguments)))},externalChange:function(){return h.apply(this,[Y].concat(s(arguments)))},baseURL:function(){var a=i.href;if(a.indexOf("#")!=-1)a=a.substr(0,a.indexOf("#"));if(/\/$/.test(a))a=a.substr(0,a.length-1);return a},autoUpdate:function(a){if(a!==g){d.autoUpdate=a;return this}return d.autoUpdate},crawlable:function(a){if(a!==g){d.crawlable=a;return this}return d.crawlable},history:function(a){if(a!==g){d.history=a;return this}return d.history},state:function(a){if(a!==g){d.state=a;var b=U();if(d.state!==g)if(z.pushState)b.substr(0,3)=="/#/"&&i.replace(d.state.replace(/^\/$/,"")+b.substr(2));else b!="/"&&b.replace(/^\/#/,"")!=L()&&q(function(){i.replace(d.state.replace(/^\/$/,"")+"/#"+b)},1);return this}return d.state},strict:function(a){if(a!==g){d.strict=a;return this}return d.strict},tracker:function(a){if(a!==g){d.tracker=a;return this}return d.tracker},wrap:function(a){if(a!==g){d.wrap=a;return this}return d.wrap},update:function(){N=n;this.value(e);N=k;return this},title:function(a){if(a!==g){q(function(){P=o.title=a;if(ca&&l&&l.contentWindow&&l.contentWindow.document){l.contentWindow.document.title=a;ca=k}},50);return this}return o.title},value:function(a){if(a!==g){a=O(a);if(a=="/")a="";if(e==a&&!N)return;_old=e;e=a;if(d.autoUpdate||N){G(n);if(E())z[d.history?"pushState":"replaceState"]({},"",d.state.replace(/\/$/,"")+(e===""?"/":e));else{x=n;if(B)if(d.history)i.hash="#"+t(e,n);else i.replace("#"+t(e,n));else if(e!=u())if(d.history)i.hash="#"+t(e,n);else i.replace("#"+t(e,n));w&&!F&&d.history&&q(M,50);if(B)q(function(){x=k},1);else x=k}}return this}return O(e)},path:function(a){if(a!==g){var b=this.queryString(),f=this.hash();this.value(a+(b?"?"+b:"")+(f?"#"+f:""));return this}return O(e).split("#")[0].split("?")[0]},pathNames:function(){var a=this.path(),b=a.replace(T,"/").split("/");if(a.substr(0,1)=="/"||a.length===0)b.splice(0,1);a.substr(a.length-1,1)=="/"&&b.splice(b.length-1,1);return b},queryString:function(a){if(a!==g){var b=this.hash();this.value(this.path()+(a?"?"+a:"")+(b?"#"+b:""));return this}a=e.split("?");return a.slice(1,a.length).join("?").split("#")[0]},parameter:function(a,b,f){var m,p;if(b!==g){var Q=this.parameterNames();p=[];b=b===g||b===I?"":b.toString();for(m=0;m<Q.length;m++){var R=Q[m],y=this.parameter(R);if(typeof y=="string")y=[y];if(R==a)y=b===I||b===""?[]:f?y.concat([b]):[b];for(var S=0;S<y.length;S++)p.push(R+"="+y[S])}c.inArray(a,Q)==-1&&b!==I&&b!==""&&p.push(a+"="+b);this.queryString(p.join("&"));return this}if(b=this.queryString()){f=[];p=b.split("&");for(m=0;m<p.length;m++){b=p[m].split("=");b[0]==a&&f.push(b.slice(1).join("="))}if(f.length!==0)return f.length!=1?f:f[0]}},parameterNames:function(){var a=this.queryString(),b=[];if(a&&a.indexOf("=")!=-1){a=a.split("&");for(var f=0;f<a.length;f++){var m=a[f].split("=")[0];c.inArray(m,b)==-1&&b.push(m)}}return b},hash:function(a){if(a!==g){this.value(e.split("#")[0]+(a?"#"+
a:""));return this}a=e.split("#");return a.slice(1,a.length).join("#")}}}();c.fn.address=function(r){var s;if(typeof r=="string"){s=r;r=undefined}c(this).attr("address")||c(s?s:this).live("click",function(h){if(h.shiftKey||h.ctrlKey||h.metaKey||h.which==2)return true;if(c(this).is("a")){h.preventDefault();h=r?r.call(this):/address:/.test(c(this).attr("rel"))?c(this).attr("rel").split("address:")[1].split(" ")[0]:c.address.state()!==undefined&&!/^\/?$/.test(c.address.state())?c(this).attr("href").replace(new RegExp("^(.*"+
c.address.state()+"|\\.)"),""):c(this).attr("href").replace(/^(#\!?|\.)/,"");c.address.value(h)}}).live("submit",function(h){if(c(this).is("form")){h.preventDefault();h=c(this).attr("action");h=r?r.call(this):(h.indexOf("?")!=-1?h.replace(/&$/,""):h+"?")+c(this).serialize();c.address.value(h)}}).attr("address",true);return this}})(jQuery);(function(N,d,p,K,k,H){var b=this;var n=Math.floor(Math.random()*10000);var q=Function.prototype;var Q=/^((http.?:)\/\/([^:\/\s]+)(:\d+)*)/;var R=/[\-\w]+\/\.\.\//;var F=/([^:])\/\//g;var I="";var o={};var M=N.easyXDM;var U="easyXDM_";var E;var y=false;var i;var h;function C(X,Z){var Y=typeof X[Z];return Y=="function"||(!!(Y=="object"&&X[Z]))||Y=="unknown"}function u(X,Y){return!!(typeof(X[Y])=="object"&&X[Y])}function r(X){return Object.prototype.toString.call(X)==="[object Array]"}function c(){var Z="Shockwave Flash",ad="application/x-shockwave-flash";if(!t(navigator.plugins)&&typeof navigator.plugins[Z]=="object"){var ab=navigator.plugins[Z].description;if(ab&&!t(navigator.mimeTypes)&&navigator.mimeTypes[ad]&&navigator.mimeTypes[ad].enabledPlugin){i=ab.match(/\d+/g)}}if(!i){var Y;try{Y=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");i=Array.prototype.slice.call(Y.GetVariable("$version").match(/(\d+),(\d+),(\d+),(\d+)/),1);Y=null}catch(ac){}}if(!i){return false}var X=parseInt(i[0],10),aa=parseInt(i[1],10);h=X>9&&aa>0;return true}var v,x;if(C(N,"addEventListener")){v=function(Z,X,Y){Z.addEventListener(X,Y,false)};x=function(Z,X,Y){Z.removeEventListener(X,Y,false)}}else{if(C(N,"attachEvent")){v=function(X,Z,Y){X.attachEvent("on"+Z,Y)};x=function(X,Z,Y){X.detachEvent("on"+Z,Y)}}else{throw new Error("Browser not supported")}}var W=false,J=[],L;if("readyState"in d){L=d.readyState;W=L=="complete"||(~navigator.userAgent.indexOf("AppleWebKit/")&&(L=="loaded"||L=="interactive"))}else{W=!!d.body}function s(){if(W){return}W=true;for(var X=0;X<J.length;X++){J[X]()}J.length=0}if(!W){if(C(N,"addEventListener")){v(d,"DOMContentLoaded",s)}else{v(d,"readystatechange",function(){if(d.readyState=="complete"){s()}});if(d.documentElement.doScroll&&N===top){var g=function(){if(W){return}try{d.documentElement.doScroll("left")}catch(X){K(g,1);return}s()};g()}}v(N,"load",s)}function G(Y,X){if(W){Y.call(X);return}J.push(function(){Y.call(X)})}function m(){var Z=parent;if(I!==""){for(var X=0,Y=I.split(".");X<Y.length;X++){Z=Z[Y[X]]}}return Z.easyXDM}function e(X){N.easyXDM=M;I=X;if(I){U="easyXDM_"+I.replace(".","_")+"_"}return o}function z(X){return X.match(Q)[3]}function f(X){return X.match(Q)[4]||""}function j(Z){var X=Z.toLowerCase().match(Q);var aa=X[2],ab=X[3],Y=X[4]||"";if((aa=="http:"&&Y==":80")||(aa=="https:"&&Y==":443")){Y=""}return aa+"//"+ab+Y}function B(X){X=X.replace(F,"$1/");if(!X.match(/^(http||https):\/\//)){var Y=(X.substring(0,1)==="/")?"":p.pathname;if(Y.substring(Y.length-1)!=="/"){Y=Y.substring(0,Y.lastIndexOf("/")+1)}X=p.protocol+"//"+p.host+Y+X}while(R.test(X)){X=X.replace(R,"")}return X}function P(X,aa){var ac="",Z=X.indexOf("#");if(Z!==-1){ac=X.substring(Z);X=X.substring(0,Z)}var ab=[];for(var Y in aa){if(aa.hasOwnProperty(Y)){ab.push(Y+"="+H(aa[Y]))}}return X+(y?"#":(X.indexOf("?")==-1?"?":"&"))+ab.join("&")+ac}var S=(function(X){X=X.substring(1).split("&");var Z={},aa,Y=X.length;while(Y--){aa=X[Y].split("=");Z[aa[0]]=k(aa[1])}return Z}(/xdm_e=/.test(p.search)?p.search:p.hash));function t(X){return typeof X==="undefined"}var O=function(){var Y={};var Z={a:[1,2,3]},X='{"a":[1,2,3]}';if(typeof JSON!="undefined"&&typeof JSON.stringify==="function"&&JSON.stringify(Z).replace((/\s/g),"")===X){return JSON}if(Object.toJSON){if(Object.toJSON(Z).replace((/\s/g),"")===X){Y.stringify=Object.toJSON}}if(typeof String.prototype.evalJSON==="function"){Z=X.evalJSON();if(Z.a&&Z.a.length===3&&Z.a[2]===3){Y.parse=function(aa){return aa.evalJSON()}}}if(Y.stringify&&Y.parse){O=function(){return Y};return Y}return null};function T(X,Y,Z){var ab;for(var aa in Y){if(Y.hasOwnProperty(aa)){if(aa in X){ab=Y[aa];if(typeof ab==="object"){T(X[aa],ab,Z)}else{if(!Z){X[aa]=Y[aa]}}}else{X[aa]=Y[aa]}}}return X}function a(){var Y=d.body.appendChild(d.createElement("form")),X=Y.appendChild(d.createElement("input"));X.name=U+"TEST"+n;E=X!==Y.elements[X.name];d.body.removeChild(Y)}function A(Y){if(t(E)){a()}var ac;if(E){ac=d.createElement('<iframe name="'+Y.props.name+'"/>')}else{ac=d.createElement("IFRAME");ac.name=Y.props.name}ac.id=ac.name=Y.props.name;delete Y.props.name;if(typeof Y.container=="string"){Y.container=d.getElementById(Y.container)}if(!Y.container){T(ac.style,{position:"absolute",top:"-2000px",left:"0px"});Y.container=d.body}var ab=Y.props.src;Y.props.src="javascript:false";T(ac,Y.props);ac.border=ac.frameBorder=0;ac.allowTransparency=true;Y.container.appendChild(ac);if(Y.onLoad){v(ac,"load",Y.onLoad)}if(Y.usePost){var aa=Y.container.appendChild(d.createElement("form")),X;aa.target=ac.name;aa.action=ab;aa.method="POST";if(typeof(Y.usePost)==="object"){for(var Z in Y.usePost){if(Y.usePost.hasOwnProperty(Z)){if(E){X=d.createElement('<input name="'+Z+'"/>')}else{X=d.createElement("INPUT");X.name=Z}X.value=Y.usePost[Z];aa.appendChild(X)}}}aa.submit();aa.parentNode.removeChild(aa)}else{ac.src=ab}Y.props.src=ab;return ac}function V(aa,Z){if(typeof aa=="string"){aa=[aa]}var Y,X=aa.length;while(X--){Y=aa[X];Y=new RegExp(Y.substr(0,1)=="^"?Y:("^"+Y.replace(/(\*)/g,".$1").replace(/\?/g,".")+"$"));if(Y.test(Z)){return true}}return false}function l(Z){var ae=Z.protocol,Y;Z.isHost=Z.isHost||t(S.xdm_p);y=Z.hash||false;if(!Z.props){Z.props={}}if(!Z.isHost){Z.channel=S.xdm_c.replace(/["'<>\\]/g,"");Z.secret=S.xdm_s;Z.remote=S.xdm_e.replace(/["'<>\\]/g,"");ae=S.xdm_p;if(Z.acl&&!V(Z.acl,Z.remote)){throw new Error("Access denied for "+Z.remote)}}else{Z.remote=B(Z.remote);Z.channel=Z.channel||"default"+n++;Z.secret=Math.random().toString(16).substring(2);if(t(ae)){if(j(p.href)==j(Z.remote)){ae="4"}else{if(C(N,"postMessage")||C(d,"postMessage")){ae="1"}else{if(Z.swf&&C(N,"ActiveXObject")&&c()){ae="6"}else{if(navigator.product==="Gecko"&&"frameElement"in N&&navigator.userAgent.indexOf("WebKit")==-1){ae="5"}else{if(Z.remoteHelper){ae="2"}else{ae="0"}}}}}}}Z.protocol=ae;switch(ae){case"0":T(Z,{interval:100,delay:2000,useResize:true,useParent:false,usePolling:false},true);if(Z.isHost){if(!Z.local){var ac=p.protocol+"//"+p.host,X=d.body.getElementsByTagName("img"),ad;var aa=X.length;while(aa--){ad=X[aa];if(ad.src.substring(0,ac.length)===ac){Z.local=ad.src;break}}if(!Z.local){Z.local=N}}var ab={xdm_c:Z.channel,xdm_p:0};if(Z.local===N){Z.usePolling=true;Z.useParent=true;Z.local=p.protocol+"//"+p.host+p.pathname+p.search;ab.xdm_e=Z.local;ab.xdm_pa=1}else{ab.xdm_e=B(Z.local)}if(Z.container){Z.useResize=false;ab.xdm_po=1}Z.remote=P(Z.remote,ab)}else{T(Z,{channel:S.xdm_c,remote:S.xdm_e,useParent:!t(S.xdm_pa),usePolling:!t(S.xdm_po),useResize:Z.useParent?false:Z.useResize})}Y=[new o.stack.HashTransport(Z),new o.stack.ReliableBehavior({}),new o.stack.QueueBehavior({encode:true,maxLength:4000-Z.remote.length}),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"1":Y=[new o.stack.PostMessageTransport(Z)];break;case"2":Z.remoteHelper=B(Z.remoteHelper);Y=[new o.stack.NameTransport(Z),new o.stack.QueueBehavior(),new o.stack.VerifyBehavior({initiate:Z.isHost})];break;case"3":Y=[new o.stack.NixTransport(Z)];break;case"4":Y=[new o.stack.SameOriginTransport(Z)];break;case"5":Y=[new o.stack.FrameElementTransport(Z)];break;case"6":if(!i){c()}Y=[new o.stack.FlashTransport(Z)];break}Y.push(new o.stack.QueueBehavior({lazy:Z.lazy,remove:true}));return Y}function D(aa){var ab,Z={incoming:function(ad,ac){this.up.incoming(ad,ac)},outgoing:function(ac,ad){this.down.outgoing(ac,ad)},callback:function(ac){this.up.callback(ac)},init:function(){this.down.init()},destroy:function(){this.down.destroy()}};for(var Y=0,X=aa.length;Y<X;Y++){ab=aa[Y];T(ab,Z,true);if(Y!==0){ab.down=aa[Y-1]}if(Y!==X-1){ab.up=aa[Y+1]}}return ab}function w(X){X.up.down=X.down;X.down.up=X.up;X.up=X.down=null}T(o,{version:"2.4.17.1",query:S,stack:{},apply:T,getJSONObject:O,whenReady:G,noConflict:e});o.DomHelper={on:v,un:x,requiresJSON:function(X){if(!u(N,"JSON")){d.write('<script type="text/javascript" src="'+X+'"><\/script>')}}};(function(){var X={};o.Fn={set:function(Y,Z){X[Y]=Z},get:function(Z,Y){var aa=X[Z];if(Y){delete X[Z]}return aa}}}());o.Socket=function(Y){var X=D(l(Y).concat([{incoming:function(ab,aa){Y.onMessage(ab,aa)},callback:function(aa){if(Y.onReady){Y.onReady(aa)}}}])),Z=j(Y.remote);this.origin=j(Y.remote);this.destroy=function(){X.destroy()};this.postMessage=function(aa){X.outgoing(aa,Z)};X.init()};o.Rpc=function(Z,Y){if(Y.local){for(var ab in Y.local){if(Y.local.hasOwnProperty(ab)){var aa=Y.local[ab];if(typeof aa==="function"){Y.local[ab]={method:aa}}}}}var X=D(l(Z).concat([new o.stack.RpcBehavior(this,Y),{callback:function(ac){if(Z.onReady){Z.onReady(ac)}}}]));this.origin=j(Z.remote);this.destroy=function(){X.destroy()};X.init()};o.stack.SameOriginTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa(ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:p.protocol+"//"+p.host+p.pathname,xdm_c:Y.channel,xdm_p:4}),name:U+Y.channel+"_provider"});ab=A(Y);o.Fn.set(Y.channel,function(ac){aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}})}else{aa=m().Fn.get(Y.channel,true)(function(ac){Z.up.incoming(ac,X)});K(function(){Z.up.callback(true)},0)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.FlashTransport=function(aa){var ac,X,ab,ad,Y,ae;function af(ah,ag){K(function(){ac.up.incoming(ah,ad)},0)}function Z(ah){var ag=aa.swf+"?host="+aa.isHost;var aj="easyXDM_swf_"+Math.floor(Math.random()*10000);o.Fn.set("flash_loaded"+ah.replace(/[\-.]/g,"_"),function(){o.stack.FlashTransport[ah].swf=Y=ae.firstChild;var ak=o.stack.FlashTransport[ah].queue;for(var al=0;al<ak.length;al++){ak[al]()}ak.length=0});if(aa.swfContainer){ae=(typeof aa.swfContainer=="string")?d.getElementById(aa.swfContainer):aa.swfContainer}else{ae=d.createElement("div");T(ae.style,h&&aa.swfNoThrottle?{height:"20px",width:"20px",position:"fixed",right:0,top:0}:{height:"1px",width:"1px",position:"absolute",overflow:"hidden",right:0,top:0});d.body.appendChild(ae)}var ai="callback=flash_loaded"+ah.replace(/[\-.]/g,"_")+"&proto="+b.location.protocol+"&domain="+z(b.location.href)+"&port="+f(b.location.href)+"&ns="+I;ae.innerHTML="<object height='20' width='20' type='application/x-shockwave-flash' id='"+aj+"' data='"+ag+"'><param name='allowScriptAccess' value='always'></param><param name='wmode' value='transparent'><param name='movie' value='"+ag+"'></param><param name='flashvars' value='"+ai+"'></param><embed type='application/x-shockwave-flash' FlashVars='"+ai+"' allowScriptAccess='always' wmode='transparent' src='"+ag+"' height='1' width='1'></embed></object>"}return(ac={outgoing:function(ah,ai,ag){Y.postMessage(aa.channel,ah.toString());if(ag){ag()}},destroy:function(){try{Y.destroyChannel(aa.channel)}catch(ag){}Y=null;if(X){X.parentNode.removeChild(X);X=null}},onDOMReady:function(){ad=aa.remote;o.Fn.set("flash_"+aa.channel+"_init",function(){K(function(){ac.up.callback(true)})});o.Fn.set("flash_"+aa.channel+"_onMessage",af);aa.swf=B(aa.swf);var ah=z(aa.swf);var ag=function(){o.stack.FlashTransport[ah].init=true;Y=o.stack.FlashTransport[ah].swf;Y.createChannel(aa.channel,aa.secret,j(aa.remote),aa.isHost);if(aa.isHost){if(h&&aa.swfNoThrottle){T(aa.props,{position:"fixed",right:0,top:0,height:"20px",width:"20px"})}T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:6,xdm_s:aa.secret}),name:U+aa.channel+"_provider"});X=A(aa)}};if(o.stack.FlashTransport[ah]&&o.stack.FlashTransport[ah].init){ag()}else{if(!o.stack.FlashTransport[ah]){o.stack.FlashTransport[ah]={queue:[ag]};Z(ah)}else{o.stack.FlashTransport[ah].queue.push(ag)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.PostMessageTransport=function(aa){var ac,ad,Y,Z;function X(ae){if(ae.origin){return j(ae.origin)}if(ae.uri){return j(ae.uri)}if(ae.domain){return p.protocol+"//"+ae.domain}throw"Unable to retrieve the origin of the event"}function ab(af){var ae=X(af);if(ae==Z&&af.data.substring(0,aa.channel.length+1)==aa.channel+" "){ac.up.incoming(af.data.substring(aa.channel.length+1),ae)}}return(ac={outgoing:function(af,ag,ae){Y.postMessage(aa.channel+" "+af,ag||Z);if(ae){ae()}},destroy:function(){x(N,"message",ab);if(ad){Y=null;ad.parentNode.removeChild(ad);ad=null}},onDOMReady:function(){Z=j(aa.remote);if(aa.isHost){var ae=function(af){if(af.data==aa.channel+"-ready"){Y=("postMessage"in ad.contentWindow)?ad.contentWindow:ad.contentWindow.document;x(N,"message",ae);v(N,"message",ab);K(function(){ac.up.callback(true)},0)}};v(N,"message",ae);T(aa.props,{src:P(aa.remote,{xdm_e:j(p.href),xdm_c:aa.channel,xdm_p:1}),name:U+aa.channel+"_provider"});ad=A(aa)}else{v(N,"message",ab);Y=("postMessage"in N.parent)?N.parent:N.parent.document;Y.postMessage(aa.channel+"-ready",Z);K(function(){ac.up.callback(true)},0)}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.FrameElementTransport=function(Y){var Z,ab,aa,X;return(Z={outgoing:function(ad,ae,ac){aa.call(this,ad);if(ac){ac()}},destroy:function(){if(ab){ab.parentNode.removeChild(ab);ab=null}},onDOMReady:function(){X=j(Y.remote);if(Y.isHost){T(Y.props,{src:P(Y.remote,{xdm_e:j(p.href),xdm_c:Y.channel,xdm_p:5}),name:U+Y.channel+"_provider"});ab=A(Y);ab.fn=function(ac){delete ab.fn;aa=ac;K(function(){Z.up.callback(true)},0);return function(ad){Z.up.incoming(ad,X)}}}else{if(d.referrer&&j(d.referrer)!=S.xdm_e){N.top.location=S.xdm_e}aa=N.frameElement.fn(function(ac){Z.up.incoming(ac,X)});Z.up.callback(true)}},init:function(){G(Z.onDOMReady,Z)}})};o.stack.NameTransport=function(ab){var ac;var ae,ai,aa,ag,ah,Y,X;function af(al){var ak=ab.remoteHelper+(ae?"#_3":"#_2")+ab.channel;ai.contentWindow.sendMessage(al,ak)}function ad(){if(ae){if(++ag===2||!ae){ac.up.callback(true)}}else{af("ready");ac.up.callback(true)}}function aj(ak){ac.up.incoming(ak,Y)}function Z(){if(ah){K(function(){ah(true)},0)}}return(ac={outgoing:function(al,am,ak){ah=ak;af(al)},destroy:function(){ai.parentNode.removeChild(ai);ai=null;if(ae){aa.parentNode.removeChild(aa);aa=null}},onDOMReady:function(){ae=ab.isHost;ag=0;Y=j(ab.remote);ab.local=B(ab.local);if(ae){o.Fn.set(ab.channel,function(al){if(ae&&al==="ready"){o.Fn.set(ab.channel,aj);ad()}});X=P(ab.remote,{xdm_e:ab.local,xdm_c:ab.channel,xdm_p:2});T(ab.props,{src:X+"#"+ab.channel,name:U+ab.channel+"_provider"});aa=A(ab)}else{ab.remoteHelper=ab.remote;o.Fn.set(ab.channel,aj)}var ak=function(){var al=ai||this;x(al,"load",ak);o.Fn.set(ab.channel+"_load",Z);(function am(){if(typeof al.contentWindow.sendMessage=="function"){ad()}else{K(am,50)}}())};ai=A({props:{src:ab.local+"#_4"+ab.channel},onLoad:ak})},init:function(){G(ac.onDOMReady,ac)}})};o.stack.HashTransport=function(Z){var ac;var ah=this,af,aa,X,ad,am,ab,al;var ag,Y;function ak(ao){if(!al){return}var an=Z.remote+"#"+(am++)+"_"+ao;((af||!ag)?al.contentWindow:al).location=an}function ae(an){ad=an;ac.up.incoming(ad.substring(ad.indexOf("_")+1),Y)}function aj(){if(!ab){return}var an=ab.location.href,ap="",ao=an.indexOf("#");if(ao!=-1){ap=an.substring(ao)}if(ap&&ap!=ad){ae(ap)}}function ai(){aa=setInterval(aj,X)}return(ac={outgoing:function(an,ao){ak(an)},destroy:function(){N.clearInterval(aa);if(af||!ag){al.parentNode.removeChild(al)}al=null},onDOMReady:function(){af=Z.isHost;X=Z.interval;ad="#"+Z.channel;am=0;ag=Z.useParent;Y=j(Z.remote);if(af){T(Z.props,{src:Z.remote,name:U+Z.channel+"_provider"});if(ag){Z.onLoad=function(){ab=N;ai();ac.up.callback(true)}}else{var ap=0,an=Z.delay/50;(function ao(){if(++ap>an){throw new Error("Unable to reference listenerwindow")}try{ab=al.contentWindow.frames[U+Z.channel+"_consumer"]}catch(aq){}if(ab){ai();ac.up.callback(true)}else{K(ao,50)}}())}al=A(Z)}else{ab=N;ai();if(ag){al=parent;ac.up.callback(true)}else{T(Z,{props:{src:Z.remote+"#"+Z.channel+new Date(),name:U+Z.channel+"_consumer"},onLoad:function(){ac.up.callback(true)}});al=A(Z)}}},init:function(){G(ac.onDOMReady,ac)}})};o.stack.ReliableBehavior=function(Y){var aa,ac;var ab=0,X=0,Z="";return(aa={incoming:function(af,ad){var ae=af.indexOf("_"),ag=af.substring(0,ae).split(",");af=af.substring(ae+1);if(ag[0]==ab){Z="";if(ac){ac(true);ac=null}}if(af.length>0){aa.down.outgoing(ag[1]+","+ab+"_"+Z,ad);if(X!=ag[1]){X=ag[1];aa.up.incoming(af,ad)}}},outgoing:function(af,ad,ae){Z=af;ac=ae;aa.down.outgoing(X+","+(++ab)+"_"+af,ad)}})};o.stack.QueueBehavior=function(Z){var ac,ad=[],ag=true,aa="",af,X=0,Y=false,ab=false;function ae(){if(Z.remove&&ad.length===0){w(ac);return}if(ag||ad.length===0||af){return}ag=true;var ah=ad.shift();ac.down.outgoing(ah.data,ah.origin,function(ai){ag=false;if(ah.callback){K(function(){ah.callback(ai)},0)}ae()})}return(ac={init:function(){if(t(Z)){Z={}}if(Z.maxLength){X=Z.maxLength;ab=true}if(Z.lazy){Y=true}else{ac.down.init()}},callback:function(ai){ag=false;var ah=ac.up;ae();ah.callback(ai)},incoming:function(ak,ai){if(ab){var aj=ak.indexOf("_"),ah=parseInt(ak.substring(0,aj),10);aa+=ak.substring(aj+1);if(ah===0){if(Z.encode){aa=k(aa)}ac.up.incoming(aa,ai);aa=""}}else{ac.up.incoming(ak,ai)}},outgoing:function(al,ai,ak){if(Z.encode){al=H(al)}var ah=[],aj;if(ab){while(al.length!==0){aj=al.substring(0,X);al=al.substring(aj.length);ah.push(aj)}while((aj=ah.shift())){ad.push({data:ah.length+"_"+aj,origin:ai,callback:ah.length===0?ak:null})}}else{ad.push({data:al,origin:ai,callback:ak})}if(Y){ac.down.init()}else{ae()}},destroy:function(){af=true;ac.down.destroy()}})};o.stack.VerifyBehavior=function(ab){var ac,aa,Y,Z=false;function X(){aa=Math.random().toString(16).substring(2);ac.down.outgoing(aa)}return(ac={incoming:function(af,ad){var ae=af.indexOf("_");if(ae===-1){if(af===aa){ac.up.callback(true)}else{if(!Y){Y=af;if(!ab.initiate){X()}ac.down.outgoing(af)}}}else{if(af.substring(0,ae)===Y){ac.up.incoming(af.substring(ae+1),ad)}}},outgoing:function(af,ad,ae){ac.down.outgoing(aa+"_"+af,ad,ae)},callback:function(ad){if(ab.initiate){X()}}})};o.stack.RpcBehavior=function(ad,Y){var aa,af=Y.serializer||O();var ae=0,ac={};function X(ag){ag.jsonrpc="2.0";aa.down.outgoing(af.stringify(ag))}function ab(ag,ai){var ah=Array.prototype.slice;return function(){var aj=arguments.length,al,ak={method:ai};if(aj>0&&typeof arguments[aj-1]==="function"){if(aj>1&&typeof arguments[aj-2]==="function"){al={success:arguments[aj-2],error:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-2)}else{al={success:arguments[aj-1]};ak.params=ah.call(arguments,0,aj-1)}ac[""+(++ae)]=al;ak.id=ae}else{ak.params=ah.call(arguments,0)}if(ag.namedParams&&ak.params.length===1){ak.params=ak.params[0]}X(ak)}}function Z(an,am,ai,al){if(!ai){if(am){X({id:am,error:{code:-32601,message:"Procedure not found."}})}return}var ak,ah;if(am){ak=function(ao){ak=q;X({id:am,result:ao})};ah=function(ao,ap){ah=q;var aq={id:am,error:{code:-32099,message:ao}};if(ap){aq.error.data=ap}X(aq)}}else{ak=ah=q}if(!r(al)){al=[al]}try{var ag=ai.method.apply(ai.scope,al.concat([ak,ah]));if(!t(ag)){ak(ag)}}catch(aj){ah(aj.message)}}return(aa={incoming:function(ah,ag){var ai=af.parse(ah);if(ai.method){if(Y.handle){Y.handle(ai,X)}else{Z(ai.method,ai.id,Y.local[ai.method],ai.params)}}else{var aj=ac[ai.id];if(ai.error){if(aj.error){aj.error(ai.error)}}else{if(aj.success){aj.success(ai.result)}}delete ac[ai.id]}},init:function(){if(Y.remote){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)){ad[ag]=ab(Y.remote[ag],ag)}}}aa.down.init()},destroy:function(){for(var ag in Y.remote){if(Y.remote.hasOwnProperty(ag)&&ad.hasOwnProperty(ag)){delete ad[ag]}}aa.down.destroy()}})};b.easyXDM=o})(window,document,location,window.setTimeout,decodeURIComponent,encodeURIComponent);if(typeof JSON!=="object"){JSON={}}(function(){"use strict";function f(n){return n<10?"0"+n:n}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b"," ":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==="string"?c:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+string+'"'}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==="object"&&typeof value.toJSON==="function"){value=value.toJSON(key)}if(typeof rep==="function"){value=rep.call(holder,key,value)}switch(typeof value){case"string":return quote(value);case"number":return isFinite(value)?String(value):"null";case"boolean":case"null":return String(value);case"object":if(!value){return"null"}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==="[object Array]"){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||"null"}v=partial.length===0?"[]":gap?"[\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"]":"["+partial.join(",")+"]";gap=mind;return v}if(rep&&typeof rep==="object"){length=rep.length;for(i=0;i<length;i+=1){if(typeof rep[i]==="string"){k=rep[i];v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}else{for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?": ":":")+v)}}}}v=partial.length===0?"{}":gap?"{\n"+gap+partial.join(",\n"+gap)+"\n"+mind+"}":"{"+partial.join(",")+"}";gap=mind;return v}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(value,replacer,space){var i;gap="";indent="";if(typeof space==="number"){for(i=0;i<space;i+=1){indent+=" "}}else if(typeof space==="string"){indent=space}rep=replacer;if(replacer&&typeof replacer!=="function"&&(typeof replacer!=="object"||typeof replacer.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":value})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==="object"){for(k in value){if(Object.prototype.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v}else{delete value[k]}}}}return reviver.call(holder,key,value)}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})();(function(b){b.widget("ui.tagit",{options:{allowDuplicates:!1,caseSensitive:!0,fieldName:"tags",placeholderText:null,readOnly:!1,removeConfirmation:!1,tagLimit:null,availableTags:[],autocomplete:{},showAutocompleteOnFocus:!1,allowSpaces:!1,singleField:!1,singleFieldDelimiter:",",singleFieldNode:null,animate:!0,tabIndex:null,beforeTagAdded:null,afterTagAdded:null,beforeTagRemoved:null,afterTagRemoved:null,onTagClicked:null,onTagLimitExceeded:null,onTagAdded:null,onTagRemoved:null,tagSource:null},_create:function(){var a=this;this.element.is("input")?(this.tagList=b("<ul></ul>").insertAfter(this.element),this.options.singleField=!0,this.options.singleFieldNode=this.element,this.element.addClass("tagit-hidden-field")):this.tagList=this.element.find("ul, ol").andSelf().last();this.tagInput=b('<input type="text" />').addClass("ui-widget-content");this.options.readOnly&&this.tagInput.attr("disabled","disabled");this.options.tabIndex&&this.tagInput.attr("tabindex",this.options.tabIndex);this.options.placeholderText&&this.tagInput.attr("placeholder",this.options.placeholderText);this.options.autocomplete.source||(this.options.autocomplete.source=function(a,e){var d=a.term.toLowerCase(),c=b.grep(this.options.availableTags,function(a){return 0===a.toLowerCase().indexOf(d)});this.options.allowDuplicates||(c=this._subtractArray(c,this.assignedTags()));e(c)});this.options.showAutocompleteOnFocus&&(this.tagInput.focus(function(b,d){a._showAutocomplete()}),"undefined"===typeof this.options.autocomplete.minLength&&(this.options.autocomplete.minLength=0));b.isFunction(this.options.autocomplete.source)&&(this.options.autocomplete.source=b.proxy(this.options.autocomplete.source,this));b.isFunction(this.options.tagSource)&&(this.options.tagSource=b.proxy(this.options.tagSource,this));this.tagList.addClass("tagit").addClass("ui-widget ui-widget-content ui-corner-all").append(b('<li class="tagit-new"></li>').append(this.tagInput)).click(function(d){var c=b(d.target);c.hasClass("tagit-label")?(c=c.closest(".tagit-choice"),c.hasClass("removed")||a._trigger("onTagClicked",d,{tag:c,tagLabel:a.tagLabel(c)})):a.tagInput.focus()});var c=!1;if(this.options.singleField)if(this.options.singleFieldNode){var d=b(this.options.singleFieldNode),f=d.val().split(this.options.singleFieldDelimiter);d.val("");b.each(f,function(b,d){a.createTag(d,null,!0);c=!0})}else this.options.singleFieldNode=b('<input type="hidden" style="display:none;" value="" name="'+this.options.fieldName+'" />'),this.tagList.after(this.options.singleFieldNode);c||this.tagList.children("li").each(function(){b(this).hasClass("tagit-new")||(a.createTag(b(this).text(),b(this).attr("class"),!0),b(this).remove())});this.tagInput.keydown(function(c){if(c.which==b.ui.keyCode.BACKSPACE&&""===a.tagInput.val()){var d=a._lastTag();!a.options.removeConfirmation||d.hasClass("remove")?a.removeTag(d):a.options.removeConfirmation&&d.addClass("remove ui-state-highlight")}else a.options.removeConfirmation&&a._lastTag().removeClass("remove ui-state-highlight");if(c.which===b.ui.keyCode.COMMA&&!1===c.shiftKey||c.which===b.ui.keyCode.ENTER||c.which==b.ui.keyCode.TAB&&""!==a.tagInput.val()||c.which==b.ui.keyCode.SPACE&&!0!==a.options.allowSpaces&&('"'!=b.trim(a.tagInput.val()).replace(/^s*/,"").charAt(0)||'"'==b.trim(a.tagInput.val()).charAt(0)&&'"'==b.trim(a.tagInput.val()).charAt(b.trim(a.tagInput.val()).length-1)&&0!==b.trim(a.tagInput.val()).length-1))c.which===b.ui.keyCode.ENTER&&""===a.tagInput.val()||c.preventDefault(),a.options.autocomplete.autoFocus&&a.tagInput.data("autocomplete-open")||(a.tagInput.autocomplete("close"),a.createTag(a._cleanedInput()))}).blur(function(b){a.tagInput.data("autocomplete-open")||a.createTag(a._cleanedInput())});if(this.options.availableTags||this.options.tagSource||this.options.autocomplete.source)d={select:function(b,c){a.createTag(c.item.value);return!1}},b.extend(d,this.options.autocomplete),d.source=this.options.tagSource||d.source,this.tagInput.autocomplete(d).bind("autocompleteopen.tagit",function(b,c){a.tagInput.data("autocomplete-open",!0)}).bind("autocompleteclose.tagit",function(b,c){a.tagInput.data("autocomplete-open",!1)}),this.tagInput.autocomplete("widget").addClass("tagit-autocomplete")},destroy:function(){b.Widget.prototype.destroy.call(this);this.element.unbind(".tagit");this.tagList.unbind(".tagit");this.tagInput.removeData("autocomplete-open");this.tagList.removeClass("tagit ui-widget ui-widget-content ui-corner-all tagit-hidden-field");this.element.is("input")?(this.element.removeClass("tagit-hidden-field"),this.tagList.remove()):(this.element.children("li").each(function(){b(this).hasClass("tagit-new")?b(this).remove():(b(this).removeClass("tagit-choice ui-widget-content ui-state-default ui-state-highlight ui-corner-all remove tagit-choice-editable tagit-choice-read-only"),b(this).text(b(this).children(".tagit-label").text()))}),this.singleFieldNode&&this.singleFieldNode.remove());return this},_cleanedInput:function(){return b.trim(this.tagInput.val().replace(/^"(.*)"$/,"$1"))},_lastTag:function(){return this.tagList.find(".tagit-choice:last:not(.removed)")},_tags:function(){return this.tagList.find(".tagit-choice:not(.removed)")},assignedTags:function(){var a=this,c=[];this.options.singleField?(c=b(this.options.singleFieldNode).val().split(this.options.singleFieldDelimiter),""===c[0]&&(c=[])):this._tags().each(function(){c.push(a.tagLabel(this))});return c},_updateSingleTagsField:function(a){b(this.options.singleFieldNode).val(a.join(this.options.singleFieldDelimiter)).trigger("change")},_subtractArray:function(a,c){for(var d=[],f=0;f<a.length;f++)-1==b.inArray(a[f],c)&&d.push(a[f]);return d},tagLabel:function(a){return this.options.singleField?b(a).find(".tagit-label:first").text():b(a).find("input:first").val()},_showAutocomplete:function(){this.tagInput.autocomplete("search","")},_findTagByLabel:function(a){var c=this,d=null;this._tags().each(function(f){if(c._formatStr(a)==c._formatStr(c.tagLabel(this)))return d=b(this),!1});return d},_isNew:function(a){return!this._findTagByLabel(a)},_formatStr:function(a){return this.options.caseSensitive?a:b.trim(a.toLowerCase())},_effectExists:function(a){return Boolean(b.effects&&(b.effects[a]||b.effects.effect&&b.effects.effect[a]))},createTag:function(a,c,d){var f=this;a=b.trim(a);this.options.preprocessTag&&(a=this.options.preprocessTag(a));if(""===a)return!1;if(!this.options.allowDuplicates&&!this._isNew(a))return a=this._findTagByLabel(a),!1!==this._trigger("onTagExists",null,{existingTag:a,duringInitialization:d})&&this._effectExists("highlight")&&a.effect("highlight"),!1;if(this.options.tagLimit&&this._tags().length>=this.options.tagLimit)return this._trigger("onTagLimitExceeded",null,{duringInitialization:d}),!1;var g=b(this.options.onTagClicked?'<a class="tagit-label"></a>':'<span class="tagit-label"></span>').text(a),e=b("<li></li>").addClass("tagit-choice ui-widget-content ui-state-default ui-corner-all").addClass(c).append(g);this.options.readOnly?e.addClass("tagit-choice-read-only"):(e.addClass("tagit-choice-editable"),c=b("<span></span>").addClass("ui-icon ui-icon-close"),c=b('<a><span class="text-icon">\u00d7</span></a>').addClass("tagit-close").append(c).click(function(a){f.removeTag(e)}),e.append(c));this.options.singleField||(g=g.html(),e.append('<input type="hidden" value="'+g+'" name="'+this.options.fieldName+'" class="tagit-hidden-field" />'));!1!==this._trigger("beforeTagAdded",null,{tag:e,tagLabel:this.tagLabel(e),duringInitialization:d})&&(this.options.singleField&&(g=this.assignedTags(),g.push(a),this._updateSingleTagsField(g)),this._trigger("onTagAdded",null,e),this.tagInput.val(""),this.tagInput.parent().before(e),this._trigger("afterTagAdded",null,{tag:e,tagLabel:this.tagLabel(e),duringInitialization:d}),this.options.showAutocompleteOnFocus&&!d&&setTimeout(function(){f._showAutocomplete()},0))},removeTag:function(a,c){c="undefined"===typeof c?this.options.animate:c;a=b(a);this._trigger("onTagRemoved",null,a);if(!1!==this._trigger("beforeTagRemoved",null,{tag:a,tagLabel:this.tagLabel(a)})){if(this.options.singleField){var d=this.assignedTags(),f=this.tagLabel(a),d=b.grep(d,function(a){return a!=f});this._updateSingleTagsField(d)}if(c){a.addClass("removed");var d=this._effectExists("blind")?["blind",{direction:"horizontal"},"fast"]:["fast"],g=this;d.push(function(){a.remove();g._trigger("afterTagRemoved",null,{tag:a,tagLabel:g.tagLabel(a)})});a.fadeOut("fast").hide.apply(a,d).dequeue()}else a.remove(),this._trigger("afterTagRemoved",null,{tag:a,tagLabel:this.tagLabel(a)})}},removeTagByLabel:function(a,b){var d=this._findTagByLabel(a);if(!d)throw"No such tag exists with the name '"+a+"'";this.removeTag(d,b)},removeAll:function(){var a=this;this._tags().each(function(b,d){a.removeTag(d,!1)})}})})(jQuery);!function(){var a,AbstractChosen,Chosen,SelectParser,b,c={}.hasOwnProperty,d=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a};SelectParser=function(){function SelectParser(){this.options_index=0,this.parsed=[]}return SelectParser.prototype.add_node=function(a){return"OPTGROUP"===a.nodeName.toUpperCase()?this.add_group(a):this.add_option(a)},SelectParser.prototype.add_group=function(a){var b,c,d,e,f,g;for(b=this.parsed.length,this.parsed.push({array_index:b,group:!0,label:this.escapeExpression(a.label),children:0,disabled:a.disabled}),f=a.childNodes,g=[],d=0,e=f.length;e>d;d++)c=f[d],g.push(this.add_option(c,b,a.disabled));return g},SelectParser.prototype.add_option=function(a,b,c){return"OPTION"===a.nodeName.toUpperCase()?(""!==a.text?(null!=b&&(this.parsed[b].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:a.value,text:a.text,html:a.innerHTML,selected:a.selected,disabled:c===!0?c:a.disabled,group_array_index:b,classes:a.className,style:a.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1):void 0},SelectParser.prototype.escapeExpression=function(a){var b,c;return null==a||a===!1?"":/[\&\<\>\"\'\`]/.test(a)?(b={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},c=/&(?!\w+;)|[\<\>\"\'\`]/g,a.replace(c,function(a){return b[a]||"&amp;"})):a},SelectParser}(),SelectParser.select_to_array=function(a){var b,c,d,e,f;for(c=new SelectParser,f=a.childNodes,d=0,e=f.length;e>d;d++)b=f[d],c.add_node(b);return c.parsed},AbstractChosen=function(){function AbstractChosen(a,b){this.form_field=a,this.options=null!=b?b:{},AbstractChosen.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return AbstractChosen.prototype.set_default_values=function(){var a=this;return this.click_test_action=function(b){return a.test_active_click(b)},this.activate_action=function(b){return a.activate_field(b)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text?this.options.allow_single_deselect:!1,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null!=this.options.enable_split_word_search?this.options.enable_split_word_search:!0,this.group_search=null!=this.options.group_search?this.options.group_search:!0,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null!=this.options.single_backstroke_delete?this.options.single_backstroke_delete:!0,this.max_selected_options=this.options.max_selected_options||1/0,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null!=this.options.display_selected_options?this.options.display_selected_options:!0,this.display_disabled_options=null!=this.options.display_disabled_options?this.options.display_disabled_options:!0},AbstractChosen.prototype.set_default_text=function(){return this.default_text=this.form_field.getAttribute("data-placeholder")?this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.options.placeholder_text_multiple||this.options.placeholder_text||AbstractChosen.default_multiple_text:this.options.placeholder_text_single||this.options.placeholder_text||AbstractChosen.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||AbstractChosen.default_no_result_text},AbstractChosen.prototype.mouse_enter=function(){return this.mouse_on_container=!0},AbstractChosen.prototype.mouse_leave=function(){return this.mouse_on_container=!1},AbstractChosen.prototype.input_focus=function(){var a=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return a.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},AbstractChosen.prototype.input_blur=function(){var a=this;return this.mouse_on_container?void 0:(this.active_field=!1,setTimeout(function(){return a.blur_test()},100))},AbstractChosen.prototype.results_option_build=function(a){var b,c,d,e,f;for(b="",f=this.results_data,d=0,e=f.length;e>d;d++)c=f[d],b+=c.group?this.result_add_group(c):this.result_add_option(c),(null!=a?a.first:void 0)&&(c.selected&&this.is_multiple?this.choice_build(c):c.selected&&!this.is_multiple&&this.single_set_selected_text(c.text));return b},AbstractChosen.prototype.result_add_option=function(a){var b,c;return a.search_match?this.include_option_in_results(a)?(b=[],a.disabled||a.selected&&this.is_multiple||b.push("active-result"),!a.disabled||a.selected&&this.is_multiple||b.push("disabled-result"),a.selected&&b.push("result-selected"),null!=a.group_array_index&&b.push("group-option"),""!==a.classes&&b.push(a.classes),c=document.createElement("li"),c.className=b.join(" "),c.style.cssText=a.style,c.setAttribute("data-option-array-index",a.array_index),c.innerHTML=a.search_text,this.outerHTML(c)):"":""},AbstractChosen.prototype.result_add_group=function(a){var b;return a.search_match||a.group_match?a.active_options>0?(b=document.createElement("li"),b.className="group-result",b.innerHTML=a.search_text,this.outerHTML(b)):"":""},AbstractChosen.prototype.results_update_field=function(){return this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing?this.winnow_results():void 0},AbstractChosen.prototype.reset_single_select_options=function(){var a,b,c,d,e;for(d=this.results_data,e=[],b=0,c=d.length;c>b;b++)a=d[b],a.selected?e.push(a.selected=!1):e.push(void 0);return e},AbstractChosen.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},AbstractChosen.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},AbstractChosen.prototype.winnow_results=function(){var a,b,c,d,e,f,g,h,i,j,k,l;for(this.no_results_clear(),d=0,f=this.get_search_text(),a=f.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=new RegExp(a,"i"),c=this.get_search_regex(a),l=this.results_data,j=0,k=l.length;k>j;j++)b=l[j],b.search_match=!1,e=null,this.include_option_in_results(b)&&(b.group&&(b.group_match=!1,b.active_options=0),null!=b.group_array_index&&this.results_data[b.group_array_index]&&(e=this.results_data[b.group_array_index],0===e.active_options&&e.search_match&&(d+=1),e.active_options+=1),(!b.group||this.group_search)&&(b.search_text=b.group?b.label:b.text,b.search_match=this.search_string_match(b.search_text,c),b.search_match&&!b.group&&(d+=1),b.search_match?(f.length&&(g=b.search_text.search(i),h=b.search_text.substr(0,g+f.length)+"</em>"+b.search_text.substr(g+f.length),b.search_text=h.substr(0,g)+"<em>"+h.substr(g)),null!=e&&(e.group_match=!0)):null!=b.group_array_index&&this.results_data[b.group_array_index].search_match&&(b.search_match=!0)));return this.result_clear_highlight(),1>d&&f.length?(this.update_results_content(""),this.no_results(f)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},AbstractChosen.prototype.get_search_regex=function(a){var b;return b=this.search_contains?"":"^",new RegExp(b+a,"i")},AbstractChosen.prototype.search_string_match=function(a,b){var c,d,e,f;if(b.test(a))return!0;if(this.enable_split_word_search&&(a.indexOf(" ")>=0||0===a.indexOf("["))&&(d=a.replace(/\[|\]/g,"").split(" "),d.length))for(e=0,f=d.length;f>e;e++)if(c=d[e],b.test(c))return!0},AbstractChosen.prototype.choices_count=function(){var a,b,c,d;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,d=this.form_field.options,b=0,c=d.length;c>b;b++)a=d[b],a.selected&&(this.selected_option_count+=1);return this.selected_option_count},AbstractChosen.prototype.choices_click=function(a){return a.preventDefault(),this.results_showing||this.is_disabled?void 0:this.results_show()},AbstractChosen.prototype.keyup_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),b){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(a.preventDefault(),this.results_showing)return this.result_select(a);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},AbstractChosen.prototype.clipboard_event_checker=function(){var a=this;return setTimeout(function(){return a.results_search()},50)},AbstractChosen.prototype.container_width=function(){return null!=this.options.width?this.options.width:""+this.form_field.offsetWidth+"px"},AbstractChosen.prototype.include_option_in_results=function(a){return this.is_multiple&&!this.display_selected_options&&a.selected?!1:!this.display_disabled_options&&a.disabled?!1:a.empty?!1:!0},AbstractChosen.prototype.search_results_touchstart=function(a){return this.touch_started=!0,this.search_results_mouseover(a)},AbstractChosen.prototype.search_results_touchmove=function(a){return this.touch_started=!1,this.search_results_mouseout(a)},AbstractChosen.prototype.search_results_touchend=function(a){return this.touch_started?this.search_results_mouseup(a):void 0},AbstractChosen.prototype.outerHTML=function(a){var b;return a.outerHTML?a.outerHTML:(b=document.createElement("div"),b.appendChild(a),b.innerHTML)},AbstractChosen.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:/iP(od|hone)/i.test(window.navigator.userAgent)?!1:/Android/i.test(window.navigator.userAgent)&&/Mobile/i.test(window.navigator.userAgent)?!1:!0},AbstractChosen.default_multiple_text="Select Some Options",AbstractChosen.default_single_text="Select an Option",AbstractChosen.default_no_result_text="No results match",AbstractChosen}(),a=jQuery,a.fn.extend({chosen:function(b){return AbstractChosen.browser_is_supported()?this.each(function(){var c,d;c=a(this),d=c.data("chosen"),"destroy"===b&&d instanceof Chosen?d.destroy():d instanceof Chosen||c.data("chosen",new Chosen(this,b))}):this}}),Chosen=function(c){function Chosen(){return b=Chosen.__super__.constructor.apply(this,arguments)}return d(Chosen,c),Chosen.prototype.setup=function(){return this.form_field_jq=a(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},Chosen.prototype.set_up_html=function(){var b,c;return b=["chosen-container"],b.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&b.push(this.form_field.className),this.is_rtl&&b.push("chosen-rtl"),c={"class":b.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(c.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=a("<div />",c),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},Chosen.prototype.register_observers=function(){var a=this;return this.container.bind("touchstart.chosen",function(b){a.container_mousedown(b)}),this.container.bind("touchend.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mousedown.chosen",function(b){a.container_mousedown(b)}),this.container.bind("mouseup.chosen",function(b){a.container_mouseup(b)}),this.container.bind("mouseenter.chosen",function(b){a.mouse_enter(b)}),this.container.bind("mouseleave.chosen",function(b){a.mouse_leave(b)}),this.search_results.bind("mouseup.chosen",function(b){a.search_results_mouseup(b)}),this.search_results.bind("mouseover.chosen",function(b){a.search_results_mouseover(b)}),this.search_results.bind("mouseout.chosen",function(b){a.search_results_mouseout(b)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(b){a.search_results_mousewheel(b)}),this.search_results.bind("touchstart.chosen",function(b){a.search_results_touchstart(b)}),this.search_results.bind("touchmove.chosen",function(b){a.search_results_touchmove(b)}),this.search_results.bind("touchend.chosen",function(b){a.search_results_touchend(b)}),this.form_field_jq.bind("chosen:updated.chosen",function(b){a.results_update_field(b)}),this.form_field_jq.bind("chosen:activate.chosen",function(b){a.activate_field(b)}),this.form_field_jq.bind("chosen:open.chosen",function(b){a.container_mousedown(b)}),this.form_field_jq.bind("chosen:close.chosen",function(b){a.input_blur(b)}),this.search_field.bind("blur.chosen",function(b){a.input_blur(b)}),this.search_field.bind("keyup.chosen",function(b){a.keyup_checker(b)}),this.search_field.bind("keydown.chosen",function(b){a.keydown_checker(b)}),this.search_field.bind("focus.chosen",function(b){a.input_focus(b)}),this.search_field.bind("cut.chosen",function(b){a.clipboard_event_checker(b)}),this.search_field.bind("paste.chosen",function(b){a.clipboard_event_checker(b)}),this.is_multiple?this.search_choices.bind("click.chosen",function(b){a.choices_click(b)}):this.container.bind("click.chosen",function(a){a.preventDefault()})},Chosen.prototype.destroy=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},Chosen.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},Chosen.prototype.container_mousedown=function(b){return this.is_disabled||(b&&"mousedown"===b.type&&!this.results_showing&&b.preventDefault(),null!=b&&a(b.target).hasClass("search-choice-close"))?void 0:(this.active_field?this.is_multiple||!b||a(b.target)[0]!==this.selected_item[0]&&!a(b.target).parents("a.chosen-single").length||(b.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),a(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field())},Chosen.prototype.container_mouseup=function(a){return"ABBR"!==a.target.nodeName||this.is_disabled?void 0:this.results_reset(a)},Chosen.prototype.search_results_mousewheel=function(a){var b;return a.originalEvent&&(b=a.originalEvent.deltaY||-a.originalEvent.wheelDelta||a.originalEvent.detail),null!=b?(a.preventDefault(),"DOMMouseScroll"===a.type&&(b=40*b),this.search_results.scrollTop(b+this.search_results.scrollTop())):void 0},Chosen.prototype.blur_test=function(){return!this.active_field&&this.container.hasClass("chosen-container-active")?this.close_field():void 0},Chosen.prototype.close_field=function(){return a(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},Chosen.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},Chosen.prototype.test_active_click=function(b){var c;return c=a(b.target).closest(".chosen-container"),c.length&&this.container[0]===c[0]?this.active_field=!0:this.close_field()},Chosen.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=SelectParser.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},Chosen.prototype.result_do_highlight=function(a){var b,c,d,e,f;if(a.length){if(this.result_clear_highlight(),this.result_highlight=a,this.result_highlight.addClass("highlighted"),d=parseInt(this.search_results.css("maxHeight"),10),f=this.search_results.scrollTop(),e=d+f,c=this.result_highlight.position().top+this.search_results.scrollTop(),b=c+this.result_highlight.outerHeight(),b>=e)return this.search_results.scrollTop(b-d>0?b-d:0);if(f>c)return this.search_results.scrollTop(c)}},Chosen.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},Chosen.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},Chosen.prototype.update_results_content=function(a){return this.search_results.html(a)},Chosen.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},Chosen.prototype.set_tab_index=function(){var a;return this.form_field.tabIndex?(a=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=a):void 0},Chosen.prototype.set_label_behavior=function(){var b=this;return this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=a("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0?this.form_field_label.bind("click.chosen",function(a){return b.is_multiple?b.container_mousedown(a):b.activate_field()}):void 0},Chosen.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},Chosen.prototype.search_results_mouseup=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c.length?(this.result_highlight=c,this.result_select(b),this.search_field.focus()):void 0},Chosen.prototype.search_results_mouseover=function(b){var c;return c=a(b.target).hasClass("active-result")?a(b.target):a(b.target).parents(".active-result").first(),c?this.result_do_highlight(c):void 0},Chosen.prototype.search_results_mouseout=function(b){return a(b.target).hasClass("active-result")?this.result_clear_highlight():void 0},Chosen.prototype.choice_build=function(b){var c,d,e=this;return c=a("<li />",{"class":"search-choice"}).html("<span>"+b.html+"</span>"),b.disabled?c.addClass("search-choice-disabled"):(d=a("<a />",{"class":"search-choice-close","data-option-array-index":b.array_index}),d.bind("click.chosen",function(a){return e.choice_destroy_link_click(a)}),c.append(d)),this.search_container.before(c)},Chosen.prototype.choice_destroy_link_click=function(b){return b.preventDefault(),b.stopPropagation(),this.is_disabled?void 0:this.choice_destroy(a(b.target))},Chosen.prototype.choice_destroy=function(a){return this.result_deselect(a[0].getAttribute("data-option-array-index"))?(this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),a.parents("li").first().remove(),this.search_field_scale()):void 0},Chosen.prototype.results_reset=function(){return this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field?this.results_hide():void 0},Chosen.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},Chosen.prototype.result_select=function(a){var b,c;return this.result_highlight?(b=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?b.removeClass("active-result"):this.reset_single_select_options(),c=this.results_data[b[0].getAttribute("data-option-array-index")],c.selected=!0,this.form_field.options[c.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(c):this.single_set_selected_text(c.text),(a.metaKey||a.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[c.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())):void 0},Chosen.prototype.single_set_selected_text=function(a){return null==a&&(a=this.default_text),a===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(a)},Chosen.prototype.result_deselect=function(a){var b;return b=this.results_data[a],this.form_field.options[b.options_index].disabled?!1:(b.selected=!1,this.form_field.options[b.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[b.options_index].value}),this.search_field_scale(),!0)},Chosen.prototype.single_deselect_control_build=function(){return this.allow_single_deselect?(this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")):void 0},Chosen.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":a("<div/>").text(a.trim(this.search_field.val())).html()},Chosen.prototype.winnow_results_set_highlight=function(){var a,b;return b=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),a=b.length?b.first():this.search_results.find(".active-result").first(),null!=a?this.result_do_highlight(a):void 0},Chosen.prototype.no_results=function(b){var c;return c=a('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),c.find("span").first().html(b),this.search_results.append(c),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},Chosen.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},Chosen.prototype.keydown_arrow=function(){var a;return this.results_showing&&this.result_highlight?(a=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(a):void 0:this.results_show()},Chosen.prototype.keyup_arrow=function(){var a;return this.results_showing||this.is_multiple?this.result_highlight?(a=this.result_highlight.prevAll("li.active-result"),a.length?this.result_do_highlight(a.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},Chosen.prototype.keydown_backstroke=function(){var a;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(a=this.search_container.siblings("li.search-choice").last(),a.length&&!a.hasClass("search-choice-disabled")?(this.pending_backstroke=a,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},Chosen.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},Chosen.prototype.keydown_checker=function(a){var b,c;switch(b=null!=(c=a.which)?c:a.keyCode,this.search_field_scale(),8!==b&&this.pending_backstroke&&this.clear_backstroke(),b){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(a),this.mouse_on_container=!1;break;case 13:this.results_showing&&a.preventDefault();break;case 32:this.disable_search&&a.preventDefault();break;case 38:a.preventDefault(),this.keyup_arrow();break;case 40:a.preventDefault(),this.keydown_arrow()}},Chosen.prototype.search_field_scale=function(){var b,c,d,e,f,g,h,i,j;if(this.is_multiple){for(d=0,h=0,f="position:absolute; left: -1000px; top: -1000px; display:none;",g=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],i=0,j=g.length;j>i;i++)e=g[i],f+=e+":"+this.search_field.css(e)+";";return b=a("<div />",{style:f}),b.text(this.search_field.val()),a("body").append(b),h=b.width()+25,b.remove(),c=this.container.outerWidth(),h>c-10&&(h=c-10),this.search_field.css({width:h+"px"})}},Chosen}(AbstractChosen)}.call(this);(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else if(typeof exports==='object'){factory(require('jquery'));}else{factory(window.jQuery);}}(function($){'use strict';var counter=0;$.ajaxTransport('iframe',function(options){if(options.async){var initialIframeSrc=options.initialIframeSrc||'javascript:false;',form,iframe,addParamChar;return{send:function(_,completeCallback){form=$('<form style="display:none;"></form>');form.attr('accept-charset',options.formAcceptCharset);addParamChar=/\?/.test(options.url)?'&':'?';if(options.type==='DELETE'){options.url=options.url+addParamChar+'_method=DELETE';options.type='POST';}else if(options.type==='PUT'){options.url=options.url+addParamChar+'_method=PUT';options.type='POST';}else if(options.type==='PATCH'){options.url=options.url+addParamChar+'_method=PATCH';options.type='POST';}
counter+=1;iframe=$('<iframe src="'+initialIframeSrc+'" name="iframe-transport-'+counter+'"></iframe>').bind('load',function(){var fileInputClones,paramNames=$.isArray(options.paramName)?options.paramName:[options.paramName];iframe.unbind('load').bind('load',function(){var response;try{response=iframe.contents();if(!response.length||!response[0].firstChild){throw new Error();}}catch(e){response=undefined;}
completeCallback(200,'success',{'iframe':response});$('<iframe src="'+initialIframeSrc+'"></iframe>').appendTo(form);window.setTimeout(function(){form.remove();},0);});form.prop('target',iframe.prop('name')).prop('action',options.url).prop('method',options.type);if(options.formData){$.each(options.formData,function(index,field){$('<input type="hidden"/>').prop('name',field.name).val(field.value).appendTo(form);});}
if(options.fileInput&&options.fileInput.length&&options.type==='POST'){fileInputClones=options.fileInput.clone();options.fileInput.after(function(index){return fileInputClones[index];});if(options.paramName){options.fileInput.each(function(index){$(this).prop('name',paramNames[index]||options.paramName);});}
form.append(options.fileInput).prop('enctype','multipart/form-data').prop('encoding','multipart/form-data');options.fileInput.removeAttr('form');}
form.submit();if(fileInputClones&&fileInputClones.length){options.fileInput.each(function(index,input){var clone=$(fileInputClones[index]);$(input).prop('name',clone.prop('name')).attr('form',clone.attr('form'));clone.replaceWith(input);});}});form.append(iframe).appendTo(document.body);},abort:function(){if(iframe){iframe.unbind('load').prop('src',initialIframeSrc);}
if(form){form.remove();}}};}});$.ajaxSetup({converters:{'iframe text':function(iframe){return iframe&&$(iframe[0].body).text();},'iframe json':function(iframe){return iframe&&$.parseJSON($(iframe[0].body).text());},'iframe html':function(iframe){return iframe&&$(iframe[0].body).html();},'iframe xml':function(iframe){var xmlDoc=iframe&&iframe[0];return xmlDoc&&$.isXMLDoc(xmlDoc)?xmlDoc:$.parseXML((xmlDoc.XMLDocument&&xmlDoc.XMLDocument.xml)||$(xmlDoc.body).html());},'iframe script':function(iframe){return iframe&&$.globalEval($(iframe[0].body).text());}}});}));(function(factory){'use strict';if(typeof define==='function'&&define.amd){define(['jquery','jquery.ui.widget'],factory);}else if(typeof exports==='object'){factory(require('jquery'),require('./vendor/jquery.ui.widget'));}else{factory(window.jQuery);}}(function($){'use strict';$.support.fileInput=!(new RegExp('(Android (1\\.[0156]|2\\.[01]))'+'|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)'+'|(w(eb)?OSBrowser)|(webOS)'+'|(Kindle/(1\\.0|2\\.[05]|3\\.0))').test(window.navigator.userAgent)||$('<input type="file">').prop('disabled'));$.support.xhrFileUpload=!!(window.ProgressEvent&&window.FileReader);$.support.xhrFormDataFileUpload=!!window.FormData;$.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);function getDragHandler(type){var isDragOver=type==='dragover';return function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var dataTransfer=e.dataTransfer;if(dataTransfer&&$.inArray('Files',dataTransfer.types)!==-1&&this._trigger(type,$.Event(type,{delegatedEvent:e}))!==false){e.preventDefault();if(isDragOver){dataTransfer.dropEffect='copy';}}};}
$.widget('blueimp.fileupload',{options:{dropZone:$(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:true,paramName:undefined,singleFileUploads:true,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:false,limitConcurrentUploads:undefined,forceIframeTransport:false,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:true,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:true,progressInterval:100,bitrateInterval:500,autoUpload:true,messages:{uploadedBytes:'Uploaded bytes exceed file size'},i18n:function(message,context){message=this.messages[message]||message.toString();if(context){$.each(context,function(key,value){message=message.replace('{'+key+'}',value);});}
return message;},formData:function(form){return form.serializeArray();},add:function(e,data){if(e.isDefaultPrevented()){return false;}
if(data.autoUpload||(data.autoUpload!==false&&$(this).fileupload('option','autoUpload'))){data.process().done(function(){data.submit();});}},processData:false,contentType:false,cache:false,timeout:0},_specialOptions:['fileInput','dropZone','pasteZone','multipart','forceIframeTransport'],_blobSlice:$.support.blobSlice&&function(){var slice=this.slice||this.webkitSlice||this.mozSlice;return slice.apply(this,arguments);},_BitrateTimer:function(){this.timestamp=((Date.now)?Date.now():(new Date()).getTime());this.loaded=0;this.bitrate=0;this.getBitrate=function(now,loaded,interval){var timeDiff=now-this.timestamp;if(!this.bitrate||!interval||timeDiff>interval){this.bitrate=(loaded-this.loaded)*(1000/timeDiff)*8;this.loaded=loaded;this.timestamp=now;}
return this.bitrate;};},_isXHRUpload:function(options){return!options.forceIframeTransport&&((!options.multipart&&$.support.xhrFileUpload)||$.support.xhrFormDataFileUpload);},_getFormData:function(options){var formData;if($.type(options.formData)==='function'){return options.formData(options.form);}
if($.isArray(options.formData)){return options.formData;}
if($.type(options.formData)==='object'){formData=[];$.each(options.formData,function(name,value){formData.push({name:name,value:value});});return formData;}
return[];},_getTotal:function(files){var total=0;$.each(files,function(index,file){total+=file.size||1;});return total;},_initProgressObject:function(obj){var progress={loaded:0,total:0,bitrate:0};if(obj._progress){$.extend(obj._progress,progress);}else{obj._progress=progress;}},_initResponseObject:function(obj){var prop;if(obj._response){for(prop in obj._response){if(obj._response.hasOwnProperty(prop)){delete obj._response[prop];}}}else{obj._response={};}},_onProgress:function(e,data){if(e.lengthComputable){var now=((Date.now)?Date.now():(new Date()).getTime()),loaded;if(data._time&&data.progressInterval&&(now-data._time<data.progressInterval)&&e.loaded!==e.total){return;}
data._time=now;loaded=Math.floor(e.loaded/e.total*(data.chunkSize||data._progress.total))+(data.uploadedBytes||0);this._progress.loaded+=(loaded-data._progress.loaded);this._progress.bitrate=this._bitrateTimer.getBitrate(now,this._progress.loaded,data.bitrateInterval);data._progress.loaded=data.loaded=loaded;data._progress.bitrate=data.bitrate=data._bitrateTimer.getBitrate(now,loaded,data.bitrateInterval);this._trigger('progress',$.Event('progress',{delegatedEvent:e}),data);this._trigger('progressall',$.Event('progressall',{delegatedEvent:e}),this._progress);}},_initProgressListener:function(options){var that=this,xhr=options.xhr?options.xhr():$.ajaxSettings.xhr();if(xhr.upload){$(xhr.upload).bind('progress',function(e){var oe=e.originalEvent;e.lengthComputable=oe.lengthComputable;e.loaded=oe.loaded;e.total=oe.total;that._onProgress(e,options);});options.xhr=function(){return xhr;};}},_isInstanceOf:function(type,obj){return Object.prototype.toString.call(obj)==='[object '+type+']';},_initXHRData:function(options){var that=this,formData,file=options.files[0],multipart=options.multipart||!$.support.xhrFileUpload,paramName=$.type(options.paramName)==='array'?options.paramName[0]:options.paramName;options.headers=$.extend({},options.headers);if(options.contentRange){options.headers['Content-Range']=options.contentRange;}
if(!multipart||options.blob||!this._isInstanceOf('File',file)){options.headers['Content-Disposition']='attachment; filename="'+
encodeURI(file.name)+'"';}
if(!multipart){options.contentType=file.type||'application/octet-stream';options.data=options.blob||file;}else if($.support.xhrFormDataFileUpload){if(options.postMessage){formData=this._getFormData(options);if(options.blob){formData.push({name:paramName,value:options.blob});}else{$.each(options.files,function(index,file){formData.push({name:($.type(options.paramName)==='array'&&options.paramName[index])||paramName,value:file});});}}else{if(that._isInstanceOf('FormData',options.formData)){formData=options.formData;}else{formData=new FormData();$.each(this._getFormData(options),function(index,field){formData.append(field.name,field.value);});}
if(options.blob){formData.append(paramName,options.blob,file.name);}else{$.each(options.files,function(index,file){if(that._isInstanceOf('File',file)||that._isInstanceOf('Blob',file)){formData.append(($.type(options.paramName)==='array'&&options.paramName[index])||paramName,file,file.uploadName||file.name);}});}}
options.data=formData;}
options.blob=null;},_initIframeSettings:function(options){var targetHost=$('<a></a>').prop('href',options.url).prop('host');options.dataType='iframe '+(options.dataType||'');options.formData=this._getFormData(options);if(options.redirect&&targetHost&&targetHost!==location.host){options.formData.push({name:options.redirectParamName||'redirect',value:options.redirect});}},_initDataSettings:function(options){if(this._isXHRUpload(options)){if(!this._chunkedUpload(options,true)){if(!options.data){this._initXHRData(options);}
this._initProgressListener(options);}
if(options.postMessage){options.dataType='postmessage '+(options.dataType||'');}}else{this._initIframeSettings(options);}},_getParamName:function(options){var fileInput=$(options.fileInput),paramName=options.paramName;if(!paramName){paramName=[];fileInput.each(function(){var input=$(this),name=input.prop('name')||'files[]',i=(input.prop('files')||[1]).length;while(i){paramName.push(name);i-=1;}});if(!paramName.length){paramName=[fileInput.prop('name')||'files[]'];}}else if(!$.isArray(paramName)){paramName=[paramName];}
return paramName;},_initFormSettings:function(options){if(!options.form||!options.form.length){options.form=$(options.fileInput.prop('form'));if(!options.form.length){options.form=$(this.options.fileInput.prop('form'));}}
options.paramName=this._getParamName(options);if(!options.url){options.url=options.form.prop('action')||location.href;}
options.type=(options.type||($.type(options.form.prop('method'))==='string'&&options.form.prop('method'))||'').toUpperCase();if(options.type!=='POST'&&options.type!=='PUT'&&options.type!=='PATCH'){options.type='POST';}
if(!options.formAcceptCharset){options.formAcceptCharset=options.form.attr('accept-charset');}},_getAJAXSettings:function(data){var options=$.extend({},this.options,data);this._initFormSettings(options);this._initDataSettings(options);return options;},_getDeferredState:function(deferred){if(deferred.state){return deferred.state();}
if(deferred.isResolved()){return'resolved';}
if(deferred.isRejected()){return'rejected';}
return'pending';},_enhancePromise:function(promise){promise.success=promise.done;promise.error=promise.fail;promise.complete=promise.always;return promise;},_getXHRPromise:function(resolveOrReject,context,args){var dfd=$.Deferred(),promise=dfd.promise();context=context||this.options.context||promise;if(resolveOrReject===true){dfd.resolveWith(context,args);}else if(resolveOrReject===false){dfd.rejectWith(context,args);}
promise.abort=dfd.promise;return this._enhancePromise(promise);},_addConvenienceMethods:function(e,data){var that=this,getPromise=function(args){return $.Deferred().resolveWith(that,args).promise();};data.process=function(resolveFunc,rejectFunc){if(resolveFunc||rejectFunc){data._processQueue=this._processQueue=(this._processQueue||getPromise([this])).pipe(function(){if(data.errorThrown){return $.Deferred().rejectWith(that,[data]).promise();}
return getPromise(arguments);}).pipe(resolveFunc,rejectFunc);}
return this._processQueue||getPromise([this]);};data.submit=function(){if(this.state()!=='pending'){data.jqXHR=this.jqXHR=(that._trigger('submit',$.Event('submit',{delegatedEvent:e}),this)!==false)&&that._onSend(e,this);}
return this.jqXHR||that._getXHRPromise();};data.abort=function(){if(this.jqXHR){return this.jqXHR.abort();}
this.errorThrown='abort';that._trigger('fail',null,this);return that._getXHRPromise(false);};data.state=function(){if(this.jqXHR){return that._getDeferredState(this.jqXHR);}
if(this._processQueue){return that._getDeferredState(this._processQueue);}};data.processing=function(){return!this.jqXHR&&this._processQueue&&that._getDeferredState(this._processQueue)==='pending';};data.progress=function(){return this._progress;};data.response=function(){return this._response;};},_getUploadedBytes:function(jqXHR){var range=jqXHR.getResponseHeader('Range'),parts=range&&range.split('-'),upperBytesPos=parts&&parts.length>1&&parseInt(parts[1],10);return upperBytesPos&&upperBytesPos+1;},_chunkedUpload:function(options,testOnly){options.uploadedBytes=options.uploadedBytes||0;var that=this,file=options.files[0],fs=file.size,ub=options.uploadedBytes,mcs=options.maxChunkSize||fs,slice=this._blobSlice,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,upload;if(!(this._isXHRUpload(options)&&slice&&(ub||mcs<fs))||options.data){return false;}
if(testOnly){return true;}
if(ub>=fs){file.error=options.i18n('uploadedBytes');return this._getXHRPromise(false,options.context,[null,'error',file.error]);}
upload=function(){var o=$.extend({},options),currentLoaded=o._progress.loaded;o.blob=slice.call(file,ub,ub+mcs,file.type);o.chunkSize=o.blob.size;o.contentRange='bytes '+ub+'-'+
(ub+o.chunkSize-1)+'/'+fs;that._initXHRData(o);that._initProgressListener(o);jqXHR=((that._trigger('chunksend',null,o)!==false&&$.ajax(o))||that._getXHRPromise(false,o.context)).done(function(result,textStatus,jqXHR){ub=that._getUploadedBytes(jqXHR)||(ub+o.chunkSize);if(currentLoaded+o.chunkSize-o._progress.loaded){that._onProgress($.Event('progress',{lengthComputable:true,loaded:ub-o.uploadedBytes,total:ub-o.uploadedBytes}),o);}
options.uploadedBytes=o.uploadedBytes=ub;o.result=result;o.textStatus=textStatus;o.jqXHR=jqXHR;that._trigger('chunkdone',null,o);that._trigger('chunkalways',null,o);if(ub<fs){upload();}else{dfd.resolveWith(o.context,[result,textStatus,jqXHR]);}}).fail(function(jqXHR,textStatus,errorThrown){o.jqXHR=jqXHR;o.textStatus=textStatus;o.errorThrown=errorThrown;that._trigger('chunkfail',null,o);that._trigger('chunkalways',null,o);dfd.rejectWith(o.context,[jqXHR,textStatus,errorThrown]);});};this._enhancePromise(promise);promise.abort=function(){return jqXHR.abort();};upload();return promise;},_beforeSend:function(e,data){if(this._active===0){this._trigger('start');this._bitrateTimer=new this._BitrateTimer();this._progress.loaded=this._progress.total=0;this._progress.bitrate=0;}
this._initResponseObject(data);this._initProgressObject(data);data._progress.loaded=data.loaded=data.uploadedBytes||0;data._progress.total=data.total=this._getTotal(data.files)||1;data._progress.bitrate=data.bitrate=0;this._active+=1;this._progress.loaded+=data.loaded;this._progress.total+=data.total;},_onDone:function(result,textStatus,jqXHR,options){var total=options._progress.total,response=options._response;if(options._progress.loaded<total){this._onProgress($.Event('progress',{lengthComputable:true,loaded:total,total:total}),options);}
response.result=options.result=result;response.textStatus=options.textStatus=textStatus;response.jqXHR=options.jqXHR=jqXHR;this._trigger('done',null,options);},_onFail:function(jqXHR,textStatus,errorThrown,options){var response=options._response;if(options.recalculateProgress){this._progress.loaded-=options._progress.loaded;this._progress.total-=options._progress.total;}
response.jqXHR=options.jqXHR=jqXHR;response.textStatus=options.textStatus=textStatus;response.errorThrown=options.errorThrown=errorThrown;this._trigger('fail',null,options);},_onAlways:function(jqXHRorResult,textStatus,jqXHRorError,options){this._trigger('always',null,options);},_onSend:function(e,data){if(!data.submit){this._addConvenienceMethods(e,data);}
var that=this,jqXHR,aborted,slot,pipe,options=that._getAJAXSettings(data),send=function(){that._sending+=1;options._bitrateTimer=new that._BitrateTimer();jqXHR=jqXHR||(((aborted||that._trigger('send',$.Event('send',{delegatedEvent:e}),options)===false)&&that._getXHRPromise(false,options.context,aborted))||that._chunkedUpload(options)||$.ajax(options)).done(function(result,textStatus,jqXHR){that._onDone(result,textStatus,jqXHR,options);}).fail(function(jqXHR,textStatus,errorThrown){that._onFail(jqXHR,textStatus,errorThrown,options);}).always(function(jqXHRorResult,textStatus,jqXHRorError){that._onAlways(jqXHRorResult,textStatus,jqXHRorError,options);that._sending-=1;that._active-=1;if(options.limitConcurrentUploads&&options.limitConcurrentUploads>that._sending){var nextSlot=that._slots.shift();while(nextSlot){if(that._getDeferredState(nextSlot)==='pending'){nextSlot.resolve();break;}
nextSlot=that._slots.shift();}}
if(that._active===0){that._trigger('stop');}});return jqXHR;};this._beforeSend(e,options);if(this.options.sequentialUploads||(this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending)){if(this.options.limitConcurrentUploads>1){slot=$.Deferred();this._slots.push(slot);pipe=slot.pipe(send);}else{this._sequence=this._sequence.pipe(send,send);pipe=this._sequence;}
pipe.abort=function(){aborted=[undefined,'abort','abort'];if(!jqXHR){if(slot){slot.rejectWith(options.context,aborted);}
return send();}
return jqXHR.abort();};return this._enhancePromise(pipe);}
return send();},_onAdd:function(e,data){var that=this,result=true,options=$.extend({},this.options,data),files=data.files,filesLength=files.length,limit=options.limitMultiFileUploads,limitSize=options.limitMultiFileUploadSize,overhead=options.limitMultiFileUploadSizeOverhead,batchSize=0,paramName=this._getParamName(options),paramNameSet,paramNameSlice,fileSet,i,j=0;if(!filesLength){return false;}
if(limitSize&&files[0].size===undefined){limitSize=undefined;}
if(!(options.singleFileUploads||limit||limitSize)||!this._isXHRUpload(options)){fileSet=[files];paramNameSet=[paramName];}else if(!(options.singleFileUploads||limitSize)&&limit){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i+=limit){fileSet.push(files.slice(i,i+limit));paramNameSlice=paramName.slice(i,i+limit);if(!paramNameSlice.length){paramNameSlice=paramName;}
paramNameSet.push(paramNameSlice);}}else if(!options.singleFileUploads&&limitSize){fileSet=[];paramNameSet=[];for(i=0;i<filesLength;i=i+1){batchSize+=files[i].size+overhead;if(i+1===filesLength||((batchSize+files[i+1].size+overhead)>limitSize)||(limit&&i+1-j>=limit)){fileSet.push(files.slice(j,i+1));paramNameSlice=paramName.slice(j,i+1);if(!paramNameSlice.length){paramNameSlice=paramName;}
paramNameSet.push(paramNameSlice);j=i+1;batchSize=0;}}}else{paramNameSet=paramName;}
data.originalFiles=files;$.each(fileSet||files,function(index,element){var newData=$.extend({},data);newData.files=fileSet?element:[element];newData.paramName=paramNameSet[index];that._initResponseObject(newData);that._initProgressObject(newData);that._addConvenienceMethods(e,newData);result=that._trigger('add',$.Event('add',{delegatedEvent:e}),newData);return result;});return result;},_replaceFileInput:function(data){var input=data.fileInput,inputClone=input.clone(true),restoreFocus=input.is(document.activeElement);data.fileInputClone=inputClone;$('<form></form>').append(inputClone)[0].reset();input.after(inputClone).detach();if(restoreFocus){inputClone.focus();}
$.cleanData(input.unbind('remove'));this.options.fileInput=this.options.fileInput.map(function(i,el){if(el===input[0]){return inputClone[0];}
return el;});if(input[0]===this.element[0]){this.element=inputClone;}},_handleFileTreeEntry:function(entry,path){var that=this,dfd=$.Deferred(),errorHandler=function(e){if(e&&!e.entry){e.entry=entry;}
dfd.resolve([e]);},successHandler=function(entries){that._handleFileTreeEntries(entries,path+entry.name+'/').done(function(files){dfd.resolve(files);}).fail(errorHandler);},readEntries=function(){dirReader.readEntries(function(results){if(!results.length){successHandler(entries);}else{entries=entries.concat(results);readEntries();}},errorHandler);},dirReader,entries=[];path=path||'';if(entry.isFile){if(entry._file){entry._file.relativePath=path;dfd.resolve(entry._file);}else{entry.file(function(file){file.relativePath=path;dfd.resolve(file);},errorHandler);}}else if(entry.isDirectory){dirReader=entry.createReader();readEntries();}else{dfd.resolve([]);}
return dfd.promise();},_handleFileTreeEntries:function(entries,path){var that=this;return $.when.apply($,$.map(entries,function(entry){return that._handleFileTreeEntry(entry,path);})).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_getDroppedFiles:function(dataTransfer){dataTransfer=dataTransfer||{};var items=dataTransfer.items;if(items&&items.length&&(items[0].webkitGetAsEntry||items[0].getAsEntry)){return this._handleFileTreeEntries($.map(items,function(item){var entry;if(item.webkitGetAsEntry){entry=item.webkitGetAsEntry();if(entry){entry._file=item.getAsFile();}
return entry;}
return item.getAsEntry();}));}
return $.Deferred().resolve($.makeArray(dataTransfer.files)).promise();},_getSingleFileInputFiles:function(fileInput){fileInput=$(fileInput);var entries=fileInput.prop('webkitEntries')||fileInput.prop('entries'),files,value;if(entries&&entries.length){return this._handleFileTreeEntries(entries);}
files=$.makeArray(fileInput.prop('files'));if(!files.length){value=fileInput.prop('value');if(!value){return $.Deferred().resolve([]).promise();}
files=[{name:value.replace(/^.*\\/,'')}];}else if(files[0].name===undefined&&files[0].fileName){$.each(files,function(index,file){file.name=file.fileName;file.size=file.fileSize;});}
return $.Deferred().resolve(files).promise();},_getFileInputFiles:function(fileInput){if(!(fileInput instanceof $)||fileInput.length===1){return this._getSingleFileInputFiles(fileInput);}
return $.when.apply($,$.map(fileInput,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments);});},_onChange:function(e){var that=this,data={fileInput:$(e.target),form:$(e.target.form)};this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;if(that.options.replaceFileInput){that._replaceFileInput(data);}
if(that._trigger('change',$.Event('change',{delegatedEvent:e}),data)!==false){that._onAdd(e,data);}});},_onPaste:function(e){var items=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,data={files:[]};if(items&&items.length){$.each(items,function(index,item){var file=item.getAsFile&&item.getAsFile();if(file){data.files.push(file);}});if(this._trigger('paste',$.Event('paste',{delegatedEvent:e}),data)!==false){this._onAdd(e,data);}}},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var that=this,dataTransfer=e.dataTransfer,data={};if(dataTransfer&&dataTransfer.files&&dataTransfer.files.length){e.preventDefault();this._getDroppedFiles(dataTransfer).always(function(files){data.files=files;if(that._trigger('drop',$.Event('drop',{delegatedEvent:e}),data)!==false){that._onAdd(e,data);}});}},_onDragOver:getDragHandler('dragover'),_onDragEnter:getDragHandler('dragenter'),_onDragLeave:getDragHandler('dragleave'),_initEventHandlers:function(){if(this._isXHRUpload(this.options)){this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave});this._on(this.options.pasteZone,{paste:this._onPaste});}
if($.support.fileInput){this._on(this.options.fileInput,{change:this._onChange});}},_destroyEventHandlers:function(){this._off(this.options.dropZone,'dragenter dragleave dragover drop');this._off(this.options.pasteZone,'paste');this._off(this.options.fileInput,'change');},_setOption:function(key,value){var reinit=$.inArray(key,this._specialOptions)!==-1;if(reinit){this._destroyEventHandlers();}
this._super(key,value);if(reinit){this._initSpecialOptions();this._initEventHandlers();}},_initSpecialOptions:function(){var options=this.options;if(options.fileInput===undefined){options.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]');}else if(!(options.fileInput instanceof $)){options.fileInput=$(options.fileInput);}
if(!(options.dropZone instanceof $)){options.dropZone=$(options.dropZone);}
if(!(options.pasteZone instanceof $)){options.pasteZone=$(options.pasteZone);}},_getRegExp:function(str){var parts=str.split('/'),modifiers=parts.pop();parts.shift();return new RegExp(parts.join('/'),modifiers);},_isRegExpOption:function(key,value){return key!=='url'&&$.type(value)==='string'&&/^\/.*\/[igm]{0,3}$/.test(value);},_initDataAttributes:function(){var that=this,options=this.options,data=this.element.data();$.each(this.element[0].attributes,function(index,attr){var key=attr.name.toLowerCase(),value;if(/^data-/.test(key)){key=key.slice(5).replace(/-[a-z]/g,function(str){return str.charAt(1).toUpperCase();});value=data[key];if(that._isRegExpOption(key,value)){value=that._getRegExp(value);}
options[key]=value;}});},_create:function(){this._initDataAttributes();this._initSpecialOptions();this._slots=[];this._sequence=this._getXHRPromise(true);this._sending=this._active=0;this._initProgressObject(this);this._initEventHandlers();},active:function(){return this._active;},progress:function(){return this._progress;},add:function(data){var that=this;if(!data||this.options.disabled){return;}
if(data.fileInput&&!data.files){this._getFileInputFiles(data.fileInput).always(function(files){data.files=files;that._onAdd(null,data);});}else{data.files=$.makeArray(data.files);this._onAdd(null,data);}},send:function(data){if(data&&!this.options.disabled){if(data.fileInput&&!data.files){var that=this,dfd=$.Deferred(),promise=dfd.promise(),jqXHR,aborted;promise.abort=function(){aborted=true;if(jqXHR){return jqXHR.abort();}
dfd.reject(null,'abort','abort');return promise;};this._getFileInputFiles(data.fileInput).always(function(files){if(aborted){return;}
if(!files.length){dfd.reject();return;}
data.files=files;jqXHR=that._onSend(null,data);jqXHR.then(function(result,textStatus,jqXHR){dfd.resolve(result,textStatus,jqXHR);},function(jqXHR,textStatus,errorThrown){dfd.reject(jqXHR,textStatus,errorThrown);});});return this._enhancePromise(promise);}
data.files=$.makeArray(data.files);if(data.files.length){return this._onSend(null,data);}}
return this._getXHRPromise(false,data&&data.context);}});}));var slice=[].slice,extend=function(child,parent){for(var key in parent){if(hasProp.call(parent,key))child[key]=parent[key];}
function ctor(){this.constructor=child;}
ctor.prototype=parent.prototype;child.prototype=new ctor();child.__super__=parent.prototype;return child;},hasProp={}.hasOwnProperty;(function(root,factory){var name,ref,results,value;if(typeof define==="function"&&define.amd){return define(["jquery"],factory);}else if(typeof exports==="object"){return(module.exports=factory(require("jquery")));}else{root.cloudinary||(root.cloudinary={});ref=factory(jQuery);results=[];for(name in ref){value=ref[name];results.push((root.cloudinary[name]=value));}
return results;}})(this,function(jQuery){var ArrayParam,BaseUtil,ClientHintsMetaTag,Cloudinary,CloudinaryJQuery,Condition,Configuration,Expression,ExpressionParam,FetchLayer,HtmlTag,ImageTag,Layer,LayerParam,Param,RangeParam,RawParam,SubtitlesLayer,TextLayer,Transformation,TransformationBase,TransformationParam,Util,VideoTag,addClass,allStrings,base64Encode,base64EncodeURL,camelCase,cloneDeep,cloudinary,compact,contains,convertKeys,crc32,defaults,difference,funcTag,functions,getAttribute,getData,hasClass,identity,isEmpty,isFunction,isNumberLike,isObject,isString,m,merge,objToString,objectProto,parameters,reWords,removeAttribute,setAttribute,setAttributes,setData,smartEscape,snakeCase,utf8_encode,webp,width,withCamelCaseKeys,withSnakeCaseKeys,without;allStrings=function(list){var item,j,len;for(j=0,len=list.length;j<len;j++){item=list[j];if(!Util.isString(item)){return false;}}
return true;};without=function(array,item){var i,length,newArray;newArray=[];i=-1;length=array.length;while(++i<length){if(array[i]!==item){newArray.push(array[i]);}}
return newArray;};isNumberLike=function(value){return value!=null&&!isNaN(parseFloat(value));};smartEscape=function(string,unsafe){if(unsafe==null){unsafe=/([^a-zA-Z0-9_.\-\/:]+)/g;}
return string.replace(unsafe,function(match){return match.split("").map(function(c){return("%"+
c.charCodeAt(0).toString(16).toUpperCase());}).join("");});};defaults=function(){var destination,sources;(destination=arguments[0]),(sources=2<=arguments.length?slice.call(arguments,1):[]);return sources.reduce(function(dest,source){var key,value;for(key in source){value=source[key];if(dest[key]===void 0){dest[key]=value;}}
return dest;},destination);};objectProto=Object.prototype;objToString=objectProto.toString;isObject=function(value){var type;type=typeof value;return!!value&&(type==="object"||type==="function");};funcTag="[object Function]";isFunction=function(value){return isObject(value)&&objToString.call(value)===funcTag;};reWords=(function(){var lower,upper;upper="[A-Z]";lower="[a-z]+";return RegExp(upper+"+(?="+
upper+
lower+")|"+
upper+"?"+
lower+"|"+
upper+"+|[0-9]+","g");})();camelCase=function(source){var i,word,words;words=source.match(reWords);words=(function(){var j,len,results;results=[];for(i=j=0,len=words.length;j<len;i=++j){word=words[i];word=word.toLocaleLowerCase();if(i){results.push(word.charAt(0).toLocaleUpperCase()+word.slice(1));}else{results.push(word);}}
return results;})();return words.join("");};snakeCase=function(source){var i,word,words;words=source.match(reWords);words=(function(){var j,len,results;results=[];for(i=j=0,len=words.length;j<len;i=++j){word=words[i];results.push(word.toLocaleLowerCase());}
return results;})();return words.join("_");};convertKeys=function(source,converter){var key,result,value;if(converter==null){converter=Util.identity;}
result={};for(key in source){value=source[key];key=converter(key);if(!Util.isEmpty(key)){result[key]=value;}}
return result;};withCamelCaseKeys=function(source){return convertKeys(source,Util.camelCase);};withSnakeCaseKeys=function(source){return convertKeys(source,Util.snakeCase);};base64Encode=typeof btoa!=="undefined"&&isFunction(btoa)?btoa:typeof Buffer!=="undefined"&&isFunction(Buffer)?function(input){if(!(input instanceof Buffer)){input=new Buffer.from(String(input),"binary");}
return input.toString("base64");}:function(input){throw new Error("No base64 encoding function found");};base64EncodeURL=function(input){var error1,ignore;try{input=decodeURI(input);}catch(error1){ignore=error1;}
input=encodeURI(input);return base64Encode(input);};BaseUtil={allStrings:allStrings,camelCase:camelCase,convertKeys:convertKeys,defaults:defaults,snakeCase:snakeCase,without:without,isFunction:isFunction,isNumberLike:isNumberLike,smartEscape:smartEscape,withCamelCaseKeys:withCamelCaseKeys,withSnakeCaseKeys:withSnakeCaseKeys,base64EncodeURL:base64EncodeURL};getData=function(element,name){return jQuery(element).data(name);};setData=function(element,name,value){return jQuery(element).data(name,value);};getAttribute=function(element,name){return jQuery(element).attr(name);};setAttribute=function(element,name,value){return jQuery(element).attr(name,value);};removeAttribute=function(element,name){return jQuery(element).removeAttr(name);};setAttributes=function(element,attributes){return jQuery(element).attr(attributes);};hasClass=function(element,name){return jQuery(element).hasClass(name);};addClass=function(element,name){return jQuery(element).addClass(name);};width=function(element){return jQuery(element).width();};isEmpty=function(item){return(item==null||((jQuery.isArray(item)||Util.isString(item))&&item.length===0)||(jQuery.isPlainObject(item)&&jQuery.isEmptyObject(item)));};isString=function(item){return(typeof item==="string"||(item!=null?item.toString():void 0)==="[object String]");};merge=function(){var args,i;args=function(){var j,len,results;results=[];for(j=0,len=arguments.length;j<len;j++){i=arguments[j];results.push(i);}
return results;}.apply(this,arguments);args.unshift(true);return jQuery.extend.apply(this,args);};compact=function(arr){var item,j,len,results;results=[];for(j=0,len=arr.length;j<len;j++){item=arr[j];if(item){results.push(item);}}
return results;};cloneDeep=function(){var args;args=jQuery.makeArray(arguments);args.unshift({});args.unshift(true);return jQuery.extend.apply(this,args);};contains=function(arr,item){var i,j,len;for(j=0,len=arr.length;j<len;j++){i=arr[j];if(i===item){return true;}}
return false;};difference=function(arr,values){var item,j,len,results;results=[];for(j=0,len=arr.length;j<len;j++){item=arr[j];if(!contains(values,item)){results.push(item);}}
return results;};functions=function(object){var i,results;results=[];for(i in object){if(jQuery.isFunction(object[i])){results.push(i);}}
return results;};identity=function(value){return value;};Util=jQuery.extend(BaseUtil,{hasClass:hasClass,addClass:addClass,getAttribute:getAttribute,setAttribute:setAttribute,removeAttribute:removeAttribute,setAttributes:setAttributes,getData:getData,setData:setData,width:width,isString:isString,isArray:jQuery.isArray,isEmpty:isEmpty,assign:jQuery.extend,merge:merge,cloneDeep:cloneDeep,compact:compact,contains:contains,difference:difference,functions:functions,identity:identity,isPlainObject:jQuery.isPlainObject,trim:jQuery.trim});utf8_encode=function(argString){var c1,enc,end,n,start,string,stringl,utftext;if(argString===null||typeof argString==="undefined"){return"";}
string=argString+"";utftext="";start=void 0;end=void 0;stringl=0;start=end=0;stringl=string.length;n=0;while(n<stringl){c1=string.charCodeAt(n);enc=null;if(c1<128){end++;}else if(c1>127&&c1<2048){enc=String.fromCharCode((c1>>6)|192,(c1&63)|128);}else{enc=String.fromCharCode((c1>>12)|224,((c1>>6)&63)|128,(c1&63)|128);}
if(enc!==null){if(end>start){utftext+=string.slice(start,end);}
utftext+=enc;start=end=n+1;}
n++;}
if(end>start){utftext+=string.slice(start,stringl);}
return utftext;};crc32=function(str){var crc,i,iTop,table,x,y;str=utf8_encode(str);table="00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D";crc=0;x=0;y=0;crc=crc^-1;i=0;iTop=str.length;while(i<iTop){y=(crc^str.charCodeAt(i))&0xff;x="0x"+table.substr(y*9,8);crc=(crc>>>8)^x;i++;}
crc=crc^-1;if(crc<0){crc+=4294967296;}
return crc;};Layer=(function(){function Layer(options){this.options={};if(options!=null){["resourceType","type","publicId","format"].forEach((function(_this){return function(key){var ref;return(_this.options[key]=(ref=options[key])!=null?ref:options[Util.snakeCase(key)]);};})(this));}}
Layer.prototype.resourceType=function(value){this.options.resourceType=value;return this;};Layer.prototype.type=function(value){this.options.type=value;return this;};Layer.prototype.publicId=function(value){this.options.publicId=value;return this;};Layer.prototype.getPublicId=function(){var ref;return(ref=this.options.publicId)!=null?ref.replace(/\//g,":"):void 0;};Layer.prototype.getFullPublicId=function(){if(this.options.format!=null){return this.getPublicId()+"."+this.options.format;}else{return this.getPublicId();}};Layer.prototype.format=function(value){this.options.format=value;return this;};Layer.prototype.toString=function(){var components;components=[];if(this.options.publicId==null){throw"Must supply publicId";}
if(!(this.options.resourceType==="image")){components.push(this.options.resourceType);}
if(!(this.options.type==="upload")){components.push(this.options.type);}
components.push(this.getFullPublicId());return Util.compact(components).join(":");};return Layer;})();FetchLayer=(function(superClass){extend(FetchLayer,superClass);function FetchLayer(options){FetchLayer.__super__.constructor.call(this,options);if(Util.isString(options)){this.options.url=options;}else if(options!=null?options.url:void 0){this.options.url=options.url;}}
FetchLayer.prototype.url=function(url){this.options.url=url;return this;};FetchLayer.prototype.toString=function(){return"fetch:"+cloudinary.Util.base64EncodeURL(this.options.url);};return FetchLayer;})(Layer);TextLayer=(function(superClass){extend(TextLayer,superClass);function TextLayer(options){var keys;TextLayer.__super__.constructor.call(this,options);keys=["resourceType","resourceType","fontFamily","fontSize","fontWeight","fontStyle","textDecoration","textAlign","stroke","letterSpacing","lineSpacing","text"];if(options!=null){keys.forEach((function(_this){return function(key){var ref;return(_this.options[key]=(ref=options[key])!=null?ref:options[Util.snakeCase(key)]);};})(this));}
this.options.resourceType="text";}
TextLayer.prototype.resourceType=function(resourceType){throw"Cannot modify resourceType for text layers";};TextLayer.prototype.type=function(type){throw"Cannot modify type for text layers";};TextLayer.prototype.format=function(format){throw"Cannot modify format for text layers";};TextLayer.prototype.fontFamily=function(fontFamily){this.options.fontFamily=fontFamily;return this;};TextLayer.prototype.fontSize=function(fontSize){this.options.fontSize=fontSize;return this;};TextLayer.prototype.fontWeight=function(fontWeight){this.options.fontWeight=fontWeight;return this;};TextLayer.prototype.fontStyle=function(fontStyle){this.options.fontStyle=fontStyle;return this;};TextLayer.prototype.textDecoration=function(textDecoration){this.options.textDecoration=textDecoration;return this;};TextLayer.prototype.textAlign=function(textAlign){this.options.textAlign=textAlign;return this;};TextLayer.prototype.stroke=function(stroke){this.options.stroke=stroke;return this;};TextLayer.prototype.letterSpacing=function(letterSpacing){this.options.letterSpacing=letterSpacing;return this;};TextLayer.prototype.lineSpacing=function(lineSpacing){this.options.lineSpacing=lineSpacing;return this;};TextLayer.prototype.text=function(text){this.options.text=text;return this;};TextLayer.prototype.toString=function(){var components,hasPublicId,hasStyle,publicId,re,res,start,style,text,textSource;style=this.textStyleIdentifier();if(this.options.publicId!=null){publicId=this.getFullPublicId();}
if(this.options.text!=null){hasPublicId=!Util.isEmpty(publicId);hasStyle=!Util.isEmpty(style);if((hasPublicId&&hasStyle)||(!hasPublicId&&!hasStyle)){throw"Must supply either style parameters or a public_id when providing text parameter in a text overlay/underlay, but not both!";}
re=/\$\([a-zA-Z]\w*\)/g;start=0;textSource=Util.smartEscape(this.options.text,/[,\/]/g);text="";while((res=re.exec(textSource))){text+=Util.smartEscape(textSource.slice(start,res.index));text+=res[0];start=res.index+res[0].length;}
text+=Util.smartEscape(textSource.slice(start));}
components=[this.options.resourceType,style,publicId,text];return Util.compact(components).join(":");};TextLayer.prototype.textStyleIdentifier=function(){var components;components=[];if(this.options.fontWeight!=="normal"){components.push(this.options.fontWeight);}
if(this.options.fontStyle!=="normal"){components.push(this.options.fontStyle);}
if(this.options.textDecoration!=="none"){components.push(this.options.textDecoration);}
components.push(this.options.textAlign);if(this.options.stroke!=="none"){components.push(this.options.stroke);}
if(!(Util.isEmpty(this.options.letterSpacing)&&!Util.isNumberLike(this.options.letterSpacing))){components.push("letter_spacing_"+this.options.letterSpacing);}
if(!(Util.isEmpty(this.options.lineSpacing)&&!Util.isNumberLike(this.options.lineSpacing))){components.push("line_spacing_"+this.options.lineSpacing);}
if(!Util.isEmpty(Util.compact(components))){if(Util.isEmpty(this.options.fontFamily)){throw"Must supply fontFamily. "+components;}
if(Util.isEmpty(this.options.fontSize)&&!Util.isNumberLike(this.options.fontSize)){throw"Must supply fontSize.";}}
components.unshift(this.options.fontFamily,this.options.fontSize);components=Util.compact(components).join("_");return components;};return TextLayer;})(Layer);SubtitlesLayer=(function(superClass){extend(SubtitlesLayer,superClass);function SubtitlesLayer(options){SubtitlesLayer.__super__.constructor.call(this,options);this.options.resourceType="subtitles";}
return SubtitlesLayer;})(TextLayer);Param=(function(){function Param(name,shortName,process){if(process==null){process=cloudinary.Util.identity;}
this.name=name;this.shortName=shortName;this.process=process;}
Param.prototype.set=function(origValue){this.origValue=origValue;return this;};Param.prototype.serialize=function(){var val,valid;val=this.value();valid=cloudinary.Util.isArray(val)||cloudinary.Util.isPlainObject(val)||cloudinary.Util.isString(val)?!cloudinary.Util.isEmpty(val):val!=null;if(this.shortName!=null&&valid){return this.shortName+"_"+val;}else{return"";}};Param.prototype.value=function(){return this.process(this.origValue);};Param.norm_color=function(value){return value!=null?value.replace(/^#/,"rgb:"):void 0;};Param.prototype.build_array=function(arg){if(arg==null){arg=[];}
if(cloudinary.Util.isArray(arg)){return arg;}else{return[arg];}};Param.process_video_params=function(param){var video;switch(param.constructor){case Object:video="";if("codec"in param){video=param["codec"];if("profile"in param){video+=":"+param["profile"];if("level"in param){video+=":"+param["level"];}}}
return video;case String:return param;default:return null;}};return Param;})();ArrayParam=(function(superClass){extend(ArrayParam,superClass);function ArrayParam(name,shortName,sep,process){if(sep==null){sep=".";}
this.sep=sep;ArrayParam.__super__.constructor.call(this,name,shortName,process);}
ArrayParam.prototype.serialize=function(){var arrayValue,flat,t;if(this.shortName!=null){arrayValue=this.value();if(cloudinary.Util.isEmpty(arrayValue)){return"";}else if(cloudinary.Util.isString(arrayValue)){return this.shortName+"_"+arrayValue;}else{flat=(function(){var j,len,results;results=[];for(j=0,len=arrayValue.length;j<len;j++){t=arrayValue[j];if(cloudinary.Util.isFunction(t.serialize)){results.push(t.serialize());}else{results.push(t);}}
return results;})();return this.shortName+"_"+flat.join(this.sep);}}else{return"";}};ArrayParam.prototype.value=function(){var j,len,ref,results,v;if(cloudinary.Util.isArray(this.origValue)){ref=this.origValue;results=[];for(j=0,len=ref.length;j<len;j++){v=ref[j];results.push(this.process(v));}
return results;}else{return this.process(this.origValue);}};ArrayParam.prototype.set=function(origValue){if(origValue==null||cloudinary.Util.isArray(origValue)){return ArrayParam.__super__.set.call(this,origValue);}else{return ArrayParam.__super__.set.call(this,[origValue]);}};return ArrayParam;})(Param);TransformationParam=(function(superClass){extend(TransformationParam,superClass);function TransformationParam(name,shortName,sep,process){if(shortName==null){shortName="t";}
if(sep==null){sep=".";}
this.sep=sep;TransformationParam.__super__.constructor.call(this,name,shortName,process);}
TransformationParam.prototype.serialize=function(){var joined,result,t;if(cloudinary.Util.isEmpty(this.value())){return"";}else if(cloudinary.Util.allStrings(this.value())){joined=this.value().join(this.sep);if(!cloudinary.Util.isEmpty(joined)){return this.shortName+"_"+joined;}else{return"";}}else{result=function(){var j,len,ref,results;ref=this.value();results=[];for(j=0,len=ref.length;j<len;j++){t=ref[j];if(t!=null){if(cloudinary.Util.isString(t)&&!cloudinary.Util.isEmpty(t)){results.push(this.shortName+"_"+t);}else if(cloudinary.Util.isFunction(t.serialize)){results.push(t.serialize());}else if(cloudinary.Util.isPlainObject(t)&&!cloudinary.Util.isEmpty(t)){results.push(new Transformation(t).serialize());}else{results.push(void 0);}}}
return results;}.call(this);return cloudinary.Util.compact(result);}};TransformationParam.prototype.set=function(origValue1){this.origValue=origValue1;if(cloudinary.Util.isArray(this.origValue)){return TransformationParam.__super__.set.call(this,this.origValue);}else{return TransformationParam.__super__.set.call(this,[this.origValue]);}};return TransformationParam;})(Param);RangeParam=(function(superClass){extend(RangeParam,superClass);function RangeParam(name,shortName,process){if(process==null){process=this.norm_range_value;}
RangeParam.__super__.constructor.call(this,name,shortName,process);}
RangeParam.norm_range_value=function(value){var modifier,offset;offset=String(value).match(new RegExp("^"+offset_any_pattern+"$"));if(offset){modifier=offset[5]!=null?"p":"";value=(offset[1]||offset[4])+modifier;}
return value;};return RangeParam;})(Param);RawParam=(function(superClass){extend(RawParam,superClass);function RawParam(name,shortName,process){if(process==null){process=cloudinary.Util.identity;}
RawParam.__super__.constructor.call(this,name,shortName,process);}
RawParam.prototype.serialize=function(){return this.value();};return RawParam;})(Param);LayerParam=(function(superClass){var LAYER_KEYWORD_PARAMS;extend(LayerParam,superClass);function LayerParam(){return LayerParam.__super__.constructor.apply(this,arguments);}
LayerParam.prototype.value=function(){var layerOptions,result;layerOptions=this.origValue;if(cloudinary.Util.isPlainObject(layerOptions)){layerOptions=Util.withCamelCaseKeys(layerOptions);if(layerOptions.resourceType==="text"||layerOptions.text!=null){result=new cloudinary.TextLayer(layerOptions).toString();}else if(layerOptions.resourceType==="subtitles"){result=new cloudinary.SubtitlesLayer(layerOptions).toString();}else if(layerOptions.resourceType==="fetch"||layerOptions.url!=null){result=new cloudinary.FetchLayer(layerOptions).toString();}else{result=new cloudinary.Layer(layerOptions).toString();}}else if(/^fetch:.+/.test(layerOptions)){result=new FetchLayer(layerOptions.substr(6)).toString();}else{result=layerOptions;}
return result;};LAYER_KEYWORD_PARAMS=[["font_weight","normal"],["font_style","normal"],["text_decoration","none"],["text_align",null],["stroke","none"],["letter_spacing",null],["line_spacing",null]];LayerParam.prototype.textStyle=function(layer){return new cloudinary.TextLayer(layer).textStyleIdentifier();};return LayerParam;})(Param);ExpressionParam=(function(superClass){extend(ExpressionParam,superClass);function ExpressionParam(){return ExpressionParam.__super__.constructor.apply(this,arguments);}
ExpressionParam.prototype.serialize=function(){return Expression.normalize(ExpressionParam.__super__.serialize.call(this));};return ExpressionParam;})(Param);parameters={};parameters.Param=Param;parameters.ArrayParam=ArrayParam;parameters.RangeParam=RangeParam;parameters.RawParam=RawParam;parameters.TransformationParam=TransformationParam;parameters.LayerParam=LayerParam;parameters.ExpressionParam=ExpressionParam;Expression=(function(){var faceCount;Expression.OPERATORS={"=":"eq","!=":"ne","<":"lt",">":"gt","<=":"lte",">=":"gte","&&":"and","||":"or","*":"mul","/":"div","+":"add","-":"sub"};Expression.PREDEFINED_VARS={aspect_ratio:"ar",aspectRatio:"ar",current_page:"cp",currentPage:"cp",face_count:"fc",faceCount:"fc",height:"h",initial_aspect_ratio:"iar",initial_height:"ih",initial_width:"iw",initialAspectRatio:"iar",initialHeight:"ih",initialWidth:"iw",page_count:"pc",page_x:"px",page_y:"py",pageCount:"pc",pageX:"px",pageY:"py",tags:"tags",width:"w"};Expression.BOUNDRY="[ _]+";function Expression(expressionStr){this.expressions=[];if(expressionStr!=null){this.expressions.push(Expression.normalize(expressionStr));}}
Expression["new"]=function(expressionStr){return new this(expressionStr);};Expression.normalize=function(expression){var operators,pattern,replaceRE;if(expression==null){return expression;}
expression=String(expression);operators="\\|\\||>=|<=|&&|!=|>|=|<|/|-|\\+|\\*";pattern="(("+
operators+")(?=[ _])|"+
Object.keys(Expression.PREDEFINED_VARS).join("|")+")";replaceRE=new RegExp(pattern,"g");expression=expression.replace(replaceRE,function(match){return Expression.OPERATORS[match]||Expression.PREDEFINED_VARS[match];});return expression.replace(/[ _]+/g,"_");};Expression.prototype.serialize=function(){return Expression.normalize(this.expressions.join("_"));};Expression.prototype.toString=function(){return this.serialize();};Expression.prototype.getParent=function(){return this.parent;};Expression.prototype.setParent=function(parent){this.parent=parent;return this;};Expression.prototype.predicate=function(name,operator,value){if(Expression.OPERATORS[operator]!=null){operator=Expression.OPERATORS[operator];}
this.expressions.push(name+"_"+operator+"_"+value);return this;};Expression.prototype.and=function(){this.expressions.push("and");return this;};Expression.prototype.or=function(){this.expressions.push("or");return this;};Expression.prototype.then=function(){return this.getParent()["if"](this.toString());};Expression.prototype.height=function(operator,value){return this.predicate("h",operator,value);};Expression.prototype.width=function(operator,value){return this.predicate("w",operator,value);};Expression.prototype.aspectRatio=function(operator,value){return this.predicate("ar",operator,value);};Expression.prototype.pageCount=function(operator,value){return this.predicate("pc",operator,value);};Expression.prototype.faceCount=function(operator,value){return this.predicate("fc",operator,value);};Expression.prototype.value=function(value){this.expressions.push(value);return this;};Expression.variable=function(name,value){return new this(name).value(value);};Expression.width=function(){return new this("width");};Expression.height=function(){return new this("height");};Expression.initialWidth=function(){return new this("initialWidth");};Expression.initialHeight=function(){return new this("initialHeight");};Expression.aspectRatio=function(){return new this("aspectRatio");};Expression.initialAspectRatio=function(){return new this("initialAspectRatio");};Expression.pageCount=function(){return new this("pageCount");};faceCount=function(){return new this("faceCount");};Expression.currentPage=function(){return new this("currentPage");};Expression.tags=function(){return new this("tags");};Expression.pageX=function(){return new this("pageX");};Expression.pageY=function(){return new this("pageY");};return Expression;})();Condition=(function(superClass){extend(Condition,superClass);function Condition(conditionStr){Condition.__super__.constructor.call(this,conditionStr);}
Condition.prototype.height=function(operator,value){return this.predicate("h",operator,value);};Condition.prototype.width=function(operator,value){return this.predicate("w",operator,value);};Condition.prototype.aspectRatio=function(operator,value){return this.predicate("ar",operator,value);};Condition.prototype.pageCount=function(operator,value){return this.predicate("pc",operator,value);};Condition.prototype.faceCount=function(operator,value){return this.predicate("fc",operator,value);};return Condition;})(Expression);Configuration=(function(){var DEFAULT_CONFIGURATION_PARAMS,ref;DEFAULT_CONFIGURATION_PARAMS={responsive_class:"cld-responsive",responsive_use_breakpoints:true,round_dpr:true,secure:(typeof window!=="undefined"&&window!==null?(ref=window.location)!=null?ref.protocol:void 0:void 0)==="https:"};Configuration.CONFIG_PARAMS=["api_key","api_secret","callback","cdn_subdomain","cloud_name","cname","private_cdn","protocol","resource_type","responsive","responsive_class","responsive_use_breakpoints","responsive_width","round_dpr","secure","secure_cdn_subdomain","secure_distribution","shorten","type","upload_preset","url_suffix","use_root_path","version"];function Configuration(options){if(options==null){options={};}
this.configuration=Util.cloneDeep(options);Util.defaults(this.configuration,DEFAULT_CONFIGURATION_PARAMS);}
Configuration.prototype.init=function(){this.fromEnvironment();this.fromDocument();return this;};Configuration.prototype.set=function(name,value){this.configuration[name]=value;return this;};Configuration.prototype.get=function(name){return this.configuration[name];};Configuration.prototype.merge=function(config){if(config==null){config={};}
Util.assign(this.configuration,Util.cloneDeep(config));return this;};Configuration.prototype.fromDocument=function(){var el,j,len,meta_elements;meta_elements=typeof document!=="undefined"&&document!==null?document.querySelectorAll('meta[name^="cloudinary_"]'):void 0;if(meta_elements){for(j=0,len=meta_elements.length;j<len;j++){el=meta_elements[j];this.configuration[el.getAttribute("name").replace("cloudinary_","")]=el.getAttribute("content");}}
return this;};Configuration.prototype.fromEnvironment=function(){var cloudinary_url,j,k,len,query,ref1,ref2,ref3,uri,uriRegex,v,value;cloudinary_url=typeof process!=="undefined"&&process!==null?(ref1=process.env)!=null?ref1.CLOUDINARY_URL:void 0:void 0;if(cloudinary_url!=null){uriRegex=/cloudinary:\/\/(?:(\w+)(?:\:([\w-]+))?@)?([\w\.-]+)(?:\/([^?]*))?(?:\?(.+))?/;uri=uriRegex.exec(cloudinary_url);if(uri){if(uri[3]!=null){this.configuration["cloud_name"]=uri[3];}
if(uri[1]!=null){this.configuration["api_key"]=uri[1];}
if(uri[2]!=null){this.configuration["api_secret"]=uri[2];}
if(uri[4]!=null){this.configuration["private_cdn"]=uri[4]!=null;}
if(uri[4]!=null){this.configuration["secure_distribution"]=uri[4];}
query=uri[5];if(query!=null){ref2=query.split("&");for(j=0,len=ref2.length;j<len;j++){value=ref2[j];(ref3=value.split("=")),(k=ref3[0]),(v=ref3[1]);if(v==null){v=true;}
this.configuration[k]=v;}}}}
return this;};Configuration.prototype.config=function(new_config,new_value){switch(false){case new_value===void 0:this.set(new_config,new_value);return this.configuration;case!Util.isString(new_config):return this.get(new_config);case!Util.isPlainObject(new_config):this.merge(new_config);return this.configuration;default:return this.configuration;}};Configuration.prototype.toOptions=function(){return Util.cloneDeep(this.configuration);};return Configuration;})();TransformationBase=(function(){var VAR_NAME_RE,lastArgCallback,processVar;VAR_NAME_RE=/^\$[a-zA-Z0-9]+$/;TransformationBase.prototype.trans_separator="/";TransformationBase.prototype.param_separator=",";lastArgCallback=function(args){var callback;callback=args!=null?args[args.length-1]:void 0;if(Util.isFunction(callback)){return callback;}else{return void 0;}};function TransformationBase(options){var parent,trans;if(options==null){options={};}
parent=void 0;trans={};this.toOptions||(this.toOptions=function(withChain){var key,list,opt,ref,ref1,tr,value;if(withChain==null){withChain=true;}
opt={};for(key in trans){value=trans[key];opt[key]=value.origValue;}
ref=this.otherOptions;for(key in ref){value=ref[key];if(value!==void 0){opt[key]=value;}}
if(withChain&&!Util.isEmpty(this.chained)){list=function(){var j,len,ref1,results;ref1=this.chained;results=[];for(j=0,len=ref1.length;j<len;j++){tr=ref1[j];results.push(tr.toOptions());}
return results;}.call(this);list.push(opt);opt={};ref1=this.otherOptions;for(key in ref1){value=ref1[key];if(value!==void 0){opt[key]=value;}}
opt.transformation=list;}
return opt;});this.setParent||(this.setParent=function(object){parent=object;if(object!=null){this.fromOptions(typeof object.toOptions==="function"?object.toOptions():void 0);}
return this;});this.getParent||(this.getParent=function(){return parent;});this.param||(this.param=function(value,name,abbr,defaultValue,process){if(process==null){if(Util.isFunction(defaultValue)){process=defaultValue;}else{process=Util.identity;}}
trans[name]=new Param(name,abbr,process).set(value);return this;});this.rawParam||(this.rawParam=function(value,name,abbr,defaultValue,process){if(process==null){process=Util.identity;}
process=lastArgCallback(arguments);trans[name]=new RawParam(name,abbr,process).set(value);return this;});this.rangeParam||(this.rangeParam=function(value,name,abbr,defaultValue,process){if(process==null){process=Util.identity;}
process=lastArgCallback(arguments);trans[name]=new RangeParam(name,abbr,process).set(value);return this;});this.arrayParam||(this.arrayParam=function(value,name,abbr,sep,defaultValue,process){if(sep==null){sep=":";}
if(defaultValue==null){defaultValue=[];}
if(process==null){process=Util.identity;}
process=lastArgCallback(arguments);trans[name]=new ArrayParam(name,abbr,sep,process).set(value);return this;});this.transformationParam||(this.transformationParam=function(value,name,abbr,sep,defaultValue,process){if(sep==null){sep=".";}
if(process==null){process=Util.identity;}
process=lastArgCallback(arguments);trans[name]=new TransformationParam(name,abbr,sep,process).set(value);return this;});this.layerParam||(this.layerParam=function(value,name,abbr){trans[name]=new LayerParam(name,abbr).set(value);return this;});this.getValue||(this.getValue=function(name){var ref,ref1;return(ref=(ref1=trans[name])!=null?ref1.value():void 0)!=null?ref:this.otherOptions[name];});this.get||(this.get=function(name){return trans[name];});this.remove||(this.remove=function(name){var temp;switch(false){case trans[name]==null:temp=trans[name];delete trans[name];return temp.origValue;case this.otherOptions[name]==null:temp=this.otherOptions[name];delete this.otherOptions[name];return temp;default:return null;}});this.keys||(this.keys=function(){var key;return(function(){var results;results=[];for(key in trans){if(key!=null){results.push(key.match(VAR_NAME_RE)?key:Util.snakeCase(key));}}
return results;})().sort();});this.toPlainObject||(this.toPlainObject=function(){var hash,key,list,tr;hash={};for(key in trans){hash[key]=trans[key].value();if(Util.isPlainObject(hash[key])){hash[key]=Util.cloneDeep(hash[key]);}}
if(!Util.isEmpty(this.chained)){list=function(){var j,len,ref,results;ref=this.chained;results=[];for(j=0,len=ref.length;j<len;j++){tr=ref[j];results.push(tr.toPlainObject());}
return results;}.call(this);list.push(hash);hash={transformation:list};}
return hash;});this.chain||(this.chain=function(){var names,tr;names=Object.getOwnPropertyNames(trans);if(names.length!==0){tr=new this.constructor(this.toOptions(false));this.resetTransformations();this.chained.push(tr);}
return this;});this.resetTransformations||(this.resetTransformations=function(){trans={};return this;});this.otherOptions||(this.otherOptions={});this.chained=[];if(!Util.isEmpty(options)){this.fromOptions(options);}}
TransformationBase.prototype.fromOptions=function(options){var key,opt;if(options instanceof TransformationBase){this.fromTransformation(options);}else{options||(options={});if(Util.isString(options)||Util.isArray(options)){options={transformation:options};}
options=Util.cloneDeep(options,function(value){if(value instanceof TransformationBase){return new value.constructor(value.toOptions());}});if(options["if"]){this.set("if",options["if"]);delete options["if"];}
for(key in options){opt=options[key];if(key.match(VAR_NAME_RE)){if(key!=="$attr"){this.set("variable",key,opt);}}else{this.set(key,opt);}}}
return this;};TransformationBase.prototype.fromTransformation=function(other){var j,key,len,ref;if(other instanceof TransformationBase){ref=other.keys();for(j=0,len=ref.length;j<len;j++){key=ref[j];this.set(key,other.get(key).origValue);}}
return this;};TransformationBase.prototype.set=function(){var camelKey,key,values;(key=arguments[0]),(values=2<=arguments.length?slice.call(arguments,1):[]);camelKey=Util.camelCase(key);if(Util.contains(Transformation.methods,camelKey)){this[camelKey].apply(this,values);}else{this.otherOptions[key]=values[0];}
return this;};TransformationBase.prototype.hasLayer=function(){return this.getValue("overlay")||this.getValue("underlay");};TransformationBase.prototype.serialize=function(){var ifParam,j,len,paramList,ref,ref1,ref2,ref3,ref4,resultArray,t,tr,transformationList,transformationString,transformations,value,variables,vars;resultArray=function(){var j,len,ref,results;ref=this.chained;results=[];for(j=0,len=ref.length;j<len;j++){tr=ref[j];results.push(tr.serialize());}
return results;}.call(this);paramList=this.keys();transformations=(ref=this.get("transformation"))!=null?ref.serialize():void 0;ifParam=(ref1=this.get("if"))!=null?ref1.serialize():void 0;variables=processVar((ref2=this.get("variables"))!=null?ref2.value():void 0);paramList=Util.difference(paramList,["transformation","if","variables"]);vars=[];transformationList=[];for(j=0,len=paramList.length;j<len;j++){t=paramList[j];if(t.match(VAR_NAME_RE)){vars.push(t+"_"+
Expression.normalize((ref3=this.get(t))!=null?ref3.value():void 0));}else{transformationList.push((ref4=this.get(t))!=null?ref4.serialize():void 0);}}
switch(false){case!Util.isString(transformations):transformationList.push(transformations);break;case!Util.isArray(transformations):resultArray=resultArray.concat(transformations);}
transformationList=(function(){var l,len1,results;results=[];for(l=0,len1=transformationList.length;l<len1;l++){value=transformationList[l];if((Util.isArray(value)&&!Util.isEmpty(value))||(!Util.isArray(value)&&value)){results.push(value);}}
return results;})();transformationList=vars.sort().concat(variables).concat(transformationList.sort());if(ifParam==="if_end"){transformationList.push(ifParam);}else if(!Util.isEmpty(ifParam)){transformationList.unshift(ifParam);}
transformationString=Util.compact(transformationList).join(this.param_separator);if(!Util.isEmpty(transformationString)){resultArray.push(transformationString);}
return Util.compact(resultArray).join(this.trans_separator);};TransformationBase.prototype.listNames=function(){return Transformation.methods;};TransformationBase.prototype.toHtmlAttributes=function(){var attrName,height,j,key,len,options,ref,ref1,ref2,ref3,value;options={};ref=this.otherOptions;for(key in ref){value=ref[key];if(!!Util.contains(Transformation.PARAM_NAMES,Util.snakeCase(key))){continue;}
attrName=/^html_/.test(key)?key.slice(5):key;options[attrName]=value;}
ref1=this.keys();for(j=0,len=ref1.length;j<len;j++){key=ref1[j];if(/^html_/.test(key)){options[Util.camelCase(key.slice(5))]=this.getValue(key);}}
if(!(this.hasLayer()||this.getValue("angle")||Util.contains(["fit","limit","lfill"],this.getValue("crop")))){width=(ref2=this.get("width"))!=null?ref2.origValue:void 0;height=(ref3=this.get("height"))!=null?ref3.origValue:void 0;if(parseFloat(width)>=1.0){if(options["width"]==null){options["width"]=width;}}
if(parseFloat(height)>=1.0){if(options["height"]==null){options["height"]=height;}}}
return options;};TransformationBase.prototype.isValidParamName=function(name){return Transformation.methods.indexOf(Util.camelCase(name))>=0;};TransformationBase.prototype.toHtml=function(){var ref;return(ref=this.getParent())!=null?typeof ref.toHtml==="function"?ref.toHtml():void 0:void 0;};TransformationBase.prototype.toString=function(){return this.serialize();};processVar=function(varArray){var j,len,name,ref,results,v;if(Util.isArray(varArray)){results=[];for(j=0,len=varArray.length;j<len;j++){(ref=varArray[j]),(name=ref[0]),(v=ref[1]);results.push(name+"_"+Expression.normalize(v));}
return results;}else{return varArray;}};return TransformationBase;})();Transformation=(function(superClass){extend(Transformation,superClass);function Transformation(options){if(options==null){options={};}
Transformation.__super__.constructor.call(this,options);this;}
Transformation["new"]=function(args){return new Transformation(args);};Transformation.prototype.angle=function(value){return this.arrayParam(value,"angle","a",".",Expression.normalize);};Transformation.prototype.audioCodec=function(value){return this.param(value,"audio_codec","ac");};Transformation.prototype.audioFrequency=function(value){return this.param(value,"audio_frequency","af");};Transformation.prototype.aspectRatio=function(value){return this.param(value,"aspect_ratio","ar",Expression.normalize);};Transformation.prototype.background=function(value){return this.param(value,"background","b",Param.norm_color);};Transformation.prototype.bitRate=function(value){return this.param(value,"bit_rate","br");};Transformation.prototype.border=function(value){return this.param(value,"border","bo",function(border){if(Util.isPlainObject(border)){border=Util.assign({},{color:"black",width:2},border);return border.width+"px_solid_"+Param.norm_color(border.color);}else{return border;}});};Transformation.prototype.color=function(value){return this.param(value,"color","co",Param.norm_color);};Transformation.prototype.colorSpace=function(value){return this.param(value,"color_space","cs");};Transformation.prototype.crop=function(value){return this.param(value,"crop","c");};Transformation.prototype.defaultImage=function(value){return this.param(value,"default_image","d");};Transformation.prototype.delay=function(value){return this.param(value,"delay","dl");};Transformation.prototype.density=function(value){return this.param(value,"density","dn");};Transformation.prototype.duration=function(value){return this.rangeParam(value,"duration","du");};Transformation.prototype.dpr=function(value){return this.param(value,"dpr","dpr",(function(_this){return function(dpr){dpr=dpr.toString();if(dpr!=null?dpr.match(/^\d+$/):void 0){return dpr+".0";}else{return Expression.normalize(dpr);}};})(this));};Transformation.prototype.effect=function(value){return this.arrayParam(value,"effect","e",":",Expression.normalize);};Transformation.prototype["else"]=function(){return this["if"]("else");};Transformation.prototype.endIf=function(){return this["if"]("end");};Transformation.prototype.endOffset=function(value){return this.rangeParam(value,"end_offset","eo");};Transformation.prototype.fallbackContent=function(value){return this.param(value,"fallback_content");};Transformation.prototype.fetchFormat=function(value){return this.param(value,"fetch_format","f");};Transformation.prototype.format=function(value){return this.param(value,"format");};Transformation.prototype.flags=function(value){return this.arrayParam(value,"flags","fl",".");};Transformation.prototype.gravity=function(value){return this.param(value,"gravity","g");};Transformation.prototype.height=function(value){return this.param(value,"height","h",(function(_this){return function(){if(_this.getValue("crop")||_this.getValue("overlay")||_this.getValue("underlay")){return Expression.normalize(value);}else{return null;}};})(this));};Transformation.prototype.htmlHeight=function(value){return this.param(value,"html_height");};Transformation.prototype.htmlWidth=function(value){return this.param(value,"html_width");};Transformation.prototype["if"]=function(value){var i,ifVal,j,ref,trIf,trRest;if(value==null){value="";}
switch(value){case"else":this.chain();return this.param(value,"if","if");case"end":this.chain();for(i=j=ref=this.chained.length-1;j>=0;i=j+=-1){ifVal=this.chained[i].getValue("if");if(ifVal==="end"){break;}else if(ifVal!=null){trIf=Transformation["new"]()["if"](ifVal);this.chained[i].remove("if");trRest=this.chained[i];this.chained[i]=Transformation["new"]().transformation([trIf,trRest]);if(ifVal!=="else"){break;}}}
return this.param(value,"if","if");case"":return Condition["new"]().setParent(this);default:return this.param(value,"if","if",function(value){return Condition["new"](value).toString();});}};Transformation.prototype.keyframeInterval=function(value){return this.param(value,"keyframe_interval","ki");};Transformation.prototype.offset=function(value){var end_o,ref,start_o;(ref=Util.isFunction(value!=null?value.split:void 0)?value.split(".."):Util.isArray(value)?value:[null,null]),(start_o=ref[0]),(end_o=ref[1]);if(start_o!=null){this.startOffset(start_o);}
if(end_o!=null){return this.endOffset(end_o);}};Transformation.prototype.opacity=function(value){return this.param(value,"opacity","o",Expression.normalize);};Transformation.prototype.overlay=function(value){return this.layerParam(value,"overlay","l");};Transformation.prototype.page=function(value){return this.param(value,"page","pg");};Transformation.prototype.poster=function(value){return this.param(value,"poster");};Transformation.prototype.prefix=function(value){return this.param(value,"prefix","p");};Transformation.prototype.quality=function(value){return this.param(value,"quality","q",Expression.normalize);};Transformation.prototype.radius=function(value){return this.param(value,"radius","r",Expression.normalize);};Transformation.prototype.rawTransformation=function(value){return this.rawParam(value,"raw_transformation");};Transformation.prototype.size=function(value){var height,ref;if(Util.isFunction(value!=null?value.split:void 0)){(ref=value.split("x")),(width=ref[0]),(height=ref[1]);this.width(width);return this.height(height);}};Transformation.prototype.sourceTypes=function(value){return this.param(value,"source_types");};Transformation.prototype.sourceTransformation=function(value){return this.param(value,"source_transformation");};Transformation.prototype.startOffset=function(value){return this.rangeParam(value,"start_offset","so");};Transformation.prototype.streamingProfile=function(value){return this.param(value,"streaming_profile","sp");};Transformation.prototype.transformation=function(value){return this.transformationParam(value,"transformation","t");};Transformation.prototype.underlay=function(value){return this.layerParam(value,"underlay","u");};Transformation.prototype.variable=function(name,value){return this.param(value,name,name);};Transformation.prototype.variables=function(values){return this.arrayParam(values,"variables");};Transformation.prototype.videoCodec=function(value){return this.param(value,"video_codec","vc",Param.process_video_params);};Transformation.prototype.videoSampling=function(value){return this.param(value,"video_sampling","vs");};Transformation.prototype.width=function(value){return this.param(value,"width","w",(function(_this){return function(){if(_this.getValue("crop")||_this.getValue("overlay")||_this.getValue("underlay")){return Expression.normalize(value);}else{return null;}};})(this));};Transformation.prototype.x=function(value){return this.param(value,"x","x",Expression.normalize);};Transformation.prototype.y=function(value){return this.param(value,"y","y",Expression.normalize);};Transformation.prototype.zoom=function(value){return this.param(value,"zoom","z",Expression.normalize);};return Transformation;})(TransformationBase);Transformation.methods||(Transformation.methods=Util.difference(Util.functions(Transformation.prototype),Util.functions(TransformationBase.prototype)));Transformation.PARAM_NAMES||(Transformation.PARAM_NAMES=(function(){var j,len,ref,results;ref=Transformation.methods;results=[];for(j=0,len=ref.length;j<len;j++){m=ref[j];results.push(Util.snakeCase(m));}
return results;})().concat(Configuration.CONFIG_PARAMS));HtmlTag=(function(){var toAttribute;function HtmlTag(name,publicId,options){var transformation;this.name=name;this.publicId=publicId;if(options==null){if(Util.isPlainObject(publicId)){options=publicId;this.publicId=void 0;}else{options={};}}
transformation=new Transformation(options);transformation.setParent(this);this.transformation=function(){return transformation;};}
HtmlTag["new"]=function(name,publicId,options){return new this(name,publicId,options);};toAttribute=function(key,value){if(!value){return void 0;}else if(value===true){return key;}else{return key+'="'+value+'"';}};HtmlTag.prototype.htmlAttrs=function(attrs){var key,pairs,value;return(pairs=(function(){var results;results=[];for(key in attrs){value=attrs[key];if(value){results.push(toAttribute(key,value));}}
return results;})().sort().join(" "));};HtmlTag.prototype.getOptions=function(){return this.transformation().toOptions();};HtmlTag.prototype.getOption=function(name){return this.transformation().getValue(name);};HtmlTag.prototype.attributes=function(){return this.transformation().toHtmlAttributes();};HtmlTag.prototype.setAttr=function(name,value){this.transformation().set("html_"+name,value);return this;};HtmlTag.prototype.getAttr=function(name){return this.attributes()["html_"+name]||this.attributes()[name];};HtmlTag.prototype.removeAttr=function(name){var ref;return(ref=this.transformation().remove("html_"+name))!=null?ref:this.transformation().remove(name);};HtmlTag.prototype.content=function(){return"";};HtmlTag.prototype.openTag=function(){return"<"+this.name+" "+this.htmlAttrs(this.attributes())+">";};HtmlTag.prototype.closeTag=function(){return"</"+this.name+">";};HtmlTag.prototype.toHtml=function(){return this.openTag()+this.content()+this.closeTag();};HtmlTag.prototype.toDOM=function(){var element,name,ref,value;if(!Util.isFunction(typeof document!=="undefined"&&document!==null?document.createElement:void 0)){throw"Can't create DOM if document is not present!";}
element=document.createElement(this.name);ref=this.attributes();for(name in ref){value=ref[name];element[name]=value;}
return element;};HtmlTag.isResponsive=function(tag,responsiveClass){var dataSrc;dataSrc=Util.getData(tag,"src-cache")||Util.getData(tag,"src");return Util.hasClass(tag,responsiveClass)&&/\bw_auto\b/.exec(dataSrc);};return HtmlTag;})();ImageTag=(function(superClass){extend(ImageTag,superClass);function ImageTag(publicId,options){if(options==null){options={};}
ImageTag.__super__.constructor.call(this,"img",publicId,options);}
ImageTag.prototype.closeTag=function(){return"";};ImageTag.prototype.attributes=function(){var attr,options,srcAttribute;attr=ImageTag.__super__.attributes.call(this)||[];options=this.getOptions();srcAttribute=options.responsive&&!options.client_hints?"data-src":"src";if(attr[srcAttribute]==null){attr[srcAttribute]=new Cloudinary(this.getOptions()).url(this.publicId);}
return attr;};return ImageTag;})(HtmlTag);VideoTag=(function(superClass){var DEFAULT_POSTER_OPTIONS,DEFAULT_VIDEO_SOURCE_TYPES,VIDEO_TAG_PARAMS;extend(VideoTag,superClass);VIDEO_TAG_PARAMS=["source_types","source_transformation","fallback_content","poster"];DEFAULT_VIDEO_SOURCE_TYPES=["webm","mp4","ogv"];DEFAULT_POSTER_OPTIONS={format:"jpg",resource_type:"video"};function VideoTag(publicId,options){if(options==null){options={};}
options=Util.defaults({},options,Cloudinary.DEFAULT_VIDEO_PARAMS);VideoTag.__super__.constructor.call(this,"video",publicId.replace(/\.(mp4|ogv|webm)$/,""),options);}
VideoTag.prototype.setSourceTransformation=function(value){this.transformation().sourceTransformation(value);return this;};VideoTag.prototype.setSourceTypes=function(value){this.transformation().sourceTypes(value);return this;};VideoTag.prototype.setPoster=function(value){this.transformation().poster(value);return this;};VideoTag.prototype.setFallbackContent=function(value){this.transformation().fallbackContent(value);return this;};VideoTag.prototype.content=function(){var cld,fallback,innerTags,mimeType,sourceTransformation,sourceTypes,src,srcType,transformation,videoType;sourceTypes=this.transformation().getValue("source_types");sourceTransformation=this.transformation().getValue("source_transformation");fallback=this.transformation().getValue("fallback_content");if(Util.isArray(sourceTypes)){cld=new Cloudinary(this.getOptions());innerTags=function(){var j,len,results;results=[];for(j=0,len=sourceTypes.length;j<len;j++){srcType=sourceTypes[j];transformation=sourceTransformation[srcType]||{};src=cld.url(""+this.publicId,Util.defaults({},transformation,{resource_type:"video",format:srcType}));videoType=srcType==="ogv"?"ogg":srcType;mimeType="video/"+videoType;results.push("<source "+
this.htmlAttrs({src:src,type:mimeType})+">");}
return results;}.call(this);}else{innerTags=[];}
return innerTags.join("")+fallback;};VideoTag.prototype.attributes=function(){var a,attr,j,len,poster,ref,ref1,sourceTypes;sourceTypes=this.getOption("source_types");poster=(ref=this.getOption("poster"))!=null?ref:{};if(Util.isPlainObject(poster)){defaults=poster.public_id!=null?Cloudinary.DEFAULT_IMAGE_PARAMS:DEFAULT_POSTER_OPTIONS;poster=new Cloudinary(this.getOptions()).url((ref1=poster.public_id)!=null?ref1:this.publicId,Util.defaults({},poster,defaults));}
attr=VideoTag.__super__.attributes.call(this)||[];for(j=0,len=attr.length;j<len;j++){a=attr[j];if(!Util.contains(VIDEO_TAG_PARAMS)){attr=a;}}
if(!Util.isArray(sourceTypes)){attr["src"]=new Cloudinary(this.getOptions()).url(this.publicId,{resource_type:"video",format:sourceTypes});}
if(poster!=null){attr["poster"]=poster;}
return attr;};return VideoTag;})(HtmlTag);ClientHintsMetaTag=(function(superClass){extend(ClientHintsMetaTag,superClass);function ClientHintsMetaTag(options){ClientHintsMetaTag.__super__.constructor.call(this,"meta",void 0,Util.assign({"http-equiv":"Accept-CH",content:"DPR, Viewport-Width, Width"},options));}
ClientHintsMetaTag.prototype.closeTag=function(){return"";};return ClientHintsMetaTag;})(HtmlTag);Cloudinary=(function(){var AKAMAI_SHARED_CDN,CF_SHARED_CDN,DEFAULT_POSTER_OPTIONS,DEFAULT_VIDEO_SOURCE_TYPES,OLD_AKAMAI_SHARED_CDN,SHARED_CDN,VERSION,absolutize,applyBreakpoints,cdnSubdomainNumber,closestAbove,cloudinaryUrlPrefix,defaultBreakpoints,finalizeResourceType,findContainerWidth,maxWidth,updateDpr;VERSION="2.4.0";CF_SHARED_CDN="d3jpl91pxevbkh.cloudfront.net";OLD_AKAMAI_SHARED_CDN="cloudinary-a.akamaihd.net";AKAMAI_SHARED_CDN="res.cloudinary.com";SHARED_CDN=AKAMAI_SHARED_CDN;DEFAULT_POSTER_OPTIONS={format:"jpg",resource_type:"video"};DEFAULT_VIDEO_SOURCE_TYPES=["webm","mp4","ogv"];Cloudinary.DEFAULT_IMAGE_PARAMS={resource_type:"image",transformation:[],type:"upload"};Cloudinary.DEFAULT_VIDEO_PARAMS={fallback_content:"",resource_type:"video",source_transformation:{},source_types:DEFAULT_VIDEO_SOURCE_TYPES,transformation:[],type:"upload"};function Cloudinary(options){var configuration;this.devicePixelRatioCache={};this.responsiveConfig={};this.responsiveResizeInitialized=false;configuration=new Configuration(options);this.config=function(newConfig,newValue){return configuration.config(newConfig,newValue);};this.fromDocument=function(){configuration.fromDocument();return this;};this.fromEnvironment=function(){configuration.fromEnvironment();return this;};this.init=function(){configuration.init();return this;};}
Cloudinary["new"]=function(options){return new this(options);};finalizeResourceType=function(resourceType,type,urlSuffix,useRootPath,shorten){var options;if(Util.isPlainObject(resourceType)){options=resourceType;resourceType=options.resource_type;type=options.type;urlSuffix=options.url_suffix;useRootPath=options.use_root_path;shorten=options.shorten;}
if(type==null){type="upload";}
if(urlSuffix!=null){if(resourceType==="image"&&type==="upload"){resourceType="images";type=null;}else if(resourceType==="image"&&type==="private"){resourceType="private_images";type=null;}else if(resourceType==="raw"&&type==="upload"){resourceType="files";type=null;}else{throw new Error("URL Suffix only supported for image/upload and raw/upload");}}
if(useRootPath){if((resourceType==="image"&&type==="upload")||resourceType==="images"){resourceType=null;type=null;}else{throw new Error("Root path only supported for image/upload");}}
if(shorten&&resourceType==="image"&&type==="upload"){resourceType="iu";type=null;}
return[resourceType,type].join("/");};absolutize=function(url){var prefix;if(!url.match(/^https?:\//)){prefix=document.location.protocol+"//"+document.location.host;if(url[0]==="?"){prefix+=document.location.pathname;}else if(url[0]!=="/"){prefix+=document.location.pathname.replace(/\/[^\/]*$/,"/");}
url=prefix+url;}
return url;};Cloudinary.prototype.url=function(publicId,options){var error,error1,prefix,ref,resourceTypeAndType,transformation,transformationString,url,version;if(options==null){options={};}
if(!publicId){return publicId;}
if(options instanceof Transformation){options=options.toOptions();}
options=Util.defaults({},options,this.config(),Cloudinary.DEFAULT_IMAGE_PARAMS);if(options.type==="fetch"){options.fetch_format=options.fetch_format||options.format;publicId=absolutize(publicId);}
transformation=new Transformation(options);transformationString=transformation.serialize();if(!options.cloud_name){throw"Unknown cloud_name";}
if(options.url_suffix&&!options.private_cdn){throw"URL Suffix only supported in private CDN";}
if(publicId.search("/")>=0&&!publicId.match(/^v[0-9]+/)&&!publicId.match(/^https?:\//)&&!((ref=options.version)!=null?ref.toString():void 0)){options.version=1;}
if(publicId.match(/^https?:/)){if(options.type==="upload"||options.type==="asset"){url=publicId;}else{publicId=encodeURIComponent(publicId).replace(/%3A/g,":").replace(/%2F/g,"/");}}else{try{publicId=decodeURIComponent(publicId);}catch(error1){error=error1;}
publicId=encodeURIComponent(publicId).replace(/%3A/g,":").replace(/%2F/g,"/");if(options.url_suffix){if(options.url_suffix.match(/[\.\/]/)){throw"url_suffix should not include . or /";}
publicId=publicId+"/"+options.url_suffix;}
if(options.format){if(!options.trust_public_id){publicId=publicId.replace(/\.(jpg|png|gif|webp)$/,"");}
publicId=publicId+"."+options.format;}}
prefix=cloudinaryUrlPrefix(publicId,options);resourceTypeAndType=finalizeResourceType(options.resource_type,options.type,options.url_suffix,options.use_root_path,options.shorten);version=options.version?"v"+options.version:"";return(url||Util.compact([prefix,resourceTypeAndType,transformationString,version,publicId]).join("/").replace(/([^:])\/+/g,"$1/"));};Cloudinary.prototype.video_url=function(publicId,options){options=Util.assign({resource_type:"video"},options);return this.url(publicId,options);};Cloudinary.prototype.video_thumbnail_url=function(publicId,options){options=Util.assign({},DEFAULT_POSTER_OPTIONS,options);return this.url(publicId,options);};Cloudinary.prototype.transformation_string=function(options){return new Transformation(options).serialize();};Cloudinary.prototype.image=function(publicId,options){var client_hints,img,ref,ref1;if(options==null){options={};}
img=this.imageTag(publicId,options);client_hints=(ref=(ref1=options.client_hints)!=null?ref1:this.config("client_hints"))!=null?ref:false;if(!(options.src!=null||client_hints)){img.setAttr("src","");}
img=img.toDOM();if(!client_hints){Util.setData(img,"src-cache",this.url(publicId,options));this.cloudinary_update(img,options);}
return img;};Cloudinary.prototype.imageTag=function(publicId,options){var tag;tag=new ImageTag(publicId,this.config());tag.transformation().fromOptions(options);return tag;};Cloudinary.prototype.video_thumbnail=function(publicId,options){return this.image(publicId,Util.merge({},DEFAULT_POSTER_OPTIONS,options));};Cloudinary.prototype.facebook_profile_image=function(publicId,options){return this.image(publicId,Util.assign({type:"facebook"},options));};Cloudinary.prototype.twitter_profile_image=function(publicId,options){return this.image(publicId,Util.assign({type:"twitter"},options));};Cloudinary.prototype.twitter_name_profile_image=function(publicId,options){return this.image(publicId,Util.assign({type:"twitter_name"},options));};Cloudinary.prototype.gravatar_image=function(publicId,options){return this.image(publicId,Util.assign({type:"gravatar"},options));};Cloudinary.prototype.fetch_image=function(publicId,options){return this.image(publicId,Util.assign({type:"fetch"},options));};Cloudinary.prototype.video=function(publicId,options){if(options==null){options={};}
return this.videoTag(publicId,options).toHtml();};Cloudinary.prototype.videoTag=function(publicId,options){options=Util.defaults({},options,this.config());return new VideoTag(publicId,options);};Cloudinary.prototype.sprite_css=function(publicId,options){options=Util.assign({type:"sprite"},options);if(!publicId.match(/.css$/)){options.format="css";}
return this.url(publicId,options);};Cloudinary.prototype.responsive=function(options,bootstrap){var ref,ref1,ref2,responsiveClass,responsiveResize,timeout;if(bootstrap==null){bootstrap=true;}
this.responsiveConfig=Util.merge(this.responsiveConfig||{},options);responsiveClass=(ref=this.responsiveConfig["responsive_class"])!=null?ref:this.config("responsive_class");if(bootstrap){this.cloudinary_update("img."+responsiveClass+", img.cld-hidpi",this.responsiveConfig);}
responsiveResize=(ref1=(ref2=this.responsiveConfig["responsive_resize"])!=null?ref2:this.config("responsive_resize"))!=null?ref1:true;if(responsiveResize&&!this.responsiveResizeInitialized){this.responsiveConfig.resizing=this.responsiveResizeInitialized=true;timeout=null;return window.addEventListener("resize",(function(_this){return function(){var debounce,ref3,ref4,reset,run,wait,waitFunc;debounce=(ref3=(ref4=_this.responsiveConfig["responsive_debounce"])!=null?ref4:_this.config("responsive_debounce"))!=null?ref3:100;reset=function(){if(timeout){clearTimeout(timeout);return(timeout=null);}};run=function(){return _this.cloudinary_update("img."+responsiveClass,_this.responsiveConfig);};waitFunc=function(){reset();return run();};wait=function(){reset();return(timeout=setTimeout(waitFunc,debounce));};if(debounce){return wait();}else{return run();}};})(this));}};Cloudinary.prototype.calc_breakpoint=function(element,width,steps){var breakpoints,point;breakpoints=Util.getData(element,"breakpoints")||Util.getData(element,"stoppoints")||this.config("breakpoints")||this.config("stoppoints")||defaultBreakpoints;if(Util.isFunction(breakpoints)){return breakpoints(width,steps);}else{if(Util.isString(breakpoints)){breakpoints=(function(){var j,len,ref,results;ref=breakpoints.split(",");results=[];for(j=0,len=ref.length;j<len;j++){point=ref[j];results.push(parseInt(point));}
return results;})().sort(function(a,b){return a-b;});}
return closestAbove(breakpoints,width);}};Cloudinary.prototype.calc_stoppoint=Cloudinary.prototype.calc_breakpoint;Cloudinary.prototype.device_pixel_ratio=function(roundDpr){var dpr,dprString;if(roundDpr==null){roundDpr=true;}
dpr=(typeof window!=="undefined"&&window!==null?window.devicePixelRatio:void 0)||1;if(roundDpr){dpr=Math.ceil(dpr);}
if(dpr<=0||dpr===NaN){dpr=1;}
dprString=dpr.toString();if(dprString.match(/^\d+$/)){dprString+=".0";}
return dprString;};defaultBreakpoints=function(width,steps){if(steps==null){steps=100;}
return steps*Math.ceil(width/steps);};closestAbove=function(list,value){var i;i=list.length-2;while(i>=0&&list[i]>=value){i--;}
return list[i+1];};cdnSubdomainNumber=function(publicId){return crc32(publicId)%5+1;};cloudinaryUrlPrefix=function(publicId,options){var cdnPart,host,path,protocol,ref,subdomain;if(((ref=options.cloud_name)!=null?ref.indexOf("/"):void 0)===0){return"/res"+options.cloud_name;}
protocol="http://";cdnPart="";subdomain="res";host=".cloudinary.com";path="/"+options.cloud_name;if(options.protocol){protocol=options.protocol+"//";}
if(options.private_cdn){cdnPart=options.cloud_name+"-";path="";}
if(options.cdn_subdomain){subdomain="res-"+cdnSubdomainNumber(publicId);}
if(options.secure){protocol="https://";if(options.secure_cdn_subdomain===false){subdomain="res";}
if(options.secure_distribution!=null&&options.secure_distribution!==OLD_AKAMAI_SHARED_CDN&&options.secure_distribution!==SHARED_CDN){cdnPart="";subdomain="";host=options.secure_distribution;}}else if(options.cname){protocol="http://";cdnPart="";subdomain=options.cdn_subdomain?"a"+(crc32(publicId)%5+1)+".":"";host=options.cname;}
return[protocol,cdnPart,subdomain,host,path].join("");};Cloudinary.prototype.processImageTags=function(nodes,options){var images,imgOptions,node,publicId,url;if(options==null){options={};}
if(Util.isEmpty(nodes)){return this;}
options=Util.defaults({},options,this.config());images=function(){var j,len,ref,results;results=[];for(j=0,len=nodes.length;j<len;j++){node=nodes[j];if(!(((ref=node.tagName)!=null?ref.toUpperCase():void 0)==="IMG")){continue;}
imgOptions=Util.assign({width:node.getAttribute("width"),height:node.getAttribute("height"),src:node.getAttribute("src")},options);publicId=imgOptions["source"]||imgOptions["src"];delete imgOptions["source"];delete imgOptions["src"];url=this.url(publicId,imgOptions);imgOptions=new Transformation(imgOptions).toHtmlAttributes();Util.setData(node,"src-cache",url);node.setAttribute("width",imgOptions.width);node.setAttribute("height",imgOptions.height);results.push(node);}
return results;}.call(this);this.cloudinary_update(images,options);return this;};applyBreakpoints=function(tag,width,steps,options){var ref,ref1,ref2,responsive_use_breakpoints;responsive_use_breakpoints=(ref=(ref1=(ref2=options["responsive_use_breakpoints"])!=null?ref2:options["responsive_use_stoppoints"])!=null?ref1:this.config("responsive_use_breakpoints"))!=null?ref:this.config("responsive_use_stoppoints");if(!responsive_use_breakpoints||(responsive_use_breakpoints==="resize"&&!options.resizing)){return width;}else{return this.calc_breakpoint(tag,width,steps);}};findContainerWidth=function(element){var containerWidth,style;containerWidth=0;while((element=element!=null?element.parentNode:void 0)instanceof
Element&&!containerWidth){style=window.getComputedStyle(element);if(!/^inline/.test(style.display)){containerWidth=Util.width(element);}}
return containerWidth;};updateDpr=function(dataSrc,roundDpr){return dataSrc.replace(/\bdpr_(1\.0|auto)\b/g,"dpr_"+this.device_pixel_ratio(roundDpr));};maxWidth=function(requiredWidth,tag){var imageWidth;imageWidth=Util.getData(tag,"width")||0;if(requiredWidth>imageWidth){imageWidth=requiredWidth;Util.setData(tag,"width",requiredWidth);}
return imageWidth;};Cloudinary.prototype.cloudinary_update=function(elements,options){var containerWidth,dataSrc,j,len,match,ref,ref1,ref2,ref3,ref4,ref5,requiredWidth,responsive,responsiveClass,roundDpr,setUrl,tag;if(options==null){options={};}
if(elements===null){return this;}
responsive=(ref=(ref1=options.responsive)!=null?ref1:this.config("responsive"))!=null?ref:false;elements=(function(){switch(false){case!Util.isArray(elements):return elements;case elements.constructor.name!=="NodeList":return elements;case!Util.isString(elements):return document.querySelectorAll(elements);default:return[elements];}})();responsiveClass=(ref2=(ref3=this.responsiveConfig["responsive_class"])!=null?ref3:options["responsive_class"])!=null?ref2:this.config("responsive_class");roundDpr=(ref4=options["round_dpr"])!=null?ref4:this.config("round_dpr");for(j=0,len=elements.length;j<len;j++){tag=elements[j];if(!((ref5=tag.tagName)!=null?ref5.match(/img/i):void 0)){continue;}
setUrl=true;if(responsive){Util.addClass(tag,responsiveClass);}
dataSrc=Util.getData(tag,"src-cache")||Util.getData(tag,"src");if(!Util.isEmpty(dataSrc)){dataSrc=updateDpr.call(this,dataSrc,roundDpr);if(HtmlTag.isResponsive(tag,responsiveClass)){containerWidth=findContainerWidth(tag);if(containerWidth!==0){switch(false){case!/w_auto:breakpoints/.test(dataSrc):requiredWidth=maxWidth(containerWidth,tag);dataSrc=dataSrc.replace(/w_auto:breakpoints([_0-9]*)(:[0-9]+)?/,"w_auto:breakpoints$1:"+requiredWidth);break;case!(match=/w_auto(:(\d+))?/.exec(dataSrc)):requiredWidth=applyBreakpoints.call(this,tag,containerWidth,match[2],options);requiredWidth=maxWidth(requiredWidth,tag);dataSrc=dataSrc.replace(/w_auto[^,\/]*/g,"w_"+requiredWidth);}
Util.removeAttribute(tag,"width");if(!options.responsive_preserve_height){Util.removeAttribute(tag,"height");}}else{setUrl=false;}}
if(setUrl){Util.setAttribute(tag,"src",dataSrc);}}}
return this;};Cloudinary.prototype.transformation=function(options){return Transformation["new"](this.config()).fromOptions(options).setParent(this);};return Cloudinary;})();CloudinaryJQuery=(function(superClass){extend(CloudinaryJQuery,superClass);function CloudinaryJQuery(options){CloudinaryJQuery.__super__.constructor.call(this,options);}
CloudinaryJQuery.prototype.image=function(publicId,options){var client_hints,img,ref,ref1;if(options==null){options={};}
img=this.imageTag(publicId,options);client_hints=(ref=(ref1=options.client_hints)!=null?ref1:this.config("client_hints"))!=null?ref:false;if(!(options.src!=null||client_hints)){img.setAttr("src","");}
img=jQuery(img.toHtml());if(!client_hints){img.data("src-cache",this.url(publicId,options)).cloudinary_update(options);}
return img;};CloudinaryJQuery.prototype.responsive=function(options){var ref,ref1,ref2,responsiveClass,responsiveConfig,responsiveResizeInitialized,responsive_resize,timeout;responsiveConfig=jQuery.extend(responsiveConfig||{},options);responsiveClass=(ref=this.responsiveConfig["responsive_class"])!=null?ref:this.config("responsive_class");jQuery("img."+responsiveClass+", img.cld-hidpi").cloudinary_update(responsiveConfig);responsive_resize=(ref1=(ref2=responsiveConfig["responsive_resize"])!=null?ref2:this.config("responsive_resize"))!=null?ref1:true;if(responsive_resize&&!responsiveResizeInitialized){responsiveConfig.resizing=responsiveResizeInitialized=true;timeout=null;return jQuery(window).on("resize",(function(_this){return function(){var debounce,ref3,ref4,reset,run,wait;debounce=(ref3=(ref4=responsiveConfig["responsive_debounce"])!=null?ref4:_this.config("responsive_debounce"))!=null?ref3:100;reset=function(){if(timeout){clearTimeout(timeout);return(timeout=null);}};run=function(){return jQuery("img."+responsiveClass).cloudinary_update(responsiveConfig);};wait=function(){reset();return setTimeout(function(){reset();return run();},debounce);};if(debounce){return wait();}else{return run();}};})(this));}};return CloudinaryJQuery;})(Cloudinary);jQuery.fn.cloudinary=function(options){this.filter("img").each(function(){var img_options,public_id,url;img_options=jQuery.extend({width:jQuery(this).attr("width"),height:jQuery(this).attr("height"),src:jQuery(this).attr("src")},jQuery(this).data(),options);public_id=img_options.source||img_options.src;delete img_options.source;delete img_options.src;url=jQuery.cloudinary.url(public_id,img_options);img_options=new Transformation(img_options).toHtmlAttributes();return jQuery(this).data("src-cache",url).attr({width:img_options.width,height:img_options.height});}).cloudinary_update(options);return this;};jQuery.fn.cloudinary_update=function(options){if(options==null){options={};}
jQuery.cloudinary.cloudinary_update(this.filter("img").toArray(),options);return this;};webp=null;jQuery.fn.webpify=function(options,webp_options){var that,webp_canary;if(options==null){options={};}
that=this;webp_options=webp_options!=null?webp_options:options;if(!webp){webp=jQuery.Deferred();webp_canary=new Image();webp_canary.onerror=webp.reject;webp_canary.onload=webp.resolve;webp_canary.src="data:image/webp;base64,UklGRi4AAABXRUJQVlA4TCEAAAAvAUAAEB8wAiMwAgSSNtse/cXjxyCCmrYNWPwmHRH9jwMA";}
jQuery(function(){return webp.done(function(){return jQuery(that).cloudinary(jQuery.extend({},webp_options,{format:"webp"}));}).fail(function(){return jQuery(that).cloudinary(options);});});return this;};jQuery.fn.fetchify=function(options){return this.cloudinary(jQuery.extend(options,{type:"fetch"}));};jQuery.cloudinary=new CloudinaryJQuery();jQuery.cloudinary.fromDocument();CloudinaryJQuery.prototype.delete_by_token=function(delete_token,options){var cloud_name,dataType,url;options=options||{};url=options.url;if(!url){cloud_name=options.cloud_name||jQuery.cloudinary.config().cloud_name;url="https://api.cloudinary.com/v1_1/"+cloud_name+"/delete_by_token";}
dataType=jQuery.support.xhrFileUpload?"json":"iframe json";return jQuery.ajax({url:url,method:"POST",data:{token:delete_token},headers:{"X-Requested-With":"XMLHttpRequest"},dataType:dataType});};CloudinaryJQuery.prototype.unsigned_upload_tag=function(upload_preset,upload_params,options){return jQuery("<input/>").attr({type:"file",name:"file"}).unsigned_cloudinary_upload(upload_preset,upload_params,options);};jQuery.fn.cloudinary_fileupload=function(options){var cloud_name,initializing,resource_type,type,upload_url;if(!Util.isFunction(jQuery.fn.fileupload)){return this;}
initializing=!this.data("blueimpFileupload");if(initializing){options=jQuery.extend({maxFileSize:20000000,dataType:"json",headers:{"X-Requested-With":"XMLHttpRequest"}},options);}
this.fileupload(options);if(initializing){this.bind("fileuploaddone",function(e,data){var add_field,field,multiple,upload_info;if(data.result.error){return;}
data.result.path=["v",data.result.version,"/",data.result.public_id,data.result.format?"."+data.result.format:""].join("");if(data.cloudinaryField&&data.form.length>0){upload_info=[data.result.resource_type,data.result.type,data.result.path].join("/")+"#"+
data.result.signature;multiple=jQuery(e.target).prop("multiple");add_field=function(){return jQuery("<input/>").attr({type:"hidden",name:data.cloudinaryField}).val(upload_info).appendTo(data.form);};if(multiple){add_field();}else{field=jQuery(data.form).find('input[name="'+data.cloudinaryField+'"]');if(field.length>0){field.val(upload_info);}else{add_field();}}}
return jQuery(e.target).trigger("cloudinarydone",data);});this.bind("fileuploadsend",function(e,data){data.headers=jQuery.extend({},data.headers,{"X-Unique-Upload-Id":(Math.random()*10000000000).toString(16)});return true;});this.bind("fileuploadstart",function(e){return jQuery(e.target).trigger("cloudinarystart");});this.bind("fileuploadstop",function(e){return jQuery(e.target).trigger("cloudinarystop");});this.bind("fileuploadprogress",function(e,data){return jQuery(e.target).trigger("cloudinaryprogress",data);});this.bind("fileuploadprogressall",function(e,data){return jQuery(e.target).trigger("cloudinaryprogressall",data);});this.bind("fileuploadfail",function(e,data){return jQuery(e.target).trigger("cloudinaryfail",data);});this.bind("fileuploadalways",function(e,data){return jQuery(e.target).trigger("cloudinaryalways",data);});if(!this.fileupload("option").url){cloud_name=options.cloud_name||jQuery.cloudinary.config().cloud_name;resource_type=options.resource_type||"auto";type=options.type||"upload";upload_url="https://api.cloudinary.com/v1_1/"+
cloud_name+"/"+
resource_type+"/"+
type;this.fileupload("option","url",upload_url);}}
return this;};jQuery.fn.cloudinary_upload_url=function(remote_url){if(!Util.isFunction(jQuery.fn.fileupload)){return this;}
this.fileupload("option","formData").file=remote_url;this.fileupload("add",{files:[remote_url]});delete this.fileupload("option","formData").file;return this;};jQuery.fn.unsigned_cloudinary_upload=function(upload_preset,upload_params,options){var attr,attrs_to_move,html_options,i,key,value;if(upload_params==null){upload_params={};}
if(options==null){options={};}
upload_params=Util.cloneDeep(upload_params);options=Util.cloneDeep(options);attrs_to_move=["cloud_name","resource_type","type"];i=0;while(i<attrs_to_move.length){attr=attrs_to_move[i];if(upload_params[attr]){options[attr]=upload_params[attr];delete upload_params[attr];}
i++;}
for(key in upload_params){value=upload_params[key];if(Util.isPlainObject(value)){upload_params[key]=jQuery.map(value,function(v,k){if(Util.isString(v)){v=v.replace(/[\|=]/g,"\\$&");}
return k+"="+v;}).join("|");}else if(Util.isArray(value)){if(value.length>0&&jQuery.isArray(value[0])){upload_params[key]=jQuery.map(value,function(array_value){return array_value.join(",");}).join("|");}else{upload_params[key]=value.join(",");}}}
if(!upload_params.callback){upload_params.callback="/cloudinary_cors.html";}
upload_params.upload_preset=upload_preset;options.formData=upload_params;if(options.cloudinary_field){options.cloudinaryField=options.cloudinary_field;delete options.cloudinary_field;}
html_options=options.html||{};html_options["class"]=Util.trim("cloudinary_fileupload "+(html_options["class"]||""));if(options.multiple){html_options.multiple=true;}
this.attr(html_options).cloudinary_fileupload(options);return this;};jQuery.cloudinary=new CloudinaryJQuery();cloudinary={utf8_encode:utf8_encode,crc32:crc32,Util:Util,Condition:Condition,Transformation:Transformation,Configuration:Configuration,HtmlTag:HtmlTag,ImageTag:ImageTag,VideoTag:VideoTag,ClientHintsMetaTag:ClientHintsMetaTag,Layer:Layer,FetchLayer:FetchLayer,TextLayer:TextLayer,SubtitlesLayer:SubtitlesLayer,Cloudinary:Cloudinary,VERSION:"2.4.0",CloudinaryJQuery:CloudinaryJQuery};return cloudinary;});(function($){$.Jcrop=function(obj,opt){var options=$.extend({},$.Jcrop.defaults),docOffset,_ua=navigator.userAgent.toLowerCase(),is_msie=/msie/.test(_ua),ie6mode=/msie [1-6]\./.test(_ua);function px(n){return Math.round(n)+'px';}
function cssClass(cl){return options.baseClass+'-'+cl;}
function supportsColorFade(){return $.fx.step.hasOwnProperty('backgroundColor');}
function getPos(obj)
{var pos=$(obj).offset();return[pos.left,pos.top];}
function mouseAbs(e)
{return[(e.pageX-docOffset[0]),(e.pageY-docOffset[1])];}
function setOptions(opt)
{if(typeof(opt)!=='object')opt={};options=$.extend(options,opt);$.each(['onChange','onSelect','onRelease','onDblClick'],function(i,e){if(typeof(options[e])!=='function')options[e]=function(){};});}
function startDragMode(mode,pos,touch)
{docOffset=getPos($img);Tracker.setCursor(mode==='move'?mode:mode+'-resize');if(mode==='move'){return Tracker.activateHandlers(createMover(pos),doneSelect,touch);}
var fc=Coords.getFixed();var opp=oppLockCorner(mode);var opc=Coords.getCorner(oppLockCorner(opp));Coords.setPressed(Coords.getCorner(opp));Coords.setCurrent(opc);Tracker.activateHandlers(dragmodeHandler(mode,fc),doneSelect,touch);}
function dragmodeHandler(mode,f)
{return function(pos){if(!options.aspectRatio){switch(mode){case'e':pos[1]=f.y2;break;case'w':pos[1]=f.y2;break;case'n':pos[0]=f.x2;break;case's':pos[0]=f.x2;break;}}else{switch(mode){case'e':pos[1]=f.y+1;break;case'w':pos[1]=f.y+1;break;case'n':pos[0]=f.x+1;break;case's':pos[0]=f.x+1;break;}}
Coords.setCurrent(pos);Selection.update();};}
function createMover(pos)
{var lloc=pos;KeyManager.watchKeys();return function(pos){Coords.moveOffset([pos[0]-lloc[0],pos[1]-lloc[1]]);lloc=pos;Selection.update();};}
function oppLockCorner(ord)
{switch(ord){case'n':return'sw';case's':return'nw';case'e':return'nw';case'w':return'ne';case'ne':return'sw';case'nw':return'se';case'se':return'nw';case'sw':return'ne';}}
function createDragger(ord)
{return function(e){if(options.disabled){return false;}
if((ord==='move')&&!options.allowMove){return false;}
docOffset=getPos($img);btndown=true;startDragMode(ord,mouseAbs(e));e.stopPropagation();e.preventDefault();return false;};}
function presize($obj,w,h)
{var nw=$obj.width(),nh=$obj.height();if((nw>w)&&w>0){nw=w;nh=(w/$obj.width())*$obj.height();}
if((nh>h)&&h>0){nh=h;nw=(h/$obj.height())*$obj.width();}
xscale=$obj.width()/nw;yscale=$obj.height()/nh;$obj.width(nw).height(nh);}
function unscale(c)
{return{x:c.x*xscale,y:c.y*yscale,x2:c.x2*xscale,y2:c.y2*yscale,w:c.w*xscale,h:c.h*yscale};}
function doneSelect(pos)
{var c=Coords.getFixed();if((c.w>options.minSelect[0])&&(c.h>options.minSelect[1])){Selection.enableHandles();Selection.done();}else{Selection.release();}
Tracker.setCursor(options.allowSelect?'crosshair':'default');}
function newSelection(e)
{if(options.disabled){return false;}
if(!options.allowSelect){return false;}
btndown=true;docOffset=getPos($img);Selection.disableHandles();Tracker.setCursor('crosshair');var pos=mouseAbs(e);Coords.setPressed(pos);Selection.update();Tracker.activateHandlers(selectDrag,doneSelect,e.type.substring(0,5)==='touch');KeyManager.watchKeys();e.stopPropagation();e.preventDefault();return false;}
function selectDrag(pos)
{Coords.setCurrent(pos);Selection.update();}
function newTracker()
{var trk=$('<div></div>').addClass(cssClass('tracker'));if(is_msie){trk.css({opacity:0,backgroundColor:'white'});}
return trk;}
if(typeof(obj)!=='object'){obj=$(obj)[0];}
if(typeof(opt)!=='object'){opt={};}
setOptions(opt);var img_css={border:'none',visibility:'visible',margin:0,padding:0,position:'absolute',top:0,left:0};var $origimg=$(obj),img_mode=true;if(obj.tagName=='IMG'){if($origimg[0].width!=0&&$origimg[0].height!=0){$origimg.width($origimg[0].width);$origimg.height($origimg[0].height);}else{var tempImage=new Image();tempImage.src=$origimg[0].src;$origimg.width(tempImage.width);$origimg.height(tempImage.height);}
var $img=$origimg.clone().removeAttr('id').css(img_css).show();$img.width($origimg.width());$img.height($origimg.height());$origimg.after($img).hide();}else{$img=$origimg.css(img_css).show();img_mode=false;if(options.shade===null){options.shade=true;}}
presize($img,options.boxWidth,options.boxHeight);var boundx=$img.width(),boundy=$img.height(),$div=$('<div />').width(boundx).height(boundy).addClass(cssClass('holder')).css({position:'relative',backgroundColor:options.bgColor}).insertAfter($origimg).append($img);if(options.addClass){$div.addClass(options.addClass);}
var $img2=$('<div />'),$img_holder=$('<div />').width('100%').height('100%').css({zIndex:310,position:'absolute',overflow:'hidden'}),$hdl_holder=$('<div />').width('100%').height('100%').css('zIndex',320),$sel=$('<div />').css({position:'absolute',zIndex:600}).dblclick(function(){var c=Coords.getFixed();options.onDblClick.call(api,c);}).insertBefore($img).append($img_holder,$hdl_holder);if(img_mode){$img2=$('<img />').attr('src',$img.attr('src')).css(img_css).width(boundx).height(boundy),$img_holder.append($img2);}
if(ie6mode){$sel.css({overflowY:'hidden'});}
var bound=options.boundary;var $trk=newTracker().width(boundx+(bound*2)).height(boundy+(bound*2)).css({position:'absolute',top:px(-bound),left:px(-bound),zIndex:290}).mousedown(newSelection);var bgcolor=options.bgColor,bgopacity=options.bgOpacity,xlimit,ylimit,xmin,ymin,xscale,yscale,enabled=true,btndown,animating,shift_down;docOffset=getPos($img);var Touch=(function(){function hasTouchSupport(){var support={},events=['touchstart','touchmove','touchend'],el=document.createElement('div'),i;try{for(i=0;i<events.length;i++){var eventName=events[i];eventName='on'+eventName;var isSupported=(eventName in el);if(!isSupported){el.setAttribute(eventName,'return;');isSupported=typeof el[eventName]=='function';}
support[events[i]]=isSupported;}
return support.touchstart&&support.touchend&&support.touchmove;}
catch(err){return false;}}
function detectSupport(){if((options.touchSupport===true)||(options.touchSupport===false))return options.touchSupport;else return hasTouchSupport();}
return{createDragger:function(ord){return function(e){if(options.disabled){return false;}
if((ord==='move')&&!options.allowMove){return false;}
docOffset=getPos($img);btndown=true;startDragMode(ord,mouseAbs(Touch.cfilter(e)),true);e.stopPropagation();e.preventDefault();return false;};},newSelection:function(e){return newSelection(Touch.cfilter(e));},cfilter:function(e){e.pageX=e.originalEvent.changedTouches[0].pageX;e.pageY=e.originalEvent.changedTouches[0].pageY;return e;},isSupported:hasTouchSupport,support:detectSupport()};}());var Coords=(function(){var x1=0,y1=0,x2=0,y2=0,ox,oy;function setPressed(pos)
{pos=rebound(pos);x2=x1=pos[0];y2=y1=pos[1];}
function setCurrent(pos)
{pos=rebound(pos);ox=pos[0]-x2;oy=pos[1]-y2;x2=pos[0];y2=pos[1];}
function getOffset()
{return[ox,oy];}
function moveOffset(offset)
{var ox=offset[0],oy=offset[1];if(0>x1+ox){ox-=ox+x1;}
if(0>y1+oy){oy-=oy+y1;}
if(boundy<y2+oy){oy+=boundy-(y2+oy);}
if(boundx<x2+ox){ox+=boundx-(x2+ox);}
x1+=ox;x2+=ox;y1+=oy;y2+=oy;}
function getCorner(ord)
{var c=getFixed();switch(ord){case'ne':return[c.x2,c.y];case'nw':return[c.x,c.y];case'se':return[c.x2,c.y2];case'sw':return[c.x,c.y2];}}
function getFixed()
{if(!options.aspectRatio){return getRect();}
var aspect=options.aspectRatio,min_x=options.minSize[0]/xscale,max_x=options.maxSize[0]/xscale,max_y=options.maxSize[1]/yscale,rw=x2-x1,rh=y2-y1,rwa=Math.abs(rw),rha=Math.abs(rh),real_ratio=rwa/rha,xx,yy,w,h;if(max_x===0){max_x=boundx*10;}
if(max_y===0){max_y=boundy*10;}
if(real_ratio<aspect){yy=y2;w=rha*aspect;xx=rw<0?x1-w:w+x1;if(xx<0){xx=0;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1;}else if(xx>boundx){xx=boundx;h=Math.abs((xx-x1)/aspect);yy=rh<0?y1-h:h+y1;}}else{xx=x2;h=rwa/aspect;yy=rh<0?y1-h:y1+h;if(yy<0){yy=0;w=Math.abs((yy-y1)*aspect);xx=rw<0?x1-w:w+x1;}else if(yy>boundy){yy=boundy;w=Math.abs(yy-y1)*aspect;xx=rw<0?x1-w:w+x1;}}
if(xx>x1){if(xx-x1<min_x){xx=x1+min_x;}else if(xx-x1>max_x){xx=x1+max_x;}
if(yy>y1){yy=y1+(xx-x1)/aspect;}else{yy=y1-(xx-x1)/aspect;}}else if(xx<x1){if(x1-xx<min_x){xx=x1-min_x;}else if(x1-xx>max_x){xx=x1-max_x;}
if(yy>y1){yy=y1+(x1-xx)/aspect;}else{yy=y1-(x1-xx)/aspect;}}
if(xx<0){x1-=xx;xx=0;}else if(xx>boundx){x1-=xx-boundx;xx=boundx;}
if(yy<0){y1-=yy;yy=0;}else if(yy>boundy){y1-=yy-boundy;yy=boundy;}
return makeObj(flipCoords(x1,y1,xx,yy));}
function rebound(p)
{if(p[0]<0)p[0]=0;if(p[1]<0)p[1]=0;if(p[0]>boundx)p[0]=boundx;if(p[1]>boundy)p[1]=boundy;return[Math.round(p[0]),Math.round(p[1])];}
function flipCoords(x1,y1,x2,y2)
{var xa=x1,xb=x2,ya=y1,yb=y2;if(x2<x1){xa=x2;xb=x1;}
if(y2<y1){ya=y2;yb=y1;}
return[xa,ya,xb,yb];}
function getRect()
{var xsize=x2-x1,ysize=y2-y1,delta;if(xlimit&&(Math.abs(xsize)>xlimit)){x2=(xsize>0)?(x1+xlimit):(x1-xlimit);}
if(ylimit&&(Math.abs(ysize)>ylimit)){y2=(ysize>0)?(y1+ylimit):(y1-ylimit);}
if(ymin/yscale&&(Math.abs(ysize)<ymin/yscale)){y2=(ysize>0)?(y1+ymin/yscale):(y1-ymin/yscale);}
if(xmin/xscale&&(Math.abs(xsize)<xmin/xscale)){x2=(xsize>0)?(x1+xmin/xscale):(x1-xmin/xscale);}
if(x1<0){x2-=x1;x1-=x1;}
if(y1<0){y2-=y1;y1-=y1;}
if(x2<0){x1-=x2;x2-=x2;}
if(y2<0){y1-=y2;y2-=y2;}
if(x2>boundx){delta=x2-boundx;x1-=delta;x2-=delta;}
if(y2>boundy){delta=y2-boundy;y1-=delta;y2-=delta;}
if(x1>boundx){delta=x1-boundy;y2-=delta;y1-=delta;}
if(y1>boundy){delta=y1-boundy;y2-=delta;y1-=delta;}
return makeObj(flipCoords(x1,y1,x2,y2));}
function makeObj(a)
{return{x:a[0],y:a[1],x2:a[2],y2:a[3],w:a[2]-a[0],h:a[3]-a[1]};}
return{flipCoords:flipCoords,setPressed:setPressed,setCurrent:setCurrent,getOffset:getOffset,moveOffset:moveOffset,getCorner:getCorner,getFixed:getFixed};}());var Shade=(function(){var enabled=false,holder=$('<div />').css({position:'absolute',zIndex:240,opacity:0}),shades={top:createShade(),left:createShade().height(boundy),right:createShade().height(boundy),bottom:createShade()};function resizeShades(w,h){shades.left.css({height:px(h)});shades.right.css({height:px(h)});}
function updateAuto()
{return updateShade(Coords.getFixed());}
function updateShade(c)
{shades.top.css({left:px(c.x),width:px(c.w),height:px(c.y)});shades.bottom.css({top:px(c.y2),left:px(c.x),width:px(c.w),height:px(boundy-c.y2)});shades.right.css({left:px(c.x2),width:px(boundx-c.x2)});shades.left.css({width:px(c.x)});}
function createShade(){return $('<div />').css({position:'absolute',backgroundColor:options.shadeColor||options.bgColor}).appendTo(holder);}
function enableShade(){if(!enabled){enabled=true;holder.insertBefore($img);updateAuto();Selection.setBgOpacity(1,0,1);$img2.hide();setBgColor(options.shadeColor||options.bgColor,1);if(Selection.isAwake())
{setOpacity(options.bgOpacity,1);}
else setOpacity(1,1);}}
function setBgColor(color,now){colorChangeMacro(getShades(),color,now);}
function disableShade(){if(enabled){holder.remove();$img2.show();enabled=false;if(Selection.isAwake()){Selection.setBgOpacity(options.bgOpacity,1,1);}else{Selection.setBgOpacity(1,1,1);Selection.disableHandles();}
colorChangeMacro($div,0,1);}}
function setOpacity(opacity,now){if(enabled){if(options.bgFade&&!now){holder.animate({opacity:1-opacity},{queue:false,duration:options.fadeTime});}
else holder.css({opacity:1-opacity});}}
function refreshAll(){options.shade?enableShade():disableShade();if(Selection.isAwake())setOpacity(options.bgOpacity);}
function getShades(){return holder.children();}
return{update:updateAuto,updateRaw:updateShade,getShades:getShades,setBgColor:setBgColor,enable:enableShade,disable:disableShade,resize:resizeShades,refresh:refreshAll,opacity:setOpacity};}());var Selection=(function(){var awake,hdep=370,borders={},handle={},dragbar={},seehandles=false;function insertBorder(type)
{var jq=$('<div />').css({position:'absolute',opacity:options.borderOpacity}).addClass(cssClass(type));$img_holder.append(jq);return jq;}
function dragDiv(ord,zi)
{var jq=$('<div />').mousedown(createDragger(ord)).css({cursor:ord+'-resize',position:'absolute',zIndex:zi}).addClass('ord-'+ord);if(Touch.support){jq.bind('touchstart.jcrop',Touch.createDragger(ord));}
$hdl_holder.append(jq);return jq;}
function insertHandle(ord)
{var hs=options.handleSize,div=dragDiv(ord,hdep++).css({opacity:options.handleOpacity}).addClass(cssClass('handle'));if(hs){div.width(hs).height(hs);}
return div;}
function insertDragbar(ord)
{return dragDiv(ord,hdep++).addClass('jcrop-dragbar');}
function createDragbars(li)
{var i;for(i=0;i<li.length;i++){dragbar[li[i]]=insertDragbar(li[i]);}}
function createBorders(li)
{var cl,i;for(i=0;i<li.length;i++){switch(li[i]){case'n':cl='hline';break;case's':cl='hline bottom';break;case'e':cl='vline right';break;case'w':cl='vline';break;}
borders[li[i]]=insertBorder(cl);}}
function createHandles(li)
{var i;for(i=0;i<li.length;i++){handle[li[i]]=insertHandle(li[i]);}}
function moveto(x,y)
{if(!options.shade){$img2.css({top:px(-y),left:px(-x)});}
$sel.css({top:px(y),left:px(x)});}
function resize(w,h)
{$sel.width(Math.round(w)).height(Math.round(h));}
function refresh()
{var c=Coords.getFixed();Coords.setPressed([c.x,c.y]);Coords.setCurrent([c.x2,c.y2]);updateVisible();}
function updateVisible(select)
{if(awake){return update(select);}}
function update(select)
{var c=Coords.getFixed();resize(c.w,c.h);moveto(c.x,c.y);if(options.shade)Shade.updateRaw(c);awake||show();if(select){options.onSelect.call(api,unscale(c));}else{options.onChange.call(api,unscale(c));}}
function setBgOpacity(opacity,force,now)
{if(!awake&&!force)return;if(options.bgFade&&!now){$img.animate({opacity:opacity},{queue:false,duration:options.fadeTime});}else{$img.css('opacity',opacity);}}
function show()
{$sel.show();if(options.shade)Shade.opacity(bgopacity);else setBgOpacity(bgopacity,true);awake=true;}
function release()
{disableHandles();$sel.hide();if(options.shade)Shade.opacity(1);else setBgOpacity(1);awake=false;options.onRelease.call(api);}
function showHandles()
{if(seehandles){$hdl_holder.show();}}
function enableHandles()
{seehandles=true;if(options.allowResize){$hdl_holder.show();return true;}}
function disableHandles()
{seehandles=false;$hdl_holder.hide();}
function animMode(v)
{if(v){animating=true;disableHandles();}else{animating=false;enableHandles();}}
function done()
{animMode(false);refresh();}
if(options.dragEdges&&$.isArray(options.createDragbars))
createDragbars(options.createDragbars);if($.isArray(options.createHandles))
createHandles(options.createHandles);if(options.drawBorders&&$.isArray(options.createBorders))
createBorders(options.createBorders);$(document).bind('touchstart.jcrop-ios',function(e){if($(e.currentTarget).hasClass('jcrop-tracker'))e.stopPropagation();});var $track=newTracker().mousedown(createDragger('move')).css({cursor:'move',position:'absolute',zIndex:360});if(Touch.support){$track.bind('touchstart.jcrop',Touch.createDragger('move'));}
$img_holder.append($track);disableHandles();return{updateVisible:updateVisible,update:update,release:release,refresh:refresh,isAwake:function(){return awake;},setCursor:function(cursor){$track.css('cursor',cursor);},enableHandles:enableHandles,enableOnly:function(){seehandles=true;},showHandles:showHandles,disableHandles:disableHandles,animMode:animMode,setBgOpacity:setBgOpacity,done:done};}());var Tracker=(function(){var onMove=function(){},onDone=function(){},trackDoc=options.trackDocument;function toFront(touch)
{$trk.css({zIndex:450});if(touch)
$(document).bind('touchmove.jcrop',trackTouchMove).bind('touchend.jcrop',trackTouchEnd);else if(trackDoc)
$(document).bind('mousemove.jcrop',trackMove).bind('mouseup.jcrop',trackUp);}
function toBack()
{$trk.css({zIndex:290});$(document).unbind('.jcrop');}
function trackMove(e)
{onMove(mouseAbs(e));return false;}
function trackUp(e)
{e.preventDefault();e.stopPropagation();if(btndown){btndown=false;onDone(mouseAbs(e));if(Selection.isAwake()){options.onSelect.call(api,unscale(Coords.getFixed()));}
toBack();onMove=function(){};onDone=function(){};}
return false;}
function activateHandlers(move,done,touch)
{btndown=true;onMove=move;onDone=done;toFront(touch);return false;}
function trackTouchMove(e)
{onMove(mouseAbs(Touch.cfilter(e)));return false;}
function trackTouchEnd(e)
{return trackUp(Touch.cfilter(e));}
function setCursor(t)
{$trk.css('cursor',t);}
if(!trackDoc){$trk.mousemove(trackMove).mouseup(trackUp).mouseout(trackUp);}
$img.before($trk);return{activateHandlers:activateHandlers,setCursor:setCursor};}());var KeyManager=(function(){var $keymgr=$('<input type="radio" />').css({position:'fixed',left:'-120px',width:'12px'}).addClass('jcrop-keymgr'),$keywrap=$('<div />').css({position:'absolute',overflow:'hidden'}).append($keymgr);function watchKeys()
{if(options.keySupport){$keymgr.show();$keymgr.focus();}}
function onBlur(e)
{$keymgr.hide();}
function doNudge(e,x,y)
{if(options.allowMove){Coords.moveOffset([x,y]);Selection.updateVisible(true);}
e.preventDefault();e.stopPropagation();}
function parseKey(e)
{if(e.ctrlKey||e.metaKey){return true;}
shift_down=e.shiftKey?true:false;var nudge=shift_down?10:1;switch(e.keyCode){case 37:doNudge(e,-nudge,0);break;case 39:doNudge(e,nudge,0);break;case 38:doNudge(e,0,-nudge);break;case 40:doNudge(e,0,nudge);break;case 27:if(options.allowSelect)Selection.release();break;case 9:return true;}
return false;}
if(options.keySupport){$keymgr.keydown(parseKey).blur(onBlur);if(ie6mode||!options.fixedSupport){$keymgr.css({position:'absolute',left:'-20px'});$keywrap.append($keymgr).insertBefore($img);}else{$keymgr.insertBefore($img);}}
return{watchKeys:watchKeys};}());function setClass(cname)
{$div.removeClass().addClass(cssClass('holder')).addClass(cname);}
function animateTo(a,callback)
{var x1=a[0]/xscale,y1=a[1]/yscale,x2=a[2]/xscale,y2=a[3]/yscale;if(animating){return;}
var animto=Coords.flipCoords(x1,y1,x2,y2),c=Coords.getFixed(),initcr=[c.x,c.y,c.x2,c.y2],animat=initcr,interv=options.animationDelay,ix1=animto[0]-initcr[0],iy1=animto[1]-initcr[1],ix2=animto[2]-initcr[2],iy2=animto[3]-initcr[3],pcent=0,velocity=options.swingSpeed;x1=animat[0];y1=animat[1];x2=animat[2];y2=animat[3];Selection.animMode(true);var anim_timer;function queueAnimator(){window.setTimeout(animator,interv);}
var animator=(function(){return function(){pcent+=(100-pcent)/velocity;animat[0]=Math.round(x1+((pcent/100)*ix1));animat[1]=Math.round(y1+((pcent/100)*iy1));animat[2]=Math.round(x2+((pcent/100)*ix2));animat[3]=Math.round(y2+((pcent/100)*iy2));if(pcent>=99.8){pcent=100;}
if(pcent<100){setSelectRaw(animat);queueAnimator();}else{Selection.done();Selection.animMode(false);if(typeof(callback)==='function'){callback.call(api);}}};}());queueAnimator();}
function setSelect(rect)
{setSelectRaw([rect[0]/xscale,rect[1]/yscale,rect[2]/xscale,rect[3]/yscale]);options.onSelect.call(api,unscale(Coords.getFixed()));Selection.enableHandles();}
function setSelectRaw(l)
{Coords.setPressed([l[0],l[1]]);Coords.setCurrent([l[2],l[3]]);Selection.update();}
function tellSelect()
{return unscale(Coords.getFixed());}
function tellScaled()
{return Coords.getFixed();}
function setOptionsNew(opt)
{setOptions(opt);interfaceUpdate();}
function disableCrop()
{options.disabled=true;Selection.disableHandles();Selection.setCursor('default');Tracker.setCursor('default');}
function enableCrop()
{options.disabled=false;interfaceUpdate();}
function cancelCrop()
{Selection.done();Tracker.activateHandlers(null,null);}
function destroy()
{$div.remove();$origimg.show();$origimg.css('visibility','visible');$(obj).removeData('Jcrop');}
function setImage(src,callback)
{Selection.release();disableCrop();var img=new Image();img.onload=function(){var iw=img.width;var ih=img.height;var bw=options.boxWidth;var bh=options.boxHeight;$img.width(iw).height(ih);$img.attr('src',src);$img2.attr('src',src);presize($img,bw,bh);boundx=$img.width();boundy=$img.height();$img2.width(boundx).height(boundy);$trk.width(boundx+(bound*2)).height(boundy+(bound*2));$div.width(boundx).height(boundy);Shade.resize(boundx,boundy);enableCrop();if(typeof(callback)==='function'){callback.call(api);}};img.src=src;}
function colorChangeMacro($obj,color,now){var mycolor=color||options.bgColor;if(options.bgFade&&supportsColorFade()&&options.fadeTime&&!now){$obj.animate({backgroundColor:mycolor},{queue:false,duration:options.fadeTime});}else{$obj.css('backgroundColor',mycolor);}}
function interfaceUpdate(alt)
{if(options.allowResize){if(alt){Selection.enableOnly();}else{Selection.enableHandles();}}else{Selection.disableHandles();}
Tracker.setCursor(options.allowSelect?'crosshair':'default');Selection.setCursor(options.allowMove?'move':'default');if(options.hasOwnProperty('trueSize')){xscale=options.trueSize[0]/boundx;yscale=options.trueSize[1]/boundy;}
if(options.hasOwnProperty('setSelect')){setSelect(options.setSelect);Selection.done();delete(options.setSelect);}
Shade.refresh();if(options.bgColor!=bgcolor){colorChangeMacro(options.shade?Shade.getShades():$div,options.shade?(options.shadeColor||options.bgColor):options.bgColor);bgcolor=options.bgColor;}
if(bgopacity!=options.bgOpacity){bgopacity=options.bgOpacity;if(options.shade)Shade.refresh();else Selection.setBgOpacity(bgopacity);}
xlimit=options.maxSize[0]||0;ylimit=options.maxSize[1]||0;xmin=options.minSize[0]||0;ymin=options.minSize[1]||0;if(options.hasOwnProperty('outerImage')){$img.attr('src',options.outerImage);delete(options.outerImage);}
Selection.refresh();}
if(Touch.support)$trk.bind('touchstart.jcrop',Touch.newSelection);$hdl_holder.hide();interfaceUpdate(true);var api={setImage:setImage,animateTo:animateTo,setSelect:setSelect,setOptions:setOptionsNew,tellSelect:tellSelect,tellScaled:tellScaled,setClass:setClass,disable:disableCrop,enable:enableCrop,cancel:cancelCrop,release:Selection.release,destroy:destroy,focus:KeyManager.watchKeys,getBounds:function(){return[boundx*xscale,boundy*yscale];},getWidgetSize:function(){return[boundx,boundy];},getScaleFactor:function(){return[xscale,yscale];},getOptions:function(){return options;},ui:{holder:$div,selection:$sel}};if(is_msie)$div.bind('selectstart',function(){return false;});$origimg.data('Jcrop',api);return api;};$.fn.Jcrop=function(options,callback)
{var api;this.each(function(){if($(this).data('Jcrop')){if(options==='api')return $(this).data('Jcrop');else $(this).data('Jcrop').setOptions(options);}
else{if(this.tagName=='IMG')
$.Jcrop.Loader(this,function(){$(this).css({display:'block',visibility:'hidden'});api=$.Jcrop(this,options);if($.isFunction(callback))callback.call(api);});else{$(this).css({display:'block',visibility:'hidden'});api=$.Jcrop(this,options);if($.isFunction(callback))callback.call(api);}}});return this;};$.Jcrop.Loader=function(imgobj,success,error){var $img=$(imgobj),img=$img[0];function completeCheck(){if(img.complete){$img.unbind('.jcloader');if($.isFunction(success))success.call(img);}
else window.setTimeout(completeCheck,50);}
$img.bind('load.jcloader',completeCheck).bind('error.jcloader',function(e){$img.unbind('.jcloader');if($.isFunction(error))error.call(img);});if(img.complete&&$.isFunction(success)){$img.unbind('.jcloader');success.call(img);}};$.Jcrop.defaults={allowSelect:true,allowMove:true,allowResize:true,trackDocument:true,baseClass:'jcrop',addClass:null,bgColor:'black',bgOpacity:0.6,bgFade:false,borderOpacity:0.4,handleOpacity:0.5,handleSize:null,aspectRatio:0,keySupport:true,createHandles:['n','s','e','w','nw','ne','se','sw'],createDragbars:['n','s','e','w'],createBorders:['n','s','e','w'],drawBorders:true,dragEdges:true,fixedSupport:true,touchSupport:null,shade:null,boxWidth:0,boxHeight:0,boundary:2,fadeTime:400,animationDelay:20,swingSpeed:3,minSelect:[0,0],maxSize:[0,0],minSize:[0,0],onChange:function(){},onSelect:function(){},onDblClick:function(){},onRelease:function(){}};}(jQuery));(function(factory){if(typeof define==='function'&&define.amd){define(['jquery'],factory);}else{factory(jQuery);}}(function($){var pluses=/\+/g;function raw(s){return s;}
function decoded(s){return decodeURIComponent(s.replace(pluses,' '));}
function converted(s){if(s.indexOf('"')===0){s=s.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,'\\');}
try{return config.json?JSON.parse(s):s;}catch(er){}}
var config=$.cookie=function(key,value,options){if(value!==undefined){options=$.extend({},config.defaults,options);if(typeof options.expires==='number'){var days=options.expires,t=options.expires=new Date();t.setDate(t.getDate()+days);}
value=config.json?JSON.stringify(value):String(value);return(document.cookie=[config.raw?key:encodeURIComponent(key),'=',config.raw?value:encodeURIComponent(value),options.expires?'; expires='+options.expires.toUTCString():'',options.path?'; path='+options.path:'',options.domain?'; domain='+options.domain:'',options.secure?'; secure':''].join(''));}
var decode=config.raw?raw:decoded;var cookies=document.cookie.split('; ');var result=key?undefined:{};for(var i=0,l=cookies.length;i<l;i++){var parts=cookies[i].split('=');var name=decode(parts.shift());var cookie=decode(parts.join('='));if(key&&key===name){result=converted(cookie);break;}
if(!key){result[name]=converted(cookie);}}
return result;};config.defaults={};$.removeCookie=function(key,options){if($.cookie(key)!==undefined){$.cookie(key,'',$.extend({},options,{expires:-1}));return true;}
return false;};}));(function(){var NodeTypes,ParameterMissing,Utils,defaults,__hasProp={}.hasOwnProperty;ParameterMissing=function(message){this.message=message;};ParameterMissing.prototype=new Error();defaults={prefix:"",default_url_options:{}};NodeTypes={"GROUP":1,"CAT":2,"SYMBOL":3,"OR":4,"STAR":5,"LITERAL":6,"SLASH":7,"DOT":8};Utils={serialize:function(object,prefix){var element,i,key,prop,result,s,_i,_len;if(prefix==null){prefix=null;}
if(!object){return"";}
if(!prefix&&!(this.get_object_type(object)==="object")){throw new Error("Url parameters should be a javascript hash");}
if(window.jQuery){result=window.jQuery.param(object);return(!result?"":result);}
s=[];switch(this.get_object_type(object)){case"array":for(i=_i=0,_len=object.length;_i<_len;i=++_i){element=object[i];s.push(this.serialize(element,prefix+"[]"));}
break;case"object":for(key in object){if(!__hasProp.call(object,key))continue;prop=object[key];if(!(prop!=null)){continue;}
if(prefix!=null){key=""+prefix+"["+key+"]";}
s.push(this.serialize(prop,key));}
break;default:if(object){s.push(""+(encodeURIComponent(prefix.toString()))+"="+(encodeURIComponent(object.toString())));}}
if(!s.length){return"";}
return s.join("&");},clean_path:function(path){var last_index;path=path.split("://");last_index=path.length-1;path[last_index]=path[last_index].replace(/\/+/g,"/");return path.join("://");},set_default_url_options:function(optional_parts,options){var i,part,_i,_len,_results;_results=[];for(i=_i=0,_len=optional_parts.length;_i<_len;i=++_i){part=optional_parts[i];if(!options.hasOwnProperty(part)&&defaults.default_url_options.hasOwnProperty(part)){_results.push(options[part]=defaults.default_url_options[part]);}else{_results.push(void 0);}}
return _results;},extract_anchor:function(options){var anchor;anchor="";if(options.hasOwnProperty("anchor")){anchor="#"+options.anchor;delete options.anchor;}
return anchor;},extract_options:function(number_of_params,args){var last_argument,type;last_argument=args[args.length-1];type=this.get_object_type(last_argument);if(args.length>number_of_params||(type==="object"&&!this.look_like_serialized_model(last_argument))){return args.pop();}else{return{};}},look_like_serialized_model:function(object){return"id"in object||"to_param"in object;},path_identifier:function(object){var property;if(object===0){return"0";}
if(!object){return"";}
property=object;if(this.get_object_type(object)==="object"){property=object.to_param||object.id||object;if(this.get_object_type(property)==="function"){property=property.call(object);}}
return property.toString();},clone:function(obj){var attr,copy,key;if((obj==null)||"object"!==this.get_object_type(obj)){return obj;}
copy=obj.constructor();for(key in obj){if(!__hasProp.call(obj,key))continue;attr=obj[key];copy[key]=attr;}
return copy;},prepare_parameters:function(required_parameters,actual_parameters,options){var i,result,val,_i,_len;result=this.clone(options)||{};for(i=_i=0,_len=required_parameters.length;_i<_len;i=++_i){val=required_parameters[i];if(i<actual_parameters.length){result[val]=actual_parameters[i];}}
return result;},build_path:function(required_parameters,optional_parts,route,args){var anchor,opts,parameters,result,url,url_params;args=Array.prototype.slice.call(args);opts=this.extract_options(required_parameters.length,args);if(args.length>required_parameters.length){throw new Error("Too many parameters provided for path");}
parameters=this.prepare_parameters(required_parameters,args,opts);this.set_default_url_options(optional_parts,parameters);anchor=this.extract_anchor(parameters);result=""+(this.get_prefix())+(this.visit(route,parameters));url=Utils.clean_path(""+result);if((url_params=this.serialize(parameters)).length){url+="?"+url_params;}
url+=anchor;return url;},visit:function(route,parameters,optional){var left,left_part,right,right_part,type,value;if(optional==null){optional=false;}
type=route[0],left=route[1],right=route[2];switch(type){case NodeTypes.GROUP:return this.visit(left,parameters,true);case NodeTypes.STAR:return this.visit_globbing(left,parameters,true);case NodeTypes.LITERAL:case NodeTypes.SLASH:case NodeTypes.DOT:return left;case NodeTypes.CAT:left_part=this.visit(left,parameters,optional);right_part=this.visit(right,parameters,optional);if(optional&&!(left_part&&right_part)){return"";}
return""+left_part+right_part;case NodeTypes.SYMBOL:value=parameters[left];if(value!=null){delete parameters[left];return this.path_identifier(value);}
if(optional){return"";}else{throw new ParameterMissing("Route parameter missing: "+left);}
break;default:throw new Error("Unknown Rails node type");}},visit_globbing:function(route,parameters,optional){var left,right,type,value;type=route[0],left=route[1],right=route[2];if(left.replace(/^\*/i,"")!==left){route[1]=left=left.replace(/^\*/i,"");}
value=parameters[left];if(value==null){return this.visit(route,parameters,optional);}
parameters[left]=(function(){switch(this.get_object_type(value)){case"array":return value.join("/");default:return value;}}).call(this);return this.visit(route,parameters,optional);},get_prefix:function(){var prefix;prefix=defaults.prefix;if(prefix!==""){prefix=(prefix.match("/$")?prefix:""+prefix+"/");}
return prefix;},_classToTypeCache:null,_classToType:function(){var name,_i,_len,_ref;if(this._classToTypeCache!=null){return this._classToTypeCache;}
this._classToTypeCache={};_ref="Boolean Number String Function Array Date RegExp Undefined Null".split(" ");for(_i=0,_len=_ref.length;_i<_len;_i++){name=_ref[_i];this._classToTypeCache["[object "+name+"]"]=name.toLowerCase();}
return this._classToTypeCache;},get_object_type:function(obj){var strType;if(window.jQuery&&(window.jQuery.type!=null)){return window.jQuery.type(obj);}
strType=Object.prototype.toString.call(obj);return this._classToType()[strType]||"object";},namespace:function(root,namespaceString){var current,parts;parts=(namespaceString?namespaceString.split("."):[]);if(!parts.length){return;}
current=parts.shift();root[current]=root[current]||{};return Utils.namespace(root[current],parts.join("."));}};Utils.namespace(window,"Routes");window.Routes={admin_product_updates_path:function(options){return Utils.build_path([],["format"],[2,[2,[7,"/",false],[6,"product_updates",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},approve_console_moderations_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"moderations",false]],[7,"/",false]],[6,"approve",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_api_v1_user_media_library_permissions_path:function(options){return Utils.build_path([],[],[2,[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"api",false]],[7,"/",false]],[6,"v1",false]],[7,"/",false]],[6,"user_media_library_permissions",false]],arguments);},console_media_library_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_asset_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"asset",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_backup_list_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"backup_list",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_backup_version_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"show_backup",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_bulk_delete_resources_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"bulk_delete_resources",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_bulk_move_resources_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"bulk_move_resources",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_bulk_tag_resources_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"bulk_tag_resources",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_cms_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"cms",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_cms_login_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"cms_login",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_code_sample_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"code_sample",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_create_folder_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"create_folder",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_crop_original_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"crop_original",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_delete_derived_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"delete_derived",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_delete_resource_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"delete_resource",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_derivatives_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"derivatives",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_folder_images_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"folder_images",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_generate_derived_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"generate_derived",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_get_quality_override_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"get_quality_override",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_info_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"info",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_manual_upload_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"manual_upload",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_metadata_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"metadata",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_more_images_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"more_images",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_quality_override_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"quality_override",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_remove_background_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"remove_background",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_remove_background_contest_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"remove_background_contest",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_rename_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"rename",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_restore_backup_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"restore_backup",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_search_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"search",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_show_derived_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"show_derived",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_show_image_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"show_image",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_sign_upload_request_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"sign_upload_request",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_subfolders_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"subfolders",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_tags_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"tags",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_thumbnail_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"thumbnail",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_update_coordinates_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"update_coordinates",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_media_library_validate_public_ids_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"media_library",false]],[7,"/",false]],[6,"validate_public_ids",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},console_product_updates_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"product_updates",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},get_zooz_payment_token_console_payments_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"payments",false]],[7,"/",false]],[6,"get_zooz_payment_token",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},info_console_api_v1_product_updates_path:function(options){return Utils.build_path([],[],[2,[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"api",false]],[7,"/",false]],[6,"v1",false]],[7,"/",false]],[6,"product_updates",false]],[7,"/",false]],[6,"info",false]],arguments);},mark_read_console_api_v1_product_updates_path:function(options){return Utils.build_path([],[],[2,[2,[2,[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"api",false]],[7,"/",false]],[6,"v1",false]],[7,"/",false]],[6,"product_updates",false]],[7,"/",false]],[6,"mark_read",false]],arguments);},mark_read_console_product_updates_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"product_updates",false]],[7,"/",false]],[6,"mark_read",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},product_updates_path:function(options){return Utils.build_path([],["format"],[2,[2,[7,"/",false],[6,"product_updates",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},reject_console_moderations_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"moderations",false]],[7,"/",false]],[6,"reject",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},report_issue_console_payments_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[2,[2,[7,"/",false],[6,"console",false]],[7,"/",false]],[6,"payments",false]],[7,"/",false]],[6,"report_issue",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);},show_more_product_updates_path:function(options){return Utils.build_path([],["format"],[2,[2,[2,[2,[7,"/",false],[6,"product_updates",false]],[7,"/",false]],[6,"show_more",false]],[1,[2,[8,".",false],[3,"format",false]],false]],arguments);}};window.Routes.options=defaults;}).call(this);jQuery.fn.outerHTML=function(s){return s?this.before(s).remove():jQuery("<p>").append(this.eq(0).clone()).html();};$(document).ready(function(){$('a[data-popup=true]').live('click',function(){window.open($(this).prop('href'));return false;});$(".popup>.heading>.close").live("click",function(e){e.preventDefault();$(this).closest(".popup").remove();$(".shadow").hide();});});$(document).ready(function(){$('.with_example').live('focus',function(){if($.trim($(this).val())==$.trim($(this).attr('data-example'))){$(this).val('');}
$(this).removeClass('using_example');$(this).addClass('focused');});$('.with_example').live('blur',function(){if($(this).val()==''){$(this).val($.trim($(this).attr('data-example')));$(this).removeClass('focused');$(this).addClass('using_example');}});function example_handler(input_elem){var trimmed_example=$.trim($(input_elem).attr('data-example'));if(trimmed_example==null){return;}
$(input_elem).parents('form').submit(function(){if($.trim($(input_elem).val())==trimmed_example){$(input_elem).val('');}});if($(input_elem).val()==''||trimmed_example==$.trim($(input_elem).val())){$(input_elem).addClass('using_example');$(input_elem).val($(input_elem).attr('data-example'));}else{$(input_elem).removeClass('using_example');}}
$('.with_example').each(function(){var input_elem=$(this);example_handler(input_elem);});$('.auto_submit').live('change',function(){$(this).parents('form').submit();});});$(function(){$('.product_updates_page').on('click','.show-more',function(){$showMore=$(this);var page=parseInt($showMore.data('current-page'))+1;ajax_post_with_spinner($showMore,function(data){$showMore.remove();if(!!data){$('.product_updates_container').append(data);}},{url:Routes.show_more_product_updates_path(),method:'GET',data_type:'text',data:{page:page}});});});$(document).ready(function(){$(".nav li.top_menu").hoverIntent({over:function(){$(this).addClass('hover');},timeout:40,out:function(){$(this).removeClass('hover');}});});$(document).ready(function(){$('.register_form .submit_button').click(function(){$('.register_form form').submit();return false;});$('.login_form .send_button, .register_form .send_button, .tfa_setup_dialog .submit_button').click(function(){$(this).closest('form').submit();return false;});$('.login_form input, .login_form input').keypress(function(e){if(e.which==13){e.preventDefault();$(this).closest('form').submit();}});$('.contact_form .send_button').click(function(){$(this).closest('form').submit();return false;});$('.register_form .company_name').attr('data-value',$('.register_form .company_name').val());function sanitize_cloud_name(name,private_bucket){var result=$.trim(name.replace(/[^a-z0-9-]/ig,' ')).replace(/\s+/g,'-').replace(/-+/g,'-').toLowerCase().substr(0,128);if(private_bucket&&!result.match(/-cld$/)){result+="-cld";}
return result;}
$('.register_form .company_name').bind('keyup change',function(){var private_bucket=$('.register_form').data('private-bucket')=='1';if(($('.register_form .cloud_name').val()==sanitize_cloud_name($('.register_form .company_name').attr('data-value'),private_bucket))||($.trim($('.register_form .cloud_name').val())==$('.register_form .cloud_name').attr('data-default-value'))||($.trim($('.register_form .cloud_name').val())=='')){$('.register_form .cloud_name').val(sanitize_cloud_name($('.register_form .company_name').val(),private_bucket));$('.register_form .cloud_name_value').html(sanitize_cloud_name($('.register_form .company_name').val(),private_bucket));}
if($.trim($('.register_form .cloud_name').val()).length<3){var default_cloud_name=$('.register_form .cloud_name').attr('data-default-value');$('.register_form .cloud_name').val(default_cloud_name);$('.register_form .cloud_name_value').html(default_cloud_name);}
$(this).attr('data-value',$(this).val());return true;});$('.register_form .cloud_name').bind('keyup change',function(){var sanitized_value=sanitize_cloud_name($(this).val());$(this).val(sanitized_value);$('.register_form .cloud_name_value').html(sanitized_value);return true;});$('.register_form .help_icon').click(function(){$('.register_form .cloud_name_help').toggle();return false;});});function ajax_post_with_spinner(link_elem,callback,options){options=options||{};var spinner_options={hide:options.hover_spinner?false:true,position:'center'};if(options.spinner){$.extend(spinner_options,options.spinner);}
if(!options.no_spinner){$(link_elem).spinner(spinner_options);}
$.ajax({url:options.url||$(link_elem).attr('href')||$(link_elem).attr('data-update-path')||(options.form&&$(link_elem).parents('form').attr('action')),type:options.method||'POST',dataType:options.data_type||'json',data:options.data||(options.form&&$(link_elem).parents('form').serialize()),xhrFields:options.xhr_fields,statusCode:options.status_code,contentType:options.contentType,processData:options.processData,cache:options.cache,success:function(result){if(!options.keep_spinner&&!options.no_spinner){$(link_elem).spinner('remove');}
callback(result);},error:function(jqXHR,textStatus){if(!options.keep_spinner&&!options.no_spinner){$(link_elem).spinner('remove');}
if(options.error){options.error(jqXHR,textStatus);}}});}
$(document).ready(function(){$('.heroku_note .email_form input[type=submit]').click(function(){var submit_elem=$(this);ajax_post_with_spinner($(submit_elem),function(result){$(submit_elem).parents('.heroku_note').html(result.message);},{form:true});return false;});$('.more_recent_posts a').live('click',function(){var li=$(this).parents('.more_recent_posts');var posts=$(this).closest('.recent_posts');var url=$(this).attr('data-url');ajax_post_with_spinner($(this),function(content){$(content).insertAfter(li);$(li).remove();$(posts).find('img.cld-hidpi').cloudinary_update();},{method:'GET',data_type:'html',url:url});return false;});});function async_load_scripts(scripts){$.each(scripts,function(index,script){(function(){var po=document.createElement('script');po.type='text/javascript';po.async=true;po.src=script;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(po,s);})();});}
function getCookie(key){var keyValue=document.cookie.match('(^|;) ?'+key+'=([^;]*)(;|$)');return keyValue?keyValue[2]:null;}
function marketing_cookie_dissent(){var consent=getCookie('CookieConsent');return consent!==null&&(consent==="0"||consent.indexOf("marketing:false")>-1);}
function load_social_scripts(){if(!marketing_cookie_dissent()){async_load_scripts(['https://platform.linkedin.com/in.js']);}}
function getSerializedValue(serializedArray,name){for(var i=0;i<serializedArray.length;++i){if(serializedArray[i].name==name){return serializedArray[i].value;}}}
$(document).ready(function(){if($('.load_social_scripts').length>0){load_social_scripts();}});$(document).ready(function(){if($('.doc_toc').size()>0){function activate_section(){var hash=location.hash.replace(/^#/,'');if(hash.length>0){var $elem=$(document.body).find('.doc_toc .topic.active .section_item.active .sub_sections li[data-sub-section='+hash+']');if($elem.length>0){$elem.addClass('active').siblings().removeClass('active');}}}
$(window).bind('hashchange',function(){activate_section();return true;});activate_section();}
$('.topic .topic_title').click(function(){$(this).parents('.topic').toggleClass('open');return false;});$('.topic .more_sub_sections').click(function(){$(this).parents('.topic').addClass('open');return false;});$('.toggle_shortcuts').click(function(){$('.shortcut_menu').toggleClass('active');return false;});if($('.toggle_shortcuts').size()>0){$('body').keyup(function(e){if(e.which==27){$('.shortcut_menu').removeClass('active');}
return true;});$(document).bind('mousedown',function(e){if(!$('.shortcut_menu').is(':visible')){return true;}
var t=e.target||e.srcElement;if($(t).parents('.shortcut_menu').size()==0&&!$(t).hasClass('toggle_shortcuts')&&$(t).parents('.toggle_shortcuts').size()==0){$('.shortcut_menu').removeClass('active');}
return true;});}
$('.pricing_page .toggle_cycle a').click(function(){$(this).parents('.pricing_page').removeClass('monthly annual').addClass($(this).data('cycle'));$(this).parents('.pricing_page').find('.toggle_cycle').removeClass('active');$(this).parents('.toggle_cycle').addClass('active');return false;});});$(document).ready(function(){$('.plan_faq .questions h3').click(function(){$(this).next().toggle(400);return false;});$('.plan_comparison .more, .plan_comparison .name_holder').click(function(){$(this).parents('.name').find('.details').toggle();$(this).parents('.name').find('.more').toggle();return false;});});$(document).ready(function(){var manipulaton_next_interval=null;function next_manipulations(){var holder=$('.image_manipulation_holder');var index=$(holder).data('sectionIndex');index+=1;if(index>=$(holder).data('sectionCount')){index=0;}
$('.image_manipulation_section').css('margin-left',(-680*index)+'px');$(holder).data('sectionIndex',index);}
$('.image_manipulation_holder .next').click(function(){if(manipulaton_next_interval!=null){clearInterval(manipulaton_next_interval);manipulaton_next_interval=null;}
next_manipulations();return false;});$('.landing .start_button.jump').click(function(){$('.signup_form_frame_inner.bottom input[type=text]:first').focus();return true;});if($('.landing .image_manipulation_holder .next').size()>0){manipulaton_next_interval=setInterval(next_manipulations,4000);}
function send_optimizely_event(event_name){window['optimizely']=window['optimizely']||[];window['optimizely'].push(["trackEvent",event_name]);}
function submit_signup_form(submit_elem){var position=$(submit_elem).parents('.signup_form_frame_inner').data('position');send_optimizely_event("form_submit");send_optimizely_event("form_submit_"+position);var signup_form=$(submit_elem).parents('.signup_form');$(signup_form).find('.error').html('');ajax_post_with_spinner($(submit_elem),function(result){if(result.success){window.top.location.href=result.redirect_url;send_optimizely_event("signed_up");}else{$(submit_elem).spinner('remove');$.each(result.errors,function(field,messages){$(signup_form).find('.error.'+field.replace('.','_')).html(messages.join(", "));});send_optimizely_event("submit_error");}},{keep_spinner:true,form:true,url:$(signup_form).find('form').attr('action')});}
$('.signup_form input').keypress(function(e){if(e.which==13){e.preventDefault();submit_signup_form($(this).closest('form').find('.signup_button'));}});$('.signup_form_frame_inner .signup_form .signup_button').click(function(){submit_signup_form($(this));return false;});function switch_quote(){var active=$('.quote_section .quote.active');var next=$(active).next('.quote');if($(next).size()==0){next=$('.quote_section .quote:first');}
$(active).removeClass('active');$(next).addClass('active');}
if($('.landing .quote_section').size()>0){setTimeout(function(){setInterval(function(){switch_quote();},6000);},6000);}});$(document).ready(function(){$('.feature-content .frameworks li, .landing .frameworks li, .feature_page .framework-box .frameworks li').click(function(){$(this).parents('.frameworks').find('li').removeClass('active');$(this).addClass('active');$(this).parents('.sample_box').find('.sample_code').removeClass('active');$(this).parents('.sample_box').find('.sample_code.'+$(this).data('kind')+'_sample').addClass('active');return false;});});$(function(){$('.show_font_families').click(function(){$(this).hide();$(this).next('.font_families').addClass('active');return false;});});$(function(){if(!marketing_cookie_dissent()){window.fbAsyncInit=function(){FB.Event.subscribe('edge.create',function(href,widget){if(href.indexOf('www.facebook.com/Cloudinary')!=-1){$.ajax({url:$('#fb_liked_event').attr('data-url'),type:'POST',dataType:'json'});}});};if(window.twttr){twttr.ready(function(twttr){twttr.events.bind('follow',function(event){$.ajax({url:$('#twitter_followed_event').attr('data-url'),type:'POST',dataType:'json'});});});}
if($('.twitter-timeline').length){!function(d,s,id){var js,fjs=d.getElementsByTagName(s)[0],p=/^http:/.test(d.location)?'http':'https';if(!d.getElementById(id)){js=d.createElement(s);js.id=id;js.src=p+"://platform.twitter.com/widgets.js";fjs.parentNode.insertBefore(js,fjs);}}(document,"script","twitter-wjs");}}});$(function(){$('.search-opener').click(function(e){e.preventDefault();$(this).closest('.search-block').find('.search_box').toggleClass('active');});$(document).click(function(event){if(!$(event.target).closest('.search-block').length){if($('.search_box').hasClass("active")){$('.search_box').removeClass("active");}}});});$(function(){$('[data-ga-category]').click(function(){window.dataLayer&&window.dataLayer.push&&window.dataLayer.push({event:'event to GA',eventCategory:$(this).data('ga-category'),eventAction:$(this).data('ga-action'),eventLabel:$(this).data('ga-label'),});});});$(document).ready(function(){$('.tags_filter .view_all_tags').click(function(){$(this).parents('.tags_filter').addClass('expanded');return false;});});$(document).ready(function(){if(($('.search_box').length>0)||($('.search_page_holder').length>0)){function resize(){if(document.readyState=='complete'){$(window).trigger('resize');}else{google.setOnLoadCallback(function(){$(window).trigger('resize');});}}
window.__gcse={callback:resize};var cx=$('.search_page_holder').data('search-id')||'004254014380220631316:tyt40hhqlhs';var gcse=document.createElement('script');gcse.type='text/javascript';gcse.async=true;gcse.src=(document.location.protocol=='https:'?'https:':'http:')+'//www.google.com/cse/cse.js?cx='+cx;var s=document.getElementsByTagName('script')[0];s.parentNode.insertBefore(gcse,s);}
$(document).ready(function(){$('#solutions_drop_menu .dropdown-holder .drop-main .col:nth-child(2) .title, #solutions_drop_menu .dropdown-holder .drop-main .col:nth-child(4) .title').on('click',function(event){event.preventDefault();$(this).closest('.col').toggleClass('in');});});});$(function(){$('.toggle_about_transformations').click(function(e){$('.team-block article').toggleClass('hover all_shown');$('.toggle_about_transformations').toggle();e.preventDefault();});});window.close_iframe_dialog=function(){$('.overlay_dialog').hide();$('.overlay_dialog iframe').attr('src','about:blank');}
if($.cloudinary){$.cloudinary.responsive();}
var trackBillingEvents={upgradePlanClick:function(){trackGtmEvent({eventAction:'upgrade',eventLabel:`intent to upgrade-upgrade button`,eventCategory:'upgrade options'});},cancelMyAccountClick:function(plan,product){trackGtmEvent({eventAction:'cancel',eventLabel:`intent to cancel account|${product}|${plan}`,eventCategory:'upgrade options'});},approveCancelAccountClick:function(selectedReason,plan,product){trackGtmEvent({eventAction:'cancel',eventLabel:`cancel account successfully|${product}|${plan}|${selectedReason}`,eventCategory:'upgrade options'});},declineCancelAccountClick:function(){trackGtmEvent({eventAction:'close',eventLabel:'close cancellation modal',eventCategory:'upgrade options'});},changePlanClick:function(data,product){trackGtmEvent({event:'add_to_cart',eventCategory:'upgrade options',eventAction:'upgrade',eventLabel:`intent to upgrade|${product}|${data?.planName}`,});},switchToAnnualClick:function(plan,product){trackGtmEvent({eventCategory:'upgrade options',eventAction:'select',eventLabel:`switch to annual billing|${product}|${plan}`});},switchToMonthlyClick:function(plan,product){trackGtmEvent({eventCategory:'upgrade options',eventAction:'select',eventLabel:`switch to monthly billing|${product}|${plan}`});},paypalSubscribeClick:function(plan,product){trackGtmEvent({event:'add_payment_info',eventCategory:'upgrade options',eventAction:'upgrade',eventLabel:`intent to pay|paypal|${product}|${plan}`,});},creditCardSubscribeClick:function(product){var planName=$('.selected_plan_name').html();trackGtmEvent({event:'add_payment_info',eventCategory:'upgrade options',eventAction:'upgrade',eventLabel:`intent to pay|credit card|${product}|${planName}`,});},existingCreditCardSubscribeClick:function(){trackGtmEvent({eventCategory:'upgrade options',eventAction:'purchase',eventLabel:'intent to purchase - cc subscribe button',});},creditCardSubscribeSomethingWentWrong:function(){trackGtmEvent({eventCategory:'upgrade options',eventAction:'error',eventLabel:'credit card error',});},creditCardSubscribeSuccess:function(product){var planName=$('.selected_plan_name').html();trackGtmEvent({event:'purchase',eventCategory:'upgrade options',eventAction:'upgrade',eventLabel:`upgrade successfully|credit card|${product}|${planName}`,});},saveBillingInfoClick:function(){trackGtmEvent({event:'event to GA',eventCategory:'upgrade options',eventAction:'save',eventLabel:'save billing details',});},}
if(!String.prototype.startsWith){String.prototype.startsWith=function(searchString,position){position=position||0;return this.substr(position,searchString.length)===searchString;};}
$(function(){window.trackGtmEvent=window.trackGtmEvent||function(eventProps){var dataLayer;if(window.dataLayer&&window.dataLayer.push){dataLayer=window.dataLayer;}else if(window.parent.dataLayer&&window.parent.dataLayer.push){dataLayer=window.parent.dataLayer;}
dataLayer&&dataLayer.push($.extend({event:'event to GA',eventCategory:'dasbhoard'},eventProps))}});$(function(){$('.toggle_user_menu').click(function(e){$('.console_header .user_menu').toggleClass('active');e.preventDefault();});$(document).bind('mousedown',function(e){e=e||event;var target=e.target||e.srcElement;if($(target).parents('.user_menu').length==0&&$(target).parents('.console_user').length==0){$('.console_header .user_menu').removeClass('active');}});$(document).keyup(function(e){if(e.keyCode==27){$('.console_header .user_menu').removeClass('active');}});});$(function(){var $link=$('a.product-updates');var $popup=$('#product-updates-container');var showPopup=function(mark_read){$popup.addClass('open');$link.addClass('open').removeClass('new');if(mark_read){$link.data('marked',true);var url=$popup.data('mark-read-url');$.ajax({url:url,type:'POST',success:function(data){}});}};var hidePopup=function(){$popup.removeClass('open');$link.removeClass('open');};$('.close',$popup).click(function(){hidePopup();});$link.click(function(e){if(!$link.data('is_new')){return;}
e.preventDefault()
if($link.hasClass('open')){hidePopup();}else{var should_mark_read=!$link.data('marked');showPopup(should_mark_read);}});$('body').keyup(function(e){if(e.which==27){hidePopup();}
return true;});$(document).bind('mousedown',function(e){if($link.hasClass('open')){var t=e.target||e.srcElement;if($(t).closest('#product-updates-container, .product-updates').length==0){hidePopup();}}
return true;});});$(function(){$(document).bind('mousedown',function(e){e=e||event;var target=e.target||e.srcElement;if(!$(target).hasClass('transformation_breakdown_toggle breakdown_link')&&$('.transformation_breakdown').hasClass('active')&&$(target).parents('.transformation_breakdown').length==0){$('.transformation_breakdown').removeClass('active');}});});$(function(){if($('.dashboard .recent_images').length>0){$.each($('.recent_images').data('urls'),function(index,url_info){var media_library_url=url_info[0];var url=url_info[1];var content=$('<div></div>')
var image=$('<img></img>').attr('src',url);$(content).append(image);$(content).find('img').load(function(){var image_holder=$('<div></div>').addClass('image_holder').addClass('active');var link=$('<a class="dashboard_recent_image"></a>').attr('href',media_library_url);$(this).remove();$(link).append($(this));$(image_holder).append(link);$('.recent_images ul').append($('<li></li>').append(image_holder));$(image_holder).hide();$(image_holder).fadeIn();});$('.pending_recent_images').append(content);});}});$(function(){if($('.error_report_export_link').length>0){$('.error_report_export_link').click(function(e){e.preventDefault();$.ajax({method:'POST',url:$(this).attr('href'),data:{date:$('#date').val()},success:function(data){$('.error_report_export_link').fadeOut("slow",function(){$('#export_link_container').html("Generating... Check your email for a link to the generated file.");});},fail:function(){$('.error_report_export_link').fadeOut("slow",function(){$('#export_link_container').html("Something went wrong, please try again shortly");});}});});}})
$(function(){function init_chart_tabs(){var $statsTabs=$('.console .cloud_stats li');if($statsTabs.length){$statsTabs.click(function(){var _this=$(this);trackGtmEvent({eventAction:'click',eventLabel:_this.data("chart").name+' - report'});var newTabSelected=!_this.hasClass('selected');if(newTabSelected){$('.ui-tooltip .close_help').click();}
var _breakdown=$(".transformation_breakdown");draw_dashboard_chart(dashboard_data,[_this.data('chart')],{elemID:'dashboard_chart'});_this.addClass('selected').siblings().removeClass('selected');if(_this.data("chart").name!=="transformations"){_breakdown.removeClass("active");}});$(window).resize(function(){$('#dashboard_chart').html('');draw_dashboard_chart(dashboard_data,[$('.console .cloud_stats li.selected').data('chart')],{elemID:'dashboard_chart'});});$(".breakdown_link",$statsTabs).click(function(event){$(this).next().toggleClass("active").closest('li').click();return false;});}}
var form=$('form.stats_selector');if(form.length==0){return;}
function refresh_filter(){$(".stats_section").toggleClass("refreshing",true);$(".stats_export_link").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'export to csv - report'});})
$(".stats_export_link").each(function(){this.href=this.href.replace(/\?.*|$/,'?'+form.serialize())});$.ajax({url:form.attr('action'),data:form.serialize(),success:function(data){$(".stats_section").html(data);init_chart_tabs();draw_requests_chart();$(".stats_section").toggleClass("refreshing",false);}});}
var max_range=90;var select=form.find('select');if(select.length>0){select.uniform({selectAutoWidth:false});}
var custom_container=form.find('.custom');var filter_btn=custom_container.find('.filter_btn');var day_in_ms=24*3600*1000;var now_in_ms=new Date().getTime();function update_date_range(values,update_form){var from=new Date(now_in_ms+values[0]*day_in_ms).toDateString();var to=new Date(now_in_ms+values[1]*day_in_ms).toDateString();custom_container.find(".min").text(from);custom_container.find(".max").text(to);if(update_form){form.find('input[name=min_date]').val(from);form.find('input[name=max_date]').val(to);}}
var range_slider=custom_container.find('.range').slider({range:true,min:-365,max:0,values:[-max_range,0],change:function(e,ui){var values=ui.values;if(values[1]-values[0]>max_range){if(ui.value===values[0]){values=[values[0],values[0]+max_range];}else{values=[values[1]-max_range,values[1]];}
setTimeout(function(){range_slider.slider('values',values);},10);}
update_date_range(values,true);}});filter_btn.click(function(e){e.preventDefault();refresh_filter()});select.change(function(){var selected=select.find(':selected');form.find('input[name=min_date]').val(selected.attr('min'));form.find('input[name=max_date]').val(selected.attr('max'));form.find('input[name=resolution]').val(selected.attr('res'));if(selected.attr('custom')){custom_container.toggleClass('active',true);}else{custom_container.toggleClass('active',false);refresh_filter();}});init_chart_tabs();});function draw_dashboard_chart(chart_data,columns,options){function pad(number,length){var str=''+number;while(str.length<length){str='0'+str;}
return str;}
var data=new google.visualization.DataTable();var colors={objects:"#8bc855",storage:"#9f7edd",bandwidth:"#5891f2",requests:"#acd475",transformations:"#f26958"};var column_colors=[];var monthly=$('#'+options.elemID).data("resolution")!="1";if(monthly){data.addColumn('string','Date Range');}else{data.addColumn('date','Date');}
var showBillingDate=!monthly&&typeof(window.billing_cycle_date)=='number';if(showBillingDate){data.addColumn({type:'string',role:'annotation'});data.addColumn({type:'string',role:'annotationText'})}
$.each(columns,function(index,column){column_colors.push(colors[column.name]);data.addColumn('number',column.title);});data.addRows(chart_data.dates.length);var isTodayBillingCycleDay=function(date){var billingDay=window.billing_cycle_date;var day=date.getDate();if(day==billingDay){return true;}
if(billingDay<29){return false;}
var dummyDate=new Date(date);dummyDate.setMonth(date.getMonth()+1);dummyDate.setDate(0);var lastDayOfMonth=dummyDate.getDate();if(billingDay>lastDayOfMonth&&day==lastDayOfMonth){return true;}
return false;};$.each(chart_data.dates,function(index,date){if(monthly){var date_str=date;}else{var date_str=date;date=new Date(Date.parse(date+" GMT"));}
data.setValue(index,0,date);if(date instanceof Date){if(showBillingDate&&isTodayBillingCycleDay(date)){var day=date.getDate();data.setValue(index,1,"Billing date");var month=["January","February","March","April","May","June","July","August","September","October","November","December"][date.getMonth()];var tooltip="Monthly billing cycle date ("+month+" "+day+")";data.setValue(index,2,tooltip);}}
$.each(columns,function(columnIndex,column){if(chart_data.values[date_str]){var value=chart_data.values[date_str][column.name];if(value==null){if(column.name=="bandwidth"||column.name=="transformations"||column.name=="requests"){value="0";}}
columnIndex+=showBillingDate?3:1;if(value!=null){data.setValue(index,columnIndex,parseFloat(parseFloat(value).toFixed(1)));}}});});var width=$.browser.msie?585:585;var height=$.browser.msie?300:300;if(!monthly){var formatter=new google.visualization.DateFormat({formatType:'medium',timeZone:0});formatter.format(data,0);}
var BytesFormatter=function(){this.logUnits={0:" Bytes",1:"KB",2:"MB",3:"GB",4:"TB",5:"PB"}}
BytesFormatter.prototype.format=function(dt,column){for(var i=0;i<dt.getNumberOfRows();i++){var value=dt.getValue(i,column);log=Math.floor(Math.log(value)/Math.log(1024));if(!isNaN(log)&&log!=-Infinity){mult=Math.pow(1024,log);if(mult!=1)value=(value/mult).toFixed(2);value+=this.logUnits[log];}else{value="0 Bytes"}
dt.setFormattedValue(i,column,value);}}
var bytesFormatter=new BytesFormatter();var numberFormatter=new google.visualization.NumberFormat({fractionDigits:0});if(options.currency){numberFormatter=new google.visualization.NumberFormat({prefix:'$'});}
for(var i=0;i<columns.length;i++){var formatter=columns[i].unit=="byte"?bytesFormatter:numberFormatter;var idx=showBillingDate?i+3:i+1;formatter.format(data,idx);}
var chart=new google.visualization.AreaChart(document.getElementById(options.elemID));chart.draw(data,{backgroundColor:'transparent',colors:column_colors,pointSize:1,lineWidth:0,areaOpacity:1.0,legend:'none',vAxis:{minValue:0},chartArea:{left:70,top:25,width:'100%',height:'80%'},interpolateNulls:true,hAxis:{viewWindow:{min:new Date(Date.parse(chart_data.dates[0]+" GMT")),max:new Date(Date.parse(chart_data.dates[chart_data.dates.length-1]+" GMT"))},slantedText:false,baselineColor:'#dddddd',textStyle:{color:'#999999',fontSize:10},gridlines:{color:'#dddddd'}},annotation:{1:{style:'line'}},annotations:{textStyle:{fontName:'Arial',fontSize:10,color:'#444',opacity:0.8}},vAxis:{baselineColor:'#dddddd',textStyle:{color:'#999999',fontSize:10},gridlines:{color:'#dddddd'}}});}
$(document).ready(function(){$('.show_more').live('click',function(){var view_elem=$(this);$(view_elem).spinner({hide:true,position:'center'});var top_container=$(view_elem).parents('.more_top_container');$.ajax({url:$(this).attr('href'),dataType:'html',success:function(content){$(view_elem).spinner('remove');$(view_elem).parents('.more_placeholder').replaceWith(content);$(top_container).find('.more_placeholder').hide();$(top_container).find('.items:last').hide();$(top_container).find('.items:last').slideDown('fast',function(){$(top_container).find('.more_placeholder').show();});}})
return false;});$('.view_derived').live('click',function(){var view_elem=$(this);$(view_elem).spinner({hide:true,position:'center'});var container=$(view_elem).parents('.image_resource').find('.derived_container');var href=$(view_elem).attr('href');$.ajax({url:href,dataType:'html',success:function(content){$(view_elem).spinner('remove');$(view_elem).hide();$(container).hide();$(container).html(content);$(container).slideDown('fast');}})
return false;});$(".derived_resources").livequery(function(){$(this).find('.lightimage').lightBox();});$(".image_resources").livequery(function(){$('.image_resources .lightimage').lightBox();});$(".transformations .lightimage").lightBox();$(".transformations").livequery(function(){$(this).find('.lightimage').lightBox();});$('.image_resource .delete').live('click',function(event){var confirmed=confirm("Are you sure you want to delete this image and all its derivatives?");if(confirmed){var delete_elem=$(this);$(delete_elem).spinner({hide:true,position:'center'});var image_resource=$(delete_elem).parents('.image_resource');$.ajax({url:$(delete_elem).attr('href'),type:"DELETE",success:function(result){$(delete_elem).spinner('remove');$(image_resource).replaceWith(result);}});}
return false;});$('.image_resource a.backup').live('click',function(event){var link_elem=$(this);$(link_elem).spinner({hide:true,position:'center'});$.ajax({url:$(link_elem).attr('href'),type:"GET",success:function(result){$(link_elem).spinner('remove');$('.shadow').show();$('.popups').html(result);$('.popups .popup').css('top',($(document).scrollTop()+200)+'px');}});return false;});});$(document).ready(function(){$('.customer_selection li a').click(function(){var form=$(this).parents('.change_customer_form');$(form).find('#current_customer').val($(this).data('cloud-name'));$(form).submit();return false;});if($('.transformation_filter').size()>0){$('.transformation_filter').uniform({selectAutoWidth:false});}
$('.transformation_filter').live('change',function(){$(this).parents('form').submit();return true;});$('#dashboard-cld-community-link').on('click',function(){trackGtmEvent({eventAction:'click',eventLabel:'join the cloudinary community'});});$('.auto_input_select').bind('click mouseup',function(){if($(this).attr('data-actual-value')){if(!$(this).data('placeholder_value')){$(this).data('placeholder_value',$(this).val());}
$(this).val($(this).attr('data-actual-value'));}
$(this).focus();$(this).select();});$('.value .reveal').click(function(){trackGtmEvent({eventAction:'click',eventLabel:'reveal api secret'});$(this).hide();$(this).parents('.info').find('.auto_input_select').each(function(){if($(this).attr('data-actual-value')){$(this).val($(this).attr('data-actual-value'));}});send_gdpr_event(1);return false;});$('.value .copy_to_clipboard').click(function(){var _this=$(this);var elementToCopy=_this.parent().find('.auto_input_select');var label=_this.closest('.item').find('.label').text();if(label){trackGtmEvent({eventAction:'click',eventLabel:'copy '+label.toLowerCase()+' to clipboard'});}
var text=elementToCopy.attr('data-actual-value')||elementToCopy.val();if(_this.hasClass('copy_value_to_clipboard')&&text!=null)text=text.substr(text.indexOf("=")+1);clipboardCopy(text).then(function(){_this.text('Copied to clipboard');});send_gdpr_event(2);});$('.access_keys .api_secret, .provisioning_api_keys .api_secret').click(function(){if($(this).data('actual')){if($(this).hasClass('revealed')){$(this).text($(this).data('actual').replace(/./g,'*'));}else{$(this).text($(this).data('actual'));}
$(this).toggleClass('revealed');return false;}});$('.environmental_variable .cloudinary_url').click(function(){if($(this).hasClass('revealed')){$(this).text($(this).data('masked'));}else{$(this).text($(this).data('actual'));}
$(this).toggleClass('revealed');return false;});$(function(){var confirmation=document.getElementsByName('confirmation')[0]
var confirmationCode=document.getElementsByName('confirmation-code')[0]
if(typeof confirmationCode==='undefined'||typeof confirmation==='undefined'){return;}
if(typeof confirmationCode.dataset['user_has_no_password']!=='undefined'&&confirmation.classList.contains('reconfirm')){$('.confirmation-code.hidden').removeClass('hidden');}});function ask_verification(){$(this).parents(".access_keys, .provisioning_api_keys").find('.confirmation .row').addClass('active');$(this).parents(".access_keys, .provisioning_api_keys").find('[name=access_keys_attributes_changed],[name=provisioning_api_keys_attributes_changed]').val('1');$('.access_keys .non_direct_warning').show();}
$('.access_keys .gen_key_btn, .provisioning_api_keys .gen_key_btn').on('click',function(){$(this).closest('.settings_section').find('table').removeClass('empty');var parents=$(this).parents(".access_keys, .provisioning_api_keys")
var hidden=parents.find(".hidden");if(hidden.length){var first=$(hidden[0]);first.removeClass("hidden");first.find("input[type='hidden'].destroy").val("0");first.find("input[type='checkbox'].destroy").prop('checked',false);}
var confirmationCode=parents.find('.confirmation-code');if(typeof confirmationCode.data('user_has_no_password')!=='undefined'){confirmationCode.removeClass('hidden');}
if(hidden.length===1){$(this).remove();}
ask_verification.call(this);return false;});$('.otp-link, .tfa_setup_dialog .confirmation-code .otp-link').on('click',function(e){e.preventDefault();var elm=$(".otp-link");elm.removeClass('email-sent');elm.html('Sending Email...');elm.addClass('disabled');$.ajax({type:'POST',url:"/console/settings/send_email_with_otp",dataType:"json",data:{validate_otp:true},success:function(){elm.html('Email was sent, send again?');elm.removeClass('disabled');elm.addClass('email-sent');}})});$('#account_send_plan_usage_notifications').on('change',function(){if(this.checked){$('.thresholds_holder').show();}else{$('.thresholds_holder').hide();}})
$('.access_keys select, .provisioning_api_keys select').on('change',ask_verification);$('.info .show_more_info').click(function(){trackGtmEvent({eventAction:'click',eventLabel:'more account details'});$(this).hide();$(this).parents('.info').addClass('with_more');return false;});$('.auto_input_select').blur(function(){if($(this).attr('data-actual-value')){$(this).val($(this).data('placeholder_value'));}});$('.getting_started_section .close').click(function(){$(this).parents('.getting_started_section').hide('slow');$.ajax({url:$(this).attr('href'),type:"POST",dataType:'json'});return false});$('.stats_wrapper .stats_insights .close_stats_insights').click(function(){$(this).parents('.stats_insights').hide();return false;});});$(function(){var replace_items=function(html){$('.moderations.resource_list').html(html);}
var add_items=function(link){return function(html){$('.moderations.resource_list').append(html);$(link).parents(".more").remove();}}
var reject_item=approve_item=function(){return function(event){event.preventDefault();var link=this;ajax_post_with_spinner(link,function(){$(link).parents(".resource").remove();},{data_type:'html'});}}
var more=function(){return function(event){var link=this;event.preventDefault();ajax_post_with_spinner(this,add_items(link),{method:'GET',data_type:'html'})}}
$('.moderation_selection .search').click(function(event){event.preventDefault();ajax_post_with_spinner(this,replace_items,{method:'GET',form:true,data_type:'html'})});$('.moderations.resource_list .approve').live('click',approve_item());$('.moderations.resource_list .reject').live('click',reject_item());$('.moderations.resource_list .more a').live('click',more());});$(document).ready(function(){$('.search_form .submit_button, .upload_form .submit_button').click(function(){$(this).parents('form').submit();return false;});$('.show_upload_form').live('click',function(){$(this).hide();$('.upload_form').show();return false;});});$(document).ready(function(){$('.box_opener').click(function(){var box=$(this).parents('.item').find('.box');if($(this).hasClass('opened')){$(this).removeClass('opened');$(box).removeClass('opened');}else{$(box).css('top',($(this).position().top+$(this).height()-60)+'px')
$(this).addClass('opened');$(box).addClass('opened');}
return false;});$(document).bind('mousedown',function(e){e=e||event;var target=e.target||e.srcElement;if(!$(target).hasClass('.box')&&$(target).parents('.box').length==0){$('.box').removeClass('opened');$('.box_opener').removeClass('opened');}});});$(document).ready(function(){$('.share_page .direct_link input[type=text]').bind('click',function(){$(this).focus();$(this).select();return true;});});$(document).ready(function(){function addonLegalApprove(addonElement,allow_cancel,callback){var legalNoteElement=$(addonElement).find('.legal_note');var noteTemplate=$('.terms_of_service_dialog_template').html();if(legalNoteElement.data('accepted')||legalNoteElement.length==0){if(callback){callback();}
return;}
var featurePlanName=legalNoteElement.data('name');var feature=legalNoteElement.data('feature');var dialogText=noteTemplate.replace(/{{provider}}/g,legalNoteElement.data('provider'));var termsLinks='';if(legalNoteElement.data('terms')!=''){termsLinks+='<a href="'+legalNoteElement.data('terms')+'" target="_blank">terms of service</a>';}
if(legalNoteElement.data('privacy')!=''){if(legalNoteElement.data('terms')!=''){termsLinks+=' and ';}
termsLinks+='<a href="'+legalNoteElement.data('privacy')+'" target="_blank">privacy policy</a>';}
var dialogText=dialogText.replace(/{{terms_links}}/g,termsLinks);var dialogText=dialogText.replace(/{{privacy_path}}/g,legalNoteElement.data('privacy'));var dialogText=dialogText.replace(/{{feature_plan_name}}/g,featurePlanName);var dialogElement=$('<div></div>').addClass('legal_note_placeholder').html(dialogText);$(document.body).append(dialogElement);var buttons={cancel:{text:'Cancel',class:'button-dialog-cancel',click:function(){termsAcceptenceLog(feature,false);}},ok:{text:'Agree',class:'button-dialog-ok',click:function(){legalNoteElement.data('accepted',true);termsAcceptenceLog(feature,true,callback);}}};if(!allow_cancel){delete buttons.cancel;}
var legalDialog=$(dialogElement).dialog({autoOpen:false,height:240,width:600,modal:true,title:featurePlanName+' Addon Subscription',closeOnEscape:false,buttons:buttons});legalDialog.dialog("open");if(!allow_cancel){$(".ui-dialog-titlebar-close").hide();}
function termsAcceptenceLog(feature,accepted,callback){$.ajax({url:'/console/api/v1/gdpr_logs',type:'post',data:{kind:'addon_terms',subkind:feature,metadata:{accepted:accepted}},headers:{Authorization:'Bearer '+$('.authentication').data('token')},dataType:'json',success:function(data){legalDialog.dialog("close");legalDialog.dialog("destroy");dialogElement.remove();if(callback){callback();}}});}}
$('.addons .plan.free a').click(function(){var link_elem=$(this);if($(link_elem).parents('.plan').hasClass('active')){return false;}else if($(this).parents('.plan').hasClass('account_has_addon')){return true;}
addonLegalApprove(link_elem.closest('.addon'),true,function(){var note=$("<div/>").addClass("upgrade_note").text("Subscribing...");$(link_elem).parents('.plan').append(note);ajax_post_with_spinner($(link_elem),function(result){if(result.success){$(note).text(result.message);$(link_elem).parents('.plan').addClass('active');setTimeout(function(){$(note).fadeOut('slow');},5000);}else if(result.error){$(note).addClass("error").text(result.error);}else{$(note).remove();}},{no_spinner:true});});return false;});$('.addons .plan.active').click(function(e){var link_elem=$(this);addonLegalApprove(link_elem.closest('.addon'),true,function(){return false;});});$('.addons .plan.paid a').click(function(e){var link_elem=$(this);if(link_elem.parents('.plan').hasClass('active')){e.preventDefault();return false;}
e.preventDefault();addonLegalApprove(link_elem.closest('.addon'),true,function(){window.location.href=link_elem.attr('href');});return true;});if($('.register_page').length>0){addonLegalApprove($('.register_page'),false,function(){return false;});}});$(document).ready(function(){var cookieValue=$.cookie('adminDisplayedImages');var displayedForAdmin=cookieValue&&cookieValue=='yes';var toggleExists=$(".hide_images_from_admin_toggle").length>0;if(toggleExists){$(".hide_images_from_admin_toggle").toggleClass("active",!displayedForAdmin);$(".hide_images_from_admin_toggle").click(function(e){e.preventDefault();$(this).toggleClass("active");displayedForAdmin=!displayedForAdmin;if(displayedForAdmin){var expires=new Date();expires.setTime(+expires+10*60000);$.cookie('adminDisplayedImages',"yes",{path:'/',expires:expires});}else{$.removeCookie('adminDisplayedImages',{path:'/'});}
$('.console_header .user_menu').removeClass('active');location.reload();return false;});}});$(function(){$(".download_yml").click(function(){trackGtmEvent({eventAction:'download',eventLabel:'yml'});});$(".download_py").click(function(){trackGtmEvent({eventAction:'download',eventLabel:'py'});});$(".count_assets_link").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'image & video resources'});});$(".count_derived_link").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'derived resources'});});$(".count_transformations_link").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'transformation type'});});$(".media_library_link").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'browse media library'});});$(".dashboard_recent_image").live('click',function(){trackGtmEvent({eventAction:'click',eventLabel:'specific image'});});$(".subscribe-to-addons").click(function(){trackGtmEvent({eventAction:'click',eventLabel:'subscribe to add-ons'});});$(".read_more").click(function(){trackGtmEvent({eventAction:'social',eventLabel:'learn more'});});$(".recent_posts .recent_post > a").live('click',function(e){trackGtmEvent({eventAction:'learn more',eventLabel:'blog: '+$(e.target).text()});});$(".more_recent_posts a").live('click',function(e){trackGtmEvent({eventAction:'learn more',eventLabel:'more posts'});});$(".getting_started_section .links a").click(function(e){trackGtmEvent({eventAction:'social',eventLabel:'quick links: '+$(e.target).text()});});$(".getting_started_section .integrations li").click(function(e){trackGtmEvent({eventAction:'social',eventLabel:'framework: '+$(e.currentTarget).attr('class')});});$(".upgrade_prompt li a").click(function(e){trackGtmEvent({eventAction:'social',eventLabel:'plan: '+$(e.target).text()});});});$(function(){var dueDialog=$(".downgrade_to_free_with_outstanding_balance_dialog").dialog({autoOpen:false,height:200,width:350,modal:true,title:"You Have Payments Due",buttons:{"OK":function(){dueDialog.dialog("close")}}});$('.downgrade_to_free_with_outstanding_balance').click(function(event){event.preventDefault();dueDialog.dialog("open");});var downgradeToFree=$('.downgrade_to_free');var approveDialog=$(".downgrade_to_free_dialog").dialog({autoOpen:false,height:200,width:350,modal:true,title:"Downgrading to Free",buttons:{"No":function(){approveDialog.dialog("close");},"Yes":function(){$('#downgrade_to_free_form').submit();}}});downgradeToFree.click(function(event){event.preventDefault();approveDialog.dialog("open");});$(".banned_downgrade").click(function(e){event.preventDefault();var plan=$(e.target).attr("data-plan");var dialog=$(".banned_downgrade_dialog[data-plan="+plan+"]");dialog.dialog({modal:true,width:420,title:dialog.attr("data-title")});});});$(function(){var $reason=$(".cancel_account_dialog #reason");var $sub_reason=$(".cancel_account_dialog #sub_reason");var $default=$('<option value="0" selected>Select a reason</option>').prependTo($reason).click();$('<option value="0" selected>Please Select</option>').prependTo($sub_reason).click();$sub_reason.change(function(){var reasonValue=$(this).val();$(".cancel_account_dialog .sub_reason .reason-error").toggle(reasonValue==0);})
$reason.change(function(){var MOVED_INHOUSE=12;var MOVED_COMPETITOR=13;var reasonValue=$(this).val();$(".cancel_account_dialog .sub_reason").toggleClass("active",reasonValue==MOVED_INHOUSE||reasonValue==MOVED_COMPETITOR);$(".cancel_account_dialog .sub_reason_text").toggleClass("active",reasonValue==MOVED_COMPETITOR);var dialogHeight=(reasonValue==MOVED_INHOUSE||reasonValue==MOVED_COMPETITOR)?'380px':'284px';$('.cancel_account_dialog').height(dialogHeight);if(reasonValue==MOVED_INHOUSE||reasonValue==MOVED_COMPETITOR){$sub_reason.children('option').hide();var subReasonOptions=reasonValue==MOVED_INHOUSE?[0,14,16,18,20]:[0,15,17,19,21];$sub_reason.children('option').each(function(){var $option=$(this);if(subReasonOptions.indexOf(Number($option.val()))>-1){$option.show()}})}
var reasonChosen=reasonValue!=0;$(".cancel_account_dialog .reason-error").toggle(!reasonChosen);$reason.data('reasonChosen',reasonChosen)});var cancelLink=$(".cancel_account"),cancelDialog,cancelErrorHandler=function(response){$('.cancel_account_status .error').show().text(response.responseText);},cancelSuccessHandler=function(response){let frameless=new URLSearchParams(location.search).get("frameless");if(frameless==="1"||frameless==="true")
window.parent.postMessage({accountCancelation:true,reason:JSON.parse(response).reason},"*");else
document.location="/console";},cancelRequest=function(){if(!$reason.data('reasonChosen')){$(".cancel_account_dialog .reason-error").show("active").fadeOut().fadeIn().fadeOut().fadeIn();return;}
ajax_post_with_spinner(cancelLink,cancelSuccessHandler,{error:cancelErrorHandler,method:'POST',data_type:'text',data:cancelDialog.find('form').serialize()});var data=cancelLink.data();trackBillingEvents.approveCancelAccountClick($reason.find('option:selected').text(),data?.plan,data?.product)
cancelDialog.dialog('close');},decline=function(){trackBillingEvents.declineCancelAccountClick();cancelDialog.dialog('close');};cancelDialog=$(".cancel_account_dialog").dialog({open:function(){$(this).closest('.ui-dialog').find('.ui-dialog-titlebar-close').one("click",function(){trackBillingEvents.declineCancelAccountClick();});},autoOpen:false,height:400,width:350,modal:true,title:"Cancel Account",buttons:{"Decline":decline,"Approve":cancelRequest}});cancelLink.click(function(event){event.preventDefault();event.stopPropagation();cancelDialog.dialog("open");cancelDialog.find("select").uniform({selectAutoWidth:true});var data=$(this).data();trackBillingEvents.cancelMyAccountClick(data?.plan,data?.product)});});$(function(){$(".change_plan_section .actions .downgrade_account").click(function(event){event.preventDefault();$(".change_plan_section .section_content.units_pricing_section").show();$(".eligible_plans .downgrade_row").addClass("active");$(this).hide();});});$(function(){$(".change_plan_section .actions .show_legacy_plans").click(function(event){event.preventDefault();$(".change_plan_section .section_content").show();$(this).hide();});});$(function(){$(".account .has_tooltip").mouseenter(function(event){var id=event.target.id;$("#tooltip_"+id).show();});});$(function(){$(".account .has_tooltip").mouseleave(function(event){var id=event.target.id;$("#tooltip_"+id).hide();});});$(function(){$(".description_tooltip").mouseleave(function(event){$(this).hide();});});$(function(){$('a.learn_more').click(function(event){event.preventDefault();$(this).closest('.less_information').hide();$(this).closest('.information_container').find('.more_information').show();});});$(function(){$(document).on('click','span.help_with_tooltip',function(e){var button=$(e.currentTarget);var widget=button.find('[data-widget]');if(widget.data('uiTooltip')){return;}
widget.tooltip({items:'[data-widget]',content:function(){var html=button.find('[data-content]').html();return'<a class="close_help" href="#">&times;</a>'+html;},position:{of:button,my:'left center',at:'left center'},open:function(event,ui){ui.tooltip.find('.close_help').on('click',function(){widget.tooltip('close');return false;});}});button.click(function(event){$('.ui-tooltip .close_help').click();widget.tooltip('open');});setTimeout(function(){button.click();},10);});});$(function(){$('img.cld-hidpi').cloudinary_update();});$(function(){if(!$('.upgrade_page').length)return;var $context=$('.additional_limits_container');$context.on('click','.toggle',function(){$context.toggleClass('show');});});$(function(){var categorizationChecks=$(".cat_check_value"),categorizationInput=$("#upload_preset_settings_categorization");categorizationChecks.on("change",function(e){var values=[];categorizationChecks.each(function(i,chk){chk=$(chk);if(chk.is(":checked")){values.push(chk.val());}});categorizationInput.val(values.join(","));});});var MANUAL="manual",WEBPURIFY="webpurify",METASCAN="metascan",AWS_REK="aws_rek",GOOGLE_VIDEO_MODERATION="google_video_moderation",PERCEPTION_POINT="perception_point",AWS_REK_VIDEO="aws_rek_video",DUPLICATE="duplicate";var AWS_MODERATION_PROFILE_RGX=/:(\w+):(\d(.\d+)?|ignore)/g;$(function(){var DEFAULT_VAL=0.5,MIN_VAL=0,MAX_VAL=1,calculating=false,upload_preset_settings_moderation_selector=$("#upload_preset_settings_moderation"),modOptions=[],moderationChecks=$(".moderation_check_value"),rekModForm=$(".rek_mod_options"),rekVideoModForm=$(".rek_video_mod_options"),modFields=rekModForm.find(".mod_field"),modVideoFields=rekVideoModForm.find(".mod_field"),googleVideoModConfidenceSelectField=$(".google_video_mod_options"),googleVideoModConfidenceSelectEl=googleVideoModConfidenceSelectField.find('#google_video_moderation');var duplicateModForm=$(".duplicate_mod_options");if(upload_preset_settings_moderation_selector.val()!=undefined){modOptions=upload_preset_settings_moderation_selector.val().split("|");}
function updateModOptions(values){modOptions=values;upload_preset_settings_moderation_selector.val(modOptions.join("|"));}
function addOptionToModeration(){moderationChecks.on("change",function(e){var values=[];moderationChecks.each(function(i,chk){chk=$(chk);if(chk.is(":checked")){value=chk.val();var index=modOptions.findIndex(kind=>kind===value||kind.startsWith(`${value}:`));if(index===-1){values.push(value);}else{values.push(modOptions[index]);}}});updateModOptions(values);toggleOptionsForm();});}
function alterGoogleVideoModOption(){googleVideoModConfidenceSelectField.on("change",function(){var newValue='google_video_moderation:'+googleVideoModConfidenceSelectEl.val();var googleIndex=modOptions.findIndex(moderation=>moderation.includes(GOOGLE_VIDEO_MODERATION));modOptions[googleIndex]=newValue;updateModOptions(modOptions);});}
function parseGoogleVideoModField(){if(upload_preset_settings_moderation_selector.val().includes(GOOGLE_VIDEO_MODERATION)){var v=modOptions[modOptions.findIndex(moderation=>moderation.includes(GOOGLE_VIDEO_MODERATION))];var s=v.split(':');if(s[0]==='google_video_moderation'&&s[1]){googleVideoModConfidenceSelectEl.val(s[1]);}}}
function disableSubCategoryForField(field){field.prop("disabled",true).addClass("ignore").siblings("input[type='checkbox']").prop("checked",true);field.siblings(".slider").slider("option","disabled",true);}
function parseAwsModerationValue(){var modValue=rekModForm.data('value'),index=modOptions.findIndex(kind=>kind===AWS_REK||kind.startsWith(`${AWS_REK}:`)),modOptionsValue=modOptions[index],match=modOptionsValue&&modOptionsValue.startsWith(AWS_REK)&&AWS_MODERATION_PROFILE_RGX.exec(modValue),results={};try{calculating=true;while(match){results[match[1]]=match[2];match=AWS_MODERATION_PROFILE_RGX.exec(modValue);}
modFields.each(function(){var field=$(this),val=results[field.data("mod")]||DEFAULT_VAL;if(val==="ignore"){val=DEFAULT_VAL;disableSubCategoryForField(field);}
field.val(val);field.siblings(".slider").slider("value",val);});}
finally{calculating=false;}}
function parseAwsVideoModerationValue(){var modValue=rekVideoModForm.data('value'),index=modOptions.findIndex(kind=>kind===AWS_REK_VIDEO||kind.startsWith(`${AWS_REK_VIDEO}:`)),modOptionsValue=modOptions[index],match=modOptionsValue&&modOptionsValue.indexOf(AWS_REK_VIDEO)!==1&&AWS_MODERATION_PROFILE_RGX.exec(modValue),results={};try{calculating=true;while(match){results[match[1]]=match[2];match=AWS_MODERATION_PROFILE_RGX.exec(modValue);}
modVideoFields.each(function(){var field=$(this),val=results[field.data("mod")]||DEFAULT_VAL;if(val==="ignore"){val=DEFAULT_VAL;disableSubCategoryForField(field);}
field.val(val);field.siblings(".slider").slider("value",val);});}
finally{calculating=false;}}
function processFieldValue(field){var ignored=field.hasClass("ignore"),val=ignored?"ignore":parseFloat(field.val());if(!ignored){if(isNaN(val)||val<MIN_VAL||val>MAX_VAL){val=DEFAULT_VAL;field.toggleClass("invalid_mod",true);field.val(val);}
else{field.toggleClass("invalid_mod",false);}
field.siblings(".slider").slider("value",val);}
return val;}
function calculateAwsModerationValue(){if(!calculating){var kinds=modOptions;var awsRekIndex=kinds.findIndex(kind=>kind===AWS_REK||kind.startsWith(`${AWS_REK}:`));var modValue=kinds[awsRekIndex];var separatorIndex=modValue.indexOf(':');var newValue=modValue.substr(0,separatorIndex===-1?undefined:separatorIndex)+":";try{calculating=true;modFields.each(function(){var field=$(this),val=processFieldValue(field);if(val!==DEFAULT_VAL){newValue+=field.data("mod")+":"+val+":";}});newValue=newValue.substr(0,(newValue.length-1));kinds[awsRekIndex]=newValue;updateModOptions(kinds);}
finally{calculating=false;}}}
function calculateAwsVideoModerationValue(){if(!calculating){var kinds=modOptions;var awsRekVideoIndex=kinds.findIndex(kind=>kind===AWS_REK_VIDEO||kind.startsWith(`${AWS_REK_VIDEO}:`));var modValue=kinds[awsRekVideoIndex];var separatorIndex=modValue.indexOf(':');var newValue=modValue.substr(0,separatorIndex===-1?undefined:separatorIndex)+":";try{calculating=true;modVideoFields.each(function(){var field=$(this),val=processFieldValue(field);if(val!==DEFAULT_VAL){newValue+=field.data("mod")+":"+val+":";}});newValue=newValue.substr(0,(newValue.length-1));kinds[awsRekVideoIndex]=newValue;updateModOptions(kinds);}
finally{calculating=false;}}}
function isModerationKindExists(kind){var index=modOptions&&modOptions.findIndex(mod=>mod===kind||mod.startsWith(`${kind}:`));return index!==-1;}
function toggleOptionsForm(){modOptions=upload_preset_settings_moderation_selector.val().split("|");var isRek=isModerationKindExists(AWS_REK),isRekVideo=isModerationKindExists(AWS_REK_VIDEO),isGoogleVideo=isModerationKindExists(GOOGLE_VIDEO_MODERATION),isDuplicateMod=isModerationKindExists(DUPLICATE);rekModForm.toggleClass("hidden",!isRek);rekModForm.siblings(".note").toggleClass("hidden",isRek);rekModForm.find(".note").toggleClass("hidden",!isRek);rekVideoModForm.toggleClass("hidden",!isRekVideo);rekVideoModForm.siblings(".note").toggleClass("hidden",isRekVideo);rekVideoModForm.find(".note").toggleClass("hidden",!isRekVideo);duplicateModForm.toggleClass("hidden",!isDuplicateMod);googleVideoModConfidenceSelectField.toggleClass("hidden",!isGoogleVideo);}
var updateDupModerationValue=function(){var slider=$(this);duplicateModForm.find("#"+slider.data("field")).val(slider.slider("value"));var newValue="duplicate:"+slider.slider("value");duplicateModForm.attr("data-value",newValue);var duplicateIndex=modOptions.findIndex(moderation=>moderation.includes("duplicate"));modOptions[duplicateIndex]=newValue;updateModOptions(modOptions);}
addOptionToModeration();if(upload_preset_settings_moderation_selector.length){parseGoogleVideoModField();alterGoogleVideoModOption();upload_preset_settings_moderation_selector.on("change",toggleOptionsForm);var updateModerationValue=function(){var slider=$(this);rekModForm.find("#"+slider.data("field")).val(slider.slider("value"));calculateAwsModerationValue();}
rekModForm.find(".slider.mod_slider").slider({min:MIN_VAL,value:DEFAULT_VAL,max:MAX_VAL,step:0.01,range:"min",slide:updateModerationValue,change:updateModerationValue});var updateAwsVideoModerationValue=function(){var slider=$(this);rekVideoModForm.find("#"+slider.data("field")).val(slider.slider("value"));calculateAwsVideoModerationValue();}
rekVideoModForm.find(".slider.mod_slider").slider({min:MIN_VAL,value:DEFAULT_VAL,max:MAX_VAL,step:0.01,range:"min",slide:updateAwsVideoModerationValue,change:updateAwsVideoModerationValue});function initDuplicateValue(){var field=duplicateModForm.find(".mod_field");var value=field.data("mod");var slider=duplicateModForm.find(".slider.mod_slider").slider({min:MIN_VAL,value:value,max:MAX_VAL,step:0.01,range:"min",slide:updateDupModerationValue,change:updateDupModerationValue,});field.val(value);}
initDuplicateValue();rekModForm.find("input[type='checkbox']").on("change",function(){var checker=$(this),value=checker.is(":checked"),subCategory=checker.parents(".mod_sub_category");subCategory.find(".slider").slider("option","disabled",value);subCategory.find(".with_slider.mod_field").toggleClass("ignore",value).prop("disabled",value);calculateAwsModerationValue();});rekVideoModForm.find("input[type='checkbox']").on("change",function(){var checker=$(this),value=checker.is(":checked"),subCategory=checker.parents(".mod_sub_category");subCategory.find(".slider").slider("option","disabled",value);subCategory.find(".with_slider.mod_field").toggleClass("ignore",value).prop("disabled",value);calculateAwsVideoModerationValue();});modFields.on("change",function(){calculateAwsModerationValue();});modVideoFields.on("change",function(){calculateAwsVideoModerationValue();});parseAwsModerationValue();parseAwsVideoModerationValue();toggleOptionsForm();}});$(function(){var $welcomeGuideLink=$("#welcome_guide")
$welcomeGuideLink.click(function(e){e.preventDefault()
var customerId=$welcomeGuideLink.data('customer-id')
var basePath=$welcomeGuideLink.data('base-path')
openModal(customerId,basePath,false);})
if($welcomeGuideLink.data('auto-show')==true){var customerId=$welcomeGuideLink.data('customer-id')
var basePath=$welcomeGuideLink.data('base-path')
openModal(customerId,basePath,true);}
window.addEventListener("message",function(event){switch(event.data){case"CLOSE_ONBOARDING_MODAL":closeModal();break;case"SHOW_ONBOARDING_MODAL":showModal();break;case"HIDE_ONBOARDING_LINK":hideWelcomeGuideLink();break;}},false);function hideWelcomeGuideLink(){$welcomeGuideLink.hide()}
var welcomeGuideContainer;var frame;var loading;function showModal(){loading.css({display:'none'})
frame.css({display:'block'})}
function closeModal(){if(welcomeGuideContainer){welcomeGuideContainer.remove();$(".console_layout,.console_header, iframe#launcher").removeClass("modal_blur")
$("body").removeClass("hide_oveflow")
welcomeGuideContainer=null;}}
function openModal(customerId,basePath,autoOpen){welcomeGuideContainer=$('<div/>');welcomeGuideContainer.addClass('welcome_guide')
loading=$('<div/>')
loading.append('Loading...')
loading.addClass('spinner')
welcomeGuideContainer.append(loading)
frame=$('<iframe/>');frame.css({display:'none'})
frame.attr('src',basePath+'customers/'+customerId+'/onboarding?auto='+autoOpen);welcomeGuideContainer.click(closeModal)
welcomeGuideContainer.append(frame)
$("body").addClass("hide_oveflow")
$("body").prepend(welcomeGuideContainer);$(".console_layout,.console_header, iframe#launcher").addClass("modal_blur")}});window.cldInitNewConsoleSupport=function(){window.cldInitNewConsoleSupport=null;window.cldNewConsole=true;function isConsoleHref(href){if(href&&href.length){return href.match(/\/console\/(?!lui)/);}
return false;}
function postTopMessage(msg){window.parent.postMessage(msg,'*');}
$(window).bind('hashchange',function(){postTopMessage({consoleFrame:true,href:window.location.href});});window.addEventListener('click',function(event){postTopMessage({iframe_clicked:true});});$('a').live('mousedown',function(e){if(!this.href.match(/\/console\//)){$(this).attr('target','_blank');$(this).attr('rel','noopener');}
if(isConsoleHref(this.href)){var new_ml_enabled=$.cookie('new_ml_enabled')==="yes";if(new_ml_enabled&&this.href.indexOf('#dialog/')>-1){postTopMessage({drilldown:true,href:this.href.replace('#dialog/','/asset/')});e.preventDefault();}
else{if(!window.location.href.match(/media_library/)&&this.href.match(/\/console\/media_library/)){postTopMessage({mediaLibraryNav:true});e.preventDefault();}
else{$(this).attr('href',this.href.replace(/\/console(\?.*)?$|\/console(\/c-[0-9a-zA-Z-]+)?(\/.*)/,'/console$2/lui$1$3'));}}}});};function error_report_renderer(){if(typeof(userAllowedErrorPage)==='undefined'||!userAllowedErrorPage){return;}
var draw_main_graph=function(chart_data,clickCallback){function pad(number,length){var str=''+number;while(str.length<length){str='0'+str;}
return str;}
var data=new google.visualization.DataTable();data.addColumn('date','Date');var columns=["400","401","404","408","420","200"];var column_names=["400 - Bad request","401 - Unauthorized","404 - Not found","408 - Timeout","420 - Rate limited","200 - Fallback image on error"];$.each(columns,function(index,column){data.addColumn('number',column_names[index]);});data.addRows(29);$.each(chart_data,function(index,dayData){var date=dayData.date;data.setValue(index,0,date);$.each(columns,function(columnIndex,column){if(chart_data[index]&&chart_data[index]["data"][column]){data.setValue(index,columnIndex+1,parseFloat(parseFloat(chart_data[index]["data"][column]).toFixed(1)));}});});var formatter=new google.visualization.DateFormat({formatType:'medium',timeZone:0});formatter.format(data,0);var numberFormatter=new google.visualization.NumberFormat({fractionDigits:0});for(var i=1;i<=columns.length;i++){numberFormatter.format(data,i);}
var chart=new google.visualization.LineChart($('.main-graph-holder')[0]);var options={backgroundColor:'transparent',width:'100%',height:265,lineWidth:2,pointSize:4,pointColor:'#ff0000',min:0,legend:'none',vAxis:{minValue:0,textPosition:'none'},chartArea:{left:'2.5%',top:0,width:"95%",height:"90%"},interpolateNulls:true,series:[{color:'#1c812f',targetAxisIndex:0},{color:'#2c5991',targetAxisIndex:0},{color:'#b47303',targetAxisIndex:0},{color:'#a21700',targetAxisIndex:0},{color:'#730067',targetAxisIndex:0},{color:'#666666',targetAxisIndex:0}],hAxis:{viewWindow:{min:chart_data[0]["date"],max:chart_data[chart_data.length-1]["date"]},slantedText:false,textStyle:{color:'#999999',fontSize:10}}};chart.draw(data,options);if(typeof(clickCallback)=='function'){google.visualization.events.addListener(chart,'select',function(){var selection=chart.getSelection()[0];var errorCode=columns[selection.column-1];var dateStr=getFormattedDate(chart_data[selection.row].date);clickCallback({date:dateStr,code:errorCode});});}};if(!Date.prototype.toISOString){(function(){function pad(number){var r=String(number);if(r.length===1){r='0'+r;}
return r;}
Date.prototype.toISOString=function(){return this.getUTCFullYear()
+'-'+pad(this.getUTCMonth()+1)
+'-'+pad(this.getUTCDate())
+'T'+pad(this.getUTCHours())
+':'+pad(this.getUTCMinutes())
+':'+pad(this.getUTCSeconds())
+'.'+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)
+'Z';};}());}
var getFormattedDate=function(date){date=typeof(date)==='object'?date:new Date(date);return date.toISOString().split("T")[0];};var errorReports=function(){var $date=$('#date');var $customer_external_id=$('#customer_external_id').val();var updateErrorsCounters=function(date){var data=getErrorCountsByDate(date);$('.errors-titles .error-code').each(function(){var $current=$(this);var code=$current.data('code');$('.count',$current).removeClass('spinner').html(getFormattedNumber(data.data[code]));});};var isSameDay=function(date1,date2){return getFormattedDate(date1)===getFormattedDate(date2);};var getFormattedNumber=function(num){num=num||0;return new Number(num).toLocaleString();};var getFormattedTs=function(obj){if(obj===undefined){return"&nbsp;";}
var ts=obj["value_as_string"];if(ts===undefined||ts===0||ts===""){return"&nbsp;";}
var res=ts.match(/\d{4}-\d{2}-\d{2}T(\d{2}:\d{2}:\d{2})\..{4}/);if(res===undefined||res.length!=2){return"&nbsp;";}
return res[1];}
var displayableErrors={"200":{count:0,title:"Fallback image on error"},"400":{count:0,title:"Bad request"},"401":{count:0,title:"Unauthorized"},"404":{count:0,title:"Not found"},"408":{count:0,title:"Timeout"},"420":{count:0,title:"Rate limited"}};var errorsData=[];var getErrorData=function(onData){var $dates=$('option',$date);var parallelism=5;var numOfDaysToFetch=$dates.length;var day=3600*24*1000;var endDate=new Date(Date.parse($dates.eq(0).val()));var deltaDays=parallelism*day;var startDate=endDate-(numOfDaysToFetch*day);function getErrorDataForDate(date){function onComplete(data){if(data){onData(date,data,startDate,endDate);}
if(date-deltaDays>startDate){getErrorDataForDate(new Date(date-deltaDays));}
var pageDate=$('#date').val();if(pageDate===getFormattedDate(date)){updateErrorsCounters(new Date(pageDate));}}
$.ajax({url:'/console/error_codes',data:{date:date.toUTCString(),customer_external_id:$customer_external_id},dataType:"json",success:onComplete,error:function(xhr,status,err){onComplete(null);}});}
for(var i=0;i<numOfDaysToFetch;i++){var date=endDate-(i*day);errorsData.push({"date":new Date(date),"data":null});};for(i=0;i<parallelism;i++){getErrorDataForDate(new Date(endDate-i*day),i);}};var getErrorCountsByDate=function(date){for(i in errorsData){if(isSameDay(errorsData[i].date,date)){return errorsData[i];}};return null;};var getDayIndexByDate=function(date){for(i in errorsData){if(isSameDay(errorsData[i].date,date)){return i;}};return-1;}
var dataExistUpTo=function(index){var isValid=true;for(var i=index;i<errorsData.length;i++){if(errorsData[i]["data"]===null){isValid=false;break;}}
return isValid;};var getDataToRender=function(){var countToRender=0;for(var i=0;i<errorsData.length;i++){if(errorsData[i]["data"]===null){break;}
countToRender++;}
var data=errorsData.map(function(item,index){return index<countToRender?item:{"date":item.date,"data":{}};});return{count:countToRender,data:data};};var setErrorCountsByDate=function(date,formattedData){for(i in errorsData){if(isSameDay(errorsData[i].date,date)){errorsData[i]["data"]=formattedData;return;}};};var $errorsSection=$('#errors-list-container');var openRequestId=0;var chartClick=function(data){var date=new Date(data.date);var errorCode=data.code;updatePageDate(getFormattedDate(date));updatePageErrorCode(errorCode);updatePageTitles(errorCode);updateErrorsCounters(date);var localRequestId=++openRequestId;var $resultsArea=$('.errors-list',$errorsSection).html('').addClass('spinner');$.get('/console/error_details',{date:date.toUTCString(),error_code:errorCode,customer_external_id:$customer_external_id},function(data){if(openRequestId>localRequestId){return;}
$resultsArea.removeClass('spinner');if(data.length===0){var title=$resultsArea.prev();title.html(title.html().replace("List of","No"));}
data.forEach(function(error,i){var key=error["key"];if(key.indexOf('"')==0){key=key.substring(1,key.length-1);}
var $line=$('<div />').addClass('error-item list-item').data('requests',error["requests"]).data('referrer',error["referrer"]).data('user_agent',error["user_agent"]).append('<span class="key">'+key+'</span>').append('<span class="count">'+getFormattedNumber(error["doc_count"])+'</span>');$resultsArea.append($line);});},"json");};var updatePageTitles=function(errorCode){var date=new Date($('#date').val());date=new Date(date.getTime()+date.getTimezoneOffset()*60000);var monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];$('.top-section .title').html('Error Report of '+monthNames[date.getMonth()]+' '+date.getDate()+', '+date.getFullYear());if(errorCode){$('.title',$errorsSection).html('').removeClass('click-note').append('List of errors of ').append('<span data-code="'+errorCode+'">\''+errorCode+' - '+displayableErrors[errorCode].title+'\'</span>');$('.top-section .error-code[data-code='+errorCode+']').addClass('current').siblings().removeClass('current');}};var updatePageDate=function(date){date=typeof(date)==='object'?getFormattedDate(date):date;$('#date').val(date);window.history.pushState("Cloudinary - Errors report for "+date,"Cloudinary","?date="+date);};var updatePageErrorCode=function(code){$('#code').val(code);};var injectErrorExtraData=function($sender){var injectDataBlock=function(title,data){var $dataBlock=$('<div />').addClass('data-block');$dataBlock.append('<label class="data-block-label">'+title+'<span class="count"><span class="last_occurred">Last Seen (UTC)</span><span class="num">Count</span></label>');$.each(data,function(i,item){var key=item["key"];if(key.indexOf('"')==0){key=key.substring(1,key.length-1);}
var $line=$('<div />').addClass('list-item').append('<span class="key">'+key+'</span>').append('<span class="count"><span class="last_occurred">'+getFormattedTs(item["last_occurred"])+'</span><span class="num">'+getFormattedNumber(item["doc_count"])+'</span>').appendTo($dataBlock);});$dataBlock.appendTo($sender);};var referrerData=$sender.data('referrer');var requestsData=$sender.data('requests');var userAgentData=$sender.data('user_agent');injectDataBlock('By requested URI',requestsData.buckets);injectDataBlock('By referrer',referrerData.buckets);if(userAgentData&&userAgentData.buckets){injectDataBlock('By user agent',userAgentData.buckets);}
$sender.addClass('with-data');};$errorsSection.off('click').on('click','.error-item',function(){var $sender=$(this);$sender.siblings().each(function(){$(this).find('.data-block').slideUp('fast');});if(!$sender.hasClass('with-data')){injectErrorExtraData($sender);}
$('.data-block',$sender).slideToggle('fast');$sender.toggleClass('open');});$errorsSection.on('click','.data-block',function(){return false;});$('#date').off().change(function(){var date=$(this).val();var errorCode=$('#code').val();updatePageDate(date);updatePageTitles();updateErrorsCounters(new Date(date));if(errorCode===''){return;}
chartClick({date:date,code:errorCode});});$('.error_aggregation').off('click').on('click','.error-code',function(){var $sender=$(this);var date=$('#date').val();var errorCode=$sender.data('code');updatePageErrorCode(errorCode);chartClick({date:date,code:errorCode});});var daysRendered=0;var chartData;getErrorData(function(date,data){var formattedData={};if(data.length>0){for(error in displayableErrors){formattedData[error]=0;}
data.forEach(function(error,i){var code=error["key"];if(displayableErrors[code]){formattedData[code]=error["doc_count"]}});}
setErrorCountsByDate(date,formattedData);var dayIndex=getDayIndexByDate(date);if(dayIndex+1>daysRendered||dayIndex===0){var data=getDataToRender();if(data&&data.count>daysRendered){daysRendered=data.count;draw_main_graph(data.data,chartClick);if(data.count===data.data.length){$('#date').removeAttr('disabled');}}}});$(window).on('resize',function(){var data=getDataToRender();draw_main_graph(data.data,chartClick);});}();}
$(function(){var timer=setInterval(function(){if(window.google&&google.visualization&&google.visualization.DataTable){clearInterval(timer);error_report_renderer();}},500);});$(document).ready(function(){var messages={error_invalid_card_holder_name:"Invalid card holder name",error_missing_cvv_number:"Please enter CVV for verification.",error_payment:"We're sorry - something went wrong. Couldn't initiate payment.",error_remove_payment_method:"We're sorry - something went wrong. Couldn't remove payment method.",field_invalid_card_number:"Missing or invalid credit card number",field_invalid_card_exp_year:"Missing or invalid expiration year",field_invalid_card_exp_month:"Missing or invalid expiration month",field_invalid_card_exp:"Card is no longer valid",field_invalid_card_cvc:"Invalid security code",field_invalid_card_holder:"Invalid card holder name","Invalid PAN":"Missing or invalid credit card number","Invalid expiration date":"Missing or invalid expiration date","One or more request parameters are invalid.":"Invalid CVV number",};function showError(error){if(messages[error]){error=messages[error];}
$(".payment-errors").text(error);toggleProcessing();}
function showErrorAndLog(error,details){showError(error);$.ajax({url:Routes.report_issue_console_payments_path(),data:{issue:error,details:JSON.stringify(details)},type:"POST"});}
function toggleProcessing(button){var creditCardSection=$(".credit_card_section");var submitButtons=creditCardSection.children(".submit_payment");if(button){creditCardSection.data("disabled",true);submitButtons.data("disabled",true);button.closest("form").find(".processing-warning").addClass("active");button.addClass("spinning").spinner({hide:true,position:"center"});}else{creditCardSection.data("disabled",false);submitButtons.data("disabled",false);$(".processing-warning").removeClass("active");$(".spinning").removeClass("spinning").spinner("remove");}}
if(window.POS){var textFieldStyle={fontFamily:'"Fira Sans", sans-serif',fontSize:"12px",color:"#323a45",outline:"none",height:null,padding:"7px 0 7px 7px",border:"1px solid #90a0b3",borderRadius:"4px",marginRight:"10px",marginTop:"0",};POS.setStyle({base:{height:"25px",marginTop:"2px",pan:$.extend({},textFieldStyle,{width:"180px",}),expirationDate:$.extend({},textFieldStyle,{width:"70px",}),cvv:$.extend({},textFieldStyle,{width:"70px",})}});POS.setCardNumberPlaceholder("");POS.setExpirationDatePlaceholder("");POS.setSecurityNumberPlaceholder("");POS.initSecureFields('secure-fields');$('#credit-card-form').on('submit',function(event){event.preventDefault();if($(".credit_card_section").data("disabled"))return;var form=$(event.currentTarget);var params=form.serializeArray();var name=getSerializedValue(params,"cardholder_name")
if(!name||!name.trim()){showError("error_invalid_card_holder_name");return;}
var additionalData={holder_name:name}
toggleProcessing(form.find('.submit_payment'));var data=$(this).data();trackBillingEvents&&trackBillingEvents.creditCardSubscribeClick(data?.product);POS.createToken(additionalData,function(responseText){var response=JSON.parse(responseText);if(!response.token){trackBillingEvents&&trackBillingEvents.creditCardSubscribeSomethingWentWrong();showErrorAndLog(response.description,response);return;}
if(!response.encrypted_cvv){trackBillingEvents&&trackBillingEvents.creditCardSubscribeSomethingWentWrong();showError("error_missing_cvv_number");return;}
var tokenForm=$('#card-token-form');tokenForm.find('[name=payment_method_token]').val(response.token);tokenForm.find('[name=encrypted_cvv]').val(response.encrypted_cvv);trackBillingEvents&&trackBillingEvents.creditCardSubscribeSuccess(data?.product);tokenForm.submit();});});}
function getZooZPaymentToken(callback){$.ajax(Routes.get_zooz_payment_token_console_payments_path(),{data:{amount:$('.amount').val()},type:'POST',success:callback,error:function(){showErrorAndLog("error_payment");}})}
if($('#payment-form').size()>0){$('#payment-form select').uniform();}
var iframeHost=$("#payment-form").data('host');if(!window.postMessage||!JSON){$('#zooz_iframe').remove();$(".no_post_message_warning").addClass("active");}
function receiveMessage(jqEvent){var event=jqEvent.originalEvent;if(event.origin!==iframeHost)
return;var data=JSON.parse(event.data);if(data.action==='error'){return showErrorAndLog(data.error);}else if(data.action==='getPaymentToken'){getZooZPaymentToken(function(data){var form=$("#payment-form");form.find('.zooz_payment_token').val(data.token);var newData={token:data.token,email:$(".card_holder_email").val()};$('#zooz_iframe')[0].contentWindow.postMessage(JSON.stringify(newData),iframeHost);});}else if(data.action==='submit'){var form=$("#payment-form");form.find('.zooz_payment_method_token').val(data.paymentMethodToken);form.find('.cvv_number').val(data.cvvNumber);form.submit();}}
if(iframeHost){$(window).on("message",receiveMessage);}
$(".pos_payment_method_form").on("submit",function(event){if($(this).data("disabled")||$(".credit_card_section").data("disabled")){return false;}
if($(this).hasClass("requires_cvv")){var cvv_field=$(this).find('.card-cvc');var errorMessage=$(this).find('.cvv-section .error-message')
if(!cvv_field.val()){errorMessage.addClass('active');cvv_field.addClass('error');return false;}else{cvv_field.removeClass('error');errorMessage.removeClass('active');}}
toggleProcessing($(this).find(".submit_payment"));});$(".pos_payment_method_form a.submit_payment").click(function(event){event.preventDefault();$(this).parent("form").submit();});$(".payment_method .remove_payment_method").click(function(event){event.preventDefault();paymentMethod=$(this).closest(".payment_method");toggleProcessing();ajax_post_with_spinner($(this),function(){paymentMethod.remove();toggleProcessing();},{error:function(error){showErrorAndLog("error_remove_payment_method");}});});});$(document).ready(function(){var submitting_code=false;$('.promo_code_form .submit').click(function(){if(submitting_code){return false;}
if($(this).parents('form').find('input[type=text]').val()==''){return false;}
var submit_elem=$(this);$('.subscribe').addClass('inactive');$(submit_elem).parents('.promo_code').removeClass('success error');submitting_code=true;ajax_post_with_spinner($(submit_elem),function(){},{form:true,keep_spinner:true,status_code:{400:function(jqXHR){$(submit_elem).parents('.promo_code').addClass('error');$(submit_elem).parents('.promo_code').find('.error').html(jqXHR.responseText);$('.subscribe').removeClass('inactive');$(submit_elem).spinner('remove');submitting_code=false;},200:function(jqXHR){$(submit_elem).parents('.promo_code').addClass('success');$(submit_elem).parents('.promo_code').find('.success').html(jqXHR.responseText);$(submit_elem).spinner('remove');window.location.reload();}}});return false;});});$(function(){if($('.settings_form').size()>0){$('.settings_form .settings_section select, .settings_form .settings_section input[type=checkbox], .settings_form .settings_section input[type=radio]').not('.noUniform').uniform({selectAutoWidth:false});}
function toDateString(d){var month=(d.getMonth()+1).toString();if(month.length<2)month="0"+month;var day=d.getDate().toString();if(day.length<2)day="0"+day;return d.getFullYear()+"-"+month+"-"+day;}
function toMonthString(d){var month=(d.getMonth()+1).toString();if(month.length<2)month="0"+month;return d.getFullYear()+"-"+month;}
$('#sub-accounts-reports input[type = Date]').val(toDateString(new Date()))
$('#sub-accounts-reports .download').on('click',function(e){e.preventDefault();var parent=$(this.parentElement)
var dropDownValue=$('#sub-accounts-reports .sel.type').val();var isCumulative=dropDownValue==='cumulative';var reportsUrl=new URL("/console/settings/report",location.origin);for(let field of parent.children("input,select").toArray()){field.setCustomValidity('');if(!field.reportValidity())return;}
var data={};for(let field of parent.serializeArray()){switch(field.name){case'report[from]':data[field.name]=isCumulative?field.value+'-01':field.value
break;case'report[to]':data[field.name]=isCumulative?field.value+'-28':field.value
break;default:data[field.name]=field.value;}}
var selected=parent.find(".sel :selected").text();$.ajax({url:reportsUrl.href,type:'POST',data:data,error:function(xhr){console.log(xhr.status,xhr.responseText)
if(xhr.status===400){json=JSON.parse(xhr.responseText);var field=$("."+json.field)[0];field.setCustomValidity(json.error);field.reportValidity();}},success:function(data,_status,xhr){let blob=new Blob([data])
let url=URL.createObjectURL(blob)
let link=document.createElement('a')
link.href=url;link.download=xhr.getResponseHeader("Content-Disposition").match(/attachment\s?;\s?filename\s?=['"]([^;=\n]+)["']/)[1]
link.click();URL.revokeObjectURL(url)}})})
var fromDateInput=$('#sub-accounts-reports input.from_date');var toDateInput=$('#sub-accounts-reports input.to_date');var typeDropDown=$('#sub-accounts-reports .sel.type');typeDropDown.on('change',function(e){var type=e.target.value==='cumulative'?'month':'date';fromDateInput.attr('type',type);toDateInput.attr('type',type);});fromDateInput.on('change',function(e){e.target.setCustomValidity('');if(!e.target.checkValidity())return;toDateInput[0].min=e.target.value;toDateInput[0].reportValidity();trackGtmEvent({event:'ga4_event',flow:'change_from_date_usage_report',additional_info:e.target.value})});toDateInput.on('change',function(e){trackGtmEvent({event:'ga4_event',flow:'select_to_date_usage_report',additional_info:toDateInput.val()});})
$('#sub-accounts-reports .type').on('change',function(e){$('#sub-accounts-reports input[type = Date]').val(toDateString(new Date()))
$('#sub-accounts-reports input[type = month]').val(toMonthString(new Date()))
trackGtmEvent({event:'ga4_event',flow:'select_type_usage_report',additional_info:e.target.value});})
if('customer_is_untrusted'in window)
$('.submit_button').on('click',function(e){var form=$('.settings_form form')[0];if((form.elements['customer_is_trusted_yes']&&customer_is_untrusted===form.elements.customer_is_trusted_yes.checked)&&customer_is_untrusted){e.preventDefault();e.stopImmediatePropagation();$("#confirm-customer-trust").dialog({resizable:false,width:350,modal:true,buttons:[{text:"Cancel",autofocus:"autofocus",click:function(){$(this).dialog("close");}},{text:"Accept",click:function(){$(this).dialog("close");form.submit();}}]});}});});$(function(){var raw_convert=$("#upload_preset_settings_raw_convert");choose_raw_convert();raw_convert.on('change',function(){choose_raw_convert();})
function choose_raw_convert(){if(raw_convert.val()=="google_speech"||raw_convert.val()=="azure_video_indexer"){$(".video_language_title").show();$(".video_transcription_parameters").show();if(raw_convert.val()=="google_speech"){$(".google_languages").show();$(".azure_languages").hide();}
else{$(".azure_languages").show();$(".google_languages").hide();}}
else{$(".video_transcription_parameters").hide();$(".video_language_title").hide();}}
$(".row .input.boolean-field input").live("change",function(){$(this).prev().val($(this).attr('checked')?'1':'0');})
var update=function(){var empty=$("table.upload_presets tr.upload_preset").length==0;var no_unsigned=$("table.upload_presets .unsigned").length==0;$("table.upload_presets .presets_header").toggleClass("hidden",empty);$(".enable_unsigned").toggleClass("hidden",!no_unsigned);$(".unsigned_upload_note").toggleClass("hidden",!no_unsigned);$(".unsigned_enabled").toggleClass("hidden",no_unsigned);};$(".enable_unsigned, table.upload_presets .duplicate").live("click",function(event){event.preventDefault();event.stopPropagation();link=$(this);ajax_post_with_spinner(link,function(row){link.closest(".row").find("table").append(row);update();},{method:'POST',data_type:'html'})});$("table.upload_presets .delete").live("click",function(event){event.preventDefault();event.stopPropagation();delete_link=$(this);$('.upload_preset_defaults option[value='+$(this).data('id')+']').remove();$.uniform.update();ajax_post_with_spinner(delete_link,function(){delete_link.closest("tr").remove();update();},{method:'DELETE'})});})
function customers_changed(){if(window.cldNewConsole){window.parent.postMessage({customers_changed:true},window.location.protocol+'//'+window.location.host);}}
$(function(){customers_changed();var $provisioningSettings=$('.provisioning_sub_accounts');$provisioningSettings.on('click','table .delete',function(event){event.preventDefault();event.stopPropagation();$sender=$(this);var canBeDeleted=$sender.data('can-be-deleted');var confirm_deletion=function(callback){if(canBeDeleted){$("#confirm-account-deletion").html("Are you sure you want to delete this product environment?").dialog({resizable:false,width:350,modal:true,buttons:[{text:"Delete",click:function(){$(this).dialog("close");callback();}},{text:"Cancel",autofocus:"autofocus",click:function(){$(this).dialog("close");}}]});}else{$("#confirm-account-deletion").html("The sub-account contains more originals than allowed for deletion. Please use <a href='/console/settings/bulk_delete'>bulk delete</a> to delete the original resources and then try again.").dialog({resizable:false,width:350,modal:true,buttons:[{text:"Close",autofocus:"autofocus",click:function(){$(this).dialog("close");}}]});}}
confirm_deletion(function(){var $pagingSummary=$sender.closest('.provisioning_sub_accounts').find('.pagination-summary');ajax_post_with_spinner($sender,function(data){if(data.status==="OK"){customers_changed();var maxAccounts=$provisioningSettings.data('max-sub-accounts');var numAccounts=$provisioningSettings.data('num-sub-accounts')-1;$provisioningSettings.data('num-sub-accounts',numAccounts);if(numAccounts<maxAccounts){$provisioningSettings.removeClass('max-accounts');}
$sender.closest("tr").remove();if(numAccounts<=1){$provisioningSettings.find('table .delete').remove();}
if($pagingSummary.find('b').length==2){var results=$pagingSummary.find('b:eq(0)').text().split('-');var first=parseInt(results[0]);var last=parseInt(results[1])-1;var total=parseInt($pagingSummary.find('b:eq(1)').text())-1;$pagingSummary.html('').append('Displaying sub accounts ').append('<b>'+first+' - '+last+'</b>').append(' of <b> '+total+'</b> in total');}else if($pagingSummary.find('b').length==1){var total=parseInt($pagingSummary.find('b:eq(0)').text().slice(4))-1;$pagingSummary.html('').append('Displaying ').append('<b>all '+total+'</b> sub accounts');}}},{method:'DELETE'})})});$provisioningSettings.on('click','.pagination a',function(event){event.preventDefault();var $sender=$(this);var page=$sender.attr('href').split('page=')[1];$.ajax({url:'/console/settings/fetch_accounts',data:{page:page},success:function(data){$('#sub-accounts-container').html(data);},type:"GET"});});$provisioningSettings.on('click','.create-new-link',function(event){if($provisioningSettings.data('has-unit-price')){event.preventDefault();var url=$(this).attr('href');$("#notify-payg-price, .notify-payg-price").dialog({resizable:false,width:350,modal:true,buttons:[{text:"Continue",autofocus:"autofocus",click:function(){$(this).dialog("close");window.location=url;}},{text:"Cancel",click:function(){$(this).dialog("close");}}]});}});});$(function(){var $input=$('#default_quality');if($input.length===0)return;var $qualityLevel=$('#quality_level');var $encodingSettings=$('#encoding_settings');var initiateDropDowns=function(){var value=$input.val();if(value!=''){if(value.startsWith('auto')){var values=value.split(':');var quality=values[0];if(values[1]){quality+=':'+values[1]}
$qualityLevel.val(quality);$.uniform.update($qualityLevel);if(values[2]){$encodingSettings.val(':'+values[2]);$.uniform.update($encodingSettings);}}else{var values=value.split(':');var quality=values[0];$qualityLevel.val(quality);$.uniform.update($qualityLevel);if(values[1]){$encodingSettings.val(':'+values[1]);$.uniform.update($encodingSettings);}}}else{$encodingSettings.prop('disabled',true);$encodingSettings.addClass('disable');$.uniform.update($encodingSettings);}};initiateDropDowns();var updateDefaultQualityField=function(){$input.val($qualityLevel.val()+$encodingSettings.val());};$qualityLevel.on('change',function(){var quality=$qualityLevel.val();$encodingSettings.val('');$encodingSettings.prop('disabled',(isNaN(quality)&&!quality.startsWith('auto'))||quality=='');$encodingSettings.toggleClass('disable',(isNaN(quality)&&!quality.startsWith('auto'))||quality=='');$.uniform.update($encodingSettings);updateDefaultQualityField();});$encodingSettings.on('change',updateDefaultQualityField);});$(function(){function transformation_field(selector,callback,options){fields=$(selector);options=options||{};fields.each(function(index,field){field=$(field);var data=field.data("transformation");var dialog=$("<div/>").addClass('transformations_panel').addClass("image_mode");var widget;dialog.addClass("transformation_holder");field.closest(".input").append(dialog);dialog.dialog({autoOpen:false,width:640,height:480,title:"Edit Transformation",modal:true,create:function(){widget=transformationWidget(options).root(dialog).template(".trans_form_template").clear();if(data!==undefined&&data.length>0){widget.load(data);}},buttons:{"Clear":function(){widget.clear();},"Restore":function(){widget.clear();if(data!==undefined&&data.length>0){widget.load(data);}},"Chain Transformation":function(){widget.addTransformation();$(dialog).scrollTop(dialog.prop('scrollHeight'));},"Add Overlay":function(){widget.addOverlay();$(dialog).scrollTop(dialog.prop('scrollHeight'));},"OK":function(){var params=widget.params();var transformation=$.cloudinary.transformation_string({transformation:params.list});if(params.empty_extension){transformation+="/";}else if(params.force_format){transformation+="/"+params.force_format;}
callback(transformation,field);dialog.dialog("close");}}});field.click(function(event){event.preventDefault();dialog.dialog("open");});});}
var remove_incoming_transformation=$(".transformation_opener .remove");var update_incoming=function(transformation_string){$(".transformation_opener .value").text(transformation_string);$("#upload_preset_settings_transformation").val(transformation_string);remove_incoming_transformation.toggleClass("hidden",transformation_string.trim().length===0);}
transformation_field(".transformation_opener .edit",update_incoming,{prevent_format:true});var incoming_remove_handler=function(event){event.preventDefault();update_incoming('');};remove_incoming_transformation.click(incoming_remove_handler);remove_incoming_transformation.toggleClass("hidden",$(".transformation_opener .value").text().trim().length===0);var update_eager=function(){var eagers=[];$(".eager_opener .value").each(function(i,o){if($(o).text().length>0){eagers.push($(o).text().trim());}});$("#upload_preset_settings_eager").val(eagers.join("|"));}
var eager_handler=function(transformation_string,opener){$(opener).closest('.single-transformation').find(".value").text(transformation_string);update_eager();};var eager_remove_handler=function(event){event.preventDefault();$(this).closest('.single-transformation').remove();update_eager();};$(".eager_opener .remove").click(eager_remove_handler);transformation_field(".eager_opener .edit",eager_handler);$(".label.eager-field").closest(".row").css("border","none");$("#add_eager_transformation").click(function(event){event.preventDefault();var eagerOpener=$("<div/>").addClass('eager_opener').addClass("opener");var singleTransformation=$("<div/>").addClass('single-transformation');var buttons=$("<div/>").addClass('transformation-buttons');var value=$("<div/>").prop("href","#").addClass('value');var edit=$("<a/>").prop("href","#").addClass('edit').addClass('transformation-button').text("Edit");var remove=$("<a/>").prop("href","#").addClass('remove').addClass('transformation-button').text("Remove");remove.click(eager_remove_handler);buttons.append(edit).append(remove);singleTransformation.append(value).append(buttons)
$("#add_eager_transformation").before(eagerOpener);transformation_field(edit,function(transformation_string,opener){eagerOpener.append(singleTransformation);eager_handler(transformation_string,opener);});$(edit).click();});function pad(number,length){var str=''+number;while(str.length<length){str='0'+str;}
return str;}
if(!Date.prototype.toISOString){(function(){Date.prototype.toISOString=function(){return this.getUTCFullYear()
+'-'+pad(this.getUTCMonth()+1)
+'-'+pad(this.getUTCDate())
+'T'+pad(this.getUTCHours())
+':'+pad(this.getUTCMinutes())
+':'+pad(this.getUTCSeconds())
+'.'+String((this.getUTCMilliseconds()/1000).toFixed(3)).slice(2,5)
+'Z';};}());}
var monthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var setAccessTime=function(datePicker,timePicker,utc){if(utc){var date=new Date(utc);var day=date.getDate();var monthIndex=date.getMonth();var year=date.getFullYear();datePicker.val(day+" "+monthNames[monthIndex]+" "+year);var parsedTime=pad(date.getHours(),2)+":"+pad(date.getMinutes(),2);timePicker.val(parsedTime);}}
var access_control=$(".input.access-control");var access_contorl_data=access_control.data("access-control");var tokenRestriction=null;var anonymousRestriction=null;if(access_contorl_data){var parsed=access_contorl_data;tokenRestriction=parsed.filter(function(acl){return acl.access_type==='token'})[0];anonymousRestriction=parsed.filter(function(acl){return acl.access_type==='anonymous'})[0];}
var select=access_control.find('select');select.val(tokenRestriction?'token':'anonymous');$(select.siblings('span')).text(tokenRestriction?'Restricted':'Public');var from=$(".access-control-date-picker-start");var to=$(".access-control-date-picker-expiration");var serializeAcls=function(){var newAcl=[];var accessControlState=select.val();var startDate=from.val();var startTime=accessControlStartTime.val()||'00:00';var endDate=to.val();var endTime=accessControlEndTime.val()||'00:00';var anonymousAcl={access_type:'anonymous'};var tokenAcl={access_type:'token'};if(accessControlState==='anonymous'){newAcl.push(anonymousAcl);}else{newAcl.push(tokenAcl);if($("#access_control_public_in_date").is(":checked")&&(startDate||endDate)){if(startDate){anonymousAcl.start=new Date(startDate+" "+startTime).toISOString();}
if(endDate){anonymousAcl.end=new Date(endDate+" "+endTime).toISOString();}
newAcl.push(anonymousAcl);}}
$("#upload_preset_settings_access_control").val(JSON.stringify(newAcl));}
function ensureDateConstraints(pickerInstance,dateText){if($(pickerInstance).attr('id')===from.attr('id')){var settings=to.datepicker("option","minDate",dateText?new Date(dateText):null);}else{from.datepicker("option","maxDate",dateText?new Date(dateText):null);}}
var datepickerSettings={dateFormat:'d M yy',selectOtherMonths:true,showOtherMonths:true,onSelect:function(dateText,instance){ensureDateConstraints(instance,dateText);serializeAcls();}}
from.datepicker(datepickerSettings);to.datepicker(datepickerSettings);from.attr("placeholder","From now");to.attr("placeholder","Doesn't expire");var accessControlTimePickers=$(".access_control_time_picker");var accessControlStartTime=$(accessControlTimePickers[0]);var accessControlEndTime=$(accessControlTimePickers[1]);if(tokenRestriction&&anonymousRestriction){setAccessTime(from,accessControlStartTime,anonymousRestriction.start);setAccessTime(to,accessControlEndTime,anonymousRestriction.end);}
ensureDateConstraints(from,from.val())
ensureDateConstraints(to,to.val())
var publicOnlyOnDates=$("#access_control_public_in_date");publicOnlyOnDates.attr('checked',!!from.val()||!!to.val());var disableDateInputs=function(){var isChecked=publicOnlyOnDates.is(":checked");from.attr("disabled",!isChecked);to.attr("disabled",!isChecked);accessControlStartTime.attr("disabled",!isChecked);accessControlEndTime.attr("disabled",!isChecked);}
disableDateInputs();publicOnlyOnDates.click(function(){disableDateInputs();serializeAcls();});var publicDatesSettings=$(".access-control-public-dates");$(".access-control-public-dates").toggleClass("hidden",select.val()==="anonymous");$(".access-control-public-dates").toggleClass("hidden",select.val()==="anonymous");select.change(function onAclChange(ev){var val=$(ev.target).val();$(".access-control-public-dates").toggleClass("hidden",$(ev.target).val()==="anonymous");serializeAcls();});accessControlStartTime.on("change",serializeAcls);accessControlEndTime.on("change",serializeAcls);var unsigned=$("#upload_preset_unsigned");var overwrite=$("#upload_preset_settings_overwrite");var use_filename=$("#upload_preset_settings_use_filename");var unique_filename=$("#upload_preset_settings_unique_filename");var eager_async=$("#upload_preset_settings_eager_async");var eager_notification_url=$("#upload_preset_settings_eager_notification_url");var tagging_engines=$(".input.categorization-field");var auto_tagging_slider=$(".label.tagging-field");var disallow_public_id=$("#upload_preset_settings_disallow_public_id");var update_dependant_fields=function(){overwrite.closest(".row").toggleClass("hidden",unsigned.val()=="true");disallow_public_id.closest(".row").toggleClass("hidden",unsigned.val()!="true");if(unsigned.val()=="true"){overwrite.val(null);}
var shouldHide=unique_filename.closest('.old-file-name-settings').length>0;shouldHide&&unique_filename.closest(".row").toggleClass("hidden",!(use_filename.attr('checked')==="checked"));eager_notification_url.closest(".row").toggleClass("hidden",!(eager_async.attr('checked')==="checked"));auto_tagging_slider.closest(".row").toggleClass("hidden",!(tagging_engines.children(":checked").length>0));};unsigned.change(update_dependant_fields);use_filename.change(update_dependant_fields);eager_async.change(update_dependant_fields);tagging_engines.children("input").change(update_dependant_fields);update_dependant_fields();$(".advanced_toggle").click(function(event){event.preventDefault();$(".settings_section.advanced").toggleClass("hidden")});var taggingField=$(".tagging-field"),taggingConfidenceInput=$(".with_slider.tag_field"),taggingConfidenceSlider=taggingField.find(".slider.tag_slider"),DEFAULT_VAL=taggingConfidenceInput.val(),MIN_VAL=0,MAX_VAL=1;updateTaggingConfidenceValue=function(){var slider=$(this);taggingField.find("#"+slider.data("field")).val(slider.slider("value"));};taggingConfidenceSlider.slider({min:MIN_VAL,value:DEFAULT_VAL,max:MAX_VAL,step:0.01,range:"min",slide:updateTaggingConfidenceValue,change:updateTaggingConfidenceValue});taggingConfidenceInput.on("change",function onConfidenceChange(){taggingConfidenceSlider.slider("value",taggingConfidenceInput.val());});});$(function(){var validateFolderName=function(){var $element=$(this);var index=$element.val().indexOf('_');if(index>=0&&index<4){$element.next('.auto_mapping_folder_name_error').html('An underscore cannot be used as one of the first 4 characters unless the URL contains a <a href="https://cloudinary.com/documentation/upload_images#image_versions">version component</a>').show();}else{$element.next('.auto_mapping_folder_name_error').html('').hide();}}
var generateAutoMappingExample=function(){var $changedElement=$(this);var $wrapper=$changedElement.closest('.auto_fetch_mapping');var $folderNameElement=$wrapper.find('.auto-mapping-folder-name');var $urlPrefixElement=$wrapper.find('.auto-mapping-url-prefix');var folderName=$folderNameElement.val();var urlPrefix=$urlPrefixElement.val();$exampleElement=$wrapper.find('.auto-mapping-example');if(folderName.length>0&&urlPrefix.length>0){var urlPrefixExample=urlPrefix+'sample.jpg';var $folderExampleElement=$wrapper.find('.auto-mapping-folder-example')
var cloudName=$folderExampleElement.data('cloud-name');var folderNameExample='https://res.cloudinary.com/'+cloudName+'/image/upload/'+folderName+'/sample.jpg';$folderExampleElement.text(folderNameExample);$wrapper.find('.auto-mapping-url-prefix-example').text(urlPrefixExample);$exampleElement.show();}else{$exampleElement.hide();}
return true;}
$('.auto-mapping-folder-name').each(generateAutoMappingExample);$('.auto-mapping-folder-name').keyup(validateFolderName);$('.auto-mapping-folder-name').keyup(generateAutoMappingExample);$('.auto-mapping-url-prefix').keyup(generateAutoMappingExample);function validateAddress(form){if(!form.find('#country_us_address')[0])return true;var address_line1=form.find('input[name="account[address_line1]"]');var address_line2=form.find('input[name="account[address_line2]"]');var city=form.find('input[name="account[address_city]"]');var state=form.find('select[name="account[address_state]"]');var zip=form.find('input[name="account[address_zipcode]"]');var addressInfo={address_line1:address_line1.val(),address_line2:address_line2.val(),city:city.val(),state:state.val(),zip:zip.val()};$.getJSON('/console/settings/billing/validate_address',addressInfo,function(data){if(data["error"])return form.submit();var updateAndSubmit=function(){address_line1.val(data.address_line1.resolved);address_line2.val(data.address_line2.resolved);city.val(data.city.resolved);state.val(data.state.resolved);zip.val(data.zip.resolved);form.submit();}
var updateAndSubmitProvided=function(){address_line1.val(data.address_line1.submitted);address_line2.val(data.address_line2.submitted);city.val(data.city.submitted);state.val(data.state.submitted);zip.val(data.zip.submitted);form.submit();}
if(!data.address_line1.different&&!data.address_line2.different&&!data.city.different&&!data.state.different&&!data.zip.different){return updateAndSubmit();}
var dialogSelector=$('#address-confirmation-dialog');var table=dialogSelector.find('table.address-comparison');var insertAndMarkInputs=function(row,input,output,different){row.find('td.input').text(input);row.find('td.output').text(output);row.toggleClass('different',different);}
var inputAddressLines=(addressInfo.address_line1+"\n"+addressInfo.address_line2).replace(/\n$/,"");var outputAddressLines=(data.address_line1.resolved+"\n"+data.address_line2.resolved).replace(/\n$/,"");var differentAddressLines=data.address_line1.different||data.address_line2.different
insertAndMarkInputs(table.find('tr.address-lines'),inputAddressLines,outputAddressLines,differentAddressLines);$.each(['city','state','zip'],function(_,field){var row=table.find('tr.'+field);let input=addressInfo[field];var output=data[field].resolved;insertAndMarkInputs(row,input,output,data[field].different)});var addressConfirmationDialog=dialogSelector.dialog({width:500,modal:true,dialogClass:"confirm-address-ui-dialog",buttons:[{text:"Modify Address",click:function(){addressConfirmationDialog.dialog("close");},id:"modify-address-button"},{text:"Keep Resolved Address",click:updateAndSubmit,id:"accept-resolved-address-button"},{text:"Keep Provided Address",click:updateAndSubmitProvided,id:"accept-provided-address-button"}]});});return false;}
$('.settings_form .submit_button, .save-upload-preset').click(function(){var form=$('.settings_form form:first');var formElement=form[0];if(formElement&&formElement.action&&formElement.action.match(/\/console\/(?!lui)/)&&document.getElementsByClassName('new_console').length>0){formElement.action=formElement.action.replace(/\/console(\?.*)?$|\/console(\/c-[0-9a-zA-Z-]+)?(\/.*)/,'/console$2/lui$1$3');}
if(!$(this).hasClass('disabled')&&(validateAddress(form)))form.submit();return false;});$('.submit_user_group_form').click(function(){if(window.cldNewConsole){window.parent.postMessage({user_groups_changed:true},window.location.protocol+'//'+window.location.host);}})
$('.submit_user_form').click(function(){if(window.cldNewConsole){window.parent.postMessage({users_changed:true},window.location.protocol+'//'+window.location.host);}})
$('.upload-sections-list li').each(function(){$(this).click(function(){$('.upload-sections-list li.active').removeClass('active')
$(this).addClass('active');$('.edit-upload-presets .settings_form').attr('data-category',$(this).attr('data-category'));});});var errors=$("[data-category] .error");if(errors.length){var category=errors.first().closest("[data-category]").attr("data-category");$(".upload-sections-list").find("li[data-category="+category+"]").click();}
$('#jquery-lightbox').livequery(function(){$(this).css('z-index',10005);});$('.settings_form .auto_fetch_mappings_holder .add').live('click',function(){var num_mappings=$('.auto_fetch_mappings .auto_fetch_mapping').length;$('.auto_fetch_mappings').append($('.auto_fetch_mappings .auto_fetch_mapping')[0].outerHTML.replace(/\[0\]/g,'['+num_mappings+']').replace(/_0_/g,'_'+num_mappings+'_'));$('.auto_mapping_folder_name_error').hide();$autoMappingFolderNameElement=$('.auto-mapping-folder-name');$autoMappingFolderNameElement.keyup(validateFolderName);$autoMappingFolderNameElement.keyup(generateAutoMappingExample);$('.auto-mapping-url-prefix').keyup(generateAutoMappingExample);$('.auto_fetch_mappings .auto_fetch_mapping:last input').val('');$('.auto_fetch_mappings .auto_fetch_mapping:last input.destroy').val('1');$('.auto_fetch_mappings .mapped_preset:last').remove();$autoMappingFolderNameElement.trigger("keyup");return false;});$('.settings_form .auto_fetch_mapping input.prefix').live('change',function(){var should_destroy=$(this).val()=='';$(this).closest('.auto_fetch_mapping').find("input[type='hidden'].destroy").val(should_destroy?"1":"0");});});$(function(){var $usersSection=$(".user_management");$usersSection.on('click','.actions .delete',function(event){event.preventDefault();event.stopPropagation();var entityType=$(event.target).data('type')||"user";if(!confirm("Are you sure you want to delete this "+entityType+"?"))return;var link=$(this);ajax_post_with_spinner(link,function(){window.location.reload();if(entityType==='user'&&window.cldNewConsole){window.parent.postMessage({users_changed:true},window.location.protocol+'//'+window.location.host);}
if(entityType==='user group'&&window.cldNewConsole){window.parent.postMessage({user_groups_changed:true},window.location.protocol+'//'+window.location.host);}},{method:'DELETE'});});$usersSection.on('click','.add_new_user',function(event){var $sender=$(this);if($sender.hasClass('with-warning')){event.preventDefault();var url=$sender.attr('href');$("#notify-payg-price, .notify-payg-price").dialog({resizable:false,width:350,modal:true,buttons:[{text:"Continue",autofocus:"autofocus",click:function(){$(this).dialog("close");window.location=url;}},{text:"Cancel",click:function(){$(this).dialog("close");}}]});}});});$(function(){$(document).ready(function(event){var headersTable=$('.header_only'),fullTable=$('.full_table'),$bodyCells=fullTable.find('tbody tr:first').children(),colWidth;colWidth=$bodyCells.map(function(){return $(this).width();}).get();headersTable.find('thead tr').children().each(function(i,v){$(v).width(colWidth[i]);});})});var calcTableWidth=()=>{var headersTable=$('.header_only'),fullTable=$('.full_table'),$bodyCells=headersTable.find('thead tr:first').children(),colWidth;colWidth=$bodyCells.map(function(){return $(this).width();}).get();fullTable.find('tbody tr').each(function(){$(this).children().each(function(i,v){$(v).width(colWidth[i]);});})};$(function(){$('.search_users').on("keyup",function(event){var term=$(this).val().toLowerCase().replace(/[-[\]{}()*+?.,\\^$|#@\s]/g,"\\$&");var table=$('.full_table tbody');if(term.length==0){if($('.user_management select#show_users').val()!='all_users')
filterByLastLogin();else
table.find('tr').attr('hidden',false);return;}
table.find('tr').not('[data-name*='+term+'], [data-email*='+term+']').attr('hidden',true);table.find('tr[data-name*='+term+'], tr[data-email*='+term+']').attr('hidden',false);calcTableWidth();})});function filterByLastLogin(event){$('.apply').addClass('disable');var startDateVal=$('.date input#start_date').val(),endDateVal=$('.date input#end_date').val(),startDate=(startDateVal==''?new Date(0):new Date(startDateVal)),endDate=((endDateVal=='')?new Date(Date.now()):new Date(endDateVal)),table=$('.full_table tbody');if(event)
event.preventDefault();table.find('tr').attr('hidden',true);table.children().filter(function(rowIndex,row){var selected=$('.user_management select#show_users').val(),currentDateVal=$(row).find("td.last_login").text(),currentDate=new Date($(row).find("td.last_login").text()),never_logged_in=currentDateVal.replace(/\s/g,'')=="-";if(selected=="did_last_login")
return(currentDate<=endDate&&currentDate>=startDate)
else
return(never_logged_in||currentDate>endDate||currentDate<startDate);}).attr('hidden',false);calcTableWidth();}
$(function(){$('.apply').on("click",filterByLastLogin);});$(function(){var backupLink=$(".initial_backup"),backupDialog,backupErrorHandler=function(response){$('.backup_status .error').addClass("active").text(response.responseText);},backupSuccessHandler=function(){$('.backup_status .success').addClass("active").text("Successfully initiated backup");$('.initial_backup').hide();},backupRequest=function(){ajax_post_with_spinner(backupLink,backupSuccessHandler,{error:backupErrorHandler,method:'POST',data_type:'text',data:backupDialog.find('form').serialize()});backupDialog.dialog('close');},cancel=function(){backupDialog.dialog('close');};backupDialog=$(".initial_backup_dialog").dialog({autoOpen:false,height:300,width:450,modal:true,title:"Initial Backup",buttons:{"Cancel":cancel,"OK":backupRequest}});backupLink.click(function(event){event.preventDefault();event.stopPropagation();$('.backup_status .success, .backup_status .error').removeClass("active");backupDialog.dialog("open");});});$(function(){$('a.as_dialog').click(function(event){event.preventDefault();$('.overlay_dialog').show().find('iframe').attr('src',$(this).attr('href'));});$('.overlay_dialog').click(function(event){event.preventDefault();$('.overlay_dialog').hide();});});$(function(){if($('.users.header_only').length&&($('.users.header_only').find('.desc').length||$('.users.header_only').find('.asc').length)){$('.users.header_only')[0].scrollIntoView();}});function transformationWidget(options){var root,template=null;var info={width:5000,height:5000};var elements=[];var options=options||{};var is_blank=function(value){return value==null||value==''||value.match(/^\s+$/);}
var effectRanges={sepia:[1,100,80],brightness:[-99,100,80],saturation:[-100,100,80],hue:[-100,100,80],oil_paint:[0,100,30],pixelate:[1,200,5],pixelate_faces:[1,200,5],gradient_fade:[0,100,20],blur:[1,2000,100],tilt_shift:[0,100,20],sharpen:[1,2000,100],unsharp_mask:[1,2000,100],pixelate_region:[1,200,5],red:[-100,100,0],blue:[-100,100,0],green:[-100,100,0],contrast:[-100,100,0],vibrance:[-100,100,20],fill_light:[-100,100,0],vignette:[0,100,20],blur_region:[1,2000,100],blur_faces:[1,2000,500],make_transparent:[0,100,10],trim:[0,100,10],shadow:[0,100,40],colorize:[0,100,100],gamma:[-50,150,0],fade:[-5000,5000,1000],deshake:[0,64,16],ordered_dither:[0,18,0],shear:"text",distort:"text",outline:"text",viesus_correct:"text",volume:[-100,400,0],noise:[0,100,0],accelerate:[-50,100,0],opacity_threshold:[0,100,100],loop:[0,100,null],style_transfer:{label:"Please note that the style image should be added as an overlay."}};var lightroomSupportedOptions={Contrast:[-100,100,1],Saturation:[-100,100,1],VignetteAmount:[-100,100,1],Vibrance:[-100,100,1],Highlights:[-100,100,1],Shadows:[-100,100,1],Whites:[-100,100,1],Blacks:[-100,100,1],Clarity:[-100,100,1],Dehaze:[-100,100,1],Texture:[-100,100,1],Sharpness:[0,150,1],ColorNoiseReduction:[0,100,1],NoiseReduction:[0,100,1],SharpenDetail:[0,100,1],SharpenEdgeMasking:[0,10,1],Exposure:[-5.0,5.0,0.1],SharpenRadius:[0.5,3.0,0.1]};var roundToPrecision=function(value,precision){var b=Math.pow(10,precision);return Math.round(value*b)/b;}
var numericFieldValue=function(field){var value=parseInt($(field).val());if($(field).hasClass('with_slider')&&$(field).val().match(/\./)){var float_value=parseFloat($(field).val());var slider=$(field).parents('.trans_field').find('.slider');value=Math.round(float_value*$(slider).slider('option','max'));}
return value;}
var updateAspectRatio=function(element,field){element=$(element);field=$(field);if(field.filter('.width_field, .height_field, .x_field, .y_field').size()==0){return;}
var width_field=element.find('.width_field');var height_field=element.find('.height_field');var width_slider=width_field.parents('.trans_field').find('.slider');var height_slider=height_field.parents('.trans_field').find('.slider');if(!width_field.hasClass('disabled')&&height_field.hasClass('disabled')){var value=Math.round(numericFieldValue(width_field)*(info.height||1000)*1.0/(info.width||1000));if(!isNaN(value)){height_field.val(value==1?"1.0":value);$(height_slider).slider('value',value);}}
if(!height_field.hasClass('disabled')&&width_field.hasClass('disabled')){var value=Math.round(numericFieldValue(height_field)*(info.width||1000)*1.0/(info.height||1000));width_field.val(value==1?"1.0":value);$(width_slider).slider('value',value);}
element.find('.width_field, .height_field, .x_field, .y_field').each(function(){if($.isNumeric($(this).val())){var this_value=numericFieldValue(this);if(field.val().match(/\./)){if(!$(this).val().match(/\./)){var slider=$(this).parents('.trans_field').find('.slider');var value=roundToPrecision(this_value*1.0/$(slider).slider('option','max'),2);$(this).val(value==1?"1.0":value);}}else{if($(this).val().match(/\./)){var slider=$(this).parents('.trans_field').find('.slider');$(this).val($(slider).slider('value'));}}}});}
var addEffectParam=function(element){var index=$(element).find('.lightroom-filter-selects').children('.lightroom-filter-select').length;var newSelect=$(element).find('.lightroom-filter-select')[0].outerHTML.replace(/[[_]0[\]_]/g,function(match){return match.replace('0',index)});$(element).find('.lightroom-filter-selects').append(newSelect);}
var updateField=function($element,field,force){field=$(field);var blank=false;if(is_blank(field.val())){blank=true;}
field.toggleClass('disabled',blank);if(field.hasClass('with_slider')){var slider=$(field.parents('.trans_field').find('.slider'));if(blank){slider.slider('value',slider.slider('option','min'));slider.addClass('ui-slider-disabled ui-state-disabled');}else{var value=parseInt(field.val());if(field.val().match(/\./)){var float_value=parseFloat(field.val());value=Math.round(float_value*slider.slider('option','max'));}
var in_range=(value>=slider.slider('option','min')&&value<=slider.slider('option','max'));if(in_range){slider.slider('value',value);}
slider.toggleClass('ui-slider-disabled ui-state-disabled',!in_range);if($.isNumeric(field.val())){updateAspectRatio($element,field);}
if(field.hasClass('width_field')){var value=field.val();var $transPanel=field.closest('.trans_panel');var $wrapper=field.closest('.trans_field');$wrapper.siblings('.width-warning').remove();if($('.width-warning',$transPanel).length===0){$transPanel.find('.save_trans, .save_trans_as').removeClass('disabled')}
if($('.media_library.trans_browse').length>0&&value.startsWith('auto')){var message='Note: Automatic breakpoints can not be used for named transformation.';$wrapper.parent().append('<div class="width-warning">'+message+'</div>');var transData=$transPanel.find('.trans_name').data();var isNamedTrans=transData.transformationKind==='explicit';var btnSelector=isNamedTrans?'.save_trans, .save_trans_as':'.save_trans_as';$transPanel.find(btnSelector).addClass('disabled');}}}}
var handleGravityRelatedFields=function(){var show=false;var cropMode=$element.find('.crop_field').val();if(cropMode==='thumb'){var gravity=field.closest('.trans_form').find('[name=gravity_selector]').val();show=(!!gravity&&gravity.startsWith('auto'));}
$('.gravity_level_field_holder').toggleClass('hidden',!show);$('.x_field_holder, .y_field_holder').toggleClass('hidden',show);if(!show){$element.find('.gravity_level_field').val('');}}
if(field.hasClass('crop_field')){$element.removeClass($element.find('.crop_field option').map(function(){return"crop_"+$(this).val();}).toArray().join(" "));$element.addClass('crop_'+field.val());handleGravityRelatedFields();}
if(field.hasClass('gravity_field')){var value=field.val();var $gravityLevel=$element.find('.gravity_level_field');if(value.startsWith('auto')&&$gravityLevel.val()!=''){value+=(':'+$gravityLevel.val());}
$element.find('input[name=gravity]').val(value);handleGravityRelatedFields();}
if(field.hasClass('effect_field')){updateEffect($element,field);$element.removeClass($element.find('.effect_field option').map(function(){return"effect_"+$(this).val();}).toArray().join(" "));$element.addClass('effect_'+field.val());}
if(field.hasClass('effect_param_field')){updateEffectParam($element,field);}
if(field.hasClass('artistic-filter-select')){updateEffectParam($element,field);}
if(field.hasClass('lightroom-filter-select')){updateEffectParamKeyValue($element,field);}
if(field.hasClass('quality_field')){var $specialQualityField=$element.find('.special_quality_field');var $chroma=$element.find('.chroma-subsampling-selector');var $form=field.closest('.trans_form_holder');var isImageMode=$form.hasClass('image_mode');var $qualitySlider=field.parents('.trans_field').find('.slider');var quality=field.val();var updateUniformSelect=function($select,value){$select.val(value);$.uniform.update($select);};if(!isImageMode){updateUniformSelect($chroma,'');}
if(quality.startsWith('auto')){field.val(80).trigger('change').addClass('disabled');$qualitySlider.slider('value',80).addClass('disabled');updateUniformSelect($specialQualityField,quality);}else if(quality.indexOf(':')>-1&&!quality.startsWith('jpegmini')){field.val(quality.split(':')[0]);$qualitySlider.slider('value',quality.split(':')[0]);updateUniformSelect($chroma,':'+quality.split(':')[1]);$chroma.closest('.chroma_subsampling_field').removeClass('hidden');}else if(quality==''){$chroma.closest('.chroma_subsampling_field').addClass('hidden');}else if(!isNaN(quality)&&!field.hasClass('disabled')){$chroma.closest('.chroma_subsampling_field').removeClass('hidden');}
var $hidden=$element.find('input[name=quality]');var formattedValue=quality+$chroma.val();$hidden.val(formattedValue);updateUniformSelect($specialQualityField,'');var handleQualityWarning=function(){var $transPanel=field.closest('.trans_panel');var $wrapper=field.closest('.trans_field');$wrapper.siblings('.quality-warning').remove();if($('.quality-warning',$transPanel).length===0){$transPanel.find('.save_trans, .save_trans_as').removeClass('disabled')}
if($('.media_library.trans_browse').length>0&&value=='auto'){var message='Note: "Auto" quality is not supported for named transformation.';$wrapper.parent().append('<div class="quality-warning">'+message+'</div>');var transData=$transPanel.find('.trans_name').data();var isNamedTrans=transData.transformationKind==='explicit';var btnSelector=isNamedTrans?'.save_trans, .save_trans_as':'.save_trans_as';$transPanel.find(btnSelector).addClass('disabled');}};handleQualityWarning();}
if(force&&field.hasClass('with_color')&&!blank){var value=field.val().replace('rgb:','#');if(!value.match(/^#/)||(value.length!=9&&value.length!=5)){field.spectrum('set',value);$('input[type=checkbox]#'+field.attr("id")+'_auto0').prop("checked",value==="auto").uniform();}}
var $extensionField=$('.trans_form .extension_field'),$fetchFormatField=$('.trans_form .fetch_format_field');if(field.parents('.more_options').size()>0&&!($element.hasClass('fetch_format_field')&&$element.val()==$extensionField.val())){$element.addClass('with_more_options');}
if(field.hasClass('base_trans_field')){$element.find('.base_trans_field').parents('.base_trans_holder').show();$element.find('.base_trans_field.disabled').parents('.base_trans_holder').hide();$element.find('.base_trans_field.disabled:first').parents('.base_trans_holder').show();}
if(field.hasClass('video_codec_field')||field.hasClass('profile_field')||field.hasClass('level_field')){update_video_codec($element);}
if(field.hasClass('format_field')){var value=field.val();var no_resource_type=typeof info.resource_type=='undefined';if(no_resource_type||info.resource_type=='video'){if(info.is_audio||value&&['mp3','ogg','wav'].indexOf(value)!==-1){root.addClass('video_mode audio_mode').removeClass('image_mode');}else if(value&&['mp4','webm','ogv','gif','m3u8','mpd'].indexOf(value)===-1){root.removeClass('video_mode audio_mode').addClass("image_mode");}else{root.addClass('video_mode').removeClass("audio_mode image_mode");}}
if(field.hasClass('fetch_format_field')){if(field.val()!='auto'&&$extensionField.val()=='auto'){$extensionField.val('').trigger('change');}
if(field.val()=='auto'&&$extensionField.val()!='auto'){$extensionField.val('auto').trigger('change');}}else{if(field.val()=='auto'){$element.find('.fetch_format_field').val('auto').trigger('change');}
else{$element.find('.fetch_format_field').val('').trigger('change');}}
var $transPanel=field.closest('.trans_panel');var $wrapper=field.closest('.trans_field');$wrapper.siblings('.format-warning').remove();if($('.format-warning',$transPanel).length===0){$transPanel.find('.save_trans, .save_trans_as').removeClass('disabled')}
var showNote=function(message){$wrapper.parent().append('<div class="format-warning">'+message+'</div>');var transData=$transPanel.find('.trans_name').data();var isNamedTrans=transData.transformationKind==='explicit';var btnSelector=isNamedTrans?'.save_trans, .save_trans_as':'.save_trans_as';$transPanel.find(btnSelector).addClass('disabled');}
if($('.media_library.trans_browse').length>0){var message;if(field.hasClass('extension_field')&&value!=''&&value!='auto'){message='Note: changing extension is not supported for a named transformation.';}
if(message){showNote(message);}}}
if(field.closest('.video_sampling').length>0){update_video_sampling($element);}
if(field.hasClass('offset_field')){var new_val=field.val().replace(/[P%]/,'p');new_val=new_val.replace(/[^0-9p.]/,'');if(field.val()!=new_val)field.val(new_val);}}
var updateEffectParam=function(element,field){var $effectParam=field.parents('.effect_param_holder').find('input[name=effect_param]');$effectParam.val(field.val());}
var updateEffectParamKeyValue=function(element,field){var children=field.parents('.lightroom-filter-selects').children();var key,value,effectParamStr;effectParamStr=children.map(function(){key=$(this).find("[name$='[key]']").val();var valueElement=$(this).find("[name$='[value]']");value=valueElement.val();if(!!value){var decimalValue=parseFloat(value);var minValue=parseFloat(valueElement.attr("min"));var maxValue=parseFloat(valueElement.attr("max"));if(decimalValue<minValue){value=minValue.toString();}
if(decimalValue>maxValue){value=maxValue.toString();}
valueElement.val(value);}
if(key==="AutoStraighten"||key==="AutoTone"){return key;}
return key+"_"+escape(value);}).toArray().join(":");var $effectParam=field.parents('.effect_param_holder').find('input[name=effect_param]');$effectParam.val(effectParamStr);}
var lightroomOptionFromListCreation=function(element,values){var index=element.name.substring(element.name.indexOf('[')+1,element.name.indexOf(']'));var elementId='lightroom-filter-select_'+index+'_value';var className='lightroom-filter-select['+index+'][value]';var optionalValues=values;var selectList=document.createElement("select");selectList.setAttribute("id",elementId);selectList.name=className;selectList.className="lightroom-filter-selection-list";for(var i=0;i<optionalValues.length;i++)
{var option=document.createElement("option");option.setAttribute("value",optionalValues[i]);option.text=optionalValues[i];selectList.appendChild(option);}
$('#'+elementId).replaceWith(selectList);$('#'+elementId).on('change',function(){updateEffectParamKeyValue($(this),$(selectList));});}
var setLightroomOptionRange=function(element){var index=element.name.substring(element.name.indexOf('[')+1,element.name.indexOf(']'));var className='lightroom-filter-select['+index+'][value]';var minimumValue=lightroomSupportedOptions[element.value][0];var maximumValue=lightroomSupportedOptions[element.value][1];var stepValue=lightroomSupportedOptions[element.value][2];var selectionList=$('select[name="'+className+'"]');if(selectionList.length>0){var selectionClass='<input class="lightroom-filter-select" id=lightroom-filter-select_'+index+'_value'+' name=lightroom-filter-select['+index+'][value]'+' min='+minimumValue+' max='+maximumValue+' step='+stepValue+' value = 0'+' type="number" >';selectionList.replaceWith(selectionClass);disableNumberInputEditing();}
else{var valueElement=$('input[name="'+className+'"]')[0];valueElement.min=minimumValue;valueElement.max=maximumValue;valueElement.step=stepValue;valueElement.value=0;}}
var lightroomOptionSelectionChanged=function(element){if(element.value==='WhiteBalance'){lightroomOptionFromListCreation(element,["As Shot","Auto","Cloudy","Custom","Daylight","Flash","Fluorescent","Shade","Tungsten"]);}
if(element.value==='AutoStraighten'||element.value==='AutoTone'){lightroomOptionFromListCreation(element,[]);$(".lightroom-filter-selection-list").hide()}
else{setLightroomOptionRange(element);}}
var updateEffect=function(element,field){var $artisticFilterSelector=element.find('.artistic-filter-selector');var $effectParamField=element.find('.effect_param_field');var $effectParamSlider=element.find('.effect_param_slider');var $effectsRow=element.find('.effects_row');var $effectParam=element.find('input[name=effect_param]');var $disclaimer=element.find('.effect_disclaimer');var newVal=$effectParam.val();var $lightroomFilterSelectors=element.find('.lightroom-filter-selects');var $add_effect_param=element.find('.add_effect_param');$lightroomFilterSelectors.hide();$add_effect_param.hide();if(field.val()==='art'){$artisticFilterSelector.find('select.artistic-filter-select').val(newVal).trigger('change');$artisticFilterSelector.show();$effectParamField.hide();$effectParamSlider.hide();$effectsRow.addClass('with_param');return}
$artisticFilterSelector.hide();if(field.val()==='lightroom'){var options=$("select.lightroom-filter-select").data("lightroomOptions");var lightroomParams=newVal.split(":");for(i=0;i<lightroomParams.length;i++){var pair=lightroomParams[i].split("_");var key=options[pair[0].toLowerCase()];var value=pair[1];if(i>0){addEffectParam(element);}
$(element).find('#lightroom-filter-select_'+i+'_key').val(key).trigger('change');var filterSelectValue=$(element).find('#lightroom-filter-select_'+i+'_value');if(value===''){value=filterSelectValue.prop("defaultValue");}
$(element).find('#lightroom-filter-select_'+i+'_value').val(value).trigger('change');}
$lightroomFilterSelectors.show();$effectParamField.hide();$effectParamSlider.hide();$effectsRow.addClass('with_param');$add_effect_param.show();return;}
var range=effectRanges[field.val()];var with_param=(range!=null);$effectsRow.toggleClass('with_param',with_param);$effectParamField.hide();$effectParamSlider.hide();$disclaimer.hide();if(!with_param){return;}
if(!range||range=='text'){$effectParamField.val(newVal).show();}else if(range.label){$disclaimer.html(range.label).show();}else{var sliderVal=(newVal&&newVal!=='')?newVal:range[2];$effectParamField.val(sliderVal).addClass('disabled');$effectParamSlider.slider('option','min',range[0]).slider('option','max',range[1]).slider('value',sliderVal).show();$effectParamField.show();}}
var update_video_sampling=function(element){var sampling=element.find('#video_sampling_field').val();var modifier=element.find('#video_sampling_modifier_field').val();element.find('#uniform-video_sampling_modifier_field, #video_sampling_modifier_field').prop('disabled',!sampling).toggleClass('disabled',!sampling);if(sampling)sampling+=modifier;element.find('#video_sampling').val(sampling);}
var update_video_codec=function(element){var codec=element.find('.video_codec_field').val();var is_h264=codec=='h264';var profile_and_level=element.find('.profile_field, #uniform-profile_field, .level_field, #uniform-level_field');var level=element.find('.level_field, #uniform-level_field');profile_and_level.prop("disabled",!is_h264).toggleClass('disabled',!is_h264)
if(!is_h264)profile_and_level.val(null);var profile=element.find('select.profile_field').val();level.toggleClass('disabled',!profile);if(!is_h264)level.val(null);var level=element.find('select.level_field').val();var codec_components=[codec];if(profile){codec_components.push(profile);if(level)codec_components.push(level);}
var codec_value=(is_h264&&profile)?codec_components.join(":"):codec;element.find('#video_codec').val(codec_value);}
var setupSliders=function($element){$element.find('.slider').on('slide slidestop',function(){var $slider=$(this);$slider.removeClass('ui-slider-disabled ui-state-disabled');var value=$slider.slider('value');var $field=$slider.closest('.trans_field').find('input[type=text].with_slider');$field.val(value).removeClass('disabled');updateAspectRatio($element,$field);if($slider.hasClass('quality_slider')){$element.find('input[name=quality]').val(value);}
if($slider.hasClass('gravity_level_slider')){var gravity=$element.find('.gravity_field').val();$element.find('input[name=gravity]').val(gravity+':'+value);}
$field.trigger('change');root.trigger('transform_change');return true;});}
var setupFormFields=function($element,overlay){$element.toggleClass('overlay_form',!!overlay);$element.find('.width_slider').slider({min:10,max:info.width,value:info.width||1000});$element.find('.height_slider').slider({min:10,max:info.height,value:info.height||1000});$element.find('.x_slider').slider({min:overlay?-info.width:0,max:info.width,value:0});$element.find('.y_slider').slider({min:overlay?-info.height:0,max:info.height,value:0});$element.find('.gravity_level_slider').slider({min:0,max:100});$element.find('.radius_slider').slider({min:0,max:Math.min(30,info.width,info.height),value:0});$element.find('.angle_slider').slider({min:0,max:360,value:0});$element.find('.zoom_slider').slider({min:0.1,max:3.0,value:1.0,step:0.1});$element.find('.effect_param_slider').slider({min:-100,max:100,value:0});$element.find('.opacity_slider').slider({min:0,max:100,value:100});$element.find('.border_width_slider').slider({min:1,max:100,value:1});$element.find('.quality_slider').slider({min:10,max:100,value:80});$element.find('.page_slider').slider({min:1,max:100,value:1});$element.find('.density_slider').slider({min:50,max:300,value:150});$element.find('.delay_slider').slider({min:2,max:200,value:10});$element.find('.width_field').val(info.width||1000).addClass('disabled');$element.find('.height_field').val(info.height||1000).addClass('disabled');$element.find('.radius_field').val(0).addClass('disabled');$element.find('.angle_field').val(0).addClass('disabled');$element.find('.zoom_field').val(1).addClass('disabled');$element.find('.x_field').val(0).addClass('disabled');$element.find('.y_field').val(0).addClass('disabled');$element.find('.effect_param_field').val("").addClass('disabled');$element.find('.opacity_field').val(100).addClass('disabled');$element.find('.border_width_field').val(1).addClass('disabled');$element.find('.quality_field').val(80).addClass('disabled');$element.find('.page_field').val(1).addClass('disabled');$element.find('.density_field').val(150).addClass('disabled');$element.find('.layer_image_field').addClass('disabled');$element.find('.layer_mode_field').toggleClass('disabled',!overlay);$element.find('.with_color:not(.empty_color)').spectrum({preferredFormat:"hex",showInput:true,clickoutFiresChange:true,showInitial:true,color:'white'});$element.find('.with_color.empty_color:not(.with_color_auto)').spectrum({preferredFormat:"hex",showInput:true,clickoutFiresChange:true,showInitial:true,color:'',allowEmpty:true});$element.find('.with_color.with_color_auto').spectrum({preferredFormat:"hex",showInput:true,clickoutFiresChange:true,showInitial:true,color:'',allowEmpty:true,whitelist:{auto:{classes:"color-auto"}}});$element.find('.base_trans_field.disabled').parents('.base_trans_holder').hide();$element.find('.base_trans_field.disabled:first').parents('.base_trans_holder').show();$element.find('input[type=checkbox]').each(function(){$(this).attr('id',$(this).attr('id')+element_index)});$element.find('label.for_checkbox').each(function(){$(this).attr('for',$(this).attr('for')+element_index)});$element.find('.bit_rate_slider').slider({min:50,max:10000,value:2500}).addClass('disabled');$element.find('.offset_field').addClass('disabled');if(options.prevent_format){$element.find('.format_field_holder').toggle(false);}
update_video_codec($element);update_video_sampling($element);$element.find('input[name=assignments]').val('');}
var resetEffectParam=function(element,field){var effectParam=$(element).find('input[name=effect_param]');if(field.val()==='art'){var effectsField=$(element).find('select.artistic-filter-select');effectParam.val(effectsField.find('option:first-child').val());}else if(field.val()==='lightroom'){$(element).find('.lightroom-filter-selects').children().not(':first').remove();var value=$(element).find('#lightroom-filter-select_0_value').val("");var key=$(element).find('#lightroom-filter-select_0_key').val($(element).find('#lightroom-filter-select_0_key').find('option:first-child').val());effectParam.val(key.val()+'_'+value.val());}else{var range=effectRanges[field.val()];if(!range||range=='text'){effectParam.val('');}else{effectParam.val(range[2]);}}}
function disableNumberInputEditing(){$("[type='number']").keypress(function(event){event.preventDefault();});$("[type='number']").keydown(function(event){event.preventDefault();});}
var setupEvents=function(element){var handleChange=function(e){var $current=$(this);if($current.hasClass('effect_field')){resetEffectParam(element,$current);}
if($current.hasClass('layer_image_field')){$current.val($current.val().replace('/',':'))}
if($current.hasClass('lightroom-filter-select')&&$current.is("select")){$current.one("change",function(e){lightroomOptionSelectionChanged(e.target);});}
updateField(element,$current);root.trigger('transform_change');return true;};element.on('change keyup','input[type=text], input[type=number], select, input[type=checkbox]',handleChange);disableNumberInputEditing();element.find('.auto_rotation').on('change click',function(){var checked=$(this).prop('checked');element.toggleClass('with_auto_rotation',checked);if(!checked){element.find('.auto_angle_row input[type=checkbox]').prop('checked',false);element.find('.auto_angle_row .checker span').removeClass('checked');}
root.trigger('transform_change');return true;});var $specialQuality=element.find('.special_quality_field');$specialQuality.on('change',function(){var field=$(this);var $qualitySlider=field.parents('.trans_field').find('.slider');var value=field.val();if(value){element.find('.quality_field').addClass('disabled');}
element.find('.quality_field').val(80)
$qualitySlider.slider('value',80);element.find('input[name=quality]').val(value);$chromaSubsamplingSelector.val('');$.uniform.update($chromaSubsamplingSelector);$chromaSubsamplingSelector.closest('.chroma_subsampling_field').addClass('hidden');root.trigger('transform_change');var $transPanel=field.closest('.trans_panel');var $wrapper=field.closest('.trans_field');$wrapper.siblings('.quality-warning').remove();if($('.quality-warning',$transPanel).length===0){$transPanel.find('.save_trans, .save_trans_as').removeClass('disabled')}
if($('.media_library.trans_browse').length>0&&value=='auto'){var label=field.find('option[value='+value+']').text();var message='Note: "Auto" quality is not supported for named transformations. For named transformations, we recommend "Automatic - good quality".';$wrapper.parent().append('<div class="quality-warning">'+message+'</div>');var transData=$transPanel.find('.trans_name').data();var isNamedTrans=transData.transformationKind==='explicit';var btnSelector=isNamedTrans?'.save_trans, .save_trans_as':'.save_trans_as';$transPanel.find(btnSelector).addClass('disabled');}
return true;});var $dprField=element.find('.dpr_field');$dprField.on('change',function(){var field=$(this);var value=field.val();var $transPanel=field.closest('.trans_panel');var $wrapper=field.closest('.trans_field');$wrapper.siblings('.dpr-warning').remove();if($('.dpr-warning',$transPanel).length===0){$transPanel.find('.save_trans, .save_trans_as').removeClass('disabled')}
if($('.media_library.trans_browse').length>0&&value=='auto'){var message='Note: "Auto" DPR is not supported for named transformations. For named transformations, use an explicit value e.g. 1.0 or 2.0 or 3.0';$wrapper.parent().append('<div class="dpr-warning">'+message+'</div>');var transData=$transPanel.find('.trans_name').data();var isNamedTrans=transData.transformationKind==='explicit';var btnSelector=isNamedTrans?'.save_trans, .save_trans_as':'.save_trans_as';$transPanel.find(btnSelector).addClass('disabled');}});var $chromaSubsamplingSelector=element.find('.chroma-subsampling-selector');var initChromaSubsamplingSelector=function(){var $input=element.find('.quality_field');var $hidden=element.find('input[name=quality]');$chromaSubsamplingSelector.on('change',function(){$hidden.val($input.val()+$chromaSubsamplingSelector.val());root.trigger('transform_change');});};initChromaSubsamplingSelector();element.find('.toggle_more_options').on('click',function(){element.addClass('with_more_options');return false;});element.find('.with_color_auto').each(function(i,e){var picker=$(e);var checkbox=picker.siblings('input[type=checkbox]');checkbox.on("change",function(e){if(this.checked){$(this).data("prev-color",picker.spectrum("get"));picker.spectrum("set","auto");}else{picker.spectrum("set",$(this).data("prev-color"));}
return handleChange.call(this,e);});picker.spectrum("option","change",function(color){checkbox.prop("checked",$.type(color)==="string"&&color.match(/^auto/)).uniform();return true;});});}
var reset=function(){element_index=0;elements=[];root.empty();}
var createTransfromElementForm=function(overlay,isChainedTransformation){var $element=$(template);root.append($element);setupFormFields($element,overlay);setupSliders($element);setupEvents($element);setTimeout(function(){$element.find('select, input[type=checkbox]').uniform({selectAutoWidth:false});$element.find('.selector').css('width','125px');$element.find('.selector span').css('width','90px')},1);if(isChainedTransformation){$($element.find(".effect_field option[value='lightroom']")).remove();}
element_index++;elements.push($element);return $element;}
var loadTransform=function(transform){if(transform.length===0){transform.push({});}
$.each(transform,function(index,trans_params){var element=createTransfromElementForm(trans_params.overlay||trans_params.underlay,false);if(trans_params.hasOwnProperty('format')){trans_params.fetch_format=trans_params.format;delete trans_params.format;}
if(trans_params.hasOwnProperty('extension')){var remap={"none":"__empty__"};trans_params.format=remap[trans_params.extension]||trans_params.extension;delete trans_params.extension;}
if(trans_params.width&&trans_params.width===1){trans_params.width="1.0";}
if(trans_params.height&&trans_params.height===1){trans_params.height="1.0";}
if(trans_params.zoom&&trans_params.zoom===1){trans_params.zoom="1.0";}
if(trans_params.dpr){trans_params.dpr=trans_params.dpr.toString();if(trans_params.dpr.indexOf(".")===-1)trans_params.dpr+=".0"}
if(trans_params.overlay||trans_params.underlay){trans_params.layer_image=trans_params.overlay||trans_params.underlay;trans_params.layer_mode=trans_params.overlay?"overlay":"underlay";}
if(trans_params.border){var match=trans_params.border.match(/^(\d+)px_solid_([^_]+)$/);if(match){trans_params.border_width=match[1];trans_params.border_color=match[2].replace('rgb:','#');}}
if(trans_params.transformation){$.each(trans_params.transformation,function(index,value){updateField(element,$(element).find('.base_trans_field_'+index).val(value),true)});delete(trans_params.transformation);}
if(trans_params.angle){var angle_value=null;$.each(trans_params.angle,function(index,part){if(typeof(part)=='number'){angle_value=part;}else{$(element).find('input[type=checkbox][name=angle][value='+part+']').prop('checked',true).removeClass('disabled');$(element).addClass('with_auto_rotation');}});trans_params.angle=angle_value;}
if(trans_params.quality!=null){var quality=trans_params.quality;switch(quality){case"jpegmini:0":quality="jpegmini";break;case-1000:quality="jpegmini";break;case-1001:quality="jpegmini:1";break;case-1002:quality="jpegmini:2";break;}
if(typeof(quality)=='string'&&(quality.indexOf('jpegmini')==0||quality.indexOf('auto')==0)){$(element).find('select[name=quality_selector]').val(quality);$(element).find('.chroma_subsampling_field').addClass('hidden');}else{$(element).find('input[name=quality_slider]').val(quality).trigger('change');}
$(element).find('input[name=quality]').val(quality);delete trans_params.quality;}else{$(element).find('.chroma_subsampling_field').addClass('hidden');}
if(!!trans_params.gravity){var value=trans_params.gravity;var $gravitySelector=$(element).find('select[name=gravity_selector]');if(value.startsWith('auto')){var parts=value.split(':');if(parts.length==3){$gravitySelector.val(parts.slice(0,2).join(':'));$(element).find('.gravity_level_field').val(parts[2]);$(element).find('.gravity_level_field_holder').removeClass('hidden');}else if(parts.length==2){if(isNaN(parts[1])){$gravitySelector.val(parts.join(':'));}else{$gravitySelector.val(parts[0]);$(element).find('.gravity_level_field').val(parts[1]);$(element).find('.gravity_level_field_holder').removeClass('hidden');}}else{$gravitySelector.val(parts[0]);}}else{$gravitySelector.val(value);}
$(element).find('input[name=gravity]').val(value);}
if(trans_params.video_codec){var components=trans_params.video_codec.split(":");element.find('.video_codec_field').val(components[0]);if(components.length>1)element.find('.profile_field').val(components[1]);if(components.length>2)element.find('.level_field').val(components[2]);update_video_codec(element);}
if(trans_params.video_sampling){var sampling=trans_params.video_sampling;var sampling_modifier="";if(/^\d+s$/.test(trans_params.video_sampling)){sampling=parseInt(trans_params.video_sampling);sampling_modifier="s"}
element.find('#video_sampling_modifier_field').val(sampling_modifier);element.find('#video_sampling_field').val(sampling);update_video_sampling(element);}
if(trans_params.flags){$.each(trans_params.flags,function(index,flag){$(element).find('input[type=checkbox][name=flags][value="'+flag+'"]').prop('checked',true).removeClass('disabled');});}
if(trans_params.effect){var parts=trans_params.effect.split(':');if(parts.length>1){trans_params.effectParam=trans_params.effect.substring(trans_params.effect.indexOf(':')+1);}
trans_params.effect=parts[0];var effectsField=$(element).find('select[name=effect]');effectsField.val(trans_params.effect);var effectParamField=$(element).find('input[name=effect_param]');effectParamField.val(trans_params.effectParam||'')}
$.each(trans_params,function(key,value){if(key[0]=='$'){var field=$(element).find('input[name=assignments]');var updatedValue=field.val();if(updatedValue!==''){updatedValue+=",";}
updatedValue+=key+"_"+value;field.val(updatedValue);}else{var field=$(element).find('input[type=text][name="'+key+'"], select[name="'+key+'"]').val(value);updateField(element,field,true);}});$.uniform.update($(element).find('select, input[type=checkbox]'));});}
var extractParams=function(){var trans_list=[];var selected_format=info.format;var force_format=null;var empty_extension=false;$(elements).each(function(index,element){var trans_params=$(element).find(':input:not(.disabled)').hashForm();trans_params.raw_transformation=trans_params.assignments;if(trans_params.background_auto&&!trans_params.background){trans_params.background=trans_params.background_auto;}
delete trans_params.background_auto;if(trans_params.format=='auto'){trans_params.fetch_format=trans_params.format;delete trans_params.format;}
if(trans_params.effect&&!is_blank(trans_params.effect_param)){trans_params.effect=[trans_params.effect,trans_params.effect_param];}else if(trans_params.effect==""){delete trans_params["effect"];}
if(is_blank(trans_params.width)&&is_blank(trans_params.height)&&trans_params.crop!='imagga_crop'&&trans_params.crop!='crop'&&!trans_params.aspect_ratio&&!(trans_params.gravity&&trans_params.gravity.startsWith('auto'))){trans_params.crop='';}
if(!is_blank(trans_params.border_width)){trans_params.border={width:trans_params.border_width,color:trans_params.border_color||"#000"}}
if(trans_params.format=="__empty__"){force_format=selected_format=trans_params.format=null;empty_extension=true;}else if(!is_blank(trans_params.format)){force_format=selected_format=trans_params.format;}
if(trans_params.bit_rate){trans_params.bit_rate=trans_params.bit_rate+"k";}
if(trans_params.layer_mode){if(trans_params.layer_image){trans_params[trans_params.layer_mode]=trans_params.layer_image
trans_list.push(trans_params);}}else if(trans_params.angle){var parts=typeof(trans_params.angle)=='string'?[trans_params.angle]:trans_params.angle;var numeric_angle=null;var other_angles=[];$.each(parts,function(index,part){if(part.match(/\d/)){numeric_angle=part;}else{other_angles.push(part);}});trans_params.angle=other_angles;trans_list.push(trans_params);if(numeric_angle!=null){trans_list.push({angle:numeric_angle});}}else{trans_list.push(trans_params);}});return{list:trans_list,selected_format:selected_format,info:info,force_format:force_format,empty_extension:empty_extension};}
return{root:function(r){if(r){root=$(r);return this;}else return root;},template:function(t){template=$(t).html();return this;},info:function(i){info=i;return this;},addOverlay:function(){createTransfromElementForm(true,true);return this;},addTransformation:function(){createTransfromElementForm(false,true);return this;},params:function(){return extractParams();},clear:function(){this.load([]);return this;},on:function(evt,handler){root.bind(evt,handler);return this;},off:function(evt,handler){root.unbind(evt,handler);return this;},load:function(transform){reset();loadTransform(transform);root.trigger('transform_change');return this;}}}
function imageInfo(){var colors=[],faces=[],predominant={},coordinates=[],image,div,shrinkFactor=1,content,tabs;function updateShrinkFactor(){if(!div||!image||!image.size())return;shrinkFactor=image.width()/image.naturalWidth();updateFaceRects();}
function showColors(){var colorContainer=$("<div></div>").addClass("colors");colorContainer.append($('<h4></h4>').text("Top colors:"));for(var i=0;i<Math.min(colors.length,10);i++){colorContainer.append(createColorRow(colors[i]));}
if(predominant.google){var googleColors=predominant.google
colorContainer.append($('<h4></h4>').text("Predominant colors (Google palette):"));for(var i=0;i<googleColors.length;i++){colorContainer.append(createColorRow(googleColors[i]));}}
if(predominant.cloudinary){var cloudinaryColors=predominant.cloudinary
colorContainer.append($('<h4></h4>').text("Predominant colors (Cloudinary palette):"));for(var i=0;i<cloudinaryColors.length;i++){colorContainer.append(createColorRow(cloudinaryColors[i]));}}
content.append(colorContainer);}
function createColorRow(colorRec){var color=colorRec[0];var percents=colorRec[1];var colorNameElement=$("<div></div>").addClass("color_name").text(color);var colorElement=$("<div></div>").addClass("color").css("width",percents*0.85+"%").css("background-color",color);var colorWrapper=$("<div></div>").addClass("color_wrapper");colorWrapper.append(colorNameElement).append(colorElement);return colorWrapper;}
function showFaces(){var faceContainer=$("<div></div>").addClass("faces");content.append(faceContainer);updateFaceRects();}
function updateFaceRects(){var faceContainer=content.find(".faces");faceContainer.empty();if(faceContainer.length==0)return;if(faces&&faces.length>0){for(var i=0;i<faces.length;i++){var face=faces[i];faceElement=$("<div></div>").addClass("face").css("top",face[1]*shrinkFactor+"px").css("left",face[0]*shrinkFactor+"px").css("width",face[2]*shrinkFactor+"px").css("height",face[3]*shrinkFactor+"px");faceContainer.append(faceElement);}}else{faceContainer.append($("<div></div>").addClass("no_faces").text("No detected faces data"));}}
function showMetadata(){var metadataContainer=$("<dl></dl>").addClass("metadata");var exists=false;if(metadata){for(var key in metadata){exists=true
keyElement=$("<dt></dt>").text(key);valueElement=$("<dd></dd>").text(metadata[key]);metadataContainer.append(keyElement).append(valueElement);}}
if(!exists){metadataContainer.text("No metadata available");}
content.append(metadataContainer);}
function updateContentWith(tabName){content.empty();tabs.find("li").removeClass("active");tabs.find("li.tab_"+tabName).addClass("active");content.removeClass('content_metadata content_colors content_faces');content.addClass('content_'+tabName);switch(tabName){case"colors":showColors();break;case"faces":showFaces();break;case"metadata":showMetadata();break;}}
function widget(newDiv){if(newDiv){div=newDiv;}
if(div.is(':empty')){tabs=$("<ul></ul>").addClass("tabs");$.each(["metadata","colors","faces"],function(index,tabName){var tabElement=$("<li></li>").text(tabName).addClass("tab_"+tabName).click(function(){updateContentWith(tabName);});tabs.append(tabElement);});div.append(tabs);content=$("<div></div>").addClass("content");div.append(content);}
updateShrinkFactor();return this;}
widget.colors=function(_){if(!arguments.length)return colors;colors=_;return widget;};widget.predominant=function(_){if(!arguments.length)return predominant;predominant=_;return widget;};widget.faces=function(_){if(!arguments.length)return faces;faces=_;return widget;};widget.coordinates=function(_){if(!arguments.length)return coordinates;coordinates=_;return widget;};widget.metadata=function(_){if(!arguments.length)return metadata;metadata=_;return widget;};widget.show=function(){if(div){div.addClass("active");}
updateContentWith("metadata");return widget;}
widget.hide=function(){if(div){div.removeClass("active");}
return widget;}
widget.shown=function(){if(!div)return false;return div.hasClass("active");}
widget.image=function(_){if(!arguments.length)return image;image=_;updateShrinkFactor();return widget;};return widget;}
(function($){function add_natural_dimentions_methods(natural,prop){var hasOwnProperty=new Image().hasOwnProperty(natural);if(hasOwnProperty){$.fn[natural]=function(){return this[0][natural];};}else{$.fn[natural]=function(){var node=this[0];var value;if(node.tagName.toLowerCase()==='img'){var img=new Image();img.src=node.src;value=img[prop];}
return value;};}}
var props=['Width','Height'];var prop=props.pop();while(prop){add_natural_dimentions_methods('natural'+prop,prop.toLowerCase());prop=props.pop();}}(jQuery));var infoWidget=imageInfo();$(function(){if($('.media_library').length>0){var lastScrollTop=0;$.address.init(function(event){}).bind('change',function(event){updateTop();if(event.pathNames.length===0){if($('.media_library.trans_browse').length===0){close_image_dialog();$('html, body').animate({scrollTop:lastScrollTop},500);}}else if(event.pathNames.length>=4&&event.pathNames[0]=='dialog'){lastScrollTop=$("body").scrollTop();var resource_type=event.pathNames[1];var type=event.pathNames[2];var public_id=event.pathNames.slice(3).join("/").replace(/(https?)(:|%3a)\/\/?/gi,"$1$2//");if(!/https?(:|%3a)\/\//i.test(public_id)){try{public_id=decodeURIComponent(public_id)}catch(e){}}
if(event.path[event.path.length-1]==='/'){public_id=public_id+'/';}
if(event.queryString&&event.queryString!==''){public_id+="?"+event.queryString;}
public_id=public_id.replace(/</g,'&lt;');setTimeout(function(){load_image(resource_type,type,public_id,function(thumbnail){if(thumbnail){close_image_dialog();show_image_dialog(thumbnail.data('info'),{should_refresh_preview:true,thumbnail:thumbnail});}});},10);}});}
function loadCookbookTemplateToTransformationEditor(query){var resourceDataArray=query.resourceId.split('/');var resource_type=resourceDataArray[0];var type=resourceDataArray[1];var public_id=resourceDataArray.slice(2).join('/');load_image(resource_type,type,public_id,function(thumbnail){if(thumbnail){close_image_dialog();show_image_dialog(thumbnail.data('info'),{should_refresh_preview:true,thumbnail:thumbnail,});}});}
$('.media_item .multi-select').prop('checked',false);function init_thumbnails(imgs){imgs.each(function(){if($(this).height()>0||this.complete&&this.naturalWidth!==0){$(this).parents('.image_holder').addClass('active');}});imgs.load(function(){$(this).parents('.image_holder').addClass('active');});imgs.error(function(){var item=$(this).parents('.media_item');$(item).find('.image_holder').append($('<div/>').addClass('failed_message').html("No thumbnail available"));$(item).removeClass('in_progress').addClass('failed');$(this).remove();});}
function reload_thumbnail(thumbnail,info,callback){if(!thumbnail||thumbnail.length===0)return;var info=info||thumbnail.data("info");var success=function(thumb_html){newthumb=$(thumb_html);init_thumbnails(newthumb.find(".image_holder img"));thumbnail.attr('data-public-id',info.public_id).replaceWith(newthumb);if(callback){callback(newthumb);}};$.ajax({url:Routes.console_media_library_thumbnail_path(),data:{public_id:info.public_id,resource_type:info.resource_type,type:info.type},success:success,type:"GET"});}
$('input, textarea').placeholder();var library_update_in_progess=false;var folders_update_in_progress=false;var last_library_update_id=0;var offset=10;function process_new_list(index,result,append,callback){if(index!=last_library_update_id){return;}
var $content=$('<div/>').html(result);$content.find('.media_item .image_holder img').load(function(){$(this).parents('.image_holder').addClass('active');});$content.find('.media_item .image_holder img').error(function(){var item=$(this).parents('.media_item');$(item).find('.image_holder').append($('<div/>').addClass('failed_message').html("No thumbnail available"));$(item).removeClass('in_progress').addClass('failed');$(this).remove();});var $new_ul=$content.find('ul.items');var $items=$('.media_list.main_list ul.items');$items.attr({'data-last-id':$new_ul.attr('data-last-id'),'data-has-more':$new_ul.attr('data-has-more'),'data-query':$new_ul.attr('data-query'),'data-empty-folder':$new_ul.attr('data-empty-folder'),'data-title':$new_ul.attr('data-title')});$('.media_list.main_list .alternative_list_title').text('');if(append){$items.append($new_ul.children());}else{$items.replaceWith($content.children());update_initial_image_list();}
$('.media_browse .more_images_holder').toggleClass('active',$('.media_list.main_list ul.items').attr('data-has-more')=='1');$('.folder_panel').toggleClass('has_folders',$new_ul.attr('data-has-folders')=='1');var took=$new_ul.data('took');$('.media_browse .pagination_stats').text(took+' ms').toggleClass('shown',took&&took>0);library_update_in_progess=false;if(callback){callback();}}
function update_initial_image_list(){var $items=$('.media_list.main_list ul.items');$('.media_list.main_list .list_title').text($items.attr('data-title'));if($items.attr('data-empty-folder')=="1"){$('.breadcrumbs .delete_folder').css('display','inline-block');}
if($('.media_list.main_list .folder_panel').hasClass('in_folder')&&$items.children().length===0){$('.media_list.main_list .alternative_list_title').text($items.attr('data-title'));}}
if($('.media_library').attr('data-folder')){update_selected_folder({path:$('.media_library').attr('data-folder')},true);update_initial_image_list();$('.subfolders .subfolder a').click(function(){load_subfolders($(this),null,$(this).data('folder-path'));return false;});}
function calc_next_count(append){var per_line=Math.floor($('.media_list.main_list ul.items').width()/($('.media_list.main_list ul.items li:first').outerWidth(true)||195));var missing_in_line=per_line-(append?($('.media_list.main_list ul.items li').size()%per_line):0);var total=per_line+missing_in_line;return isNaN(total)?10:total;}
$('.media_library .image_search_form .submit').live('click',function(){if(library_update_in_progess||folders_update_in_progress){return false;}
library_update_in_progess=true;var submit_elem=$(this);$('.media_library .image_search_form .count_field').val(calc_next_count());last_library_update_id+=1;var current_library_update_id=last_library_update_id;ajax_post_with_spinner($(submit_elem),function(result){process_new_list(current_library_update_id,result,false);multipleActionsController.updateThumbsSelection();},{form:true,method:'GET',data_type:'html'});var path=$('.media_library').data('folder');update_selected_folder({},true);$(this).siblings('#query').autocomplete('close');return false;});init_thumbnails($('.media_list.main_list .media_item .image_holder img'));function load_more_images(more_elem,successCallback){if(library_update_in_progess){return false;}
library_update_in_progess=true;var current_library_update_id=last_library_update_id;var count=calc_next_count(true);var $form=$('.main_image_search_form');var filterType=$form.find('.filter-type').val();var filterStatus=$form.find('.filter-status').val();ajax_post_with_spinner($(more_elem),function(result){process_new_list(current_library_update_id,result,true,successCallback);},{data:{count:count,last_id:$('.media_list.main_list ul.items').attr('data-last-id'),offset:offset,type:filterType,status:filterStatus,query:$('.media_list.main_list ul.items').attr('data-query'),advanced_query:$('.media_list.main_list ul.items').data('advanced-query'),moderation_kind:$('.moderation_filter_form .moderation_kind').val(),moderation_status:$('.moderation_filter_form .moderation_status').val()},method:'GET',data_type:'html'});offset+=count;}
$('.media_browse .more_images').live('click',function(){load_more_images($(this));return false;});if($('.media_browse .more_images').size()>0&&$('.media_browse .more_images').attr('data-auto-scroll')=='1'){setInterval(function(){if($('.media_browse .more_images').is(':visible')&&$('.media_browse .more_images_holder').hasClass('active')&&$('.media_browse .more_images').is(':in-viewport')&&!library_update_in_progess){load_more_images($('.media_browse .more_images'));}},50);}
function update_selected_folder(folder,skip_image_update){$('.folder_panel .breadcrumbs').html('');var was_in_folder=$('.folder_panel').hasClass('in_folder');if(folder.path){$('.media_library').data('folder',folder.path);$('.create_folder_form_holder .folder_path').val(folder.path);var path_parts=folder.path.split('/');$('.folder_panel').addClass('in_folder');$('.folder_panel .breadcrumbs').append($('<li/>').addClass('root').append($('<a/>').attr("href","#").addClass('navigate').data('folder_path','').text("/")));for(var i=0;i<path_parts.length;i++){var path=path_parts.slice(0,i+1).join("/");$('.folder_panel .breadcrumbs').append($('<li/>').toggleClass('last',i==path_parts.length-1).append($('<a/>').addClass('navigate').text(path_parts[i]).attr('href','#').data('folder_path',path)));}
$('.folder_panel .breadcrumbs li.last').append($('<a/>').addClass('delete_folder').attr({href:"#",style:"display: none;",title:"Delete empty folder"}));$('.advanced_form_holder .upload_folder').val(folder.path);}else{$('.media_library').data('folder',"");$('.folder_panel').removeClass('in_folder');$('.create_folder_form_holder .folder_path').val("");$('.advanced_form_holder .upload_folder').val("");if(was_in_folder){$('.media_list.main_list .list_title').text('');}
close_folder_selection();}
if(!skip_image_update){$('.media_list.main_list ul.items').html('');$('.media_library .image_search_form input[type=text]').val('');$('.media_browse .more_images_holder').removeClass('active');library_update_in_progess=true;last_library_update_id+=1;var current_library_update_id=last_library_update_id;ajax_post_with_spinner($('.image_search_form input[type=submit]'),function(result){process_new_list(current_library_update_id,result,false);},{method:'GET',data_type:'html',no_spinner:true,url:$('.folder_panel').data('folder-images-url'),data:{path:folder.path}});}}
function update_folder_result(result){close_folder_selection();update_selected_folder(result);if(result.subfolders&&result.subfolders.length>0){show_folder_selection(result);}
folders_update_in_progress=false;}
$('.breadcrumbs .delete_folder').live('click',function(){var elem=$(this).parents('li').find('a.navigate');var folder_path=elem.data('folder_path');var folder={path:folder_path};confirm_deletion('Are you sure you want to delete this folder?',function(confirm_button){ajax_post_with_spinner($(confirm_button),function(result){$(confirm_button).dialog('close');update_folder_result(result,folder);},{method:"DELETE",url:$('.folder_panel .subfolders_holder').data('url'),data:folder});},true);return false;});function close_folder_selection(){$('.folder_panel').removeClass('with_subfolders');$('.folder_panel .subfolders_holder').html('');}
$('.folder_panel .close_subfolders').live('click',function(){close_folder_selection();return false;});function load_subfolders(elem,folder,folder_path){if(folders_update_in_progress){return false;}
folders_update_in_progress=true;var data={};if(folder){data={path:folder.path};}else{data=folder={path:folder_path};}
ajax_post_with_spinner($(elem),function(result){update_folder_result(result);multipleActionsController.updateThumbsSelection();},{method:"GET",url:$('.folder_panel .subfolders_holder').data('url'),data:data});}
function show_folder_selection(folder){var list=$('<ul/>').addClass('subfolders');$(folder.subfolders).each(function(){var subfolder=this;var link=$("<a/>").attr("href","#").text(subfolder.name);$(link).click(function(){load_subfolders($(this),subfolder);return false;});$(list).append($('<li/>').addClass('subfolder').append(link));});$('.folder_panel .subfolders_holder').append(list);$('.folder_panel').addClass('with_subfolders');}
$('.folder_panel .breadcrumbs a.navigate').live('click',function(){var folder_path=$(this).data('folder_path');load_subfolders($(this),null,folder_path);return false;});$('.folder_panel .create_folder').live('click',function(){if(folders_update_in_progress){return false;}
folders_update_in_progress=true;var button=$(this);var form=$(this).parents('form');if($(form).find('.folder_name').val()===''){return false;}
close_folder_selection();$(form).find('.error').text('');ajax_post_with_spinner($(button),function(folder){if(folder.success){$(form).find('.folder_name').val('');update_selected_folder(folder);if(folder.subfolders&&folder.subfolders.length>0){show_folder_selection(folder);}}else{$(form).find('.error').text(folder.error);}
folders_update_in_progress=false;},{form:true,url:$(this).parents('form').attr('action')});return false;});$('.create_folder_form_holder form').live('submit',function(){$('.folder_panel .create_folder').click();return false;});$('.folder_panel .select_folder').live('click',function(){if(folders_update_in_progress){return false;}
folders_update_in_progress=true;ajax_post_with_spinner($(this),function(result){close_folder_selection();if(result.subfolders&&result.subfolders.length>0){show_folder_selection(result);}
folders_update_in_progress=false;},{method:"GET"});return false;});function setup_advanced_image_upload(){configure_file_upload($('.advanced_image_upload'));}
function setup_main_image_upload(only_advanced){configure_file_upload($('.main_image_upload'));}
var suppressEvent=function(e){if(e.stopPropagation){e.stopPropagation();}
e.preventDefault();return false;};if($('.main_image_upload').size()>0){setup_advanced_image_upload();var dropZone;if(!$.browser.msie||parseInt($.browser.version,10)>=10){var handleDropFromOtherTab=function(e){if(e.dataTransfer.files.length>0){return;}
suppressEvent(e);var html=e.dataTransfer.getData('text/html');var matchData=html.match(/<img[^>]+src\s*=\s*['"]([^'"]+)['"]/);if(matchData){var src=matchData[1];$('.more_upload_options').click();$('.upload_remote_url').val(src);$('.start_upload').click();}
return false;};$(document).bind('dragover',function(e){suppressEvent(e);dropZone=$('.drag_area');if(!dropZone.data('drop-setup')){dropZone.each(function(){this.addEventListener('drop',handleDropFromOtherTab)});dropZone.data('drop-setup',true);}
timeout=window.dropZoneTimeout;if(!timeout){dropZone.addClass('in');}else{clearTimeout(timeout);}
window.dropZoneTimeout=setTimeout(function(){window.dropZoneTimeout=null;dropZone.removeClass('in');},100);});}else{$('.drag_inner span').hide();}}
$('.upload_panel .more_upload_options, .upload_panel .less_upload_options').live('click',function(){$(this).parents('.upload_panel').toggleClass('advanced');return false;});function current_resource_type(){return $('.main_image_search_form .resource_type').val();}
function get_tags(url,request,response){request.resource_type=current_resource_type();$.getJSON(url,request,response);}
function overwriteDialog(){var apply_to_all=null;var dialogs=[];var shown=null;function applyToAll(value){apply_to_all=value;$.each(dialogs,function(i,dialogRec){dialogRec.onComplete(apply_to_all);});dialogs=[];}
function removeFromDialogs(dialog){dialogs=$.grep(dialogs,function(d){return d.id==dialog.id},true);}
function onDialogClosed(dialogRec){if(shown==dialogRec.id){removeFromDialogs(dialogRec);if(dialogs.length>0){showDialog(dialogs[0]);}
shown=null;}}
function showDialog(dialogRec){var dialog=dialogRec.dialog;shown=dialogRec.id;dialog.dialog({autoOpen:true,width:360,height:200,title:"Overwrite",modal:true,close:function(){onDialogClosed(dialogRec)},buttons:{"Abort":function(){if(dialogRec.apply&&dialogRec.apply.is(':checked')){applyToAll(false);}
dialog.dialog("close");dialogRec.onComplete(false);},"Overwrite":function(){if(dialogRec.apply&&dialogRec.apply.is(':checked')){applyToAll(true);}
dialog.dialog("close");dialogRec.onComplete(true);}}});}
return{show:function(overwritten,onComplete,multiple){if(apply_to_all!==null){onComplete(apply_to_all);return;}
var dialog=$("<div/>").append($("<div/>").addClass('warning').text("A file with the following public ID already exists. Do you want to overwrite?")).append($("<div/>").addClass('filename').text(overwritten.join(',')));if(multiple){var apply=$('<input/>').prop('type','checkbox');dialog.append($("<label/>").append(apply).append($("<span/>").text("Apply to all files?")));}
var rec={id:Math.random(),onComplete:onComplete,dialog:dialog,apply:apply};dialogs.push(rec);if(shown===null){showDialog(rec);}}}}
var overwrite_dialog;var file_count=0;var localInitialTimestamp=Math.floor(new Date().getTime()/1000),serverInitialTimestamp=$('.media_library').data('timestamp');;var getSignedData=function(data){data.timestamp=getTimestamp();var secret=$('.media_library').data('api-secret');secret=CryptoJS.enc.Latin1.stringify(CryptoJS.enc.Base64.parse(secret));var dataToSign=[];$.each(data,function(key,value){if(key!='api_key'&&key!='signature'&&key!='file'){dataToSign.push(key+'='+value);}});dataToSign=dataToSign.sort().join('&');data.signature=CryptoJS.SHA1(dataToSign+secret).toString();return data;};var getTimestamp=function(){var currentLocalTimestamp=Math.floor(new Date().getTime()/1000);var fromPageLoad=currentLocalTimestamp-localInitialTimestamp;return serverInitialTimestamp+fromPageLoad;};var updateSignature=function($input){var formData=$input.fileupload('option','formData');if($('#upload_preset').length){formData.upload_preset=$('#upload_preset').val();}
var getDataToSign=function(paramsArr){$.each(paramsArr,function(i,item){if(item.name.indexOf('folder')==0||item.name.indexOf('public_id')==0||item.name.indexOf('tags')==0){if(item.value){formData[item.name]=item.value;}else{delete formData[item.name];}}});var media_library_original_filename=!!$input.data('media_library_original_filename');var unique_filename=!media_library_original_filename&&!formData.folder?1:0;formData.unique_filename=unique_filename;return formData;}
var $container=$input.closest('.upload_panel');var inputsSelector='.advanced_panel input[type=hidden]';if($container.hasClass('advanced')){inputsSelector+=', .advanced_panel input[type=text]';}
var data=$container.find(inputsSelector).serializeArray();data=getDataToSign(data);$input.fileupload('option','formData',getSignedData(data));};function on_upload_add(e,data){var $element=$(e.target);var upload_resource_type=current_resource_type();var submitForm=function(){var uploadType=$element.fileupload('option','uploadType');if(!uploadType){if(e.target.classList.contains('advanced_image_upload')){uploadType='advanced';}else{uploadType='standard';}}
if(window._gaq){_gaq.push(['_trackEvent','Upload',uploadType,upload_resource_type]);}
return data.submit();}
filenames=[];updateSignature($element);var formData=$element.fileupload('option','formData');if(upload_resource_type){if(upload_resource_type=='image')upload_resource_type='auto';var upload_url=$element.fileupload('option','url');upload_url=upload_url.replace(/(auto|video|raw)\/upload$/,upload_resource_type+"/upload");$element.fileupload('option','url',upload_url);}
var unique_filename=formData.unique_filename;if(formData.public_id){filenames.push(formData.public_id);unique_filename=false;file_count++;}else{$.each(data.files,function(index,file){if(file.name){filenames.push(file.name);}else{filenames.push(file);}
file_count++;});}
if(unique_filename){return submitForm();}
$.get(Routes.console_media_library_validate_public_ids_path(),{filename:filenames,folder:formData.folder},function(overwritten){if(overwritten.length>0){var onComplete=function(approved){if(approved){submitForm();}else{data.abort();}}
if(!overwrite_dialog){overwrite_dialog=overwriteDialog();}
overwrite_dialog.show(overwritten,onComplete,file_count>1);}else{submitForm();}});}
function on_upload_start(e,data){$('.media_browse').addClass('progress_active');}
function on_upload_send(e,data){data.unique_id=unique_upload_id++;var progress_bar=$('<div/>').addClass('progress_bar').append($('<div/>').addClass('completed'));var progress_note=$('<div/>').addClass('progress_note').text('Uploading...');var image_holder=$('<span/>').addClass('image_holder active').append(progress_bar).append(progress_note);var kind_icon=$('<span/>').addClass('kind_icon');var public_id_elem=$('<span/>').addClass('public_id').text(data.files[0].name||"Remote URL");var info_elem=$('<span/>').addClass('info').text(human_size(data.files[0].size));var details_elem=$('<span/>').addClass('details').append(kind_icon).append(public_id_elem).append(info_elem);var link_elem=$('<a/>').addClass('media_item_link').attr('href','#').append(image_holder).append(details_elem);var new_item=$('<li/>').addClass('media_item upload in_progress').attr('id','upload_item_'+data.unique_id).append(link_elem);$('.media_library .upload_list ul.items').prepend(new_item);}
function on_upload_progress(e,data){var $item=$('.media_library .upload_list li#upload_item_'+data.unique_id);$item.find('.completed').css('width',Math.round((data.loaded*100.0)/data.total)+'%');}
function on_upload_done(e,data){var $item=$('.media_library .upload_list li#upload_item_'+data.unique_id);$item.find('.completed').css('width','100%');$('.breadcrumbs .delete_folder').hide();var result=data.result;var isAuthenticated=result.type=='authenticated';$item.find('.public_id').text(result.public_id);$item.data('info',result);if(isAuthenticated){$item.addClass('authenticated');}
if(result.resource_type=='raw'){$item.removeClass('in_progress');$item.find('.image_holder').removeClass('active');}else if(result.is_audio){$item.removeClass('in_progress');$('.image_holder',$item).html('<img src="/images/admin/audio_icon.jpg" width="100" height="100" />');}else{$item.attr('data-public-id',result.public_id);$item.find('.info').text(image_info_line(result));var image=thumbnail_image(result);if(isAuthenticated){image[0].src=sign_url(image[0].src,result.resource_type);}
$(image).load(function(){$(this).parents('.media_item').removeClass('in_progress');$(this).parents('.image_holder').addClass('active');});$(image).error(function(){$item.find('.image_holder').append($('<div/>').addClass('failed_message').html("No thumbnail available"));$item.removeClass('in_progress').addClass('failed');$(image).remove();});$item.find('.image_holder').append(image);reload_thumbnail($item);}}
function on_upload_init(e,data){overwrite_dialog=null;file_count=0;$(e.target).fileupload('option','uploadType',null);}
function configure_file_upload($field){$field.cloudinary_fileupload({'dropZone':$field.closest('.drag_area'),'autoUpload':false,'change':on_upload_init,'drop':on_upload_init,'add':on_upload_add,'start':on_upload_start,'send':on_upload_send,'progress':on_upload_progress,'done':on_upload_done});}
configure_file_upload($('.main_image_upload'));configure_file_upload($('.advanced_image_upload'));$('.upload_panel .start_upload').live('click',function(){var remote_url=$('.upload_panel .upload_remote_url').val();if(is_blank(remote_url)||!remote_url.match(/^https?:\/\//i)){return false;}
$('.advanced_image_upload').fileupload('option','formData').file=remote_url;$('.advanced_image_upload').fileupload('option','uploadType','remote');$('.advanced_image_upload').fileupload('add',{files:[remote_url]});return false;});var unique_upload_id=1;function human_size(size){if(typeof(size)=='undefined'||size===null){return"N/A";}
var suffix=["bytes","KB","MB","GB","TB","PB"];var tier=0;while(size>=1024){size=size/1024;tier++;}
return Math.round(size*10)/10+" "+suffix[tier];}
function image_info_line(info){var output=[];if(info.type=='authenticated'){output.push('Authenticated');}
if(info.width){output.push(info.width+"x"+info.height);}
if(info.bytes){output.push(human_size(info.bytes)+" "+(info.format?info.format.toUpperCase():""));}
return output.join(", ");}
function moderation_control($wrapper,info){var $approve_link=$wrapper.find(".approve");var $reject_link=$wrapper.find(".reject");var view_rejected_link=$wrapper.find(".view_rejected");var addModerationNavigationLinks=function(){if($('.next-mod',$wrapper).length===0){var $mediaThumb=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");if($mediaThumb.next().length||$('.media_browse ul.items[data-has-more]').data('has-more')){var $next=$('<a />').addClass('mod-nav-link next-mod').text('NEXT ▶').appendTo($wrapper);$next.on('click',function(){$mediaThumb=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");if($mediaThumb.next().length){$mediaThumb.next().find('.media_item_link').click();}else{load_more_images($next,function(){var $mediaThumb=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");$mediaThumb.next().find('.media_item_link').click();});}});}
if($mediaThumb.prev().length){$('<a />').addClass('mod-nav-link prev-mod').text('◀ PREV').prependTo($wrapper).on('click',function(){$mediaThumb=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");$mediaThumb.prev().find('.media_item_link').click();});}}};var update_view=function(){var has_status=!!info.moderation_status;if(has_status){$approve_link.css('display',info.moderation_status!="approved"?'inline-block':'none');$reject_link.css('display',info.moderation_status!="rejected"?'inline-block':'none');view_rejected_link.css('display',info.moderation_status=="rejected"?'inline-block':'none');}
$wrapper.parents(".image_dialog").toggleClass("placeholder",info.moderation_status=="rejected");if(has_status){var holder=$wrapper.parents(".image_dialog").find(".image_holder");holder.toggleClass("active",info.moderation_status!="rejected");$wrapper.parents(".image_dialog").removeClass("rejected approved pending").addClass(info.moderation_status);$wrapper.parents(".image_dialog").find('.moderation_icon').attr('title',"Moderation status: "+info.moderation_status.charAt(0).toUpperCase()+info.moderation_status.slice(1));}
if($('.media_library').hasClass('mode_moderation')){addModerationNavigationLinks();}};var moderation_action=function(link,url,next_status){return function(event){suppressEvent(event);ajax_post_with_spinner(link,function(){info.moderation_status=next_status;var updateRejectedText=function($newThumb){if(next_status==='rejected'){var nonExistingText='Rejected image (rejected ';var $dialog=link.parents('.image_dialog');var newInfo=$newThumb.data('info');var timeago=$('<span />').addClass('deletion_time').attr('title',newInfo.updated_at).timeago();$dialog.find('.non_existing').html('').append(nonExistingText).append(timeago).append(')');}};reload_thumbnail($(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']"),null,updateRejectedText);refresh_preview();update_view();},{url:url});};};$approve_link.click(moderation_action($approve_link,Routes.approve_console_moderations_path({external_id:info.asset_id,public_id:info.public_id,type:info.type,resource_type:info.resource_type}),"approved"));$reject_link.click(moderation_action($reject_link,Routes.reject_console_moderations_path({external_id:info.asset_id,public_id:info.public_id,type:info.type,resource_type:info.resource_type}),"rejected"));view_rejected_link.click(function(event){event.preventDefault();window.open(Routes.console_media_library_backup_version_path({public_id:info.public_id,resource_type:info.resource_type,type:info.type,version:info.version,format:info.format}));});update_view();}
function show_info_control(wrapper,info,infoWidget){var link=wrapper.find("a");var cachedResult;function ajax_options(){return{method:'GET',data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type},error:function(jqXHR){wrapper.find(".error").html("failed");},spinner:{img:'/images/spinner_info.gif',width:16,height:16},};}
function updateInfo(data){infoWidget.colors(data.colors).metadata(data.image_metadata||data.video_metadata).faces(data.faces).predominant(data.predominant).show();}
link.click(function(event){event.preventDefault();if(infoWidget.shown()){infoWidget.hide();return false;}
if(cachedResult){updateInfo(cachedResult);return false;}else{ajax_post_with_spinner(link,function(data){cachedResult=data;updateInfo(data);},ajax_options());return false;}});}
function remove_background_control(wrapper,info){var link=wrapper.find("a");function ajax_options(){return{method:'GET',url:link.attr('href'),data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type},spinner:{img:'/images/spinner_gray.gif ',width:16,height:16}};}
var status_options=ajax_options();status_options.success=function(result){if(result.status>0){var message=wrapper.find(".status"+result.status).html();wrapper.addClass("status"+result.status).html(message);if(result.status===2){$('.rtb_contest_form_toggle').addClass("visible")}}};var show_error=function(status){var message=wrapper.find(".error"+status).html();$("<div></div>").addClass("error").html(message).dialog({modal:true,title:"Error",dialogClass:"error error"+status,buttons:{OK:function(){$(this).dialog("close");}}});};$.ajax(status_options);link.click(function(event){event.preventDefault();event.stopPropagation();if(link.hasClass("no_addon_plan")){show_error(401);return;}
var action_options=ajax_options();action_options.method='POST';action_options.error=function(jqXHR){show_error(jqXHR.status);};$("<div></div>").addClass("confirmation").html("Are you sure you want to schedule background removal for this image using the Remove the Background add-on?").dialog({modal:true,title:"Confirmation",dialogClass:"confirmation",buttons:{OK:function(){ajax_post_with_spinner(link,function(){$("<div></div>").text("Background removal scheduled. The editing process may take up to 24 hours.").dialog({title:'Remove The Background',buttons:{OK:function(){$(this).dialog("close");}}});$.ajax(status_options);},action_options);$(this).dialog("close");},Cancel:function(){$(this).dialog("close");}}});});}
function metadata_control($wrapper,info){var $toggle=$wrapper.parent().find('.metadata_form_toggle');var $control=$('.metadata_control',$wrapper);var $container=$('#meta_container',$wrapper);var $addNew=$('.add_new_meta',$wrapper);var $updateLink=$('input.action',$wrapper);function update_values(response){info.context=[];$container.html('');var data=response;data.sort();var special={};for(var i=0;i<data.length;i++){var e=data[i];e.showDeleteIcon=true;if(e.name=='alt'||e.name=='caption'){special[e.name]=e;data[i]=null;}}
data.unshift(special.caption||{kind:1,name:'caption',uneditableName:true});data.unshift(special.alt||{kind:1,name:'alt',uneditableName:true});$.each(data,function(i,e){if(!e)return;injectCustomDataControl(e);info.context.push(e);$updateLink.removeClass('dirty');});}
function ajax_options(){return{method:'GET',url:$control.attr('action'),data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,'metadata':$control.serialize()},spinner:{img:'/images/spinner_gray.gif ',width:16,height:16}};}
function submit_metadata(){if(!$updateLink.hasClass('dirty')){return false;}
sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'context added to asset');$('.custom-data.deleted',$control).remove();var options=ajax_options();options.method="put";var metadata=$control.find("input[type=text]").serializeArray();$control.find('.custom-data').each(function(){var $customDataControl=$(this);$('input[type=hidden]',$customDataControl).each(function(){$current=$(this);var propertyName=$current.attr('name');var option={name:$current.attr('name'),value:$current.val()};metadata.push(option);$current.siblings('input:focus').blur();});});options.data.metadata=metadata;ajax_post_with_spinner($updateLink,update_values,options);return false;}
function injectCustomDataControl(dataItem){dataItem=dataItem||{};var $newDataControl=$('<div/>').addClass('custom-data');var name=dataItem.name;var value=dataItem.value;var $name=$('<input />').attr({'type':'text','data-property-name':'name','placeholder':'name'}).val(name);var $value=$('<input />').attr({'type':'text','data-property-name':'value','placeholder':'value'}).val(value);var $hidden=$('<input />').attr({'type':'hidden','name':name}).val(value);if(dataItem.uneditableName){$name.attr('disabled','disabled');}
$newDataControl.append($name).append(' : ').append($value).append($hidden);if(dataItem.showDeleteIcon){var $remove=$('<i />').addClass('fa fa-minus-circle remove-item');$newDataControl.append($remove);}
$container.append($newDataControl);$('input[type=text]',$newDataControl).blur(function(){var name=$hidden.attr('name');var $current=$(this);var propertyName=$current.data('property-name');var propertyValue=$current.val();switch(name){case'alt':sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'edit asset title');break;case'caption':sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'edit asset description');break;default:{if(propertyName==='name'){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'edit asset context key');}else if(propertyName==='value'){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'edit asset context value');}
break;}}});$('input[type=text]',$newDataControl).keyup(function(){var $current=$(this);var propertyName=$current.data('property-name');var propertyValue=$current.val();switch(propertyName){case'name':$hidden.attr('name',propertyValue);break;case'value':$hidden.val(propertyValue);break;}
$updateLink.addClass('dirty');});}
$control.on('click','.remove-item',function(){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.TAG,'remove asset context key and value');var $btn=$(this);var $container=$btn.parents('.custom-data');$btn.toggleClass('fa-undo fa-minus-circle');$container.toggleClass('deleted');$updateLink.addClass('dirty');return;});$addNew.click(function(e){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'add asset context key and value');injectCustomDataControl(e)});$toggle.on('click',function(){if(!$control.hasClass("active")){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'intent to add context');}
$control.toggleClass("active");$($control.find("input")[0]).focus();if(info.context){update_values(info.context);}else{ajax_post_with_spinner($control,update_values,ajax_options());}
return false;});$control.submit(submit_metadata);}
function rename_control(wrapper,info){var toggle=wrapper.parent().find('.rename_form_toggle');var control=wrapper.find(".rename_control");var updateLink=wrapper.find("input.action");var to_public_id=control.find("input[type='text']");function show_error(message){var error=control.find('.error_message');if(error.length===0){error=$("<div class='error_message'/>");control.append(error);}
error.text(message);}
function hide_error(){control.find('.error_message').remove();}
function submit_rename(){if(!$(updateLink).hasClass('dirty')){return false;}
sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'rename asset');var options={method:'POST',url:control.attr('action'),data:{'asset_id':info.asset_id,'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,to_public_id:to_public_id.val()},spinner:{img:'/images/spinner_gray.gif ',width:16,height:16},error:function(response,status,err){control.toggleClass('error',true);show_error($.parseJSON(response.responseText).error.message);}};var from_public_id=info.public_id;ajax_post_with_spinner(updateLink,function(info){reload_thumbnail($(".media_browse .media_item."+info.type+"[data-public-id='"+from_public_id+"']"),info);close_image_dialog();show_image_dialog(info,{should_refresh_preview:true});if(window.cldNewConsole){window.parent.postMessage({type:'assetRename',payload:options.data},window.location.protocol+'//'+window.location.host);}},options);return false;}
to_public_id.on('keyup',function(){var field=$(this);updateLink.toggleClass('dirty',field.val()!=info.public_id);});toggle.on('click',function(){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.EDIT,'intent to rename asset');$(this).removeClass("active");control.addClass("active");to_public_id.val(info.public_id).focus();return false;});control.submit(submit_rename);}
function rtb_contest_control(wrapper,info){var toggle=wrapper.parent().find('.rtb_contest_form_toggle');var control=wrapper.find(".rtb_contest_control");var postContest=wrapper.find("input.action");var contest_reason=control.find("textarea#remove_background_contest_reason");var rtb_wrapper=wrapper.parent().find('.remove_background');function show_error(message){var error=control.find('.error_message');if(error.length===0){error=$("<div class='error_message'/>");control.append(error);}
error.text(message);}
function hide_error(){control.find('.error_message').remove();}
function submit_contest(){var options={method:'POST',url:control.attr('action'),data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,reason:contest_reason.val()},spinner:{img:'/images/spinner_gray.gif ',width:16,height:16},error:function(response,status){control.toggleClass('error',true);var serverError=$.parseJSON(response.responseText).error.message
var displayError
switch(true){case(serverError.indexOf("ImageTicket is missing")>=0):{displayError="This image cannot be reprocessed";break;}
case(serverError.indexOf("Must provide a reason")>=0):{displayError="Must provide a reason";break;}
default:{displayError="Something went wrong";break;}}
show_error(displayError);}};ajax_post_with_spinner(postContest,function(info){rtb_wrapper.removeClass("status2").addClass("status1").html("Background removal in progress");wrapper.html("")},options);return false;}
contest_reason.on('keyup',hide_error);toggle.on('click',function(e){e.stopPropagation();control.addClass("visible");toggle.removeClass("visible");return false;});control.submit(submit_contest);}
function tags_control(wrapper,info){var control=wrapper.find(".tags_control");var delete_url=wrapper.data('delete_path');function show_error(message){var error=control.find('.error_message');if(error.length===0){error=$("<div class='error_message'/>");control.append(error);}
error.text(message);}
function hide_error(){control.find('.error_message').remove();}
var $tags_label=control.find(".tags_label");var $new_tag_control=control.find(".new_tag_control");var $new_tag_control_input=$new_tag_control.find('input[name="tag"]');var $toggle=wrapper.find('.tag_form_toggle');$toggle.on('click',function(){$(this).removeClass("active");$new_tag_control.addClass("active");$new_tag_control_input.focus();sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.TAG,'intent to add tag to asset');return false;});function update_tags(response){if(response)info.tags=response;control.find(".tag_control").remove();if(info.tags){$.each(info.tags,function(i,tag){if(!is_blank(tag)){create_tag_control(tag).insertBefore($new_tag_control);}});}
var has_tags=!!(info.tags&&info.tags.length>0);$tags_label.toggleClass('active',has_tags);control.parents('.tags').toggleClass('has_tags',has_tags);}
function create_tag_control(tag){var close=$("<a/>").addClass('close').attr('href','#').html("&times;").addClass("action");var tag_control=$("<div/>").addClass('tag_control').append($('<span/>').text(tag));if(delete_url){tag_control.append(close);close.on('click',function(event){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.TAG,'tag removed from asset');hide_error();tag_control.addClass('removed',true);ajax_post_with_spinner(this,update_tags,{url:delete_url,method:'DELETE',spinner:{img:'/images/spinner_gray.gif ',width:16,height:16},data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,'tag':tag},error:function(response,status,err){tag_control.toggleClass('error',true);show_error($.parseJSON(response.responseText).error.message);}});return false;});}
return tag_control;}
update_tags();function submit_tag(event){hide_error();var tag=$new_tag_control_input.val().toString();if(is_blank(tag))return false;if(tag.length>255){show_error("Tag too long. Max length: 255 characters");return false;}
$new_tag_control.removeClass('error');ajax_post_with_spinner($new_tag_control.find("a"),function(response){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.TAG,'tag added to asset');$new_tag_control.find('input').val("");update_tags(response);},{method:'POST',spinner:{img:'/images/spinner_gray.gif ',width:16,height:16},data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,'tag':tag},error:function(response,status,err){$new_tag_control_input.val("");$new_tag_control.addClass('error');show_error($.parseJSON(response.responseText).error.message);}});$new_tag_control_input.autocomplete('close');return false;}
$new_tag_control.on('submit',submit_tag);$new_tag_control.find("a").on('click',submit_tag);$new_tag_control_input.autocomplete({source:function(request,response){get_tags(wrapper.data('fetch-tags-url'),request,response);},select:function(e,item){$('#tag',$new_tag_control).val(item.item.value);$new_tag_control.find('a').click();},delay:200});return control;}
function thumbnail_image(info){var result='';if(info.resource_type!=='raw'){if(info.is_audio){result=$.cloudinary.image("audio_icon-a155dc629c58d29bd18ae4c907c9adc3",{type:"asset",cloud_name:"cloudinary",transformation:"media_lib_thumb",format:"png"});}
else{result=$.cloudinary.image(info.public_id,{type:info.type,resource_type:info.resource_type,format:info.format=='png'?'png':'jpg',cloud_name:$('.media_library').attr('data-cloud-name'),private_cdn:$('.media_library').attr('data-private-cdn'),cname:$('.media_library').attr('data-cname'),secure_distribution:$('.media_library').attr('data-secure-distribution'),version:info.version,transformation:"media_lib_thumb",trust_public_id:true});}}
return result;}
$('.media_library .cloudinary-fileupload').live('fileuploadfail',function(e,data){var message="Upload failed";if(data.dataType=='json'&&data.jqXHR&&data.jqXHR.responseText){message="Upload failed: "+$.parseJSON(data.jqXHR.responseText).error.message;}
var item=$('.media_library .upload_list li#upload_item_'+data.unique_id);$(item).find('.image_holder').append($('<div/>').addClass('failed_message').text(message));$(item).removeClass('in_progress').addClass('failed');});var transformation_widget=null;function update_refresh_button_position(){var dialog=$('.media_library .image_dialog');var relevant_image_holder=$(dialog).find('.preview_holder .preview_image')[0]||$(dialog).find('.preview_holder')[0];if(dialog.length&&relevant_image_holder){$(dialog).find('.preview_holder').find('.refresh_preview_holder').css('width',Math.max(68*2,$(relevant_image_holder).width()));}}
function get_media_size(media){var naturalWidth=media.naturalWidth()||media[0].videoWidth;var naturalHeight=media.naturalHeight()||media[0].videoHeight;return({width:naturalWidth,height:naturalHeight})}
function update_dialog_width(){var $dialog=$('.media_library .image_dialog');if($dialog.size()===0||$dialog.find('.trans_panel').size()===0){return;}
if(!$('.media_library .preview_panel').is(":visible")){return;}
var cms_mode=$('.media_library').hasClass('cms');var window_height=$(window).height();var preview_width=$dialog.find('.dialog_content .inner_content').width()-($dialog.find('.left_panel').outerWidth()+(cms_mode?0:20));var preview_height=window_height;var max_width=Math.min(1000,preview_width-(cms_mode?70:24));var sample_code_or_url_height=$dialog.find('.preview_image_info').outerHeight(true);var padded_height=$dialog.find(".preview_panel").outerHeight(true)-$dialog.find(".preview_panel").height();var header_height=cms_mode?210:284;if(window.cldNewConsole){header_height=240;var new_ml_enabled=$.cookie("new_ml_enabled")==="yes";if(new_ml_enabled){header_height=173;}}
var image=$dialog.find('.preview_holder .preview_image.active');var min_image_height=50;if(image.length>0){min_image_height=Math.min(min_image_height,get_media_size(image).height);}
var max_height=Math.max(cms_mode?300:min_image_height,Math.min(1000,preview_height-sample_code_or_url_height-padded_height-header_height)-8);var image=$dialog.find('.preview_holder, .preview_holder .preview_image');image.css('max-width',max_width).css('max-height',max_height).css('min-height',min_image_height);$dialog.find('.preview_panel').css('width',preview_width-(cms_mode?50:44));var image_width=$dialog.find('.preview_image').width()||400;$dialog.find('.preview_holder').css('width',Math.max(68*2,image_width));$dialog.find('.preview_holder').css('max-width',preview_width-(cms_mode?50:44));$dialog.find('.preview_panel .trans_url').css('max-width',preview_width-(cms_mode?60:44));$dialog.find('.dialog_content').css('min-height',$dialog.find('.preview_panel').outerHeight(true));update_refresh_button_position();update_preview_size_warning();}
function setup_sticky_preview_panel(){var panel=$('.media_library .image_dialog').find('.preview_panel');if(!$(panel).is(':visible')||$(panel).data('sticky')){return;}
$(panel).data('sticky',true);$(panel).waypoint(function(direction){var panel_bigger_than_window=$(panel).outerHeight(true)>$(window).outerHeight();if(direction==="down"&&!panel_bigger_than_window){$(panel).addClass('sticky');$(panel).css('left',($('.media_library .dialog_content .content').offset()?$('.media_library .dialog_content .content').offset().left:0)+
$(panel).parents('.image_dialog').find('.left_panel').width()+($('.media_library').hasClass('cms')?20:20));}else{$(panel).removeClass('sticky');$(panel).css('left','auto');}});}
function load_image(resource_type,type,public_id,callback){var thumbnail=$('.items .media_item.'+type+'[data-public-id="'+public_id+'"]');if(thumbnail.length){callback(thumbnail);return;}
ajax_post_with_spinner($('.media_library .image_search_form .submit'),function(result){callback($(result));},{no_spinner:!!window.cldNewConsole,method:'GET',data_type:'html',url:'/console/media_library/thumbnail',data:{resource_type:resource_type,type:type,public_id:public_id}});}
function disable_code_preview(){select_code_preview('secure_url');}
function show_image_integration_code(selected_framework,info){var reload=$(".media_library .secure_url a").data("dirty");if(!reload){select_code_preview(selected_framework);return;}
var dialog=$('.media_library .image_dialog');var framework=selected_framework;var selector=".media_library .image_dialog #sample_code_container #sample_code";var image_url=image_trans_url({secure:false});if(image_url.indexOf('http')<0){image_url=window.location.protocol+'//'+window.location.host+image_url;}
var $sample_code_container=$('.media_library .image_dialog #sample_code_container');setSpinner($sample_code_container,'show_integration_code',{hide:false,position:{top:-10,left:0}});if(image_url!==''){$(selector).load('/console/media_library/code_sample',{_method:'GET',url:encodeURI(image_url),framework:framework},function(data){$(".media_library .secure_url a").data("dirty",false);select_code_preview(framework);});}}
function select_code_preview(framework){$('.media_library .image_dialog #sample_code_container').show();removeSpinner('show_integration_code');var link=$("a[data-framework='"+framework+"']");$('.multi_code').each(function(index,multi_code){var framework_exists=$(multi_code).find('.framework_links a[data-framework='+$(link).data('framework')+']').length>0;if(framework_exists){$(multi_code).find('.framework_sample, .framework_links a').removeClass('active');if($(link).data('framework')=='all'){$(multi_code).find('.framework_sample').addClass('active');$(multi_code).addClass('all_mode');}else{$(multi_code).find('.framework_sample[data-framework='+$(link).data('framework')+']').addClass('active');$(multi_code).removeClass('all_mode');}
if(framework_exists){$(multi_code).find('.framework_links a[data-framework='+$(link).data('framework')+']').addClass('active');}}});update_dialog_width();}
var bindQualityOverrideDialog=function($dialog,info){var $btn=$dialog.find('a.toggle_quality_dialog_button');if(info.resource_type!='image'&&info.resource_type!='video'){$btn.hide();return;}
$btn.on('click',function(e){e.preventDefault();var $sender=$(this);var imageInfo={public_id:info.public_id,type:info.type,resource_type:info.resource_type};ajax_post_with_spinner($sender,function(data){var popupHtml=$('<div/>').addClass('quality-override-dialog');var qualitySlider=$('<div />').addClass('quality-slider');var qualityInput=$('<input type="text" value="80"/>');var chromaSelect=$('<select />').append('<option value="">Default encoding</option>').append('<option value=":420">Chroma subsampling</option>').append('<option value=":444">No chroma subsampling</option>');popupHtml.append('<p>Set this value to ensure high quality when this image is encoded using our automatic content-aware quality algorithm. We will use this as feedback to improve our algorithm.</p>').append('<span>Quality level:</span>').append(qualitySlider).append(qualityInput);if(info.resource_type==='image'){popupHtml.append(chromaSelect);}
var $popup=popupHtml.dialog({resizable:false,width:400,modal:true,title:'Override Automatic Image Quality',buttons:{"Override":function(){var options=$.extend({},imageInfo,{quality:qualityInput.val()+chromaSelect.val()});options.url=Routes.console_media_library_quality_override_path(options);ajax_post_with_spinner($(this).find('button:first-child'),function(result){$popup.dialog('close');},options);},"Restore to Default":function(){var options=$.extend({},imageInfo,{quality:''});options.url=Routes.console_media_library_quality_override_path(options);ajax_post_with_spinner($(this).find('button:first-child'),function(result){$popup.dialog('close');},options);},"Cancel":function(){$(this).dialog("close");}}});chromaSelect.uniform();qualitySlider.slider({min:10,max:100,value:80,slide:function(e,ui){qualityInput.val(ui.value);}});qualityInput.on('keyup',function(){var value=qualityInput.val();qualitySlider.slider('value',value);});if(data&&!!data.quality){var parts=data.quality.split(':');qualityInput.val(parts[0]);qualitySlider.slider('value',parts[0]);if(parts[1]){chromaSelect.val(':'+parts[1]);$.uniform.update(chromaSelect);}}
$popup.dialog('open');},{url:Routes.console_media_library_get_quality_override_path(imageInfo)});return false;});};function getVisibleElement(selector){var deferred=$.Deferred();var visibleSelector=selector+':visible';var intervalId=setInterval(function(){var el=$(visibleSelector);if(!el.length){return;}
clearInterval(intervalId);clearTimeout(timeoutId);deferred.resolve(el);},50);var timeoutId=setTimeout(function(){clearInterval(intervalId);deferred.resolve(null);},5000);return deferred.promise();}
function updateDrillDown(){if(window.cldNewConsole){if(location.search){var qs=location.search.slice(1,-1);var query=qs.split('&').reduce(function(bucket,drop){var a=drop.split('=');bucket[a[0]]=decodeURIComponent(a[1]);return bucket;},{});var panels={list:function(){$('.media_library .image_dialog .view_derivatives').click();},transformation:function(){getVisibleElement('.derived_resource').then(function(element){element&&element.each(function(index,element){if($(element).find('.name').text()===query.transformation){$(element).find('.select_derived').click();}})});$('.media_library .image_dialog .view_derivatives').click();},faces:function(){$('.media_library .image_dialog .toggle_crop_dialog_button').click();getVisibleElement('.interactive_cropping a.faces').then(function(){element&&element.click();});},custom_coordinates:function(){$('.media_library .image_dialog .toggle_crop_dialog_button').click();getVisibleElement('.interactive_cropping a.custom').then(function(element){element&&element.click();});}};if(query&&query.panel)panels[query.panel]();}
window.parent.postMessage({drillDownLoaded:true},window.location.protocol+'//'+window.location.host);}}
function show_image_dialog(info,options){if(!options){options={};}
var $new_dialog=$('<div/>').append($('.image_dialog_template').html());var image=thumbnail_image(info);if(image){image.load(updateDrillDown);image.error(updateDrillDown);}
else{updateDrillDown();}
if(info.type=='authenticated'&&options.thumbnail&&image){image.attr('src',$('.image_holder img',options.thumbnail).attr('src'));}
$new_dialog.on("click",".framework_links a",function(e){e.preventDefault();var framework=e.target.getAttribute('data-framework');show_image_integration_code(framework,info);});if(info.resource_type=="video"){$new_dialog.find(".trans_form_holder, .transformation_holder").addClass('video_mode');$new_dialog.find('.image_dialog').removeClass('audio').addClass('video');$('.view_image span',$new_dialog).text('View video');$('.view_derivatives',$new_dialog).text('View derived videos');$('.view_trans_image',$new_dialog).text('View full-size video');$('.view_rejected',$new_dialog).text('View rejected video');$('.remove_background',$new_dialog).remove();if(info.is_audio){$new_dialog.find(".trans_form_holder, .transformation_holder").addClass('audio_mode');$new_dialog.find('.image_dialog').removeClass('video').addClass('audio');$('.view_image span',$new_dialog).text('Open audio');}}else{$new_dialog.find('.trans_form_holder, .transformation_holder').addClass('image_mode');}
if(info.bytes==0&&info.updated_at==null){$('.delete',$new_dialog).hide();}
$new_dialog.find('.image_holder').append(image);$new_dialog.find('.public_id').text(info.public_id);$new_dialog.find('.info').text(image_info_line(info));tags_control($new_dialog.find('.tags'),info);var is_managed=function(type){return["upload","private","authenticated"].indexOf(type)!==-1;}
if(is_managed(info.type)){rename_control($new_dialog.find('.rename'),info);}else{$new_dialog.find('.rename_form_toggle').remove();}
metadata_control($new_dialog.find('.metadata'),info);moderation_control($new_dialog.find(".moderation_actions"),info);remove_background_control($new_dialog.find(".remove_background"),info);rtb_contest_control($new_dialog.find(".rtb_contest"),info)
infoWidget($new_dialog.find(".image_info"));show_info_control($new_dialog.find(".view_image_info_control"),info,infoWidget);$new_dialog.find('.image_holder, .view_image').attr('href',info.secure_url);$new_dialog.find('.image_holder, .view_image').on('click',function(){sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.NAVIGATE,'open url in new tab');});$new_dialog.find('.image_dialog').addClass(info.type).data('info',info);$new_dialog.find('.upload_time').attr('title',info.created_at).timeago();$new_dialog.find('.exact_time').text('('+info.created_at.replace('T',' ').replace('Z','')+')');if(info.backup&&!info.pending){$new_dialog.find('.image_dialog').addClass('backed_up');}
if(info.multiple_backup){$new_dialog.find('.image_dialog').addClass('multiple_backed_up');}
if(info.placeholder){$new_dialog.find('.image_dialog').addClass('placeholder');}
if(info.placeholder||info.backup){var $orig=options.thumbnail||$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");var nonExistingText=$('span.details span.info',$orig).text();if(nonExistingText.indexOf('Deleted')>-1){nonExistingText+=' (deleted ';$new_dialog.find('.deletion_time').attr('title',info.updated_at).timeago();$new_dialog.find('.non_existing').append(')');}else if(nonExistingText.indexOf('Rejected')>-1){nonExistingText+=' (rejected ';$new_dialog.find('.deletion_time').attr('title',info.updated_at).timeago();$new_dialog.find('.non_existing').append(')');}
$new_dialog.find('.non_existing').prepend(nonExistingText);}
if(info.resource_type=='raw'){$new_dialog.find('.view_image').text("Download");$new_dialog.find('.image_dialog').addClass('raw');}
bindQualityOverrideDialog($new_dialog,info);if(info.moderation_status){$new_dialog.find('.image_holder').addClass(info.moderation_status);}
if(info.moderation_status!="rejected"){$new_dialog.find('.image_holder img, .image_holder video').on('load canplay',function(){$(this).parents('.image_holder').addClass('active');}).on('error',function(){$(this).parents('.image_holder').removeClass('active');});}
$new_dialog.find('.image_dialog').data('info',info);if(options.cms_image_attributes){$new_dialog.find('.image_dialog').data('cms_image_attributes',options.cms_image_attributes);$new_dialog.find('.image_dialog').addClass('cms_edit');}
var $form_template=$new_dialog.find('.trans_form_template');var $widget_element=$new_dialog.find('.trans_form_holder');transformation_widget=transformationWidget({from_media_lib:true}).root($widget_element).template($form_template).info(info);transformation_widget.clear();transformation_widget.on('transform_change',function(){update_preview_panel();});$('.media_library .cms_header').after($new_dialog);$('.media_library, .media_filter, .resource_filter').addClass('with_dialog');setTimeout(function(){update_dialog_width();},1);if($('.initial_transformations').size()>0){$new_dialog.find('.derivatives_panel').html($('.initial_transformations').html());$new_dialog.find('.image_dialog').addClass('with_derivatives');$('.media_library').addClass('with_derivatives');$new_dialog.find('.preview_holder').removeClass('modified');$('.media_library .strict_transformation_creation_button').css("display","none");}else if(options.should_refresh_preview){refresh_preview();}
update_preview_panel(true);setTimeout(function(){setup_sticky_preview_panel();$new_dialog.find('.image_align').uniform();},1);}
$('.media_list .media_item_link').live('click',function(e){if(e.ctrlKey||e.metaKey){return true;}
var info=$(this).parents('.media_item').data('info');if(!info||!info.public_id){return false;}
$.address.value(["dialog",info.resource_type,info.type,encodeURIComponent(info.public_id)].join("/"));updateTop();return false;});var multipleActionsController=function(){var $multiActionsWrapper=$('.multi-actions-wrapper');var $selectedItems;var VALID_SELECTION_KEY='valid-selection';$(document).on({keyup:function(e){if(e.keyCode==27){$multiActionsWrapper.find('.action.active.with-content').click();}},click:function(e){var $target=$(e.target);if($target.closest('.multi-actions-wrapper, .tagit-autocomplete').length==0){$multiActionsWrapper.find('.action.active.with-content').click();}}});$multiActionsWrapper.css('visibility','hidden').show();$multiActionsWrapper.css('visibility','visible').hide();var $window=$(window);var $anchor=$('.media_list.main_list');$window.scroll(function(e){if($anchor.length===0)return;var scrollTop=$window.scrollTop();var anchorTop=$anchor.offset().top;var isFixed=scrollTop>=anchorTop;$multiActionsWrapper.toggleClass('fixed',isFixed);});var $messagesContainer=$multiActionsWrapper.find('.note');var showMessage=function(message,keep,cssClass){var $message=$('<div />').addClass(cssClass).html(message).appendTo($messagesContainer);if(!keep){setTimeout(function(){$message.fadeOut(function(){$(this).remove();});},4000);}};var clearMessages=function(immediately){if(immediately){$messagesContainer.find('div').remove();}else{$messagesContainer.find('div').fadeOut(function(){$(this).remove();});}};var clearSelection=function(){$('.media_list input.multi-select:checked').each(function(){$(this).click();});};var updateThumbsSelection=function(){$selectedItems=$('.media_item.selected');var count=$selectedItems.length;$('.media_library').toggleClass('with-selection',count>0);if(count>0){clearMessages(true);if(count<=1000){showMessage(getItemsTextByCountAndType(count)+' selected (<span id="clear-selection">clear</span>)',true);$multiActionsWrapper.data(VALID_SELECTION_KEY,true);}else{showMessage('1000+ selected, please <span id="clear-selection">clear</span> some',true,'error');$multiActionsWrapper.data(VALID_SELECTION_KEY,false);}
$('#clear-selection').click(clearSelection);$multiActionsWrapper.fadeIn();}
else{$multiActionsWrapper.fadeOut();}};var validateActionAttempt=function(actionName){var invalidItems=$.grep($selectedItems,function(item){return $(item).data('actions-permissions')[actionName]==false;});return{isValid:invalidItems.length===0,$invalidItems:$(invalidItems)}};var handleInvalidActionAttempt=function(validation,action){var message=validation.$invalidItems.length+' items can not be '+action;clearMessages(true);showMessage(message,false,'error');validation.$invalidItems.addClass('invalid');setTimeout(function(){validation.$invalidItems.removeClass('invalid');updateThumbsSelection();},5000);};$('.media_list').on('click','.media_item input.multi-select',function(e){var $sender=$(this);var isChecked=$sender.is(':checked');var $mediaItem=$sender.closest('.media_item');$mediaItem.toggleClass('selected',isChecked);if(isChecked&&e.shiftKey&&($multiActionsWrapper.data('last-selected')>-1)){var currentClickIndex=$mediaItem.index();var lastSelectedIndex=$multiActionsWrapper.data('last-selected');var $items=$mediaItem.parent().children();var first=Math.min(currentClickIndex,lastSelectedIndex)+1;var last=Math.max(currentClickIndex,lastSelectedIndex)-1;for(var i=first;i<=last;i++){var $item=$items.eq(i);if($item.find('input.multi-select').length){$item.addClass('selected').find('input.multi-select').prop('checked',true);}}}
$multiActionsWrapper.data('last-selected',$mediaItem.index());updateThumbsSelection();setTimeout(function(){$sender.prop('checked',!$sender.prop('checked'));},10);return false;});var getSelectedPublicIds=function(){var $items=$('.media_list .media_item.selected');var ids=[];$items.each(function(){ids.push($(this).data('info').public_id);});return ids;};var hideActionContent=function($action){$action.removeClass('active');var $content=$('#'+$action.attr('id')+'-content');$content.removeClass('active');};var showActionContent=function($action){$action.addClass('active').siblings().removeClass('active');var $content=$('#'+$action.attr('id')+'-content');$content.addClass('active').siblings().removeClass('active');$content.find('input[type=text]').focus();};$multiActionsWrapper.on('click','.action.with-content',function(){var $sender=$(this);if($sender.hasClass('active')){hideActionContent($sender);}else{var validation=validateActionAttempt($sender.data('action-name'));if(validation.isValid){showActionContent($sender);}else{var action=$sender.hasClass('tag-selected')?'tagged':'moved';handleInvalidActionAttempt(validation,action);}}
return false;});var getSelectedItemsData=function(){return $.map($('.media_list .media_item.selected'),function(item){var info=$(item).data('info');return{external_id:info.asset_id,public_id:info.public_id,type:info.type,resource_type:info.resource_type};});};var getItemsTextByCountAndType=function(count,type){type=type||current_resource_type();var text=count+' '+type;if(count>1){text+='s';}
return text;}
$multiActionsWrapper.find('#multi-tags').tagit({autocomplete:{delay:200,source:function(request,response){get_tags($('.main_image_search_form').data('fetch-tags-url'),request,response);}},allowSpaces:true});$multiActionsWrapper.on('click','#add-multi-tags',function(){if(!$multiActionsWrapper.data(VALID_SELECTION_KEY)){return;}
var $sender=$(this);var $tags=$('#multi-tags');$tags.parents('.action-content').removeClass('active');$('#tag-items').removeClass('active');var itemsData=getSelectedItemsData();var value=$tags.val();if($.trim(value)===''){return;}
var tags=value.split(',');ajax_post_with_spinner($multiActionsWrapper.find('.action-buttons'),function(result){$tags.tagit('removeAll');result=JSON.parse(result);clearMessages(true);if(result.tagged.length>0){var successText=getItemsTextByCountAndType(result.tagged.length)+' tagged';showMessage(successText,false,'success');}
if(result.not_found.length>0){var notFoundText=getItemsTextByCountAndType(result.not_found.length)+' not found';showMessage(notFoundText,false,'error');}
setTimeout(updateThumbsSelection,3000);itemsData.forEach(function(info){var $item=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");var oldTags=$item.data('info').tags;tags.forEach(function(tag){if(oldTags.indexOf(tag)==-1){oldTags.push(tag);}});$item.data('info').tags=oldTags;});},{url:$sender.data('href'),data:{items:JSON.stringify(itemsData),tags:tags},method:'POST',data_type:'html'});});function initMultiFolderSelection(){var $ul=$('#folders-list');var $input=$multiActionsWrapper.find('#multi-folder');if(!$input.length)return;var $pathWrapper=$('#current-path');var getSubfolders=function(path){$.ajax({url:$('.main_list .select_folder').attr('href'),data:{path:path},success:function(data){if(data.subfolders&&data.subfolders.length>0){$ul.empty();data.subfolders.forEach(function(item){$ul.append('<li data-path="'+item.path+'">'+item.name+'</li>');});}else{$ul.empty();}},error:function(){$ul.empty();}});$input.focus();};getSubfolders();var displayPathBreadcrumbs=function(value){var pathHtml=[];var count=1;value=value||'';var folders=value.split('/');folders.forEach(function(folder){if(count>1){pathHtml.push(' / ');}
pathHtml.push('<span class="path-level" data-path="'+folders.slice(0,count).join('/')+'">');pathHtml.push(folder.toString());pathHtml.push('</span>');count++;});$pathWrapper.find('.path').html(pathHtml.join(''));};$input.on('keyup',function(e){var value=$input.val();if(value.slice(-1)==="/"){getSubfolders(value.slice(0,-1));}else if(value===''){getSubfolders();}else{$ul.find('li').each(function(){var $li=$(this);var containsValue=$li.data('path').toString().startsWith(value);$li.toggleClass('hidden',!containsValue);if(containsValue){$li.html($li.text().replace(value,"<u>"+value+"</u>"));}});}});$ul.on('click','li',function(){var value=$(this).data('path').toString();$input.val(value);displayPathBreadcrumbs(value);getSubfolders(value);return false;});$pathWrapper.on('click','.path-level',function(){var value=$(this).data('path').toString();$input.val(value);displayPathBreadcrumbs(value);getSubfolders(value);return false;});$pathWrapper.on('click','.root',function(){displayPathBreadcrumbs();$input.val('');getSubfolders();return false;});var renderMoveResultMessages=function(result){clearMessages(true);if(result.renamed.length>0){var successText=getItemsTextByCountAndType(result.renamed.length)+' moved';showMessage(successText,false,'success');}
if(result.not_found.length>0){var notFoundText=getItemsTextByCountAndType(result.not_found.length)+' not found';showMessage(notFoundText,false,'error');}
if(result.not_locked.length>0){var notLockedText=getItemsTextByCountAndType(result.not_locked.length)+' cannot be moved';showMessage(notLockedText,false,'error');}
if(result.wrong_status.length>0){var nonExistingText=getItemsTextByCountAndType(result.wrong_status.length)+' missing';showMessage(nonExistingText,false,'error');}
if(result.already_exist.length>0){var nonExistingText=getItemsTextByCountAndType(result.already_exist.length)+' already exist';if(result.already_exist.length==1){nonExistingText+='s';}
showMessage(nonExistingText,false,'error');}};$multiActionsWrapper.on('click','#multi-move-resources',function(){if(!$multiActionsWrapper.data(VALID_SELECTION_KEY)){return;}
var $sender=$(this);var $folder=$('#multi-folder');$folder.parents('.action-content').removeClass('active');$('#move-items').removeClass('active');var itemsData=getSelectedItemsData();var path=$folder.val();if($.trim(path)===''){path='';}else if(path.slice(-1)==='/'){path=path.slice(0,-1);}
ajax_post_with_spinner($multiActionsWrapper.find('.action-buttons'),function(result){result=JSON.parse(result);renderMoveResultMessages(result);result.renamed.forEach(function(info){var $item=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.from_public_id+"']");$item.data('info').pubilc_id=info.to_public_id;$item.attr('data-public_id',info.to_public_id);reload_thumbnail($item,{public_id:info.to_public_id,type:info.type},function($thumbnail){$thumbnail.addClass('selected').find('input.multi-select').prop('checked',true);});});setTimeout(updateThumbsSelection,3000);},{url:$sender.data('href'),data:{items:JSON.stringify(itemsData),folder:path},method:'POST',data_type:'html'});});}
initMultiFolderSelection();$multiActionsWrapper.on('click','#download-items',function(){if(!$multiActionsWrapper.data(VALID_SELECTION_KEY)){return;}
var validation=validateActionAttempt($(this).data('action-name'));if(validation.isValid){var data=getSelectedItemsData();var resource_type=data[0].resource_type;var publicIds=getSelectedPublicIds();var downloadUrl=$('.main_image_upload').fileupload('option','url');downloadUrl=downloadUrl.replace(/(auto|video|raw)\/upload$/,resource_type+'/generate_archive');var getFileName=function(){var pad=function(n){return('0'+n).slice(-2);};var now=new Date(),dateString=[now.getFullYear(),pad(now.getMonth()+1),pad(now.getDate())].join('-'),timeString=[pad(now.getHours()),pad(now.getMinutes()),pad(now.getSeconds())].join(':');return['Cloudinary_Archive',dateString,timeString].join('_');};var data={api_key:$('.media_library').data('api-key'),public_ids:publicIds,mode:'download',target_public_id:getFileName(),async:false}
data=getSignedData(data);data['public_ids[]']=publicIds;delete data['public_ids'];var $form=$('<form /> ').attr({action:downloadUrl,target:'download-items-frame',method:'POST'});var $iframe=$('<iframe />').attr({name:'download-items-frame',src:''}).css('display','none');var appendToForm=function(key,value){$form.append($('<input type="hidden" />').attr('name',key).attr('value',value));};$.each(data,function(key,value){if($.isArray(value)){$.each(value,function(index,value){appendToForm(key,value);});}
else{appendToForm(key,value);}});$iframe.appendTo('body').load(function(e){var result=$iframe.contents().find('body').text();if(!result){return;}
var error=JSON.parse(result).error.message;var displayText=error;if(error.match(/^Missing public_ids: /)){var missingPublicIds=error.replace('Missing public_ids: ','').split(', ');displayText=getItemsTextByCountAndType(missingPublicIds.length)+' not found';missingPublicIds.forEach(function(public_id){var selector="li[data-public-id='"+public_id+"']";var $missingThumb=$(selector).addClass('missing');setTimeout(function(){$missingThumb.removeClass('missing');updateThumbsSelection();},4000)});}else if(error.match(/^Too many public_ids in request. /)){displayText=error.replace('Too many public_ids in request. ','Too many images selected. ')}
clearMessages(true);showMessage(displayText,false,'error');});$form.appendTo('body').submit();}else{handleInvalidActionAttempt(validation,'downloaded');}});var renderDeleteResultMessages=function(result){clearMessages(true);if(result.deleted.length>0){var successText=getItemsTextByCountAndType(result.deleted.length)+' deleted';showMessage(successText,false,'success');}
if(result.not_found.length>0){var notFoundText=getItemsTextByCountAndType(result.not_found.length)+' not found';showMessage(notFoundText,false,'error');}
if(result.not_locked.length>0){var notLockedText=getItemsTextByCountAndType(result.not_locked.length)+' cannot be deleted';showMessage(notLockedText,false,'error');}};$multiActionsWrapper.on('click','#delete-items',function(){if(!$multiActionsWrapper.data(VALID_SELECTION_KEY)){return;}
var $sender=$(this);var validation=validateActionAttempt($sender.data('action-name'));if(validation.isValid){var num=getSelectedPublicIds().length;var message='Are you sure you want to delete the ';if(num==0){return;}else if(num==1){message+='selected '+current_resource_type().toLowerCase()+'?';}else{message+=(num+' selected '+current_resource_type().toLowerCase()+'s?');}
confirm_deletion(message,function(sender){var data=getSelectedItemsData();ajax_post_with_spinner($multiActionsWrapper.find('.action-buttons'),function(result){$(sender).dialog('close');result=JSON.parse(result);renderDeleteResultMessages(result);var wasItemDeleted=function(itemInfo){var deleted=false;result.deleted.forEach(function(item){if(itemInfo.public_id===item.public_id){deleted=true;}});return deleted;};var statusFilter=$('#status').val();data.forEach(function(info){var $item=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");var selectionUpdated=false;if(wasItemDeleted(info)){if($item.data('info').backup&&(statusFilter!='active,pending')){if(!$item.data('info').placeholder){reload_thumbnail($item);}}else{$item.animate({width:0},function(){if(!$item.siblings().length){$item.closest('.media_browse').removeClass('progress_active');}
$item.remove();setTimeout(updateThumbsSelection,2000);selectionUpdated=true;});}}
if(!selectionUpdated){setTimeout(updateThumbsSelection,3000);}});},{url:$sender.data('href'),data:{items:JSON.stringify(data)},method:'DELETE',data_type:'html'});},false);}else{handleInvalidActionAttempt(validation,'deleted');}});return{updateThumbsSelection:updateThumbsSelection};}();function close_image_dialog(){$('.media_library .image_dialog').remove();$('.media_library, .media_filter, .resource_filter').removeClass('with_dialog');if(transformation_widget){transformation_widget.off('transform_change');transformation_widget.root().remove();}
multipleActionsController.updateThumbsSelection();}
function updateTop(){if(window.cldNewConsole){window.parent.postMessage({consoleFrame:true,href:window.location.href},window.location.protocol+'//'+window.location.host);}}
$('.image_dialog .back_link').live('click',function(){$(document).trigger('change-display-context');$.address.value("");updateTop();return false;});function is_blank(value){return value===null||value===''||value.match(/^\s+$/);}
function sign_url(image_url,resource_type){var auto_sign=$('.media_library').attr('data-auto-sign-urls');var secret=$('.media_library').attr('data-api-secret');if(auto_sign&&secret){secret=CryptoJS.enc.Latin1.stringify(CryptoJS.enc.Base64.parse(secret));var splitter="/"+resource_type+"/";var parts=image_url.split(splitter);var rest=parts.slice(1).join(splitter).split("/");var left=parts[0]+splitter+rest[0];var right=rest.slice(1).join("/");var to_sign=right;var i=0;try{while(to_sign!=decodeURIComponent(to_sign)&&i<10){to_sign=decodeURIComponent(to_sign);i++;}}catch(e){}
var signature='/s--'+CryptoJS.enc.Base64.stringify(CryptoJS.SHA1(to_sign+secret)).replace(/\//g,'_').replace(/\+/g,'-').substring(0,8)+'--/';image_url=left+signature+right;}
return image_url;}
function extract_env(delivery_domain){if(delivery_domain){var match_env=delivery_domain.match(/res[-]([^.]+).cloudinary.com/);if(match_env){return match_env[1];}}
return null;}
function extract_env_from_host(){var window_host=window.location.host;if(window_host){var match_env=window_host.match(/([^.]+).cloudinary.com/);if(match_env){return match_env[1];}}
return null;}
function image_trans_url(options){options||(options={});var main_params={secure:options['secure'],cloud_name:$('.media_library').attr('data-cloud-name'),private_cdn:$('.media_library').attr('data-private-cdn'),cname:$('.media_library').attr('data-cname'),secure_distribution:$('.media_library').attr('data-secure-distribution'),trust_public_id:true};var params=transformation_widget.params();if(params.info.resource_type=='raw'){return'/images/blank.gif';}
if(options['overrides']){for(k in options['overrides']){params[k]=options['overrides'][k];}}
main_params.transformation=params.list;if(params.info.type!='fetch'){main_params.format=params.selected_format;}else{main_params.fetch_format=params.force_format;}
main_params.version=params.info.version;main_params.type=params.info.type;main_params.resource_type=params.info.resource_type;main_params.access_mode=params.info.access_mode;var transformation_string=cloudinary.Transformation.new(main_params.transformation).serialize();var use_thumbnails_for_video=($('.media_library').attr('data-use-thumbnails-for-video')==="true")
if(options['thumbnail']&&main_params.resource_type!="raw"&&(main_params.resource_type=="image"||(use_thumbnails_for_video&&transformation_string===""))){var base64_public_id=CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(params.info.public_id)).replace(/\+/g,'-').replace(/\//g,'_');var base64_transformation=CryptoJS.enc.Base64.stringify(CryptoJS.enc.Utf8.parse(transformation_string)).replace(/\+/g,'-').replace(/\//g,'_');var thumbnails_resource_type='thumbnails/transform/v1/'+main_params.resource_type;var env=extract_env_from_host();var delivery_host=$('.media_library').attr('data-console-delivery-host');delivery_host=delivery_host||(env?'res-console-'+env+'.cloudinary.com':'res-console.cloudinary.com');var image_url=['https://',delivery_host,main_params.cloud_name,thumbnails_resource_type,main_params.type,base64_transformation,'v'+(main_params.version||1),base64_public_id].join('/');if(use_thumbnails_for_video&&main_params.resource_type=="video"){return image_url+'/play_video'}
if(transformation_string){return image_url+'/template_primary';}else{return image_url+'/drilldown';}}else{var image_url=$.cloudinary.url(params.info.public_id,main_params);if(needs_signing(main_params)){image_url=sign_url(image_url,params.info.resource_type);}
return image_url;}}
function needs_signing(params){if(params.type=='authenticated'||params.access_mode==='authenticated'){return true;}
if(params.transformation){if(!empty_transformation(params.transformation)&&$('.media_library').data('strict-transformations')===true){return true;}
return transformation_uses_addons(params.transformation);}
return false;}
function uses_imagga_crop_mode(t){return(t.crop=="imagga_crop"||t.crop=="imagga_scale");}
function uses_jpegmini_quality(t){return(t.quality||"").indexOf("jpegmini")===0;}
function uses_rekognition_gravity(t){return(t.gravity=="rek_eyes"||t.gravity=="rek_face"||t.gravity=="rek_faces"||t.gravity=="custom:rek_face"||t.gravity=="custom:rek_faces");}
function uses_rekognition_redeye(t){return(t.effect=="rek_redeye");}
function uses_rekognition_face(t){return(uses_rekognition_gravity(t)||uses_rekognition_redeye(t))}
function uses_advanced_detection_gravity(t){return(t.gravity=="adv_eyes"||t.gravity=="adv_face"||t.gravity=="adv_faces"||t.gravity=="custom:adv_face"||t.gravity=="custom:adv_faces");}
function uses_advanced_redeye(t){return(t.effect=="adv_redeye");}
function uses_advanced_face_detection(t){return(uses_advanced_detection_gravity(t)||uses_advanced_redeye(t))}
function uses_viesus_correct(t){var effect=t.effect;if(effect instanceof Array){effect=effect[0];}
return effect==="viesus_correct";}
function uses_style_transfer(t){var effect=t.effect;if(effect instanceof Array){effect=effect[0];}
return effect==="style_transfer";}
function uses_lightroom(t){var effect=t.effect;if(effect instanceof Array){effect=effect[0];}
return effect==="lightroom";}
function uses_advanced_gravity(t){var specials=["auto:adv_face","auto:adv_faces","auto:adv_eyes"];return specials.indexOf(t.gravity)>-1;}
function uses_adv_ocr(t){var specials=["ocr_text","ocr_text:document"];return specials.indexOf(t.gravity)>-1;}
function uses_addons(t){return uses_imagga_crop_mode(t)||uses_jpegmini_quality(t)||uses_advanced_gravity(t)||uses_rekognition_face(t)||uses_viesus_correct(t)||uses_advanced_face_detection(t)||uses_adv_ocr(t)||uses_style_transfer(t)||uses_lightroom(t);}
function transformation_uses(list,f){if(list){for(var i=0;i<=list.length;i++){var t=list[i];if(!t)continue;if(f.call(this,t)){return true;}}}
return false;}
function transformation_uses_addons(list){return transformation_uses(list,uses_addons);}
function empty_transformation(transformation){if(transformation.length===0)return true;if(transformation.length>1)return false;for(var key in transformation[0]){if(key!='authenticity_token'&&key!='utf8'){if(transformation[0][key])return false;}}
return true;}
function update_preview_panel(unmodified){var $dialog=$('.media_library .image_dialog');var secure_image_url=image_trans_url({secure:true});var $preview_panel=$dialog.find('.preview_panel');$preview_panel.find('.trans_url').attr('href',secure_image_url).text(secure_image_url);$preview_panel.find('.view_trans_image').attr('href',secure_image_url);var $preview_holder=$preview_panel.find('.preview_holder');var params=transformation_widget.params();if(!unmodified){$('.media_library .strict_transformation_creation_button').css("display","block").text("Generate transformation");$('.media_library .text_authenticated_transformation_creation').css("display","none")
$preview_holder.addClass('modified').parent().toggleClass('uses_imagga',transformation_uses(params.list,uses_imagga_crop_mode)).toggleClass('uses_jpegmini',transformation_uses(params.list,uses_jpegmini_quality)).toggleClass('uses_rekognition',transformation_uses(params.list,uses_rekognition_face)).toggleClass('uses_adv_face',transformation_uses(params.list,uses_advanced_face_detection)).toggleClass('uses_viesus_correct',transformation_uses(params.list,uses_viesus_correct));var anyWarningsShown=$(".addon_prompt:visible").length>0;$preview_holder.parent().toggleClass('uses_addons',!anyWarningsShown&&transformation_uses_addons(params.list));disableInfo();disable_code_preview();cmsReportTransformationToParent(params);}
update_refresh_button_position();update_preview_url(secure_image_url,$dialog.data('info'));}
function update_preview_url(image_url,info){if(window.location.pathname.match(/\/console(\/lui)?\/transformations/)){update_transformation_preview_url(image_url,info);}else{update_media_library_preview_url(image_url,info);}
update_dialog_width();}
function update_transformation_preview_url(image_url,info){if(image_url.indexOf('http')!==0){image_url=window.location.protocol+'//'+window.location.host+image_url;}
var kind="image/upload/";var prefix=image_url.substring(0,image_url.indexOf(kind));var public_id='sample';public_id=image_url.substring(image_url.lastIndexOf("/"+public_id)+1);var trans=image_url.substring(prefix.length+kind.length);trans=trans.substring(0,trans.length-public_id.length);$(".media_library .secure_url a").data("dirty",true);$(".media_library .secure_url a").prop("href",image_url);var $container=$(".media_library .secure_url a");find_or_create_url_part($container,'prefix').text(prefix);find_or_create_url_part($container,'kind').text(kind);trans=extract_signature_from_transformation(trans,$container);find_or_create_url_part($container,'trans').text(trans);find_or_create_url_part($container,'public_id').text(public_id);}
function update_media_library_preview_url(image_url,info){if(!window.location.hash){return;}
if(image_url.indexOf('http')!==0){image_url=window.location.protocol+'//'+window.location.host+image_url;}
var prefix=image_url.substring(0,image_url.indexOf("/"+info.resource_type+"/")+1);var kind=info.resource_type+"/"+info.type+"/";var public_id=info.public_id;try{public_id=decodeURIComponent(public_id);}catch(e){}
public_id=encodeURIComponent(public_id).replace(/%3A/g,":").replace(/%2F/g,"/");public_id=image_url.substring(image_url.lastIndexOf("/"+public_id)+1);if(info.version){public_id="v"+info.version+"/"+public_id;}
var trans=image_url.substring(prefix.length+kind.length);trans=trans.substring(0,trans.length-public_id.length);$(".media_library .secure_url a").data("dirty",true);$(".media_library .secure_url a").prop("href",image_url);var $container=$(".media_library .secure_url a");find_or_create_url_part($container,'prefix').text(prefix);find_or_create_url_part($container,'kind').text(kind);trans=extract_signature_from_transformation(trans,$container);find_or_create_url_part($container,'trans').text(trans);find_or_create_url_part($container,'public_id').text(public_id);update_dialog_width();}
function extract_signature_from_transformation(trans,$container){var transform_signature=trans.match(/^s--[a-zA-Z0-9_\-]{8}--\//);var reducedTrans=trans;var $signature=find_or_create_url_part($container,'signature').text('');if(transform_signature){var signature=transform_signature[0];reducedTrans=trans.substring(signature.length);$signature.text(signature);}
return reducedTrans;}
function find_or_create_url_part($container,className){var $element=$container.find("."+className);if(!$element.length){$element=$('<span class="'+className+'"></span>');$element.appendTo($container);}
return $element;}
function disableLightroomFilterValueEditing(lightroomFilterSelectValueElementId){$(lightroomFilterSelectValueElementId).keypress(function(event){event.preventDefault();});$(lightroomFilterSelectValueElementId).keydown(function(event){event.preventDefault();});}
$(document).on('click','.add_effect_param',function(e){var element=e.target.parentElement;var index=$(element).find('.lightroom-filter-selects').children('.lightroom-filter-select').length;var newSelect=$(element).find('.lightroom-filter-select')[0].outerHTML.replace(/[[_]0[\]_]/g,function(match){return match.replace('0',index)});$(element).find('.lightroom-filter-selects').append(newSelect);$('#uniform-lightroom-filter-select_'+index+'_key span').html($('#uniform-lightroom-filter-select_'+index+'_key select').val());var lightroomFilterSelectValue='<input class="lightroom-filter-select" id=lightroom-filter-select_'+index+'_value'+' name=lightroom-filter-select['+index+'][value]'+' type="number" min="-100" max="100" step="1" value="0">';var lightroomFilterSelectValueElementId='#lightroom-filter-select_'+index+'_value';$(lightroomFilterSelectValueElementId).replaceWith(lightroomFilterSelectValue);disableLightroomFilterValueEditing(lightroomFilterSelectValueElementId);$('#uniform-lightroom-filter-select_'+index+'_key select').on('change',function(e){$('#uniform-lightroom-filter-select_'+index+'_key span').html(e.target.value);});$('#uniform-lightroom-filter-select_'+index+'_key select').trigger('change');return false;});$('.image_dialog .add_trans').live('click',function(){transformation_widget.addTransformation();return false;});$('.image_dialog .add_overlay').live('click',function(){transformation_widget.addOverlay();return false;});$('.image_dialog .reset_trans_form').live('click',function(){$(this).closest('.image_dialog').find('.trans_save_status').toggleClass('success',false).toggleClass('error',false).html('');transformation_widget.clear();$('.media_library .strict_transformation_creation_button').css("display","none");refresh_preview();enbableInfo();$(this).siblings('.save_trans, .save_trans_as').removeClass('disabled');return false;});$('.image_dialog .transformation_mode_toggle a').live('click',function(){var $this=$(this);var isVideo=$this.hasClass('video_mode_toggle');var isAudio=$this.hasClass('audio_mode_toggle');var $dialog=$this.closest('.image_dialog');$dialog.find('.transformation_mode_toggle a').removeClass('active');$this.addClass('active');$dialog.toggleClass('video',isVideo);$dialog.toggleClass('audio',isAudio);$dialog.find('.trans_form_holder').toggleClass('image_mode',!isVideo&&!isAudio).toggleClass('video_mode',isVideo).toggleClass('audio_mode',isAudio);refresh_preview();return false;});function disableInfo(){infoWidget.hide();$('.media_library .image_dialog .preview_panel .preview_holder .view_image_info_control').addClass("disabled");}
function enbableInfo(){$('.media_library .image_dialog .preview_panel .preview_holder .view_image_info_control').removeClass("disabled");}
function activateInfo(){$('.media_library .image_dialog .preview_panel .preview_holder .view_image_info_control').addClass("active");}
function update_preview_size_warning(){var image=$('.media_library .image_dialog .preview_holder .preview_image.active');var warn=false;if($(image).size()>0){var size=get_media_size(image);warn=($(image).width()<size.width)||($(image).height()<size.height);infoWidget.image(image);}
$('.media_library .image_dialog .preview_panel').toggleClass('with_size_warning',warn);}
function media_type(format){switch(format){case'webm':return'video/webm';break;case'ogv':return'video/ogv';break;case'm4a':return'audio/mp4';break;case'mp3':return'audio/mp3';break;case'ogg':return'audio/ogg';break;case'wav':return'audio/wav';break;default:return'video/mp4';break;}}
var setSpinner=function($element,key,options){$element.spinner(options);var anchors=$('.media_library').data('spinners')||{};anchors[key]=$element;$('.media_library').data('spinners',anchors);};var removeSpinner=function(key){var anchors=$('.media_library').data('spinners')||{};if(key&&anchors[key]){anchors[key].spinner('remove');delete(anchors[key]);}else{$.each(anchors,function(key,$element){$element.spinner('remove');delete(anchors[key]);});}
$('.media_library').data('spinners',anchors);};$(document).on('change-display-context',removeSpinner);function refresh_preview(callback,dont_refresh_code){var $dialog=$('.media_library .image_dialog');var info=$dialog.data('info');if(info.type=='sprite'||info.type=='multi'||$.parseJSON(info.placeholder)===true||info.moderation_status=='rejected'){return;}
var $button=$dialog.find('.preview_panel .refresh_preview');if(!dont_refresh_code){show_image_integration_code('secure_url',info);}
if($button.length==0){return;}
setSpinner($button,'preview',{position:'center'});var image_url=image_trans_url({thumbnail:true});var format=info.format;if(transformation_widget.params().selected_format){format=transformation_widget.params().selected_format;}
var is_video=info.resource_type=='video'&&(format==info.format||['mp4','webm','ogv'].indexOf(format)!==-1);var is_audio=info.is_audio||(['mp3','ogg','wav'].indexOf(format)!==-1)
is_video=is_video&&!is_audio;var image_container=$('<div/>').css("text-align","center");var media;if(is_video){var poster=image_trans_url({overrides:{selected_format:'jpg'}});media=$('<video/>').prop('poster',poster).prop('controls',true).prop('type',media_type(format)).addClass('preview_image');}else if(is_audio){media=$('<audio/>').prop('controls',true).addClass('preview_image');}else{media=$('<img/>').addClass('preview_image');}
image_container.append(media);var $holder=$button.parents('.preview_panel').find('.preview_holder');var jwtTokenRefreshTries=5;$holder.parents('.preview_panel').removeClass('with_error');media.on('load canplay',function(){removeSpinner('preview');$holder.parents('.preview_panel').removeClass('empty');$holder.find('.preview_image').removeClass('active');if(!is_audio){$(this).css('width','auto').css('height','auto');}
$(this).addClass('active');var activeTimestamp=$(this).data('timestamp');$holder.find('.preview_image:not(.active)').each(function(){var inactivePreview=$(this);if(inactivePreview.data('timestamp')<activeTimestamp){inactivePreview.remove();}})
$holder.removeClass('progress');if(!is_audio){$holder.css('max-width',media.width());update_dialog_width();}else{$(this).css('max-height','200px')}
activateInfo();if(callback){setTimeout(callback,1);}
return true;}).on('error',function(){$.ajax({url:image_url,complete:function(jqXHR){var reason=jqXHR.getResponseHeader('X-Cld-Error')||"Invalid Transformation";if([401,409,0].includes(jqXHR.status)&&jwtTokenRefreshTries>1){window.parent.postMessage({type:'refreshJwtToken'},window.location.protocol+'//'+window.location.host);setTimeout(function(){media.prop('src',image_url+'?'+Math.random());},500);jwtTokenRefreshTries--;return;}else if(jwtTokenRefreshTries==1){image_url=image_trans_url({});media.prop('src',image_url);jwtTokenRefreshTries--;return;}
$holder.find('.error').text(reason);removeSpinner('preview');$holder.removeClass('progress');$holder.parents('.preview_panel').addClass('empty with_error');$holder.find(".preview_image").remove();update_dialog_width();}});});media.prop('src',image_url);media.data('timestamp',new Date().getTime())
$holder.append(image_container);$holder.removeClass('modified').addClass('progress');}
$('.preview_panel .refresh_preview').live('click',function(){refresh_preview(null,true);sendTransformAnalyticsEvent(ANALYTICS_ACTIONS.CLICK,'refresh preview');return false;});$('.media_library .strict_transformation_creation_button').live('click',function(){var button=$(this);var dialog=$(button).parents('.image_dialog');var info=$(dialog).data('info');var transformation_params=transformation_widget.params();var transformation=cloudinary.Transformation.new(transformation_params.list).serialize();var format=transformation_params.selected_format;var transformation_string=transformation+'/'+format;ajax_post_with_spinner($(button),function(result){if(info.type=='authenticated'&&result["derived_url"])
{update_preview_url(result["derived_url"],dialog.data('info'));text_info=dialog.find('.text_authenticated_transformation_creation')
text_info.css("display","block").text("This is an authenticated asset. Use discretion when sharing this pre-signed delivery URL, which enables anyone with the link to view and download this transformed asset.")}
button.text("Derived Created!")},{method:'POST',url:'/console/media_library/generate_derived',data:{public_id:info.public_id,raw_transformation:transformation_string,resource_type:info.resource_type,type:info.type}});return false;});$('.image_dialog .view_derivatives').live('click',function(){var button=$(this);var dialog=$(button).parents('.image_dialog');var info=$(dialog).data('info');$(dialog).find('.derivatives_panel').html('');$(dialog).addClass('with_derivatives');$(dialog).parents('.media_library').addClass('with_derivatives');ajax_post_with_spinner($(button),function(result){$(dialog).find('.derivatives_panel').html(result);},{url:$(button).attr('href'),data:{public_id:info.public_id,type:info.type,resource_type:info.resource_type},method:'GET',data_type:'html'});return false;});$('.image_dialog .close_derived').live('click',function(){$(this).parents('.image_dialog').removeClass('with_derivatives');$(this).parents('.media_library').removeClass('with_derivatives');$(this).parents('.derivatives_panel').html('');return false;});var useConsoleBackNavigation=false;$('.image_dialog .back_to_transformations').live('click',function(event){suppressEvent(event);if(useConsoleBackNavigation){useConsoleBackNavigation=false;window.parent.postMessage({navigate:'transformations'},window.location.protocol+'//'+window.location.host);}else{$(this).parents('.image_dialog').addClass('with_derivatives');$(this).parents('.media_library').addClass('with_derivatives');$(this).parents('.trans_panel').find('.save_trans, .save_trans_as').removeClass('disabled');}});function fill_trans_panel(trans){setup_sticky_preview_panel();transformation_widget.load(trans);update_preview_panel();refresh_preview();}
function openTransformation(transformationName,transformation,data){var $dialog=$('.console_content .media_library .image_dialog');$dialog.removeClass('with_derivatives').parents('.media_library').removeClass('with_derivatives');fill_trans_panel(transformation);$dialog.find('.trans_name').text(transformationName).data(data);$dialog.find('.trans_save_status').removeClass('success error');}
$('.derived_resources .transformation .select_derived').live('click',function(){var $sender=$(this);var $parentTrans=$sender.parents('.transformation');var trans=$parentTrans.clone().data('transformation');var trans_name=$parentTrans.data('transformationName');var $dialog=$sender.closest('.image_dialog');$dialog.removeClass('with_derivatives').parents('.media_library').removeClass('with_derivatives');fill_trans_panel(trans);data=$parentTrans.data();$dialog.find('.trans_name').text(trans_name).data(data);$dialog.find('.trans_save_status').removeClass('success error');return false;});$('.media_library .image_dialog .delete').live('click',function(event){var $delete_elem=$(this);var info=$delete_elem.parents('.image_dialog').data('info');confirm_deletion('Are you sure you want to delete this image?',function(confirm_button){ajax_post_with_spinner($(confirm_button),function(result){$(confirm_button).dialog('close');$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']").remove();var assetIdMatch=window.location.hash.match(/#\/dialog\/(.+)$/);window.parent.postMessage({type:'assetDelete',payload:assetIdMatch?assetIdMatch[1]:null},window.location.protocol+'//'+window.location.host);},{method:'DELETE',url:$delete_elem.attr('href'),data:{public_id:info.public_id,type:info.type,resource_type:info.resource_type}});},true);return false;});$('.media_library .image_dialog .view_backup, .media_library .image_dialog .multiple_backup_icon').live('click',function(event){var info=$(this).parents('.image_dialog').data('info');var link_elem=$(this);ajax_post_with_spinner($(link_elem),function(result){$('.shadow').show();$('.popups').html(result);$('.popups .popup').css('top',($(document).scrollTop()+200)+'px');$('.popups .restore_resource').click(function(event){event.preventDefault();ajax_post_with_spinner($(this),function(success){document.location.reload();},{keep_spinner:true});return false;});},{method:'GET',data:{public_id:info.public_id,type:info.type,resource_type:info.resource_type},data_type:'html'});return false;});$(window).resize(function(){update_dialog_width();return true;});if($('.initial_dialog_image').size()>0){show_image_dialog($('.initial_dialog_image').data('info'));}
$('.create_new_trans').live('click',function(){transformation_widget.clear();$('.media_library .image_dialog').removeClass('with_derivatives');$('.media_library').removeClass('with_derivatives');$('.media_library .image_dialog .preview_holder .preview_image').remove();$('.media_library .image_dialog .preview_holder').removeClass('modified');$('.media_library .strict_transformation_creation_button').css("display","none")
$('.media_library .image_dialog .preview_panel').addClass('empty');$('.media_library .image_dialog .trans_name').html("").removeData();$('.media_library .image_dialog .trans_save_status').toggleClass('success',false).toggleClass('error',false);return false;});$('.image_dialog .save_trans, .image_dialog .save_trans_as').live('click',function(){var $sender=$(this);if($sender.hasClass('disabled')){return false;}
var $image_dialog=$sender.parents('.image_dialog');var save_as_mode=$sender.hasClass('save_trans_as');var dialog=$sender.closest(".image_dialog");var $trans_name_element=dialog.find('.trans_name');var trans_id=$trans_name_element.data("transformation-id");var trans_name=($trans_name_element.data("transformation-kind")==="explicit")&&$trans_name_element.data("transformation-name");var deletable=$trans_name_element.data("deletable");var new_transformation=!trans_name;create_mode=save_as_mode||new_transformation;dialog.find('.trans_save_status').removeClass('success error');$("#dialog-save-trans .warning.derived_deleted").toggleClass("active",!create_mode&&deletable);$("#dialog-save-trans .warning.unsafe").toggleClass("active",!create_mode&&!deletable);$("#dialog-save-trans").toggleClass("create_mode",create_mode);if(!create_mode){$("#dialog-save-trans").find('.trans_name').val(trans_name);}else{$("#dialog-save-trans").find('.trans_name').val("");}
$("#dialog-save-trans .error").html("");function submit(button,name,afterSuccess,afterError){var params=transformation_widget.params();var transformation=$.cloudinary.transformation_string({transformation:params.list});if(name&&params.force_format){if(transformation!==''){transformation+='/'}
transformation+='f_'+params.force_format;}else if(!name){if(params.force_format){transformation+="/"+params.force_format;}else if(params.empty_extension){transformation+="/";}}
var post_data={transformation:transformation,create_mode:create_mode};if(name)post_data.name=name;ajax_post_with_spinner($(button),function(result){if(result.success){var new_data=$(result.transformation).data();if(create_mode){$image_dialog.find('.derived_resources>ul').prepend($('<li/>').addClass('derived_resource').html(result.transformation));}else{$image_dialog.find('.derived_resources .transformation').filter(function(){return $(this).data("transformation-id")==trans_id;}).replaceWith(result.transformation);}
$trans_name_element.data(new_data);$image_dialog.find('.trans_name').text(new_data.transformationName);afterSuccess(result);}else{afterError(result.error);}},{data:post_data,method:'POST',url:$("#dialog-save-trans").data('save-url')});}
if(!save_as_mode&&new_transformation){submit($sender,null,function(result){$sender.parent().find(".trans_save_status").text("Success!").addClass("success");},function(error){$sender.parent().find(".trans_save_status").text(error).addClass("error");});return false;}
$("#dialog-save-trans").dialog({height:240,width:350,modal:true,buttons:{"Save":function(e){var $dialog=$(this);var $button=$(e.target);var name=$dialog.dialog("widget").find('.trans_name').val();if(!is_blank(name)||new_transformation){submit($button,name,function(result){$dialog.dialog("close");},function(error){$dialog.dialog("widget").find('.error').text(error);});}},"Cancel":function(){$(this).dialog("close");}},});return false;});$(window).bind("message",function(e){data=e.originalEvent.data
if(data.type==="nml-status"){if(!data.data.status){$('span.toggle_preset').attr('title','Try the new Media Library')
$('span.toggle_preset .add_preset, span.toggle_preset .remove_preset').addClass('disabled')}}else if(data.type==="cms-edit-asset"){var url=data.data.url
if(url){cms_edit_image_from_url(url)}}else if(data.type==="open-transformation"){openTransformation(data.data.transformationName,data.data.transformation,data.data.data);}else if(data.type==='open-cookbook-template'){var qs=location.search.slice(1);var query=qs.split('&').reduce(function(bucket,drop){var a=drop.split('=');bucket[a[0]]=decodeURIComponent(a[1]);return bucket;},{});if(query.resourceId){loadCookbookTemplateToTransformationEditor(query);}}else if(data.type==='create-new-transformation'){$('.create_new_trans').click();}else if(data.type==='use-console-back-navigation'){useConsoleBackNavigation=true;}});$('.transformation .toggle_preset .add_preset, .transformation .toggle_preset .remove_preset').live('click',function(event){var elem=$(this);var method=$(elem).hasClass("add_preset")?"post":"delete"
var transformation=$(elem).parents('.transformation');ajax_post_with_spinner($(elem),function(result){if(window.cldNewConsole){window.parent.postMessage({type:'presetChanged',payload:{name:$(transformation).data("transformation-name"),transformation:$(transformation).data("transformation-meaning"),action:method==='post'?'add':'remove'}},window.location.protocol+'//'+window.location.host);}
$($(elem).siblings()).removeClass('hidden')
$(elem).addClass('hidden')
if(result.count>=30){$('.transformation .toggle_preset .add_preset').addClass('disabled')}else{$('.transformation .toggle_preset .add_preset').removeClass('disabled')}},{method:method});return false;});$('.transformation .delete_trans, .transformation .delete_derived').live('click',function(event){var delete_elem=$(this);confirm_deletion('Are you sure you want to delete this transformation?',function(){var transformation=$(delete_elem).parents('.transformation');ajax_post_with_spinner($(delete_elem),function(result){$(transformation).hide('slow');},{method:'DELETE'});});return false;});function confirm_deletion(message,callback,keep_open){$("#dialog-confirm .confirm_content").html(message);$("#dialog-confirm").dialog({resizable:false,width:350,height:160,modal:true,buttons:{"Delete":function(){if(keep_open){callback($(this));}else{$(this).dialog("close");callback();}},"Cancel":function(){$(this).dialog("close");}}});}
function process_new_transformation_list(result){var content=$('<div/>').html(result);var current_list=$('.media_library .derived_resources ul.items');var new_ul=$(content).find('ul.items');$(current_list).attr('data-last-id',$(new_ul).attr('data-last-id'));$(current_list).attr('data-has-more',$(new_ul).attr('data-has-more'));$(current_list).append($(new_ul).children());$('.more_transformations_holder').toggleClass('active',$(current_list).attr('data-has-more')=='1');}
function load_more_transformations(more_elem){ajax_post_with_spinner($(more_elem),function(result){process_new_transformation_list(result);},{data:{last_id:$('.media_library .derived_resources ul.items').attr('data-last-id')},method:'GET',data_type:'html'});}
$('.more_transformations').live('click',function(){load_more_transformations($(this));return false;});function cms_edit_image(html){var div=$('<div/>').append(html);var img=$(div).find('img');var url=$(img).attr('src');var image_attributes={};$.each($(img)[0].attributes,function(index,attr){image_attributes[attr.name]=attr.value;});image_attributes.protocol=url.match(/^(https?)/i)[1].toLowerCase();close_image_dialog();ajax_post_with_spinner($('.media_library .image_search_form .submit'),function(result){show_image_dialog(result.info,{cms_image_attributes:image_attributes});$('.media_library .image_dialog .insert_form input[type=text]').each(function(){var value=$(img).attr($(this).data('name'));if(value){$(this).val(value);}});setTimeout(function(){fill_trans_panel(result.transformation);},1);},{method:'GET',url:'/console/media_library/show_derived',data:{url:url}});}
function cms_edit_image_from_url(url){ajax_post_with_spinner($('.media_library .image_search_form .submit'),function(result){close_image_dialog();show_image_dialog(result.info,{});setTimeout(function(){fill_trans_panel(result.transformation);},1);},{method:'GET',url:'/console/media_library/show_derived',data:{url:url}});}
function cmsReportTransformationToParent(transformation_params){window.parent.postMessage({transformation:transformation_params,drilldownUpdateTransformation:true},"*");}
var reject_item=function(from,to){return function(event){suppressEvent(event);var link=this;ajax_post_with_spinner(link,function(){var $media_item=$(link).parents(".media_item");reload_thumbnail($media_item);},{spinner:{hide:false,img:'/images/spinner_moderation.gif ',width:16,height:16}});};};var approve_item=reject_item;$('.media_item .moderation_actions .approve').live('click',approve_item("rejected","approved"));$('.media_item .moderation_actions .reject').live('click',reject_item("approved","rejected"));function media_filter(){var $mediaLibrary=$('.media_library'),$mediaFilter=$('.media_filter');var resetMediaSearch=function(type,$sender){$mediaFilter.removeClass('opened');var $li=$sender.parent();$li.addClass('active').siblings().removeClass('active');var resourceType=type=='File'?'raw':type.toLowerCase();var $form=$('.main_image_search_form');$form.find('.resource_type').val(resourceType);$form.find('.filter-type').val($li.find('.filter-type').val());$form.find('.filter-status').val($li.find('.filter-status').val());$form.find('.submit').click();$('.media_list .items').empty();$('.media_browse .more_images_holder').removeClass('active');$('.resource_type_name').text(type.toLowerCase());$form.find('#query').attr('placeholder',type+' ID or tag');multipleActionsController.updateThumbsSelection();};$('.select_images_mode, .select_videos_mode',$mediaFilter).click(function(){var isImages=$(this).hasClass('select_images_mode');var modeClass=isImages?'mode_images':'mode_videos';$mediaLibrary.removeClass('mode_moderation mode_images mode_videos').addClass(modeClass);$mediaFilter.removeClass('mode_moderation mode_images mode_videos').addClass(modeClass);var type=isImages?'Image':'Video';resetMediaSearch(type,$(this));return false;});$('.select_raw_mode',$mediaFilter).click(function(){$mediaLibrary.removeClass('mode_moderation').addClass('mode_images');$mediaFilter.removeClass('mode_moderation').addClass('mode_images');resetMediaSearch('File',$(this));return false;});$('.filters-container .filter-type',$mediaFilter).chosen({disable_search:false,max_selected_options:1,width:'128px'});$('.filters-container .filter-status',$mediaFilter).chosen({disable_search:true,max_selected_options:1,width:'128px'});$('.filters-container select',$mediaFilter).change(function(){var $sender=$(this);var resourceType=current_resource_type();$sender.siblings('select').find('option:eq(0)').prop('selected',true).siblings().prop('selected',false);$sender.siblings('select').trigger('chosen:updated');resetMediaSearch(resourceType,$sender)});$('.select_moderation_mode',$mediaFilter).click(function(){$mediaFilter.addClass('opened');$(this).parent().addClass('active').siblings().removeClass('active');$mediaLibrary.removeClass('mode_images mode_videos').addClass('mode_moderation');$mediaFilter.removeClass('mode_images mode_videos').addClass('mode_moderation');$('.moderation_filter_form .submit').click();$('.media_list .items').empty();multipleActionsController.updateThumbsSelection();$('.media_browse .more_images_holder').removeClass('active');$('.resource_type_name').text("images/video");$('.main_image_search_form #query').attr('placeholder',"Image/Video ID or tag");return false;});$('.select_moderation_status, .select_moderation_kind',$mediaFilter).click(function(){var $sender=$(this);if($sender.hasClass('prompt')){return true;}
$sender.parents('ul:eq(0)').find('li').removeClass('active');$sender.parents('li').addClass('active');if($sender.hasClass("select_moderation_kind")){var noPending=($sender.data("value")===5),statuses=$(".moderation_statuses"),pendingOption=statuses.find("li:eq(0)");pendingOption.toggleClass("hidden",noPending);$(".moderations-links-container").toggleClass("no-pending",noPending);if(pendingOption.hasClass("active")){if(noPending){pendingOption.removeClass("active");var nextStatus=statuses.find("li:eq(1)"),nextStatusButton=nextStatus.find("a");$('.moderation_filter_form .moderation_'+nextStatusButton.data('field')).val(nextStatusButton.data('value'));nextStatus.addClass("active");}}}
$('.moderation_filter_form .moderation_'+$sender.data('field')).val($sender.data('value'));$('.moderation_filter_form .submit').click();$('.media_list .items').empty();$('.folder_panel .list_title').empty();$('.media_browse .more_images_holder').removeClass('active');multipleActionsController.updateThumbsSelection();return false;});$("input[name=moderation_mode]").change(function(){$(".moderation_panel").toggle(this.checked);$(".moderation_panel").toggleClass('active',this.checked);$(".search_panel").toggle(!this.checked);$(".folder_panel").toggle(!this.checked);});var $form=$('.main_image_search_form')
$('#query',$form).autocomplete({source:function(request,response){get_tags($form.data('fetch-tags-url'),request,response)},create:function(){$(this).data('uiAutocomplete')._renderItem=function($ul,item){return $('<li />').addClass('ui-menu-item').attr('role','presentation').attr('value',item.value).append($('<a class="ui-corner-all" tabindex="-1" onclick="return false;"/>').text(item.label+" ").append('<i>(tag)</i>')).appendTo($ul);};},select:function(e,item){$('#query',$form).val(item.item.value);$form.find('.submit').click();},delay:200});}
media_filter();$('#tags').tagit({autocomplete:{delay:200,source:function(request,response){get_tags($('.main_image_search_form').data('fetch-tags-url'),request,response);}},allowSpaces:true});if($('.media_library.cms').size()>0){window.socket=new easyXDM.Socket({local:"/easyXDM.name.html",onMessage:function(message,origin){var json=JSON.parse(message);switch(json.message){case"edit_image":cms_edit_image(json.html);break;}}});$('.media_library .close_library').live('click',function(){socket.postMessage(JSON.stringify({message:"done"}));close_image_dialog();return false;});$('.image_dialog .insert_into_post, .image_dialog .update_post, .image_dialog .add_to_gallary').live('click',function(){var $button=$(this);var $dialog=$button.parents('.image_dialog');var image_attributes=$dialog.data('cms_image_attributes');var params={};var secure;if(image_attributes){secure=image_attributes.protocol=='https';$.extend(params,image_attributes);}else{secure=$dialog.find('.image_protocol').val()=='https';$.extend(params,{href:$dialog.find('.image_href').val(),title:$dialog.find('.image_title').val(),alt:$dialog.find('.image_alt').val(),align:$dialog.find('.image_align').val()});}
var image_url=image_trans_url({secure:secure});var full_image_url=(image_url.match(/^\//)?"http://dev.cloudinary.com:3002":"")+image_url;params.src=full_image_url;params.message=$button.data("command")||"insert_into_post";var actual_insert=function(delayed){if(!$dialog.find('.preview_panel').hasClass('empty')&&!$dialog.find('.preview_holder').hasClass('modified')){var image=$dialog.find('.preview_image');var size=get_media_size(image);params.width=size.width;params.height=size.height;}
if(delayed){removeSpinner('update_post');}
socket.postMessage(JSON.stringify(params));close_image_dialog();};if(!$dialog.find('.preview_panel').hasClass('empty')&&!$dialog.find('.preview_holder').hasClass('modified')){actual_insert(false);}else{setSpinner($button,'update_post',{hide:true,position:'center'});refresh_preview(function(){actual_insert(true);});}
return false;});}
$(document).on('cropped_original',function(event,data){var $dialog=$('.media_library .image_dialog');var info=$dialog.data('info');info.version=data.version;info.backup=true;info.pending=false;$dialog.data('info',info);var $thumb=$(".media_browse .media_item."+info.type+"[data-public-id='"+info.public_id+"']");info=$thumb.data('info');info.version=data.version;info.backup=true;info.pending=false;$thumb.data('info',info);reload_thumbnail($thumb);refresh_preview(callback);$dialog.addClass('backed_up');function callback(){var $image=$dialog.find('.preview_holder img.active');var image_url=$image.attr('src');update_preview_url(image_url,$dialog.data('info'));$image.closest(".image_dialog").find(".image_holder img").replaceWith(thumbnail_image(info));}});function update_select_transformation(){$('.select_transformation').filter(function(index,input){return $(input).val()==='';}).each(function(index,input){if(index===0){$(input).removeClass('closed');}else{$(input).addClass('closed');}});}
$('.select_transformation').live('change',function(){update_select_transformation();return true;});update_select_transformation();$('.show_create_form').live('click',function(){var $link_elem=$(this);setSpinner($link_elem,'show_create_form',{hide:true,position:'center'});$('.create_new_form_holder').load($(this).attr('href'),function(){update_select_transformation();removeSpinner('show_create_form');$link_elem.hide();});return false;});$('.create_new_form .submit_button').live('click',function(){var $link_elem=$(this);setSpinner($link_elem,'submit_new_form',{hide:true,position:'center'});$.ajax({url:$link_elem.parents('form').attr('action'),type:'POST',dataType:'html',data:$link_elem.parents('form').serialize(),success:function(content){removeSpinner('submit_new_form');var new_content=$(content);if($(new_content).find('.lightimage').size()>0){$(new_content).hide();$('.more_transformations_holder').append(new_content);$(new_content).find('.lightimage').lightBox();$(new_content).fadeIn(400);$('.create_new_form_holder').html('');$('.show_create_form').show();}else{$('.create_new_form_holder').html(new_content);update_select_transformation();}}});return false;});$('.transformation .delete').live('click',function(event){var confirmed=confirm("Are you sure you want to delete this transformation?");if(confirmed){var $delete_elem=$(this);setSpinner($delete_elem,'delete_trans',{hide:true,position:'center'});var $transformation=$delete_elem.parents('.transformation');$.ajax({url:$(delete_elem).attr('href'),type:"DELETE",success:function(){removeSpinner('delete_trans');$transformation.hide();},error:function(){removeSpinner('delete_trans');}});}
return false;});$('.transformation .strict a').live('click',function(event){var $link_elem=$(this);ajax_post_with_spinner($link_elem,function(result){$link_elem.parents('.strict').removeClass('allowed disallowed').addClass(result.status);});return false;});$('.transformation .download').live('click',function(){var $download_elem=$(this);var xhr=new XMLHttpRequest();xhr.open('GET',$download_elem.attr('href'));xhr.responseType='blob';xhr.onload=function(){if(this.status==200){saveAs(this.response,$download_elem.attr('file_name'))}};xhr.send();return false;});var cms_init=false
$(window).bind("message",function(e){if(e.originalEvent.data==="cms-mode"||(e.originalEvent.data.data&&e.originalEvent.data.type==="declare-cms-mode"&&!cms_init)){cms_init=true
var insert_selector=$(".insert_legacy");if(insert_selector.length){if(e.originalEvent.data.data&&e.originalEvent.data.data.insertCaption){insert_selector.text(e.originalEvent.data.data.insertCaption)}else if(e.originalEvent.data.data&&(e.originalEvent.data.data.insertCaption===null||e.originalEvent.data.data.insertCaption==="")){insert_selector.css("display","none");return}
insert_selector.live("click",function(){window.parent.postMessage({transformation:transformation_widget?transformation_widget.params():null,drilldownInsert:true,url:image_trans_url({secure:false}),secure_url:image_trans_url({secure:true})},"*");});insert_selector.css("display","block");}}});window.parent.postMessage({drilldownLoaded:true},"*");function sendTransformAnalyticsEvent(action,label){window.parent.postMessage({type:'ANALYTICS',payload:{eventCategory:'media library transform page',eventAction:action,eventLabel:label,},},'*');}
var ANALYTICS_ACTIONS={CLICK:'click',TAG:'tag',EDIT:'edit',NAVIGATE:'navigate'}});$(function(){var context={active:false,debug:false,$dialog:$('.media_library'),info:null,zoom:1,coordinates:{faces:[],custom:[]},coordinates_limit:{faces:-1,custom:1},mode:'faces',jcrop:null,crop_marks:null,image_min_height:240,state:null};if(window.location.href.indexOf('?debug=true')>0){context.debug=true;window.interactive_cropping=context;}
$(window).resize(update_dialog_size);$('a.toggle_crop_dialog_button').unbind('click').live('click',toggle_crop_dialog);$('.image_dialog .back_link').live('click',close_crop_dialog);$('.image_dialog .view_derivatives').live('click',function(){close_crop_dialog();return true;});function is_last_crop(){var limit=context.coordinates_limit[context.mode];if(context.coordinates[context.mode].length===(limit-1)){return true;}
return false;}
function coordinates_limit_reached(){var limit=context.coordinates_limit[context.mode];if(limit>-1&&context.coordinates[context.mode].length>=limit){return true;}
return false;}
function coordinates_dirty(){if(!context.info){return;}
var original_faces_arr=context.info.coordinates.faces||context.info.faces||[];var original_custom_arr=context.info.coordinates.custom||[];if(original_faces_arr.length!=context.coordinates.faces.length||original_custom_arr.length!=context.coordinates.custom.length){return true;}
var new_coords=context.coordinates.faces.map(function(item){return item.join('-');});original_faces_arr.forEach(function(original_item){if(new_coords.indexOf(original_item.join('-'))==-1){return true;}});new_coords=context.coordinates.custom.map(function(item){return item.join('-');});original_custom_arr.forEach(function(original_item){if(new_coords.indexOf(original_item.join('-'))==-1){return true;}});return false;}
function toggle_save_coordinates(enabled){if(arguments.length===0){enabled=coordinates_dirty();}
if(enabled){context.$dialog.find('.ic_footer_save').removeClass('disabled');}else{context.$dialog.find('.ic_footer_save').addClass('disabled');}}
function update_dialog_size(){if(context.active===true){if(context.state==='cropping'){end_jcrop_session();}
var $container=context.$dialog.find('.interactive_cropping');var $img_container=context.$dialog.find('.ic_image .image_container');var $img=$img_container.find('img');var $controls=context.$dialog.find('.ic_controls');var win_height=$(window).height();var container_top_pos=$container.offset().top;var evaluated_max_height=win_height-container_top_pos-context.dialog_controls_height-18;evaluated_max_height=Math.min($img[0].naturalHeight,evaluated_max_height);evaluated_max_height=Math.max(evaluated_max_height,context.image_min_height);$img_container.css('max-height',evaluated_max_height);$img.css('height',Math.min(evaluated_max_height,$img[0].naturalHeight));context.zoom=$img.width()/$img[0].naturalWidth;$controls.css('width',$img.width()).css('height',$img.height());if(context.info!==null){show_coordinates_bounding_boxes();}}}
function toggle_crop_dialog(e){e.preventDefault();if(context.active===false){context.active=true;context.state='idle';hide_media_info_controls_and_dialogs();load_crop_info(this);}else{close_crop_dialog();}}
function load_crop_info(sender){var info=context.$dialog.find('.image_dialog').data('info');var wrapper=context.$dialog.find('.interactive_cropping');var options={method:'GET',data:{'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type},error:function(jqXHR){wrapper.find(".error").html("failed");}};ajax_post_with_spinner($(sender),on_coordinates_loaded,options);}
function on_coordinates_loaded(data){data.coordinates=data.coordinates||{};context.info=data;context.coordinates.faces=data.faces||data.coordinates.faces;context.coordinates.faces=context.coordinates.faces?context.coordinates.faces.slice(0):[];context.coordinates.custom=(data.coordinates.custom)?data.coordinates.custom.slice(0):[];show_interactive_cropping_controls();var $img=context.$dialog.find('.ic_image img');context.zoom=$img.width()/$img[0].naturalWidth;show_coordinates_bounding_boxes(context.coordinates.faces,'faces');update_toolbar_state();}
function show_coordinates_bounding_boxes(arr,mode){if(mode){context.mode=mode;}
if(arr){context.coordinates[context.mode]=arr;}
context.$dialog.find('.ic_controls').empty();for(var i=0,l=context.coordinates[context.mode].length;i<l;i++){var coords=context.coordinates[context.mode][i];var left=coords[0]*context.zoom;var top=coords[1]*context.zoom;var width=coords[2]*context.zoom;var height=coords[3]*context.zoom;var $bb_delete=$('<span class="ic_icon ic_icon_x ic_bb_delete"/>').data('point',coords.join('-'));var $bbox=$('<div/>').addClass('ic_bounding_box').css('top',top).css('left',left).css('width',width).css('height',height).append($bb_delete);context.$dialog.find('.ic_controls').append($bbox);}
context.$dialog.find('.ic_bounding_box').on('mouseover',show_coordinate_delete_button);context.$dialog.find('.ic_bounding_box').on('mouseout',hide_coordinate_delete_button);context.$dialog.find('.ic_bb_delete').on('click',delete_coordinate);context.$dialog.find('.ic_bb_delete').on('mousedown',prevent_event_propogation);context.$dialog.find('.ic_bb_delete').on('mouseup',prevent_event_propogation);function hide_coordinate_delete_button(e){$(this).find('.ic_bb_delete').css('display','none');}
function show_coordinate_delete_button(e){$(this).find('.ic_bb_delete').css('display','block');}
function delete_coordinate(e){var $this=$(this);var point=$this.data('point');var i=0;while(i<context.coordinates[context.mode].length){var pid=context.coordinates[context.mode][i].join('-');if(pid===point){context.coordinates[context.mode].splice(i,1);}else{i++;}}
toggle_save_coordinates();show_coordinates_bounding_boxes();}
function prevent_event_propogation(e){e.preventDefault();e.stopPropagation();}}
function handle_keyboard_events(e){if(context.state==='cropping'){if(e.keyCode==27){end_jcrop_session();}}}
function show_interactive_cropping_controls(){context.$dialog.find(".interactive_cropping").show();var originalSrc=$('.view_image[href^="http"]').attr('href');var $img=$('<img/>');$img.attr('src',originalSrc);$img.on('load',update_dialog_size).addClass('crop_image');var $img_ctrl=$('<div/>').addClass('image_container').append($img);context.$dialog.find('.ic_image').html($img_ctrl);context.$dialog.find('.ic_save_notification').hide();context.$dialog.find('.ic_toolbar_add').unbind('click').click(start_jcrop_session);context.$dialog.find(".ic_toolbar_clear").unbind('click').click(delete_all_coordinates);context.$dialog.find(".ic_footer_crop").unbind('click').click(crop_by_coordinates);context.$dialog.find('.ic_toolbar_add_cancel').unbind('click').click(end_jcrop_session);context.$dialog.find('.ic_toolbar_add_save').unbind('click').click(add_coordinate_and_start_new_jcrop_session);context.$dialog.find(".ic_footer_save").unbind('click').click(persist_resource_coordinates);context.$dialog.find(".ic_close").unbind('click').click(close_crop_dialog);context.$dialog.find(".tabs .tab a").unbind('click').click(toggle_faces_or_custom_coordinates);context.$dialog.find(".ic_controls").unbind('mousedown').mousedown(mark_jcrop_start_position);context.$dialog.find(".ic_controls").unbind('mouseup').mouseup(open_jcrop_with_preset_coordinates);$(document).keyup(handle_keyboard_events);context.dialog_controls_height=context.$dialog.find('.interactive_cropping').height()-context.$dialog.find('.ic_image img').outerHeight(true);update_dialog_size();function mark_jcrop_start_position(e){var $this=$(this);$this.css('cursor','crosshair');var x=e.pageX-$this.offset().left;var y=e.pageY-$this.offset().top;context.crop_marks=[x,y,x,y];}
function open_jcrop_with_preset_coordinates(e){var $this=$(this);$this.css('cursor','auto');var w=e.pageX-$this.offset().left;var h=e.pageY-$this.offset().top;context.crop_marks[2]=w;context.crop_marks[3]=h;start_jcrop_session();}
function start_jcrop_session(){toggle_save_coordinates(true);context.$dialog.find('.ic_footer_crop').removeClass('disabled');if(coordinates_limit_reached()){log("can't add more coordinates since there is a hard limit of "+context.coordinates_limit[context.mode]+" coordinates of "+context.mode+" coordinates");return;}
var add_label=is_last_crop()?'OK':'Add Another';context.$dialog.find('.add_actions .ic_toolbar_add_save label').text(add_label);var selection=[];if(context.crop_marks===null){var $img=context.$dialog.find('.ic_image img');var width=$img.width();var height=$img.height();var area_select=0.3;var x=width*(1-area_select)/2;var y=height*(1-area_select)/2;var h=height-y;var w=width-x;selection=[x,y,w,h];}else{selection=context.crop_marks;context.crop_marks=null;}
context.$dialog.find('.image_dialog .action').css('display','none');context.$dialog.find('.add_actions').css('display','block');context.$dialog.find('.ic_controls').addClass('highlight_selections');context.state='cropping';context.$dialog.find('.ic_image img').Jcrop({setSelect:selection,onRelease:end_jcrop_session},function(){context.jcrop=this;});}
function crop_by_coordinates(){var $this=$(this);if($this.hasClass('disabled')){log('button disabled');return false;}
$("#dialog-confirm .confirm_content").html('Are you sure you want to crop the original image?');$("#dialog-confirm").dialog({resizable:false,width:350,height:160,modal:true,buttons:{"Crop Image":function(){$(this).dialog("close");callback();},"Cancel":function(){$(this).dialog("close");}}});function callback(){if(context.state==='cropping'){add_new_coordinate();end_jcrop_session();show_coordinates_bounding_boxes();}
var info=context.$dialog.find('.image_dialog').data('info');var faces=[];for(var i=0,l=context.coordinates.faces.length;i<l;i++){var v=round(context.coordinates.faces[i]);faces.push(v.join(','));}
var custom=[];for(i=0,l=context.coordinates.custom.length;i<l;i++){var v=round(context.coordinates.custom[i]);custom.push(v.join(','));}
var coordinates=context.mode=='faces'?faces:custom;var data={'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,'coordinates':coordinates.join('|'),'mode':context.mode};var options={method:'POST',data:data,error:function(jqXHR){context.$dialog.find(".error").html("failed");},url:Routes.console_media_library_crop_original_path()};ajax_post_with_spinner($this,on_image_cropped,options);}}
function delete_all_coordinates(){context.coordinates[context.mode]=[];toggle_save_coordinates();show_coordinates_bounding_boxes();}
function add_coordinate_and_start_new_jcrop_session(e){add_new_coordinate();end_jcrop_session();show_coordinates_bounding_boxes();setTimeout(start_jcrop_session,10);}
function round(coords_arr){var res=[];for(var i=0;i<coords_arr.length;i++){res[i]=Math.round(coords_arr[i]);}
return res;}
function persist_resource_coordinates(){var $this=$(this);if($this.hasClass('disabled')){log('button disabled');return false;}
if(context.state==='cropping'){add_new_coordinate();end_jcrop_session();show_coordinates_bounding_boxes();}
var info=context.$dialog.find('.image_dialog').data('info');var faces=[];for(var i=0,l=context.coordinates.faces.length;i<l;i++){var v=round(context.coordinates.faces[i]);faces.push(v.join(','));}
var custom=[];for(i=0,l=context.coordinates.custom.length;i<l;i++){var v=round(context.coordinates.custom[i]);custom.push(v.join(','));}
var wrapper=context.$dialog.find('.interactive_cropping');var data={'public_id':info.public_id,'type':info.type,'resource_type':info.resource_type,'faces':faces.join('|'),'custom':custom.join('|')};var options={method:'POST',data:data,error:function(jqXHR){wrapper.find(".error").html("failed");},url:Routes.console_media_library_update_coordinates_path()};ajax_post_with_spinner($(this),on_coordinates_saved,options);}
function toggle_faces_or_custom_coordinates(){if(!context.info){return;}
if(context.state==='cropping'){add_new_coordinate();end_jcrop_session();}
context.$dialog.find(".tabs .tab").removeClass('active');var $this=$(this);$this.parent().addClass('active');var type=$this.data('coordinates');var coordinates=context.coordinates[type];coordinates=coordinates||[];if(!Array.isArray(coordinates)){coordinates=[];}
show_coordinates_bounding_boxes(coordinates,type);update_toolbar_state();}
function image_url(){var dialog=context.$dialog;var dialogInfo=dialog.data();var info=dialog.find('.image_dialog').data('info');return $.cloudinary.url(info.public_id,{type:info.type,format:info.format,resource_type:info.resource_type,cloud_name:dialogInfo.cloudName,private_cdn:dialogInfo.privateCdn,cname:dialogInfo.cname,secure_distribution:dialogInfo.secureDistribution,version:info.version,trust_public_id:true});}}
function close_crop_dialog(){show_media_info_controls_and_dialogs();context.active=false;context.state='idle';hide_interactive_cropping_controls();}
function on_image_cropped(data){close_crop_dialog();$(document).trigger("cropped_original",data);}
function on_coordinates_saved(data){log('on_coordinates_saved',data);context.info.faces=context.info.coordinates.faces=data.faces;context.info.coordinates.custom=data.custom;toggle_save_coordinates();context.$dialog.find('.ic_save_notification').fadeIn().delay(5000).fadeOut();}
function add_new_coordinate(){if(context.jcrop){var point=context.jcrop.tellSelect();var point_arr=[point.x/context.zoom,point.y/context.zoom,point.w/context.zoom,point.h/context.zoom];context.coordinates[context.mode].push(point_arr);toggle_save_coordinates();}}
function end_jcrop_session(){toggle_save_coordinates();context.state='idle';context.$dialog.find('.image_dialog .action').css('display','inline-block');context.$dialog.find('.add_actions').css('display','none');context.$dialog.find('.ic_controls').removeClass('highlight_selections');var $img=context.$dialog.find('.ic_image .image_container .crop_image');$img.css('width','auto');if(context.jcrop){context.jcrop.destroy();context.jcrop=null;}
update_toolbar_state();}
function update_toolbar_state(){if(context.coordinates[context.mode]===null||context.coordinates[context.mode].length===0){context.$dialog.find('.ic_toolbar_clear').addClass('disabled');context.$dialog.find('.ic_footer_crop').addClass('disabled');}else{context.$dialog.find('.ic_toolbar_clear').removeClass('disabled');context.$dialog.find('.ic_footer_crop').removeClass('disabled');}
if(coordinates_limit_reached()){context.$dialog.find('.ic_toolbar_add').addClass('disabled');}else{context.$dialog.find('.ic_toolbar_add').removeClass('disabled');}}
function hide_interactive_cropping_controls(){end_jcrop_session();context.$dialog.find(".interactive_cropping").hide();$(document).unbind('keyup',handle_keyboard_events);}
function hide_media_info_controls_and_dialogs(){$(".preview_panel").hide();$(".left_panel").hide();$(".view_image_info_control").removeClass('active');var $dialog_content=context.$dialog.find('.dialog_content');$dialog_content.data('dimentions',{height:$dialog_content.css('height'),min_height:$dialog_content.css('min-height')});$dialog_content.css('height','0').css('min-height','0');$(document).trigger('change-display-context');}
function show_media_info_controls_and_dialogs(){var $dialog_content=context.$dialog.find('.dialog_content');var dimentions=$dialog_content.data('dimentions');if(dimentions){$dialog_content.css('height',dimentions.height).css('min-height',dimentions.min_height);}
var $preview_panel=$(".preview_panel");$preview_panel.show();$preview_panel.removeClass('sticky');$preview_panel.data('sticky',false);$(".left_panel").show();$(".view_image_info_control").addClass('active');}
function log(){if(context.debug===true){console.log.apply(console,arguments);}}});function draw_pie_charts(selector){$(selector).each(function(index,holder){$holder=$(holder);var chart_data=$holder.data('chart');var data=google.visualization.arrayToDataTable(chart_data);var pieSize=Math.min(360,Math.max(((chart_data.length-2)*33),200))
var options={legend:'none',width:pieSize,height:pieSize,colors:$holder.data('colors'),pieSliceText:'none',backgroundColor:'transparent',chartArea:{left:10,top:10,width:"90%",height:"90%"},tooltip:{text:'percentage'}};var chart=new google.visualization.PieChart(holder);chart.draw(data,options);});}
function draw_main_report_chart(chart_data){function pad(number,length){var str=''+number;while(str.length<length){str='0'+str;}
return str;}
var data=new google.visualization.DataTable();data.addColumn('date','Date');var columns=["requests","selected_requests","bandwidth","selected_bandwidth"];var column_names=["Requests","Requests","Bandwidth","Bandwidth"];$.each(columns,function(index,column){column=column.replace(/\b[a-z]/g,function(letter){return letter.toUpperCase();});data.addColumn('number',column_names[index]);});data.addRows(chart_data.dates.length);$.each(chart_data.dates,function(index,date){var date=new Date(Date.parse(date+" GMT"));var date_str=date.getUTCFullYear()+"-"+pad(date.getUTCMonth()+1,2)+"-"+pad(date.getUTCDate(),2);data.setValue(index,0,date);$.each(columns,function(columnIndex,column){if(chart_data.values[date_str]&&chart_data.values[date_str][column]){data.setValue(index,columnIndex+1,parseFloat(parseFloat(chart_data.values[date_str][column]).toFixed(1)));}});});var formatter=new google.visualization.DateFormat({formatType:'medium',timeZone:0});formatter.format(data,0);numberFormatter=new google.visualization.NumberFormat({fractionDigits:0});for(var i=1;i<=columns.length;i++){numberFormatter.format(data,i);}
var chart=new google.visualization.LineChart($('.main_chart_holder')[0]);chart.draw(data,{backgroundColor:'transparent',width:640,height:280,lineWidth:3,pointSize:6,legend:'none',vAxis:{minValue:0,textPosition:'none'},chartArea:{left:0,top:0,width:"95%",height:"90%"},interpolateNulls:true,series:[{color:'#2c913f',targetAxisIndex:1},{color:'#ca0d04',targetAxisIndex:1,pointSize:3,lineWidth:0},{color:'#2c5991',targetAxisIndex:0},{color:'#ca0d04',targetAxisIndex:0,pointSize:3,lineWidth:0}],hAxis:{viewWindow:{min:new Date(Date.parse(chart_data.dates[0]+" GMT")),max:new Date(Date.parse(chart_data.dates[chart_data.dates.length-1]+" GMT"))},slantedText:false,textStyle:{color:'#999999',fontSize:10}}});google.visualization.events.addListener(chart,'select',function(){var date=new Date(chart_data.dates[chart.getSelection()[0].row]);var day=("0"+date.getDate()).slice(-2);var month=("0"+(date.getMonth()+1)).slice(-2);;var year=date.getFullYear();$('.report_date').val(""+year+"-"+month+"-"+day);$('.report_form').submit();});}
$(function(){$('.reports .media_item .image_holder img').each(function(){if($(this).height()>0){$(this).parents('.image_holder').addClass('active');}});$('.reports .media_item .image_holder img').load(function(){$(this).parents('.image_holder').addClass('active');});$('.reports .media_item .image_holder img').error(function(){var $item=$(this).parents('.media_item');$item.find('.image_holder').append($('<div/>').addClass('failed_message').html("No thumbnail available"));$item.removeClass('in_progress').addClass('failed');$this.remove();});if($('select#report_date_select').size()>0){$('select#report_date_select').uniform({selectAutoWidth:true});}
var dateFormat="yy-mm-dd"
function getDate(element){var date;try{date=$.datepicker.parseDate(dateFormat,element.value);}catch(error){date=null;}
return date;}
var from=$(".report_date_picker_from");var to=$(".report_date_picker_to");var datepickerSettings={dateFormat:dateFormat,selectOtherMonths:true,showOtherMonths:true,minDate:"-90D",maxDate:0}
from.datepicker(datepickerSettings);to.datepicker(datepickerSettings);to.datepicker("option","minDate",from.val());to.datepicker("option","maxDate",to.data('latestPossibleDate'));var dateSpread=(Date.parse(to.val())-Date.parse(from.val()));$('.reports').on('click','a.more-link, .toggle a',function(e){e.preventDefault();e.stopPropagation();var $link=$(this);var $section=$link.parents('.report_section');ajax_post_with_spinner($link,function(result){var $content=$('<div/>').html(result);$('.media_item .image_holder img',$content).load(function(){$(this).parents('.image_holder').addClass('active');});$('.media_item .image_holder img',$content).error(function(){var $item=$(this).parents('.media_item');$item.find('.image_holder').append('<div class="failed_message">No thumbnail available</div>');$item.removeClass('in_progress').addClass('failed');$(this).remove();});$section.replaceWith($content);draw_pie_charts($content.find('.pie_holder'));},{method:'GET',data_type:'html',spinner:{width:16,height:16,img:'/images/spinner_blue.gif'}});return false;});$('.report_date_select').change(function(){var val=$(this).val();if(val==""){$('.report_date_picker_from').focus();return}
$('.report_date').val($(this).val());$('.report_form').submit();});$('.report_date_picker_from').change(function(){var toVal=new Date(Date.parse(from.val())+dateSpread);$('.report_date').val(from.val()+","+toVal.toISOString().slice(0,10));$('.report_form').submit();});$('.report_date_picker_to').change(function(){$('.report_date').val(from.val()+","+to.val());$('.report_form').submit();});});var CryptoJS=CryptoJS||function(h,r){var k={},l=k.lib={},n=function(){},f=l.Base={extend:function(a){n.prototype=this;var b=new n;a&&b.mixIn(a);b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)});b.init.prototype=b;b.$super=this;return b},create:function(){var a=this.extend();a.init.apply(a,arguments);return a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},j=l.WordArray=f.extend({init:function(a,b){a=this.words=a||[];this.sigBytes=b!=r?b:4*a.length},toString:function(a){return(a||s).stringify(this)},concat:function(a){var b=this.words,d=a.words,c=this.sigBytes;a=a.sigBytes;this.clamp();if(c%4)for(var e=0;e<a;e++)b[c+e>>>2]|=(d[e>>>2]>>>24-8*(e%4)&255)<<24-8*((c+e)%4);else if(65535<d.length)for(e=0;e<a;e+=4)b[c+e>>>2]=d[e>>>2];else b.push.apply(b,d);this.sigBytes+=a;return this},clamp:function(){var a=this.words,b=this.sigBytes;a[b>>>2]&=4294967295<<32-8*(b%4);a.length=h.ceil(b/4)},clone:function(){var a=f.clone.call(this);a.words=this.words.slice(0);return a},random:function(a){for(var b=[],d=0;d<a;d+=4)b.push(4294967296*h.random()|0);return new j.init(b,a)}}),m=k.enc={},s=m.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++){var e=b[c>>>2]>>>24-8*(c%4)&255;d.push((e>>>4).toString(16));d.push((e&15).toString(16))}return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c+=2)d[c>>>3]|=parseInt(a.substr(c,2),16)<<24-4*(c%8);return new j.init(d,b/2)}},p=m.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var d=[],c=0;c<a;c++)d.push(String.fromCharCode(b[c>>>2]>>>24-8*(c%4)&255));return d.join("")},parse:function(a){for(var b=a.length,d=[],c=0;c<b;c++)d[c>>>2]|=(a.charCodeAt(c)&255)<<24-8*(c%4);return new j.init(d,b)}},t=m.Utf8={stringify:function(a){try{return decodeURIComponent(escape(p.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data");}},parse:function(a){return p.parse(unescape(encodeURIComponent(a)))}},q=l.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new j.init;this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=t.parse(a));this._data.concat(a);this._nDataBytes+=a.sigBytes},_process:function(a){var b=this._data,d=b.words,c=b.sigBytes,e=this.blockSize,f=c/(4*e),f=a?h.ceil(f):h.max((f|0)-this._minBufferSize,0);a=f*e;c=h.min(4*a,c);if(a){for(var g=0;g<a;g+=e)this._doProcessBlock(d,g);g=d.splice(0,a);b.sigBytes-=c}return new j.init(g,c)},clone:function(){var a=f.clone.call(this);a._data=this._data.clone();return a},_minBufferSize:0});l.Hasher=q.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a);this.reset()},reset:function(){q.reset.call(this);this._doReset()},update:function(a){this._append(a);this._process();return this},finalize:function(a){a&&this._append(a);return this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,d){return(new a.init(d)).finalize(b)}},_createHmacHelper:function(a){return function(b,d){return(new u.HMAC.init(a,d)).finalize(b)}}});var u=k.algo={};return k}(Math);(function(){var h=CryptoJS,j=h.lib.WordArray;h.enc.Base64={stringify:function(b){var e=b.words,f=b.sigBytes,c=this._map;b.clamp();b=[];for(var a=0;a<f;a+=3)for(var d=(e[a>>>2]>>>24-8*(a%4)&255)<<16|(e[a+1>>>2]>>>24-8*((a+1)%4)&255)<<8|e[a+2>>>2]>>>24-8*((a+2)%4)&255,g=0;4>g&&a+0.75*g<f;g++)b.push(c.charAt(d>>>6*(3-g)&63));if(e=c.charAt(64))for(;b.length%4;)b.push(e);return b.join("")},parse:function(b){var e=b.length,f=this._map,c=f.charAt(64);c&&(c=b.indexOf(c),-1!=c&&(e=c));for(var c=[],a=0,d=0;d<e;d++)if(d%4){var g=f.indexOf(b.charAt(d-1))<<2*(d%4),h=f.indexOf(b.charAt(d))>>>6-2*(d%4);c[a>>>2]|=(g|h)<<24-8*(a%4);a++}return j.create(c,a)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}})();(function(){var k=CryptoJS,b=k.lib,m=b.WordArray,l=b.Hasher,d=[],b=k.algo.SHA1=l.extend({_doReset:function(){this._hash=new m.init([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(n,p){for(var a=this._hash.words,e=a[0],f=a[1],h=a[2],j=a[3],b=a[4],c=0;80>c;c++){if(16>c)d[c]=n[p+c]|0;else{var g=d[c-3]^d[c-8]^d[c-14]^d[c-16];d[c]=g<<1|g>>>31}g=(e<<5|e>>>27)+b+d[c];g=20>c?g+((f&h|~f&j)+1518500249):40>c?g+((f^h^j)+1859775393):60>c?g+((f&h|f&j|h&j)-1894007588):g+((f^h^j)-899497514);b=j;j=h;h=f<<30|f>>>2;f=e;e=g}a[0]=a[0]+e|0;a[1]=a[1]+f|0;a[2]=a[2]+h|0;a[3]=a[3]+j|0;a[4]=a[4]+b|0},_doFinalize:function(){var b=this._data,d=b.words,a=8*this._nDataBytes,e=8*b.sigBytes;d[e>>>5]|=128<<24-e%32;d[(e+64>>>9<<4)+14]=Math.floor(a/4294967296);d[(e+64>>>9<<4)+15]=a;b.sigBytes=4*d.length;this._process();return this._hash},clone:function(){var b=l.clone.call(this);b._hash=this._hash.clone();return b}});k.SHA1=l._createHelper(b);k.HmacSHA1=l._createHmacHelper(b)})();$(document).ready(function(){function select_framework_on_all_widgets(framework){$('.multi_code').each(function(index,multi_code){var framework_exists=$(multi_code).find('.framework_links a[data-framework='+framework+']').length>0;if(framework_exists){$(multi_code).find('.framework_sample, .framework_links a').removeClass('active');if(framework=='all'){$(multi_code).find('.framework_sample').addClass('active');$(multi_code).addClass('all_mode');}else{$(multi_code).find('.framework_sample[data-framework='+framework+']').addClass('active');$(multi_code).removeClass('all_mode');}
if(framework_exists){$(multi_code).find('.framework_links a[data-framework='+framework+']').addClass('active');}
$('#content').trigger('do_resize');}});}
$('.multi_code .framework_links a').click(function(e){e.preventDefault();var link=$(this);var framework=link.data('framework');var anchor=link.parents('.multi_code').find('.anchor');select_framework_on_all_widgets(framework);setTimeout(function(){anchor[0].scrollIntoView();},100);});$('body').on('click','.copy_container',function(e){var $this=$(this);var code=$this.next(".code_inner").children().text().trim();var hiddenInput=$('<textarea>').addClass("hidden-input").val(code).appendTo('body').select();var copyNotification=$this.find(".tooltiptext");document.execCommand('copy');$(hiddenInput).remove();copyNotification.text("Copied");});$('body').on('mouseleave','.copy_container',function(e){var $this=$(this);var copyNotification=$this.find(".tooltiptext");copyNotification.text("Copy to clipboard");});});async_load_scripts(['//cdn.statuspage.io/se-v2.js']);$(function(){var statusPageAttempts=0;function updateStatusIndicator(){if(!window.StatusPage){if(statusPageAttempts<60){setTimeout(updateStatusIndicator,1000);}
statusPageAttempts+=1;return;}
var sp=new StatusPage.page({page:'d8rszhl2bj7r'});sp.status({success:function(data){$('.service_status .color_description').text(data.status.description);$('.service_status .color_dot').removeClass('gray').addClass(data.status.indicator);}});}
updateStatusIndicator();});var saveAs=saveAs||function(e){"use strict";if(typeof e==="undefined"||typeof navigator!=="undefined"&&/MSIE [1-9]\./.test(navigator.userAgent)){return}var t=e.document,n=function(){return e.URL||e.webkitURL||e},r=t.createElementNS("http://www.w3.org/1999/xhtml","a"),o="download"in r,a=function(e){var t=new MouseEvent("click");e.dispatchEvent(t)},i=/constructor/i.test(e.HTMLElement)||e.safari,f=/CriOS\/[\d]+/.test(navigator.userAgent),u=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},s="application/octet-stream",d=1e3*40,c=function(e){var t=function(){if(typeof e==="string"){n().revokeObjectURL(e)}else{e.remove()}};setTimeout(t,d)},l=function(e,t,n){t=[].concat(t);var r=t.length;while(r--){var o=e["on"+t[r]];if(typeof o==="function"){try{o.call(e,n||e)}catch(a){u(a)}}}},p=function(e){if(/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)){return new Blob([String.fromCharCode(65279),e],{type:e.type})}return e},v=function(t,u,d){if(!d){t=p(t)}var v=this,w=t.type,m=w===s,y,h=function(){l(v,"writestart progress write writeend".split(" "))},S=function(){if((f||m&&i)&&e.FileReader){var r=new FileReader;r.onloadend=function(){var t=f?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");var n=e.open(t,"_blank");if(!n)e.location.href=t;t=undefined;v.readyState=v.DONE;h()};r.readAsDataURL(t);v.readyState=v.INIT;return}if(!y){y=n().createObjectURL(t)}if(m){e.location.href=y}else{var o=e.open(y,"_blank");if(!o){e.location.href=y}}v.readyState=v.DONE;h();c(y)};v.readyState=v.INIT;if(o){y=n().createObjectURL(t);setTimeout(function(){r.href=y;r.download=u;a(r);h();c(y);v.readyState=v.DONE});return}S()},w=v.prototype,m=function(e,t,n){return new v(e,t||e.name||"download",n)};if(typeof navigator!=="undefined"&&navigator.msSaveOrOpenBlob){return function(e,t,n){t=t||e.name||"download";if(!n){e=p(e)}return navigator.msSaveOrOpenBlob(e,t)}}w.abort=function(){};w.readyState=w.INIT=0;w.WRITING=1;w.DONE=2;w.error=w.onwritestart=w.onprogress=w.onwrite=w.onabort=w.onerror=w.onwriteend=null;return m}(typeof self!=="undefined"&&self||typeof window!=="undefined"&&window||this.content);if(typeof module!=="undefined"&&module.exports){module.exports.saveAs=saveAs}else if(typeof define!=="undefined"&&define!==null&&define.amd!==null){define("FileSaver.js",function(){return saveAs})}
function clipboardCopy(e){if(navigator.clipboard)return navigator.clipboard.writeText(e);var o=document.createElement("span");o.textContent=e,o.style.whiteSpace="pre";var t=document.createElement("iframe");t.sandbox="allow-same-origin",document.body.appendChild(t);var n=t.contentWindow;n.document.body.appendChild(o);var d=n.getSelection();d||(d=(n=window).getSelection(),document.body.appendChild(o));var a=n.document.createRange();d.removeAllRanges(),a.selectNode(o),d.addRange(a);var r=!1;try{r=n.document.execCommand("copy")}catch(e){}return d.removeAllRanges(),n.document.body.removeChild(o),document.body.removeChild(t),r?Promise.resolve():Promise.reject()};